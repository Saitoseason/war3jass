//W3x2lni Data: 2022-05-27 14:24:28.022
globals
    //globals from YDWETimerSystem:
constant boolean LIBRARY_YDWETimerSystem=true
constant integer YDWEEventDamageData___EVENT_DAMAGE_DATA_IS_ATTACK=2
integer YDWETimerSystem__CurrentTime
integer YDWETimerSystem__CurrentIndex
integer YDWETimerSystem__TaskListHead
integer YDWETimerSystem__TaskListIdleHead
integer YDWETimerSystem__TaskListIdleMax
integer array YDWETimerSystem__TaskListIdle
integer array YDWETimerSystem__TaskListNext
integer array YDWETimerSystem__TaskListTime
trigger array YDWETimerSystem__TaskListProc
trigger YDWETimerSystem__fnRemoveUnit
trigger YDWETimerSystem__fnDestroyTimer
trigger YDWETimerSystem__fnRemoveItem
trigger YDWETimerSystem__fnDestroyEffect
trigger YDWETimerSystem__fnDestroyLightning
trigger YDWETimerSystem__fnRunTrigger
timer YDWETimerSystem__Timer
integer YDWETimerSystem__TimerHandle
integer YDWETimerSystem__TimerSystem_RunIndex= 0
//endglobals from YDWETimerSystem
integer MoveMoreLevel_JumpTimer=3
unit bj_lastAbilityCastingUnit=null
trigger array YDWEBase__AbilityCastingOverEventQueue
integer array YDWEBase__AbilityCastingOverEventType
integer YDWEBase__AbilityCastingOverEventNumber= 0
//globals from YDWETriggerEvent:
constant boolean LIBRARY_YDWETriggerEvent=true
trigger yd_DamageEventTrigger= null
trigger array YDWETriggerEvent__DamageEventQueue
integer YDWETriggerEvent__DamageEventNumber= 0
	
item bj_lastMovedItemInItemSlot= null
	
trigger YDWETriggerEvent__MoveItemEventTrigger= null
trigger array YDWETriggerEvent__MoveItemEventQueue
integer YDWETriggerEvent__MoveItemEventNumber= 0
//endglobals from YDWETriggerEvent

real yd_MapMaxX= 0
real yd_MapMinX= 0
real yd_MapMaxY= 0
real yd_MapMinY= 0

hashtable YDHT
hashtable YDLOC

real Lx=1000
real Ly=1
boolean L1=false
boolean Lz=true
boolean L0=true
// 单位选中事件
trigger select_listen
unit pet_unit
// 黑洞引力事件
trigger gg_trg_S_DummyUnitDeath=null
trigger gg_trg_AnnihilateABlackHole=null
trigger gg_trg_AnnihilateABlackHole2=null
location udg_AnnihilateABlackHoleSPoint=null
unit udg_AnnihilateABlackHoleCasters=null
unit udg_AnnihilateABlackHoleCUnit=null
real udg_AnnihilateBlackHoleSLv=0
integer udg_AnnihilateABlackHoleDInteger=0
timer udg_AnnihilateABlackHoleTimer=null
group udg_AnnihilateABlackHoleGruop=null
location udg_AnnihilateABlackHoleEUPoint=null
location udg_AnnihilateABlackHoleP2P=null
group udg_AnnihilateABlackHoleGruop2=null
unit udg_TriggerUnit=null
location udg_TemporaryCreatedPoint=null
group udg_GetUnitsInRectAllGroup=null
// 熔铸事件
trigger rongzhu_trig=null
button array rongzhu_btn
integer array rongzhu_ability_pool
integer array rongzhu_extra_pool
// shifa
trigger trig_shifa =null
// 奇趣蛋事件
integer array pet_egg
// 攻击前摇事件
trigger attack_trig=null
// 生命流失事件

trigger trig_lifeLoss =null
group life_loss_group
location loss_loc
// 张角
trigger Q_death_trig
trigger taiPing_trig
// SOS事件
trigger sos_listen
boolean sos_cooldown=false
// 移动速度
trigger speed_listen
// 精卫事件
trigger jingwei_spell
// 宗预
trigger zongyu_trg_Q =null
trigger zongyu_trg_W =null
trigger zongyu_trg_X =null
unit udg_xx= null
integer zongyu_R_enchance =0
boolean array zongyu_found
real array zongyu_found_x
real array zongyu_found_y
// chendao
unit udg_hy= null
integer udg_CS= 0
boolean udg_lr= false
trigger gg_trg____________________001= null
trigger gg_trg_Xuyi1= null
trigger gg_trg_ll= null
trigger gg_trg_hy= null
trigger gg_trg_qr= null
trigger gg_trg_mm= null
trigger gg_trg_lllfff= null
trigger gg_trg_tiao= null
// 洛河图书
trigger trig_game_start
trigger found_trig
trigger zongyu_found_trig
trigger found_resgister
trigger map_listen
integer found_time =4
integer found_percent = 0
timer found_timer =null
integer array hight_level_item_pool
boolean daomu_find =false
// 心之钢
trigger XinZhiGangTrigger=null
// boolean xinZhiGangReady =false
item gangmen =null
sound gang =null
// 物品系统
trigger item_trig
// 新boss
unit she =null
trigger she_trg=null
unit spider =null
trigger spider_trg =null
// 新英雄
unit liurui=null
unit gongshuban=null
unit zhangjiao =null
unit jingwei =null
unit zhuGeGuo=null
unit zhuiSuiZhe=null
unit sunQian=null
unit juFu=null
unit gaoxiang=null
unit chendao =null
unit zongyu=null
unit yanyu =null
unit maliang =null
trigger beAttacked =null
// 眩晕效果
trigger StunTrigger = null
unit StunnedUnit = null
real StunDuration = 2.0
group StunGroup =null
// 仙人给物品
boolean givePaper=false
boolean giveShield=false
boolean giveGlove=false
boolean giveTongQian=false
boolean giveGang=false
boolean giveTianshu =false
// 新模式
button choosedButton=null
button potholingButton=null
button doubleHeroButton=null
integer array doubleHeroGroup
// 粮草事件
integer provision=0
unit provisionUnit=null
boolean isSpeed=false
// 全体加属性事件
integer playerStart=0
integer playerEnd=0
group array userUnitGroup
trigger attributeTrigger=null
// 赌博事件
integer gambleNumber=0
trigger gambleTrigger=null
unit gambleUnit=null
integer array gamblePlayerGroup
boolean isJWawake=false
integer awakeStr=0
integer awakeAgi=0
integer awakeInt=0
integer awakeTime=0
// 狩猎任务
integer huntingTime=0
boolean huntingStart=false
boolean huntingFinish=false
integer archeryTime=0
boolean archeryFinish=false
integer imprinting=0
unit huntingUnit=null
boolean array huntingBoss

integer Vl=$1E13380
integer Vk=$1E28500
integer Vc=28800
integer Vb=$5685C180
integer Vs=4
integer array VX
integer VZ=0
string array VY
hashtable B=InitHashtable()
boolexpr FM=null
group Rz=null
string R4=null
boolean FP=false
boolean Ru=false
boolean Rv=false
boolean Rr=false
boolean FQ=false
boolean FO=false
unit Rs=null
unit Rt=null
unit R5=null
unit Rw=null
integer SB=0
integer R6=0
trigger array R7
integer R8=0
trigger array R9
integer R2=0
real array FR
hashtable FS
hashtable FT
constant integer K7=117
unit Uq=null
unit Un=null
itempool NH=null
attacktype Us=ATTACK_TYPE_NORMAL
damagetype Ut=DAMAGE_TYPE_NORMAL
weapontype Uu=WEAPON_TYPE_WHOKNOWS
real FW=0
real FU=0
real FX=0
real FV=0
string array FY
trigger array Ur
integer array Up
integer Uo=0
constant integer JI=2
item M1
force J3
group J0
trigger L4=null
constant integer L8=600
constant boolean L7=true
trigger MB=null
trigger array L5
integer L3=0
region NR
integer array LH
button array LG
group C=CreateGroup()
location D=Location(0.,0.)
hashtable Ia
integer array UT
integer La=0
boolean Ls=false
unit array Lb
unit array Lo
real array Lp
real array Lq
integer array Lg
integer array Ld
integer array Le
boolean array Lf
timer array Lc
group LW=null
force E=CreateForce()
region LZ=null
trigger LX=null
trigger LY=null
real LR=1200
real LS=1.
boolean LT=true
boolean LU=false
boolean LV=true
string Km="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
string IV=""
integer IX=0
integer IW=0
integer IY=0
string array IZ
integer array Fa
integer array Fb
integer array Fc
integer Fd=0
boolean array Fe
integer Ff=0
item array VL
dialog Fg=null
button Sd=null
integer Fh=0
integer array Fi
integer array Fj
unit Q8=null
unit Q3=null
integer array LJ
location array NT
integer array N7
integer array OZ
unit array ON
timer Fk=null
integer array M9
location array S3
location array Mt
location array Jd
unit array P3
integer array NU
location array Od
unit array QF
texttag array Jc
unit OV=null
real Fl=0
unit MU=null
player array MT
location array QU
integer Fm=0
integer array Fn
location array Qc
integer Fo=0
unit array Ib
unit RK=null
location array RL
unit RJ=null
unit RD=null
unit RE=null
real Fp=0
location RG=null
unit QQ=null
unit QR=null
unit Pd=null
location Pf=null
group Fq=null
integer Fr=0
group array Fs
unit array Ta
unit Pi=null
group Ft=null
group Fu=null
unit T2=null
unit Tg=null
timer Fv=null
unit Nc=null
integer Fw=0
multiboard KS=null
integer Fx=0
real Fy=0
real Fz=0
unit P5=null
real F0=0
real F1=0
unit array P6
timer F2=null
real F3=0
real F4=0
real F5=0
real F6=0
real F7=0
unit Qo=null
unit Qp=null
location array Qq
real F8=0
real F9=0
unit array PU
location array PV
real array GB
location Qu=null
integer GC=0
location Qv=null
location Qw=null
location Qx=null
location Qy=null
location array Qz
unit array Tm
real GD=0
location Tv=null
location array Tu
lightning array Ty
item array NL
group GE=null
destructable array Tz
string array GF
unit QV=null
unit Q4=null
unit LE=null
location VN=null
integer array GG
integer GH=0
integer array GI
group GJ=null
integer array GK
integer GL=0
integer GM=0
integer GN=0
real GO=0
unit Qg=null
location Qh=null
unit J8=null
location Qi=null
location Qj=null
real GP=0
real GQ=0
real GR=0
integer GS=0
unit KE=null
timer GT=null
timer GU=null
integer GV=0
timer GW=null
timer GX=null
integer GY=0
timer GZ=null
timer Ga=null
dialog Gb=null
button Me=null
button Mf=null
integer Gc=0
player MZ=null
player Mb=null
boolean array Gd
unit Ma=null
integer Ge=0
timer Gf=null
timerdialog Mc=null
unit Pl=null
location Pm=null
location Pn=null
real Gg=0
timer Gh=null
location Pp=null
timer Gi=null
integer Gj=0
real array Gk
integer array Gl
integer array Gm
boolean array Gn
boolean array Go
integer array Gp
integer Gq=0
string array Gr
attacktype array I3
damagetype array I4
boolean array Gs
timer array Gt
integer array Gu
integer array Gv
integer array Gw
real array Gx
real array Gy
real array Gz
real array G0
boolean G1=false
unit array Pv
unit array Pw
group G2=null
group G3=null
group G4=null
integer G5=0
group G6=null
unit Ox=null
timer G7=null
timer G8=null
unit Ol=null
location Om=null
item array KM
real array G9
real array HB
unit JJ=null
real array HC
integer array HD
integer HE=0
integer HF=0
boolean array HG
boolean array HH
integer array HI
integer array HJ
integer array HK
real array HL
integer array HM
unit array MX
group array HN
real array HO
unit array P1
real HP=0
force HQ=null
integer array HR
boolean array HS
force HT=null
integer HU=0
integer HV=0
integer HW=0
integer HX=0
integer HY=0
integer HZ=0
integer Ha=0
integer array Hb
dialog Hc=null
button Mn=null
button Mo=null
timer Hd=null
integer array He
integer array Hf
integer array KU
string array Hg
unit QZ=null
unit Qa=null
unit Qd=null
playercolor array Qe
group Hh=null
integer array Hi
real array Hj
real array Hk
integer array Hl
boolean array Hm
integer array Hn
boolean array Ho
integer Hp=0
integer array Hq
string array Hr
boolean array Hs
timerdialog OX=null
group Ht=null
boolean array Hu
real Hv=0
boolean array Hw
group array Hx
unit array KN
unit array SE
timer Hy=null
real Hz=0
real H0=0
boolean H1=false
dialog H2=null
button array SP
boolean H3=false
timer H4=null
integer array H5
string array H6
integer H7=0
integer array Mk
boolean array H8
unit Sy=null
itempool NG=null
itempool SZ=null
itempool NF=null
integer array H9
string array IB
string array IC
integer array ID
integer array IE
boolean array IF
boolean array IG
real array IH
real array II
player array MW
group IJ=null
boolean array IK
item SY=null
unit RX=null
integer IL=0
dialog array IM
boolean IN=false
boolean IO=false
dialog IP=null
real IQ=0
real IR=0
integer IS=0
rect W=null
rect X=null
rect Z=null
rect a=null
rect b=null
rect c=null
rect d=null
rect e=null
rect f=null
rect g=null
rect h=null
rect i=null
rect j=null
rect k=null
rect l=null
rect m=null
rect n=null
rect o=null
rect p=null
rect q=null
rect r=null
rect s=null
rect t=null
rect u=null
rect v=null
rect w=null
rect x=null
rect y=null
rect z=null
rect BB=null
rect BC=null
rect BD=null
rect BE=null
rect BF=null
rect BG=null
rect BH=null
rect BI=null
rect BJ=null
rect BK=null
rect BL=null
rect BM=null
rect BN=null
rect BO=null
rect BP=null
rect BQ=null
rect BR=null
rect BS=null
rect BT=null
rect BU=null
rect BV=null
rect BW=null
rect BX=null
rect BY=null
rect BZ=null
rect Ba=null
rect Bb=null
rect Bc=null
rect Bd=null
rect Be=null
rect Bf=null
rect Bg=null
rect Bh=null
rect Bi=null
rect Bj=null
rect Bk=null
rect Bl=null
rect Bm=null
rect Bn=null
rect Bo=null
rect Bp=null
rect Bq=null
rect Br=null
rect Bs=null
rect Bt=null
rect Bu=null
rect Bv=null
rect Bw=null
rect Bx=null
rect By=null
rect Bz=null
rect B0=null
rect B1=null
rect B2=null
rect B3=null
rect B4=null
rect B5=null
rect B6=null
rect B7=null
rect B8=null
camerasetup B9=null
camerasetup CB=null
sound O=null
string P
sound Q=null
sound R=null
sound S=null
sound T=null
sound U=null
sound V=null
trigger IT=null
trigger IU=null
trigger VM=null
trigger K1=null
trigger KD=null
trigger KF=null
trigger KI=null
trigger OE=null
trigger Ic=null
trigger KG=null
trigger KH=null
trigger KV=null
trigger Jm=null
trigger Kx=null
trigger Ky=null
trigger If=null
trigger VI=null
trigger Jl=null
trigger LP=null
trigger L2=null
trigger Jj=null
trigger Jn=null
trigger Jr=null
trigger MF=null
trigger MJ=null
trigger MN=null
trigger K0=null
trigger J7=null
trigger K2=null
trigger MR=null
trigger J4=null
trigger J5=null
trigger MS=null
trigger J6=null
trigger MV=null
trigger Js=null
trigger MY=null
trigger Md=null
trigger Mg=null
trigger Mh=null
trigger Jt=null
trigger Mi=null
trigger Mj=null
trigger Ml=null
trigger Mm=null
trigger Mp=null
trigger Mq=null
trigger Mr=null
trigger Ms=null
trigger Mu=null
trigger Mv=null
trigger Mw=null
trigger Mx=null
trigger My=null
trigger VP=null
trigger M0=null
trigger M2=null
trigger M3=null
trigger M4=null
trigger M5=null
trigger M6=null
trigger KR=null
trigger M7=null
trigger M8=null
trigger NB=null
trigger NC=null
trigger ND=null
trigger NE=null
trigger Ju=null
trigger VJ=null
trigger NI=null
trigger NJ=null
trigger NK=null
trigger NM=null
trigger NN=null
trigger NO=null
trigger NP=null
trigger NS=null
trigger NV=null
trigger NW=null
trigger NX=null
trigger NY=null
trigger NZ=null
trigger Na=null
trigger Nb=null
trigger Nd=null
trigger KP=null
trigger KQ=null
trigger Ne=null
trigger Nf=null
trigger Ng=null
trigger Nh=null
trigger Nm=null
trigger Nn=null
trigger No=null
trigger Np=null
trigger Nq=null
trigger Nr=null
trigger Ns=null
trigger Nt=null
trigger Nu=null
trigger Nv=null
trigger Nw=null
trigger Nx=null
trigger Ny=null
trigger Nz=null
trigger N0=null
trigger N2=null
trigger N6=null
trigger N3=null
trigger N9=null
trigger OB=null
trigger OC=null
trigger OD=null
trigger OH=null
trigger OI=null
trigger OG=null
trigger OF=null
trigger OM=null
trigger OO=null
trigger OP=null
trigger OQ=null
trigger OR=null
trigger OS=null
trigger OT=null
trigger OU=null
trigger OW=null
trigger Ni=null
trigger OY=null
trigger Oa=null
trigger Ob=null
trigger Oc=null
trigger Nj=null
trigger Nl=null
trigger Oh=null
trigger Oi=null
trigger Oj=null
trigger Ok=null
trigger Nk=null
trigger OJ=null
trigger On=null
trigger Oo=null
trigger Sa=null
trigger Op=null
trigger Os=null
trigger Ot=null
trigger Oq=null
trigger Ou=null
trigger Ow=null
trigger Ov=null
trigger Oy=null
trigger Oz=null
trigger O0=null
trigger O1=null
trigger O2=null
trigger O3=null
trigger O4=null
trigger O5=null
trigger O6=null
trigger O7=null
trigger O9=null
trigger PB=null
trigger PC=null
trigger PD=null
trigger PE=null
trigger PF=null
trigger PG=null
trigger PH=null
trigger PI=null
trigger PJ=null
trigger PK=null
trigger PL=null
trigger PM=null
trigger VT=null
trigger VW=null
trigger VS=null
trigger PO=null
trigger PN=null
trigger PP=null
trigger PS=null
trigger K5=null
trigger PT=null
trigger PW=null
trigger PZ=null
trigger Pb=null
trigger VQ=null
trigger Pc=null
trigger Pe=null
trigger Pg=null
trigger Ph=null
trigger Pj=null
trigger K3=null
trigger Pk=null
trigger Po=null
trigger Pq=null
trigger P2=null
trigger P4=null
trigger P7=null
trigger QB=null
trigger QC=null
trigger QE=null
trigger QG=null
trigger QP=null
trigger QS=null
trigger QT=null
trigger QW=null
trigger QX=null
trigger Qb=null
trigger Qf=null
trigger Qk=null
trigger Ql=null
trigger Qm=null
trigger Qn=null
trigger Qr=null
trigger Qs=null
trigger Q0=null
trigger Q1=null
trigger VR=null
trigger Q2=null
trigger Q6=null
trigger Q5=null
trigger Q7=null
trigger RB=null
trigger Q9=null
trigger RC=null
trigger RF=null
trigger RH=null
trigger RI=null
trigger RM=null
trigger RN=null
trigger RO=null
trigger QD=null
trigger RY=null
trigger RZ=null
trigger Ra=null
trigger Rb=null
trigger SD=null
trigger SF=null
trigger SG=null
trigger LB=null
trigger K9=null
trigger T3=null
trigger SH=null
trigger SI=null
trigger LC=null
trigger K8=null
trigger T1=null
trigger T4=null
trigger K4=null
trigger Kz=null
trigger SK=null
trigger Ie=null
trigger Jp=null
trigger Jq=null
trigger SO=null
trigger Jo=null
trigger Jy=null
trigger J9=null
trigger SQ=null
trigger SR=null
trigger Sc=null
trigger SS=null
trigger SV=null
trigger Sh=null
trigger ST=null
trigger Si=null
trigger Sj=null
trigger Sk=null
trigger Sb=null
trigger Sw=null
trigger Sx=null
trigger N8=null
trigger S0=null
trigger S1=null
trigger S2=null
trigger S4=null
trigger S5=null
trigger S6=null
trigger S7=null
trigger S8=null
trigger S9=null
trigger TB=null
trigger TC=null
trigger MH=null
trigger MI=null
trigger TD=null
trigger TE=null
trigger TF=null
trigger TG=null
trigger TH=null
trigger TI=null
trigger TJ=null
trigger TK=null
trigger TL=null
trigger TM=null
trigger TN=null
trigger Mz=null
trigger TO=null
trigger TP=null
trigger N4=null
trigger TQ=null
trigger TR=null
trigger TS=null
trigger TT=null
trigger N1=null
trigger TV=null
trigger SW=null
trigger TW=null
trigger TX=null
trigger TY=null
trigger SX=null
trigger Tb=null
trigger Tc=null
trigger TU=null
trigger Td=null
trigger Te=null
trigger Tf=null
trigger N5=null
trigger Th=null
trigger SU=null
trigger Ti=null
trigger Sz=null
trigger Tj=null
trigger Tk=null
trigger Tl=null
trigger Tn=null
trigger To=null
trigger Tp=null
trigger Tq=null
trigger Tr=null
trigger Ts=null
trigger Tt=null
trigger Tw=null
trigger Tx=null
trigger T0=null
trigger Id=null
unit Dm=null
unit Dj=null
unit CK=null
unit FL=null
unit FK=null
unit FJ=null
unit Cq=null
unit FI=null
unit C8=null
unit FF=null
unit Cu=null
unit CF=null
unit Cy=null
unit Cp=null
unit Ct=null
unit FE=null
unit CL=null
unit FD=null
unit FH=null
unit FG=null
unit Cl=null
unit FC=null
unit FB=null
unit E9=null
unit E8=null
unit E7=null
unit CQ=null
unit E6=null
unit E5=null
unit E4=null
unit E3=null
unit E2=null
unit EV=null
unit C4=null
unit Ez=null
unit Cs=null
unit C3=null
unit Cr=null
unit Cz=null
unit C2=null
unit C1=null
unit C0=null
unit Cw=null
unit Cx=null
unit C5=null
unit D5=null
unit Dz=null
unit D3=null
unit D4=null
unit D6=null
unit EW=null
unit D7=null
unit D8=null
unit D9=null
unit EB=null
unit EC=null
unit ED=null
unit EX=null
unit Cf=null
unit D2=null
unit Eb=null
unit EJ=null
unit DQ=null
unit EF=null
unit Eo=null
unit EL=null
unit EE=null
unit EG=null
unit EK=null
unit EH=null
unit EY=null
unit EZ=null
unit EI=null
unit Ea=null
unit Co=null
unit DD=null
unit ET=null
unit Dl=null
unit ES=null
unit Cd=null
unit CN=null
unit Eg=null
unit Db=null
unit Ca=null
unit Cv=null
unit DE=null
unit DG=null
unit CM=null
unit Cc=null
unit DF=null
unit Ed=null
unit DS=null
unit Ce=null
unit CR=null
unit CG=null
unit DH=null
unit CZ=null
unit CY=null
unit Cb=null
unit Ej=null
unit Ef=null
unit EM=null
unit DL=null
unit CH=null
unit D1=null
unit E1=null
unit E0=null
unit DR=null
unit DP=null
unit DY=null
unit Ei=null
unit EP=null
unit Eh=null
unit EO=null
unit EN=null
unit DK=null
unit Ck=null
unit CJ=null
unit DM=null
unit DT=null
unit Di=null
unit DN=null
unit DI=null
unit CI=null
unit CX=null
unit D0=null
unit Ee=null
unit EU=null
unit El=null
unit Dw=null
unit EQ=null
unit Dh=null
unit ER=null
unit Ep=null
unit Eq=null
unit Ek=null
unit CD=null
unit Du=null
unit C7=null
unit DU=null
unit DW=null
unit Dc=null
unit Dd=null
unit De=null
unit Df=null
unit Dg=null
unit C9=null
unit Cj=null
unit Ci=null
unit Ch=null
unit Cg=null
unit Dx=null
unit DV=null
unit Dv=null
unit Dy=null
unit CO=null
unit CP=null
unit C6=null
unit DJ=null
unit DO=null
unit Do=null
unit Dp=null
unit Ec=null
unit Dq=null
unit Dr=null
unit Ds=null
unit Dt=null
unit Cn=null
unit DC=null
unit DB=null
unit Dn=null
unit DX=null
unit DZ=null
unit Ey=null
unit Em=null
unit En=null
unit Er=null
unit Es=null
unit Et=null
unit Eu=null
unit Ev=null
unit Ew=null
unit Ex=null
unit Da=null
unit Cm=null
unit Dk=null
real QK=13750.
real QJ=-14820.
real QM=-11250.
real QN=17350.
constant attacktype F=ConvertAttackType(0)
constant attacktype G=ConvertAttackType(1)
constant attacktype H=ConvertAttackType(2)
constant attacktype I=ConvertAttackType(3)
constant attacktype J=ConvertAttackType(4)
constant attacktype K=ConvertAttackType(5)
constant attacktype L=ConvertAttackType(6)
constant damagetype M=ConvertDamageType(5)
constant damagetype N=ConvertDamageType(26)
player hbzyplayer
force udg_KQTwjz=null
force udg_SZBwjz=null
fogmodifier array udg_QTXZQ
group array udg_SZBdwz
trigger gg_trg_XHCDXzb2=null
trigger gg_trg_XHCDXzb1=null
trigger gg_trg_XHCDXzb11=null
timer jgjsq=null
timer jgjsq2=null
timerdialog jgjsqck=null
location DZYXd=null
fogmodifier array udg_QtXzq1
force udg_Qtwjz1=null
force udg_Wucdwjz1=null
timer array udg_WucdJsq1
unit array udg_Wucddw1
force udg_Zhjikqwjz1=null
dialog array udg_CJZBdhk1
dialog array udg_CJZBdhk2
dialog array udg_CJZBdhk3
button array udg_CJZBdhkNn1
force udg_YXWYwjz1=null
force udg_BSMSwjz1=null
integer array jzzs
location array udg_Psdian1
player array udg_CJZBwj
location array udg_YXWYdian1
string udg_JQzfc
string udg_SLzfc
unit array udg_JSXdw
real array udg_YXWYshss
integer array udg_zdjsx
group array udg_DWWDdwz
real array udg_SGjsxss
group array udg_YDSDdwz
group array udg_HuiXuedwz
trigger gg_trg_HKYJ1=null
trigger gg_trg_HKYJ2=null
trigger gg_trg_HKYJ3=null
trigger gg_trg_HKYJ4=null
trigger gg_trg_HKYJ5=null
trigger gg_trg_HKYJ6=null
trigger gg_trg_HKYJ7=null
trigger gg_trg_HKYJ8=null
trigger gg_trg_HKYJ9=null
trigger gg_trg_HKYJ11=null
trigger gg_trg_HKYJ12=null
trigger gg_trg_HKYJ13=null
trigger gg_trg_HKYJ14=null
trigger gg_trg_HKYJ15=null
trigger gg_trg_HKYJ16=null
trigger gg_trg_HKYJ17=null
trigger gg_trg_HKYJ18=null
trigger gg_trg_HKYJ19=null
trigger gg_trg_HKYJ20=null
trigger gg_trg_HKYJ21=null
trigger gg_trg_HKYJ22=null
trigger gg_trg_HKYJ23=null
trigger gg_trg_HKYJ24=null
trigger gg_trg_QKJB=null
real array pfzy_wpX
real array pfzy_wpY
integer array zsx1
integer array ljzc_id
integer array ljzc_it
integer ljzc_ia=0
integer ljzc_ib=0
integer ljzc_ic=0
integer ljzc_ida=0
integer ljzc_idb=0
integer ljzc_idc=0
integer ljzc_n=0
timer ljzc_tm=null
timer ljzc_tmb=null
timer ljzc_tmc=null
boolean yls_ok=false
integer Fly_sa_n=0
integer Fly_all_list_n=0
integer Fly_saII=0
integer Fly_saIII=0
string array Fly_all_name
string array Fly_part_name
integer Fly_sc_n=0
integer Fly_part_n=0
integer array Fly_part_No
integer Fly_part_list_n=0
integer Fly_scII=0
integer Fly_scIII=0
hashtable fy_ht=InitHashtable()
string mimazf1 = "xiao"
string mimazf2 = "bai"
group array udg_kzwjdwz
group array udg_zdjsxdwz
integer array kzdwzs
integer array kzdwzszs
force udg_cdwjz1=null
integer array zdzs1
integer array zdzs2
integer array zdzs3
integer array zdzs4
integer udg_swpzs=0
string array udg_swpzfc
string udg_swpzfcpd
integer udg_swpwplx=0
integer array udg_WJswpzs1
trigger gg_trg_XHCDXSWP1=null
trigger gg_trg_XHCDXSWP2=null
item udg_swpwp=null
item array fzdwwp
force udg_zdjbwjz1=null
force udg_zdmcwjz1=null
force udg_zdqrkwjz1=null
force udg_zdhfwjz1=null
force udg_sdjsxwjz1=null
force udg_sxgjwjz1=null
force udg_zdjsxwjz1=null
unit dwdw=null
player wjwj=null
integer array zs1
integer array zs2
integer array zs3
integer array zs4
timer array jzjsq
unit array jzdw
unit array fzdw
integer array PMAzs
integer array udg_STzs
integer array udg_TSzs
integer array udg_STwjzs
integer array udg_STsjzs
unit array udg_STdw
integer array kscbzs
location array kscbzsd
unit array udg_kscbdw1
integer udg_STXHZS1=0
integer udg_STXHZS2=0
location udg_STd=null
location array udg_TMd
group udg_STdwz2=null
group udg_STdwz=null
group array udg_TMdwz
integer array udg_TMzs
integer array udg_TMshzs
group array udg_HLdwz
real array udg_TSshss
integer dwzs=0
dialog array udg_LBcd
button array udg_LBan
item array LBwp
integer array LBwpzs
integer array JZSYzs
integer array sjzs1
integer array sjzs2
integer array sjzs3
integer array sjzs4
integer array sjzs5
integer array sjzs6
integer array tglbzs
integer array tglbzs2
integer array tglbzs3
string bj_AllString2=".................................!.#$%&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................"

endglobals
native DzGetMouseTerrainX takes nothing returns real
native DzGetMouseTerrainY takes nothing returns real
native DzTriggerRegisterKeyEvent takes trigger trig,integer key,integer status,boolean sync,string func returns nothing
native DzGetTriggerKey takes nothing returns integer
native DzGetTriggerKeyPlayer takes nothing returns player
native DzSetUnitModel takes unit whichUnit,string path returns nothing
native DzTriggerRegisterSyncData takes trigger trig,string prefix,boolean server returns nothing
native DzSyncData takes string prefix,string data returns nothing
native DzGetTriggerSyncData takes nothing returns string
native EXGetUnitAbility takes unit u,integer abilcode returns ability
native EXGetAbilityState takes ability abil,integer state_type returns real
native EXSetAbilityState takes ability abil,integer state_type,real value returns boolean
native EXSetAbilityDataReal takes ability abil,integer level,integer data_type,real value returns boolean
native EXSetAbilityDataInteger takes ability abil,integer level,integer data_type,integer value returns boolean
native EXSetAbilityDataString takes ability abil,integer level,integer data_type,string value returns boolean
native EXSetAbilityAEmeDataA takes ability abil,integer unitid returns boolean
native EXGetEventDamageData takes integer edd_type returns integer
native EXSetEventDamage takes real amount returns boolean
native EXSetUnitFacing takes unit u,real angle returns nothing
native EXPauseUnit takes unit u,boolean flag returns nothing
native EXSetUnitCollisionType takes boolean enable,unit u,integer t returns nothing
native EXSetUnitMoveType takes unit u,integer t returns nothing
//给物品添加技能 
function YDWEItemAbilityStorage takes integer itid,integer ab returns nothing
    local integer index= (LoadInteger(YDHT, StringHash((I2S(itid) )), StringHash(( "AbilityStorageIndex")))) // INLINED!!
    set index=index + 1
    call SaveInteger(YDHT, StringHash((I2S(itid) )), StringHash(( "AbilityStorage" + I2S(index) )), ( ab)) // INLINED!!
    call SaveInteger(YDHT, StringHash((I2S(itid) )), StringHash(( "AbilityStorageIndex" )), ( index)) // INLINED!!
endfunction
// 移除单位的物品技能
function removeItemAbilityStorage takes integer itid, integer ab, unit Iv returns nothing
    local string loc_str = (I2S(itid) + I2S(GetUnitTypeId(Iv)))
    local integer index = (LoadInteger(YDHT, StringHash(loc_str), StringHash(("AbilityStorageIndex")))) // INLINED!!
    set index=index + 1
    call SaveInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorage" + I2S(index) )), 0) // INLINED!!
    call SaveInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorageIndex" )), 0) // INLINED!!
    call SaveInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorageLevel" )), 0) // INLINED!!
endfunction
// 给单位的物品绑定技能等级
function setItemAbilityStorage takes integer itid, integer ab, unit Iv,integer ab_level returns nothing
    local string loc_str = (I2S(itid) + I2S(GetUnitTypeId(Iv)))
    local integer index = (LoadInteger(YDHT, StringHash(loc_str), StringHash(("AbilityStorageIndex")))) // INLINED!!
    set index=index + 1
    call SaveInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorage" + I2S(index) )), ( ab)) // INLINED!!
    call SaveInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorageIndex" )), ( index)) // INLINED!!
    call SaveInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorageLevel" )), ( ab_level)) // INLINED!!
endfunction
// 
function YDWEItemAbilitySystemByAbility_CON takes nothing returns boolean
    local unit loc_hero= GetTriggerUnit()
    local item loc_item=GetManipulatedItem()
    local trigger loc_item_trig=(LoadTriggerHandle(YDHT, StringHash((I2S((GetHandleId((loc_hero)))) )), StringHash(( "MulItemSlotByAbility")))) // INLINED!!
    local integer loc_item_id=GetItemTypeId(loc_item)
    local string loc_str = (I2S(loc_item_id) + I2S(GetUnitTypeId(loc_hero)))
    local integer loc_index= (LoadInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorageIndex")))) // INLINED!!
    local integer loc_level= (LoadInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorageLevel")))) // INLINED!!
    local integer array loc_skills
    local integer loc_i=0
    local integer loc_N=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((loc_item_trig)))) )), StringHash(( "ItemSlotNum")))) // INLINED!!
    local boolean loc_OnOff=(LoadBoolean(YDHT, StringHash((I2S((GetHandleId((loc_hero)))) )), StringHash(( "YDWEItemAbilitySystemTriggerClose")))) // INLINED!!
    if loc_index == 0 or loc_OnOff == true then
        set loc_item=null
        set loc_hero=null
        set loc_item_trig=null
        return false
    endif
    loop
        set loc_i=loc_i + 1
        exitwhen loc_i > loc_index
        set loc_skills[loc_i]=(LoadInteger(YDHT, StringHash(loc_str), StringHash(( "AbilityStorage" + I2S(loc_i))))) // INLINED!!
        if GetTriggerEventId() == EVENT_PLAYER_UNIT_DROP_ITEM then
            call DisplayTextToPlayer(GetOwningPlayer(loc_hero), 0, 0, "您失去了以下效果：" + GetAbilityName(loc_skills[loc_i]) + "(" + I2S(GetUnitAbilityLevel(loc_hero, loc_skills[loc_i])) + "级)!")
            call UnitRemoveAbility(loc_hero, loc_skills[loc_i])
          elseif GetTriggerEventId() == EVENT_PLAYER_UNIT_PICKUP_ITEM then
            call UnitAddAbility(loc_hero, loc_skills[loc_i])
            call UnitMakeAbilityPermanent(loc_hero, true, loc_skills[loc_i])
            call SetUnitAbilityLevel(loc_hero, loc_skills[loc_i],loc_level)
            call DisplayTextToPlayer(GetOwningPlayer(loc_hero), 0, 0, "您获得了以下效果：" + GetAbilityName(loc_skills[loc_i]) + "(" + I2S(GetUnitAbilityLevel(loc_hero, loc_skills[loc_i])) + "级)!")

        endif
    endloop
    set loc_item=null
    set loc_hero=null
    set loc_item_trig=null
    return false
endfunction

// function YDWEItemAbilitySystemByAbility_CON takes nothing returns boolean
//     local unit loc_hero= GetTriggerUnit()
//     local item loc_item=GetManipulatedItem()
//     local trigger loc_item_trig=(LoadTriggerHandle(YDHT, StringHash((I2S((GetHandleId((loc_hero)))) )), StringHash(( "MulItemSlotByAbility")))) // INLINED!!
//     local integer loc_item_id=GetItemTypeId(loc_item)
//     local string loc_str = (I2S(loc_item_id) + I2S(GetUnitTypeId(loc_hero)))
//     local integer loc_index= (LoadInteger(YDHT, StringHash((I2S(loc_item_id) )), StringHash(( "AbilityStorageIndex")))) // INLINED!!
//     local integer array loc_skills
//     local integer loc_i=0
//     local integer loc_N=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((loc_item_trig)))) )), StringHash(( "ItemSlotNum")))) // INLINED!!
//     local boolean loc_OnOff=(LoadBoolean(YDHT, StringHash((I2S((GetHandleId((loc_hero)))) )), StringHash(( "YDWEItemAbilitySystemTriggerClose")))) // INLINED!!
//     if loc_index == 0 or loc_OnOff == true then
//         set loc_item=null
//         set loc_hero=null
//         set loc_item_trig=null
//         return false
//     endif
//     loop
//         set loc_i=loc_i + 1
//         exitwhen loc_i > loc_index
//         set loc_skills[loc_i]=(LoadInteger(YDHT, StringHash((I2S(loc_item_id) )), StringHash(( "AbilityStorage" + I2S(loc_i))))) // INLINED!!
//         if GetTriggerEventId() == EVENT_PLAYER_UNIT_DROP_ITEM then
//             call UnitRemoveAbility(loc_hero, loc_skills[loc_i])
//           elseif GetTriggerEventId() == EVENT_PLAYER_UNIT_PICKUP_ITEM then
//             call UnitAddAbility(loc_hero, loc_skills[loc_i])
//             call UnitMakeAbilityPermanent(loc_hero, true, loc_skills[loc_i])
//         endif
//     endloop
//     set loc_item=null
//     set loc_hero=null
//     set loc_item_trig=null
//     return false
// endfunction
 function YDWEItemAbilitySystemInit takes nothing returns nothing
    local trigger item_trig= CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(item_trig, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    call TriggerRegisterAnyUnitEventBJ(item_trig, EVENT_PLAYER_UNIT_DROP_ITEM)
    call TriggerAddCondition(item_trig, Condition(function YDWEItemAbilitySystemByAbility_CON))
    set item_trig=null
endfunction

// 判断伤害是否是普通攻击
function YDWEIsEventAttackDamage takes nothing returns boolean
return 0 !=EXGetEventDamageData(YDWEEventDamageData___EVENT_DAMAGE_DATA_IS_ATTACK)
endfunction

    //两个单位之间的角度
function YDWEAngleBetweenUnits takes unit fromUnit,unit toUnit returns real
    return bj_RADTODEG * Atan2(GetUnitY(toUnit) - GetUnitY(fromUnit), GetUnitX(toUnit) - GetUnitX(fromUnit))
endfunction

    function YDWEAnyUnitDamagedTriggerAction takes nothing returns nothing
    local integer loc_num= 0
    
    loop
        exitwhen loc_num >= YDWETriggerEvent__DamageEventNumber
        if YDWETriggerEvent__DamageEventQueue[loc_num] != null and IsTriggerEnabled(YDWETriggerEvent__DamageEventQueue[loc_num]) and TriggerEvaluate(YDWETriggerEvent__DamageEventQueue[loc_num]) then
            call TriggerExecute(YDWETriggerEvent__DamageEventQueue[loc_num])
        endif
        set loc_num=loc_num + 1
    endloop
endfunction

function YDWEAnyUnitDamagedFilter takes nothing returns boolean
    if GetUnitAbilityLevel(GetFilterUnit(), 'Aloc') <= 0 then
        call TriggerRegisterUnitEvent(yd_DamageEventTrigger, GetFilterUnit(), EVENT_UNIT_DAMAGED)
    endif
    return false
endfunction

function YDWEAnyUnitDamagedEnumUnit takes nothing returns nothing
    local trigger loc_trig= CreateTrigger()
    local region loc_reg= CreateRegion()
    local group loc_g= CreateGroup()
    call RegionAddRect(loc_reg, GetWorldBounds())
    call TriggerRegisterEnterRegion(loc_trig, loc_reg, Condition(function YDWEAnyUnitDamagedFilter))
    call GroupEnumUnitsInRect(loc_g, GetWorldBounds(), Condition(function YDWEAnyUnitDamagedFilter))
    call DestroyGroup(loc_g)
    set loc_reg=null
    set loc_trig=null
    set loc_g=null
endfunction


    function YDWESyStemAnyUnitDamagedRegistTrigger takes trigger trg returns nothing
    if trg == null then
        return
    endif
        
    if YDWETriggerEvent__DamageEventNumber == 0 then
        set yd_DamageEventTrigger=CreateTrigger()
        call TriggerAddAction(yd_DamageEventTrigger, function YDWEAnyUnitDamagedTriggerAction)
        call YDWEAnyUnitDamagedEnumUnit()
    endif
    
    set YDWETriggerEvent__DamageEventQueue[YDWETriggerEvent__DamageEventNumber]=trg
    set YDWETriggerEvent__DamageEventNumber=YDWETriggerEvent__DamageEventNumber + 1
endfunction

//设置单位可以飞行
    function YDWEFlyEnable takes unit u returns nothing
    call UnitAddAbility(u, 'Amrf')
    call UnitRemoveAbility(u, 'Amrf')
endfunction

function YDWEDistanceBetweenUnits takes unit a,unit b returns real
    return SquareRoot((GetUnitX(a) -GetUnitX(b)) * (GetUnitX(a) -GetUnitX(b)) + (GetUnitY(a) -GetUnitY(b)) * (GetUnitY(a) -GetUnitY(b)))
    // return SquareRoot(( GetUnitX(a) - GetUnitX(b) ) * ( GetUnitX(a) - GetUnitX(b) ) + ( GetUnitY(a) - GetUnitY(b) ) * ( GetUnitY(a) - GetUnitY(b) ))
endfunction

//YDWE特殊技能结束事件 
function YDWESyStemAbilityCastingOverTriggerAction takes unit hero,integer index returns nothing
 local integer loc_num= 0
    loop
        exitwhen loc_num >= YDWEBase__AbilityCastingOverEventNumber
        if YDWEBase__AbilityCastingOverEventType[loc_num] == index then
            set bj_lastAbilityCastingUnit=hero
			if YDWEBase__AbilityCastingOverEventQueue[loc_num] != null and TriggerEvaluate(YDWEBase__AbilityCastingOverEventQueue[loc_num]) and IsTriggerEnabled(YDWEBase__AbilityCastingOverEventQueue[loc_num]) then
				call TriggerExecute(YDWEBase__AbilityCastingOverEventQueue[loc_num])
			endif
		endif
        set loc_num=loc_num + 1
    endloop
endfunction

//YDWE技能捕捉事件 
//===========================================================================  
function YDWESyStemAbilityCastingOverRegistTrigger takes trigger trg,integer index returns nothing
	set YDWEBase__AbilityCastingOverEventQueue[YDWEBase__AbilityCastingOverEventNumber]=trg
	set YDWEBase__AbilityCastingOverEventType[YDWEBase__AbilityCastingOverEventNumber]=index
	set YDWEBase__AbilityCastingOverEventNumber=YDWEBase__AbilityCastingOverEventNumber + 1
endfunction 
//===============

//library YDWEJumpTimer:
function YDWEJumpTimerLoop takes nothing returns nothing
    local timer loc_timer=GetExpiredTimer()
    local unit hero=( (LoadUnitHandle(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "Hero")))) ) // INLINED!!
    local real angle=(LoadReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "Angle")))) // INLINED!!
    local integer steeps=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "steeps")))) // INLINED!!
    local integer steepsMax=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "steepsMax")))) // INLINED!!
    local real heightMax=(LoadReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "heightMax")))) // INLINED!!
    local real dist=(LoadReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "dist")))) // INLINED!!
    local real dheig=(LoadReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "dheig")))) // INLINED!!
    local real OriginHeight=(LoadReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "OriginHeight")))) // INLINED!!
    local real loc_x=(LoadReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "X")))) // INLINED!!
    local real loc_y=(LoadReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "Y")))) // INLINED!!
    local real x1=0
    local real y1=0
    local real height=0
    local integer lvJumpTimer=MoveMoreLevel_JumpTimer
    local integer lvUnitMove=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove")))) // INLINED!!
    if steeps < steepsMax and lvJumpTimer >= lvUnitMove then
        set x1=loc_x + steeps * dist * Cos(angle * 3.14159 / 180.0)
        set y1=loc_y + steeps * dist * Sin(angle * 3.14159 / 180.0)
        set x1=(RMinBJ(RMaxBJ(((x1)*1.0), yd_MapMinX), yd_MapMaxX)) // INLINED!!
        set y1=(RMinBJ(RMaxBJ(((y1)*1.0), yd_MapMinY), yd_MapMaxY)) // INLINED!!
        call SetUnitX(hero, x1)
        call SetUnitY(hero, y1)
        set steeps=steeps + 1
        call SaveInteger(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "steeps" )), ( steeps)) // INLINED!!
        set height=( - ( 2 * I2R(steeps) * dheig - 1 ) * ( 2 * I2R(steeps) * dheig - 1 ) + 1 ) * heightMax + OriginHeight
        call SetUnitFlyHeight(hero, height, 99999)
        call SetUnitFacing(hero, angle)
      else
        call SetUnitFlyHeight(hero, OriginHeight, 99999)
        call SetUnitPathing(hero, true)
        call DestroyTimer(loc_timer)
        call FlushChildHashtable(YDHT, StringHash((I2S((GetHandleId((loc_timer))))))) // INLINED!!
        call SaveInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove" )), ( 0)) // INLINED!!
        call YDWESyStemAbilityCastingOverTriggerAction(hero , 2)
    endif
    set loc_timer=null
    set hero=null
endfunction
                            
function YDWEJumpTimer takes unit hero,real angle,real distance,real lasttime,real timeout,real heightMax returns nothing
    local timer loc_timer=null
    local real loc_x=GetUnitX(hero)
    local real loc_y=GetUnitY(hero)
    local integer steepsMax=R2I(lasttime / timeout)
    local integer steeps=0
    local real dist=distance / steepsMax
    local real dheig=1.0 / steepsMax
    local real OriginHeight=GetUnitFlyHeight(hero)
    local integer lvUnitMove=(LoadInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove")))) // INLINED!!
    if MoveMoreLevel_JumpTimer <= lvUnitMove then
        return
    endif
    set loc_timer=CreateTimer()
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((hero)))) )), StringHash(( "lvUnitMove" )), ( MoveMoreLevel_JumpTimer)) // INLINED!!
    call YDWEFlyEnable(hero)
    call SetUnitPathing(hero, false)
    call SaveUnitHandle(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "Hero" )), ( hero)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "OriginHeight" )), (( OriginHeight)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "Angle" )), (( angle)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "dist" )), (( dist)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "heightMax" )), (( heightMax)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "dheig" )), (( dheig)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "X" )), (( loc_x)*1.0)) // INLINED!!
    call SaveReal(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "Y" )), (( loc_y)*1.0)) // INLINED!!
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "steeps" )), ( steeps)) // INLINED!!
    call SaveInteger(YDHT, StringHash((I2S((GetHandleId((loc_timer)))) )), StringHash(( "steepsMax" )), ( steepsMax)) // INLINED!!
    call TimerStart(loc_timer, timeout, true, function YDWEJumpTimerLoop)
    set loc_timer=null
endfunction

//library YDWEJumpTimer ends

//library YDWETimerSystem:

function YDWETimerSystem__NewTaskIndex takes nothing returns integer
 local integer head= YDWETimerSystem__TaskListIdleHead
	if YDWETimerSystem__TaskListIdleHead < 0 then
		if YDWETimerSystem__TaskListIdleMax >= 8000 then
			return 8100
		else
			set YDWETimerSystem__TaskListIdleMax=YDWETimerSystem__TaskListIdleMax + 1
			return YDWETimerSystem__TaskListIdleMax
		endif
	endif
	set YDWETimerSystem__TaskListIdleHead=YDWETimerSystem__TaskListIdle[head]
	return head
endfunction


function YDWETimerSystem__DeleteTaskIndex takes integer index returns nothing
	set YDWETimerSystem__TaskListIdle[index]=YDWETimerSystem__TaskListIdleHead
	set YDWETimerSystem__TaskListIdleHead=index
endfunction

//�ú������д���

function YDWETimerSystem__NewTask takes real time,trigger proc returns integer
 local integer index_number= YDWETimerSystem__NewTaskIndex()
 local integer head= YDWETimerSystem__TaskListHead
 local integer current_number= R2I(100. * time) + YDWETimerSystem__CurrentTime
 local integer result_number
	set YDWETimerSystem__TaskListProc[index_number]=proc
	set YDWETimerSystem__TaskListTime[index_number]=current_number
	loop
		set result_number=YDWETimerSystem__TaskListNext[head]
		if result_number < 0 or YDWETimerSystem__TaskListTime[result_number] >= current_number then
		//	call BJDebugMsg("NewTask:"+I2S(index))
			set YDWETimerSystem__TaskListNext[head]=index_number
			set YDWETimerSystem__TaskListNext[index_number]=result_number
			return index_number
		endif
		set head=result_number
	endloop
	return index_number
endfunction

function YDWETimerSystemNewTask takes real time,trigger proc returns integer
	return YDWETimerSystem__NewTask(time , proc)
endfunction

function YDWETimerSystemGetCurrentTask takes nothing returns integer
	return YDWETimerSystem__CurrentIndex
endfunction

//ɾ����λ
function YDWETimerSystem__RemoveUnit_CallBack takes nothing returns nothing
    call RemoveUnit(LoadUnitHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction

function YDWETimerRemoveUnit takes real time,unit loc_unit returns nothing
    call SaveUnitHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnRemoveUnit), loc_unit)
endfunction

//�ݻټ�ʱ��
function YDWETimerSystem__DestroyTimer_CallBack takes nothing returns nothing
    call DestroyTimer(LoadTimerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction

function YDWETimerDestroyTimer takes real time,timer loc_time returns nothing
    call SaveTimerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnDestroyTimer), loc_time)
endfunction

//ɾ����Ʒ
function YDWETimerSystem__RemoveItem_CallBack takes nothing returns nothing
    call RemoveItem(LoadItemHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction


function YDWETimerRemoveItem takes real time,item loc_item returns nothing
    call SaveItemHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnRemoveItem), loc_item)
endfunction

//ɾ����Ч
function YDWETimerSystem__DestroyEffect_CallBack takes nothing returns nothing
    call DestroyEffect(LoadEffectHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction

function YDWETimerDestroyEffect takes real time,effect loc_effect returns nothing
    call SaveEffectHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnDestroyEffect), loc_effect)
endfunction

//ɾ��������Ч
function YDWETimerSystem__DestroyLightning_CallBack takes nothing returns nothing
    call DestroyLightning(LoadLightningHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction

function YDWETimerDestroyLightning takes real time,lightning loc_light returns nothing
 local integer loc_number= YDWETimerSystem__NewTask(time , YDWETimerSystem__fnDestroyLightning)
    call SaveLightningHandle(YDHT, YDWETimerSystem__TimerHandle, loc_number, loc_light)
endfunction
//���д�����
function YDWETimerSystem__RunTrigger_CallBack takes nothing returns nothing
    call TriggerExecute(LoadTriggerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex))
    call RemoveSavedHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__CurrentIndex)
endfunction

function YDWETimerRunTrigger takes real time,trigger trg returns nothing
    call SaveTriggerHandle(YDHT, YDWETimerSystem__TimerHandle, YDWETimerSystem__NewTask(time , YDWETimerSystem__fnRunTrigger), trg)
endfunction

//ɾ��Ư������

function YDWETimerDestroyTextTag takes real time,texttag loc_text_tag returns nothing
    // local integer N=0
    // local integer i=0
    if time <= 0 then
        set time=0.01
    endif
    call SetTextTagPermanent(loc_text_tag, false)
    call SetTextTagLifespan(loc_text_tag, time)
    call SetTextTagFadepoint(loc_text_tag, time)
endfunction
//���ļ�ʱ��������

function YDWETimerSystem__Main takes nothing returns nothing
 local integer head= YDWETimerSystem__TaskListHead
//  local integer p
	loop
		set YDWETimerSystem__CurrentIndex=YDWETimerSystem__TaskListNext[head]
		exitwhen YDWETimerSystem__CurrentIndex < 0 or YDWETimerSystem__CurrentTime < YDWETimerSystem__TaskListTime[YDWETimerSystem__CurrentIndex]
		//call BJDebugMsg("Task:"+I2S(CurrentIndex))
		call TriggerEvaluate(YDWETimerSystem__TaskListProc[YDWETimerSystem__CurrentIndex])
		call YDWETimerSystem__DeleteTaskIndex(YDWETimerSystem__CurrentIndex)
		set YDWETimerSystem__TaskListNext[head]=YDWETimerSystem__TaskListNext[YDWETimerSystem__CurrentIndex]
	endloop
	set YDWETimerSystem__CurrentTime=YDWETimerSystem__CurrentTime + 1
endfunction

//��ʼ������
function YDWETimerSystem__Init takes nothing returns nothing
    set YDWETimerSystem__Timer=CreateTimer()
	set YDWETimerSystem__TimerHandle=GetHandleId(YDWETimerSystem__Timer)
	set YDWETimerSystem__CurrentTime=0
	set YDWETimerSystem__TaskListHead=0
	set YDWETimerSystem__TaskListNext[0]=-1
	set YDWETimerSystem__TaskListIdleHead=1
	set YDWETimerSystem__TaskListIdleMax=1
	set YDWETimerSystem__TaskListIdle[1]=-1
	
	set YDWETimerSystem__fnRemoveUnit=CreateTrigger()
	set YDWETimerSystem__fnDestroyTimer=CreateTrigger()
	set YDWETimerSystem__fnRemoveItem=CreateTrigger()
	set YDWETimerSystem__fnDestroyEffect=CreateTrigger()
	set YDWETimerSystem__fnDestroyLightning=CreateTrigger()
	set YDWETimerSystem__fnRunTrigger=CreateTrigger()
	call TriggerAddCondition(YDWETimerSystem__fnRemoveUnit, Condition(function YDWETimerSystem__RemoveUnit_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnDestroyTimer, Condition(function YDWETimerSystem__DestroyTimer_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnRemoveItem, Condition(function YDWETimerSystem__RemoveItem_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnDestroyEffect, Condition(function YDWETimerSystem__DestroyEffect_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnDestroyLightning, Condition(function YDWETimerSystem__DestroyLightning_CallBack))
	call TriggerAddCondition(YDWETimerSystem__fnRunTrigger, Condition(function YDWETimerSystem__RunTrigger_CallBack))
	
    call TimerStart(YDWETimerSystem__Timer, 10, true, function YDWETimerSystem__Main)
endfunction

//ѭ�������ö�����ʱ��
function YDWETimerSystemGetRunIndex takes nothing returns integer
    return YDWETimerSystem__TimerSystem_RunIndex
endfunction

function YDWETimerSystem__RunPeriodicTriggerFunction takes nothing returns nothing
    local integer tid= GetHandleId(GetExpiredTimer())
    local trigger trg= LoadTriggerHandle(YDHT, tid, $D0001)
	call SaveInteger(YDHT, StringHash(I2S(GetHandleId(trg))), StringHash("RunIndex"), LoadInteger(YDHT, tid, $D0002))
    if TriggerEvaluate(trg) then
        call TriggerExecute(trg)
    endif
    set trg=null
endfunction

function YDWETimerSystem__RunPeriodicTriggerFunctionByTimes takes nothing returns nothing
    local integer tid= GetHandleId(GetExpiredTimer())
    local trigger trg= LoadTriggerHandle(YDHT, tid, $D0001)
    local integer times= LoadInteger(YDHT, tid, $D0003)
	call SaveInteger(YDHT, StringHash(I2S(GetHandleId(trg))), StringHash("RunIndex"), LoadInteger(YDHT, tid, $D0002))
    if TriggerEvaluate(trg) then
        call TriggerExecute(trg)
    endif
    set times=times - 1
    if times > 0 then
		call SaveInteger(YDHT, tid, $D0003, times)
      else
        call DestroyTimer(GetExpiredTimer())
        call FlushChildHashtable(YDHT, tid)
    endif
    set trg=null
endfunction

function YDWETimerRunPeriodicTrigger takes real timeout,trigger trg,boolean b,integer times,integer data returns nothing
    local timer loc_timer
    local integer tid
    local integer index= 0
    if timeout < 0 then
        return
      else
        set loc_timer=CreateTimer()
		set tid=GetHandleId(loc_timer)
    endif
    set YDWETimerSystem__TimerSystem_RunIndex=YDWETimerSystem__TimerSystem_RunIndex + 1
	call SaveTriggerHandle(YDHT, tid, $D0001, trg)
	call SaveInteger(YDHT, tid, $D0002, YDWETimerSystem__TimerSystem_RunIndex)
	set index=LoadInteger(YDHT, GetHandleId(trg), 'YDTS' + data)
    set index=index + 1
	call SaveInteger(YDHT, GetHandleId(trg), 'YDTS' + data, index)
	call SaveTimerHandle(YDHT, GetHandleId(trg), ( 'YDTS' + data ) * index, loc_timer)
	
    if b == false then
		call SaveInteger(YDHT, tid, $D0003, times)
        call TimerStart(loc_timer, timeout, true, function YDWETimerSystem__RunPeriodicTriggerFunctionByTimes)
      else
        call TimerStart(loc_timer, timeout, true, function YDWETimerSystem__RunPeriodicTriggerFunction)
    endif
    set loc_timer=null
endfunction

function YDWETimerRunPeriodicTriggerOver takes trigger trg,integer data returns nothing
 local integer trgid= GetHandleId(trg)
    local integer index= LoadInteger(YDHT, trgid, 'YDTS' + data)
    local timer loc_timer
    loop
        exitwhen index <= 0
        set loc_timer=LoadTimerHandle(YDHT, trgid, ( 'YDTS' + data ) * index)
        call DestroyTimer(loc_timer)
        call FlushChildHashtable(YDHT, GetHandleId(loc_timer))
		call RemoveSavedHandle(YDHT, trgid, ( 'YDTS' + data ) * index)
        set index=index - 1
    endloop
	
    call RemoveSavedInteger(YDHT, trgid, 'YDTS' + data)
    set loc_timer=null
endfunction
//library YDWETimerSystem ends
    // 熔铸技能池子
function set_rongzhu_pool takes nothing returns nothing
set rongzhu_ability_pool[1] = 'K001'
set rongzhu_ability_pool[2] = 'K002'
set rongzhu_ability_pool[3] = 'K003'
set rongzhu_ability_pool[4] = 'K004'
set rongzhu_ability_pool[5] = 'K005'
set rongzhu_ability_pool[6] = 'K006'
set rongzhu_ability_pool[7] = 'K007'
set rongzhu_ability_pool[8] = 'K008'
set rongzhu_ability_pool[9] = 'K009'
set rongzhu_ability_pool[10] = 'K00A'
set rongzhu_ability_pool[11] = 'K00B'
set rongzhu_ability_pool[12] = 'K00C'
set rongzhu_ability_pool[13] = 'K00D'
set rongzhu_ability_pool[14] = 'K00E'
set rongzhu_ability_pool[15] = 'K00F'
set rongzhu_ability_pool[16] = 'K00G'
set rongzhu_ability_pool[17] = 'K00H'
set rongzhu_ability_pool[18] = 'K00I'
set rongzhu_ability_pool[19] = 'K00J'
set rongzhu_ability_pool[20] = 'K00K'
set rongzhu_ability_pool[21] = 'K00L'
// 天外陨铁额外技能池子
set rongzhu_extra_pool[1] = 'KA01'
set rongzhu_extra_pool[2] = 'KA02'
set rongzhu_extra_pool[3] = 'KA03'
set rongzhu_extra_pool[4] = 'KA04'
set rongzhu_extra_pool[5] = 'KA05'
set rongzhu_extra_pool[6] = 'KA06'
set rongzhu_extra_pool[7] = 'KA07'
endfunction
    // 宠物宝宝池子
function set_pet_pool takes nothing returns nothing
    set pet_egg[1] ='n100'
    set pet_egg[2] ='n102'
    set pet_egg[3] ='n104'
    set pet_egg[4] ='n106'
    set pet_egg[5] ='n108'
    set pet_egg[6] ='n110'
    endfunction
// 高难度物品池
function set_item_pool takes nothing returns nothing
    // 掉落物品池
local integer KW
// 朱雀头冠
set hight_level_item_pool[1]=$63726474
// 朱雀羽衣
set hight_level_item_pool[2]=$62726167
// 朱雀护腕
set hight_level_item_pool[3]=$6F666972
// 青龙刀
set hight_level_item_pool[4]=$73666F67
// 青龙靴
set hight_level_item_pool[5]=$736F7238
// 青龙甲
set hight_level_item_pool[6]=$736F7237
// 白虎头盔
set hight_level_item_pool[7]=$68627468
// 白虎护手
set hight_level_item_pool[8]=$72616D32
// 白虎铠甲
set hight_level_item_pool[9]=$72646530
// 玄武战甲
set hight_level_item_pool[10]=$7368656E
// 玄武大盾
set hight_level_item_pool[11]=$6667756E
// 玄武头盔
set hight_level_item_pool[12]=$6F666C67
// 无敌甲
set hight_level_item_pool[13]=$72617433
// 天空盔
set hight_level_item_pool[14]=$7370726E
// 大宛马-
// set hight_level_item_pool[15]=$626C6261
// 日月啸霜
set hight_level_item_pool[15]='it0l'
// 风神衣
set hight_level_item_pool[16]=$62747374
// 神宇盔
set hight_level_item_pool[17]=$72756774
// 古锭刀
set hight_level_item_pool[18]=$66777373
// 鹊画弓
set hight_level_item_pool[19]=$61727368
// 黄金锁子甲
set hight_level_item_pool[20]=$7368686E
// 龙泉剑
set hight_level_item_pool[21]=$73726264
// 龙胆枪
set hight_level_item_pool[22]=$676C646F
// 养由基
set hight_level_item_pool[23]=$72616D33
// 日月乾坤
set hight_level_item_pool[24]=$7664646C
// 绝影
set hight_level_item_pool[25]=$49303039
// 孟德新书
set hight_level_item_pool[26]=$736F7234
// 孙子兵法
set hight_level_item_pool[27]=$736F7233
// 水神姬
set hight_level_item_pool[28]=$73747067
// 真龙护手
set hight_level_item_pool[29]=$74656C73
// 七星宝刀
set hight_level_item_pool[30]=$6E737069
// 倚天剑
set hight_level_item_pool[31]=$73686377
// 空空手
set hight_level_item_pool[32]=$73707265
// 青囊书
set hight_level_item_pool[33]=$7363686C
// 爪黄飞电
// set hight_level_item_pool[34]=$736F7232
// 踏雪乌骓
set hight_level_item_pool[34]='it0m'
// 巨象
set hight_level_item_pool[35]=$49303037
// 玄铁手机
set hight_level_item_pool[36]=$49303044
// 玄铁腰带
set hight_level_item_pool[37]=$49303045
// 战狼
set hight_level_item_pool[38]=$66677267
// 丈八蛇矛
set hight_level_item_pool[39]=$726E7370
// 赤兔
set hight_level_item_pool[40]=$6F736C6F
// 魔神甲
set hight_level_item_pool[41]=$70737064
// 三国志
set hight_level_item_pool[42]=$6C656467
// 遁甲天书
set hight_level_item_pool[43]=$64747362
// 魔神之翼
set hight_level_item_pool[44]=$49303036
// 轩辕剑
set hight_level_item_pool[45]=$6D6C7374
// 玄光之翼
set hight_level_item_pool[46]=$62666872
// 天狼枪
set hight_level_item_pool[47]=$49303055
// 震天弓
set hight_level_item_pool[48]=$72616D34
// 机关车
set hight_level_item_pool[49]=$49303056
// 虎筋弦弓
set hight_level_item_pool[50]=$49303250
// 雷神管
set hight_level_item_pool[51]=$49303142
// 问天枪
set hight_level_item_pool[52]=$49303034
// 镇魂甲
set hight_level_item_pool[53]=$49303032
// 火神盾
set hight_level_item_pool[54]=$726F7473
// 项羽战刃
set hight_level_item_pool[55]=$73747265
// 镇魂杖
set hight_level_item_pool[56]=$49303031
// 麒麟弓
set hight_level_item_pool[57]=$49303144
// 火焰拳套
set hight_level_item_pool[58]=$73687273
// 刑天斧
set hight_level_item_pool[59]=$67736F75
// 刑天盾
set hight_level_item_pool[60]=$636F736C
// 九转
set hight_level_item_pool[61]=$49303041
// 穿云箭
set hight_level_item_pool[62]=$6F76656E
// 魔魂盔
set hight_level_item_pool[63]=$49303033
// 精品小馒头
set hight_level_item_pool[64]='pres'
// 九转金丹
set hight_level_item_pool[65]='rej3'
// 强化石
set hight_level_item_pool[66]='dkfw'
// 优质兽皮
set hight_level_item_pool[67]='srrc'
// 藏宝图
set hight_level_item_pool[68]='tlum'
// 仙魔书
set hight_level_item_pool[69]='grsl'
// 太平令
set hight_level_item_pool[70]='it0u'
// 魔神甲
set hight_level_item_pool[71]=$70737064
// 魔神之翼
set hight_level_item_pool[72]=$49303036
// 玄光之翼
set hight_level_item_pool[73]=$62666872
// 魔魂盔
set hight_level_item_pool[74]=$49303033
// 镇魂甲
set hight_level_item_pool[75]=$49303032
// 镇魂杖
set hight_level_item_pool[76]=$49303031
// 麒麟弓
set hight_level_item_pool[77]=$49303144
// 刑天斧
set hight_level_item_pool[78]=$67736F75
// 刑天盾
set hight_level_item_pool[79]=$636F736C
// 太平要术
set hight_level_item_pool[80]=$49303035
// 蚩尤魔头
set hight_level_item_pool[81]=$49303234
// 蚩尤魔甲
set hight_level_item_pool[82]=$49303235
// 蚩尤鞋子
set hight_level_item_pool[83]=$49303236
// 蚩尤护手
set hight_level_item_pool[84]=$49303238
// 青龙刀
set hight_level_item_pool[99]=$73666F67
// 人参精华
set hight_level_item_pool[100]=$776F6C67
// 圣痕青龙
set hight_level_item_pool[101]=$6B336D32
// 无字天书
set hight_level_item_pool[102]=$72656A32
// 东皇钟
set hight_level_item_pool[103]=$7067696E
// 给孙乾四阶段偷的
// 追日靴
set hight_level_item_pool[104]=$49303030
// 玄光盾
set hight_level_item_pool[105]=$69743039
// 混元霹雳手
set hight_level_item_pool[106]=$69743061
// 斩蛇剑
set hight_level_item_pool[107]=$49303251
// 赌狗戒指
set hight_level_item_pool[108]=$69743063
// 麒麟戒指
set hight_level_item_pool[109]=$49303059
// 龙刀
set hight_level_item_pool[110]=$69743035
set hight_level_item_pool[111]=$69743036
set hight_level_item_pool[112]=$69743037
set hight_level_item_pool[113]=$69743038
// 虎符
set hight_level_item_pool[114]='wtlg'
// 落宝铜钱
set hight_level_item_pool[115]=$69743065
// 的卢满级
set hight_level_item_pool[116]=$6B67616C
// 奇谋
set hight_level_item_pool[117]=$49303150
// 雷霆之力
set hight_level_item_pool[118]=$49303042
// 蚩尤披风
set hight_level_item_pool[119]=$49303237
// 极八蛇矛
set hight_level_item_pool[120]=$69743062
// 幸运币
set hight_level_item_pool[121]=$69743067
// 器胚青龙
set hight_level_item_pool[122]=$69743064
// 太平清领道
set hight_level_item_pool[123]='it0v'
// 心之钢
set hight_level_item_pool[124]=$69743069
//  神鬼天惊
set hight_level_item_pool[125]='it0n'
// 自然魂珠
set hight_level_item_pool[126]='it0k'
// 洛河图书 
set hight_level_item_pool[127]='it0o'
// 羽渡尘
set hight_level_item_pool[128]='it0r'
// 苍玄之书
set hight_level_item_pool[129]='it0s'
// 天书古卷
set hight_level_item_pool[130]='it0t'
// 奇趣蛋
set hight_level_item_pool[131]='it0p'
// 洛阳铲
set hight_level_item_pool[132]='it0y'
// 刚弓
set hight_level_item_pool[170]=$6B70696E
// 钢剑
set hight_level_item_pool[171]=$61666163
// 钢刀
set hight_level_item_pool[172]=$6576746C
// 诸葛巾
set hight_level_item_pool[173]=$72646532
// 大斧
set hight_level_item_pool[174]=$616A656E
// 黑羽扇
set hight_level_item_pool[175]=$73626368
// 鹤髦
set hight_level_item_pool[176]=$7373696C
// 铁锁甲
set hight_level_item_pool[177]=$72616731
// 铁盔
set hight_level_item_pool[178]=$6C676468
// 钢枪
set hight_level_item_pool[179]=$72687468
// 马
set hight_level_item_pool[180]=$726C6966
// 黑鬃马
set hight_level_item_pool[181]=$6F646566
// 大宛马
// set hight_level_item_pool[182]=$626C6261
set hight_level_item_pool[182]='it0l'
// 爪黄飞电
// set hight_level_item_pool[183]=$736F7232

set hight_level_item_pool[183]='it0m'
// 绝影
set hight_level_item_pool[184]=$49303039
// 巨象
set hight_level_item_pool[185]=$49303037
// 魔神之翼
set hight_level_item_pool[186]=$49303036
// 战狼
set hight_level_item_pool[187]=$66677267
// 赤兔
set hight_level_item_pool[188]=$6F736C6F
// 后面都是玉
set hight_level_item_pool[201]=$74666172
set hight_level_item_pool[202]=$74626172
set hight_level_item_pool[203]=$7462736D
set hight_level_item_pool[204]=$72656A31
set hight_level_item_pool[205]=$63636D64
set hight_level_item_pool[206]=$67656D74
set hight_level_item_pool[207]=$6C757265
set hight_level_item_pool[208]=$746D7363
set hight_level_item_pool[209]=$6E666C67
// 玉
set hight_level_item_pool[210]=$61727363



endfunction
function game_start_event takes nothing returns nothing
set trig_game_start=CreateTrigger()
call TriggerRegisterTimerEventSingle(trig_game_start,1.)
call TriggerAddAction(trig_game_start,function set_item_pool)
call TriggerAddAction(trig_game_start,function set_pet_pool)
call TriggerAddAction(trig_game_start,function set_rongzhu_pool)

endfunction
// 物品池事件结束结束

function gaoxiangAttackedCondition takes nothing returns boolean
return GetAttackedUnitBJ()==gaoxiang
endfunction

function gaoxiangAttackedEvent takes nothing returns nothing
local unit Ig=GetTriggerUnit()
local unit JW = GetAttacker()
if GetUnitAbilityLevel(GetAttackedUnitBJ(), $41623163) >0 and IsUnitAlly(JW, Player(8)) == false then
call UnitDamageTarget(Ig, JW, LoadReal(FS,GetHandleId(Ig),$130B62E3) * .01 *GetUnitAbilityLevel(Ig, $41623163), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
// call DisplayTextToPlayer(GetOwningPlayer(Ig), 0, 0, "|Cff00ff00反伤22！" + R2S(LoadReal(FS,GetHandleId(Ig),$130B62E3) * .01 * GetUnitAbilityLevel(Ig, $41623163)) + "角色生命值：" + R2S( LoadReal(FS,GetHandleId(Ig),$130B62E3)))
endif
endfunction
// 高翔反伤事件
function regisetGaoxiangAttacked takes nothing returns nothing
set beAttacked=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(beAttacked,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(beAttacked,Condition(function gaoxiangAttackedCondition))
call TriggerAddAction(beAttacked,function gaoxiangAttackedEvent)
endfunction



function ForcedAttack takes nothing returns nothing
local unit CE
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local group I2=CreateGroup()
call GroupEnumUnitsInRange(I2, GetUnitX(Iv), GetUnitY(Iv),1500,null)

// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00强制攻击中：" )
if LoadReal(FS,GetHandleId(Iv),$130B62E1)<=0. then
call SaveReal(FS,GetHandleId(Iv),$130B62E1,0.)
call DestroyTimer(CS)
else

loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
// call EXPauseUnit(Iv,false)
// call UnitRemoveBuffs(Iv,false,true)
if CE !=Iv and IsUnitEnemy(CE, GetOwningPlayer(Iv)) == true then
call IssuePointOrderById(CE,851983,GetUnitX(Iv),GetUnitY(Iv))
call UnitDamageTarget(Iv, CE, LoadReal(FS,GetHandleId(Iv),$130B62E3) * .01 *GetUnitAbilityLevel(Iv, $41623163), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
endif

endloop

call SaveReal(FS,GetHandleId(Iv),$130B62E1,LoadReal(FS,GetHandleId(Iv),$130B62E1)-.2)
endif
endfunction

// 强制攻击函数
function taughtAttack takes unit Iv,real time returns nothing
    local timer CS
    local integer Ix=0
    set CS=CreateTimer()
    set Ix=GetHandleId(CS)
    call SaveUnitHandle(Ia,Ix,0,Iv)
    call SaveReal(FS,GetHandleId(Iv),$130B62E1,time)
    call TimerStart(CS,.2,true,function ForcedAttack)
endfunction



// 眩晕相关事件监听
function Trig_StunEffect_Conditions takes nothing returns boolean
    return true
endfunction

function Trig_StunEffect_Expire takes nothing returns nothing
    // 让单位恢复正常状态
    call PauseUnit(StunnedUnit, false)
    set StunnedUnit = null
    set StunTrigger = null
endfunction

function Trig_StunEffect_Actions takes unit effect_unit returns nothing
    local timer pauseTime = CreateTimer()
    
    // 获取触发器事件的目标单位
    set StunnedUnit = effect_unit

    // 实际上，你可能需要根据游戏中的眩晕效果进行更多的设置
    call PauseUnit(StunnedUnit, true)
    
    // 创建一个定时器，在持续时间后恢复单位正常状态
    call TimerStart(pauseTime, StunDuration, false, function Trig_StunEffect_Expire)
endfunction

function range_stunToNormal takes nothing returns nothing
local unit CE
loop
set CE=FirstOfGroup(StunGroup) 
exitwhen CE==null
call UnitRemoveAbility(CE,$42505345)
// call UnitRemoveType(CE,UNIT_TYPE_STUNNED)
call PauseUnit(CE, false)
call GroupRemoveUnit(StunGroup,CE)
endloop
set CE=null
call DestroyGroup(StunGroup)
set StunGroup=null
endfunction


// 无敌斩函数
function force_huk takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local unit CE =LoadUnitHandle(Ia,Ix,1)
local unit loc_unit
local integer loc_repeat =0
local group I2=CreateGroup()
// 随机落点
if GetRandomInt(1,2)==1 then
call SetUnitX(Iv,GetUnitX(CE)+1)
call SetUnitY(Iv,GetUnitY(CE)+1)
else
call SetUnitX(Iv,GetUnitX(CE)-1)
call SetUnitY(Iv, GetUnitY(CE)-1)
endif
call UnitDamageTarget(Iv, CE, 8000* GetUnitAbilityLevel(Iv, 'Ab2f'), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)

call UnitDamageTarget(Iv, CE, GetUnitState(Iv, ConvertUnitState(18)) * GetUnitAbilityLevel(Iv, 'Ab2f')  * 4, false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)

// 选人
call GroupEnumUnitsInRange(I2, GetUnitX(Iv), GetUnitY(Iv),1000,null)
loop
set loc_unit=FirstOfGroup(I2)
if loc_unit !=CE and loc_unit != Iv and IsUnitEnemy(loc_unit, GetOwningPlayer(Iv)) == true and GetUnitState(loc_unit, ConvertUnitState(0)) > .405 then
call SaveUnitHandle(Ia,Ix,1,loc_unit)
endif
exitwhen loc_unit !=CE and loc_unit != Iv and IsUnitEnemy(loc_unit, GetOwningPlayer(Iv)) == true and GetUnitState(loc_unit, ConvertUnitState(0)) > .405 or loc_unit == null
call GroupRemoveUnit(I2,loc_unit)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00进入循环删除" )

// 如果当前选中的单位还是之前的单位，则计数+1，否则将计数清零

// 如果当前单位是个空的且
if loc_unit != Iv then

if loc_unit == null and GetUnitState(CE, ConvertUnitState(0)) > .405  then
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00保存上一个单位：" + GetUnitName(CE))
call SaveUnitHandle(Ia,Ix,1,CE)
else
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00保存当前单位：" + GetUnitName(loc_unit))
call SaveUnitHandle(Ia,Ix,1,loc_unit)
endif



endif



endloop
//  call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00无敌斩！：" + GetUnitName(CE))
call SaveInteger(FS, GetHandleId(Iv), $120B62E2, LoadInteger(FS, GetHandleId(Iv), $120B62E2) -1)
if LoadInteger(FS, GetHandleId(Iv), $120B62E2) <= 0 or CE == null or(loc_unit == null and GetUnitState(CE, ConvertUnitState(0)) < .405) then
call SaveInteger(FS, GetHandleId(Iv), $120B62E2, 0)
call SetUnitState(Iv, ConvertUnitState(37),LoadReal(FS, GetHandleId(Iv), $120B62E1))
call UnitRemoveAbilityBJ($4176756C,Iv)
call DestroyTimer(CS)
endif
 
endfunction
function pet_evolution takes unit Iv returns nothing

if GetUnitTypeId(Iv) == 'n100' then
call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv),'n101',0,0,0),GetUnitX(Iv),GetUnitY(Iv))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"乌梢（幼年）已经成长为过山峰（成年）")
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8, 0)
call RemoveUnit(Iv)
elseif GetUnitTypeId(Iv) == 'n101' then
set pet_unit=CreateUnit(GetOwningPlayer(Iv),'H00B',0,0,0)  
call SetUnitPosition(pet_unit,GetUnitX(Iv),GetUnitY(Iv))
call SetHeroLevel(pet_unit, 200, false)
call RemoveUnit(Iv)
call SaveBoolean(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)),$120B62E8,true)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"过山峰（成年）已经成长为吞天蟒")
elseif GetUnitTypeId(Iv) == 'n102' then
call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv),'n103',0,0,0),GetUnitX(Iv),GetUnitY(Iv))

call RemoveUnit(Iv)
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8, 0)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"虿（幼年）已经成长为虿（成年）")
elseif GetUnitTypeId(Iv) == 'n103' then
set pet_unit=CreateUnit(GetOwningPlayer(Iv),'H00C',0,0,0)  
call SetUnitPosition(pet_unit,GetUnitX(Iv),GetUnitY(Iv))
call SetHeroLevel(pet_unit, 200, false)
call RemoveUnit(Iv)
call SaveBoolean(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)),$120B62E8,true)
call UnitAddItem(Iv,CreateItem($69743069,GetUnitX(Iv),GetUnitY(Iv)))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"虿（成年）已经成长为虿")
elseif GetUnitTypeId(Iv) == 'n104' then
call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv),'n105',0,0,0),GetUnitX(Iv),GetUnitY(Iv))
call RemoveUnit(Iv)
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8, 0)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"小熊瞎子已经成长为中熊瞎子")
elseif GetUnitTypeId(Iv) == 'n105' then
set pet_unit=CreateUnit(GetOwningPlayer(Iv),'H00D',0,0,0)  
call SetUnitPosition(pet_unit,GetUnitX(Iv),GetUnitY(Iv))
call SetHeroLevel(pet_unit, 200, false)
call RemoveUnit(Iv)
call SaveBoolean(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)),$120B62E8,true)
call UnitAddItem(Iv,CreateItem($69743069,GetUnitX(Iv),GetUnitY(Iv)))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"中熊瞎子已经成长为大熊瞎子")
elseif GetUnitTypeId(Iv) == 'n106' then
call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv),'n107',0,0,0),GetUnitX(Iv),GetUnitY(Iv))
call RemoveUnit(Iv)
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8, 0)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"祸斗（幼年）已经成长为祸斗（成年）")
elseif GetUnitTypeId(Iv) == 'n107' then
set pet_unit=CreateUnit(GetOwningPlayer(Iv),'H00E',0,0,0)  
call SetUnitPosition(pet_unit,GetUnitX(Iv),GetUnitY(Iv))
call SetHeroLevel(pet_unit, 200, false)
call RemoveUnit(Iv)
call SaveBoolean(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)),$120B62E8,true)
call UnitAddItem(Iv,CreateItem($69743069,GetUnitX(Iv),GetUnitY(Iv)))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"祸斗（成年）已经成长为祸斗")
elseif GetUnitTypeId(Iv) == 'n108' then
call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv),'n109',0,0,0),GetUnitX(Iv),GetUnitY(Iv))
call RemoveUnit(Iv)
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8, 0)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"青眼白龙（幼年）已经成长为青眼白龙（成年）")
elseif GetUnitTypeId(Iv) == 'n109' then
set pet_unit=CreateUnit(GetOwningPlayer(Iv),'H00F',0,0,0)  
call SetUnitPosition(pet_unit,GetUnitX(Iv),GetUnitY(Iv))
call SetHeroLevel(pet_unit, 200, false)
call RemoveUnit(Iv)
call SaveBoolean(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)),$120B62E8,true)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"青眼白龙（成年）已经成长为骨幽冥龙")
elseif GetUnitTypeId(Iv) == 'n110' then
call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv),'n111',0,0,0),GetUnitX(Iv),GetUnitY(Iv))
call RemoveUnit(Iv)
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8, 0)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"山岭巨人（小小）已经成长为山岭巨人（中中）")
elseif GetUnitTypeId(Iv) == 'n111' then
set pet_unit=CreateUnit(GetOwningPlayer(Iv),'H00G',0,0,0)  
call SetUnitPosition(pet_unit,GetUnitX(Iv),GetUnitY(Iv))
call SetHeroLevel(pet_unit, 200, false)
call RemoveUnit(Iv)
call SaveBoolean(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)),$120B62E8,true)
call UnitAddItem(Iv,CreateItem($69743069,GetUnitX(Iv),GetUnitY(Iv)))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"山岭巨人（中中）已经成长为山岭巨人（大大）")

endif
  
endfunction
function huk_action takes unit Iv, unit CE,integer time returns nothing
    // 分别为释放者、目标、释放次数
    local timer CS
    local integer Ix=0
    set CS=CreateTimer()
    set Ix=GetHandleId(CS)
    call SaveUnitHandle(Ia,Ix,0,Iv)
    call SaveUnitHandle(Ia,Ix,1,CE)
    // GetUnitState(CE,ConvertUnitState(0))
        // 攻击间隔
    call SaveReal(FS,GetHandleId(Iv),$120B62E1,GetUnitState(Iv,ConvertUnitState(37)))
    call SetUnitState(Iv, ConvertUnitState(37),1)
   
 // 位移次数
    call SaveInteger(FS,GetHandleId(Iv),$120B62E2,time)
    call TimerStart(CS,.5,true,function force_huk)
endfunction

    // 黄忠狩猎印记增加
function archeryEvent takes integer time returns nothing
    if huntingFinish ==true then
    set archeryTime = archeryTime+time
    if archeryTime>300 then
        set archeryTime=300
        endif
    // 每层印记+5点射程和
    call DisplayTextToForce(GetPlayersAll(),GetUnitName(huntingUnit)+"|Cff00ff00黄忠当前印记层数："+I2S(archeryTime))
    call SetUnitState(huntingUnit,ConvertUnitState(22),1250+archeryTime*5)
     call SetUnitAcquireRange(huntingUnit,1250+archeryTime*5)
     call SetUnitState(huntingUnit,ConvertUnitState(18),GetUnitState(huntingUnit,ConvertUnitState(18))+time*3)
    endif
endfunction

function DzAPI_Map_GetServerValue takes player whichPlayer,string key returns string
if(key=="IBB")then
return "ESC"
endif
return ""
endfunction
function DzAPI_Map_SaveServerValue takes player whichPlayer,string key,string value returns boolean
return true
endfunction
function DzAPI_Map_Ladder_SetStat takes player whichPlayer,string key,string value returns nothing
return  
endfunction
function DzAPI_Map_IsRPGLadder takes nothing returns boolean
return false
endfunction
function DzAPI_Map_GetGameStartTime takes nothing returns integer
return 0
endfunction
function DzAPI_Map_Stat_SetStat takes player whichPlayer,string key,string value returns nothing
return  
endfunction
function DzAPI_Map_GetMatchType takes nothing returns integer
return 0
endfunction
function DzAPI_Map_Ladder_SetPlayerStat takes player whichPlayer,string key,string value returns nothing
return  
endfunction
function DzAPI_Map_GetServerValueErrorCode takes player whichPlayer returns integer
return 0
endfunction
function DzAPI_Map_GetLadderLevel takes player whichPlayer returns integer
return 1
endfunction
function DzAPI_Map_IsRedVIP takes player whichPlayer returns boolean
return false
endfunction
function DzAPI_Map_IsBlueVIP takes player whichPlayer returns boolean
return false
endfunction
function DzAPI_Map_GetLadderRank takes player whichPlayer returns integer
return 1
endfunction
function DzAPI_Map_GetMapLevelRank takes player whichPlayer returns integer
return 1
endfunction
function DzAPI_Map_GetGuildName takes player whichPlayer returns string
return "魔解网www.xiaditu.com"
endfunction
function DzAPI_Map_GetGuildRole takes player whichPlayer returns integer
return 30
endfunction
// 不是小黑屋
function DzAPI_Map_IsRPGLobby takes nothing returns boolean
return true
endfunction
function DzAPI_Map_GetMapLevel takes player whichPlayer returns integer
return 100
endfunction
function DzAPI_Map_MissionComplete takes player whichPlayer,string key,string value returns nothing
return  
endfunction
function DzAPI_Map_GetActivityData takes nothing returns string
return ""
endfunction
function DzAPI_Map_GetMapConfig takes string key returns string
return ""
endfunction
// 不是小黑屋
function DzAPI_Map_HasMallItem takes player whichPlayer,string key returns boolean
return true
endfunction
// 不是小黑屋
function DzAPI_Map_SavePublicArchive takes player whichPlayer,string key,string value returns boolean
return true
endfunction
function DzAPI_Map_GetPublicArchive takes player whichPlayer,string key returns string
return ""
endfunction
function DzAPI_Map_UseConsumablesItem takes player whichPlayer,string key returns nothing
return  
endfunction
function DzAPI_Map_OrpgTrigger takes player whichPlayer,string key returns nothing
return  
endfunction
function DzAPI_Map_GetServerArchiveDrop takes player whichPlayer,string key returns string
return ""
endfunction
function DzAPI_Map_GetServerArchiveEquip takes player whichPlayer,string key returns integer
return 1
endfunction
function DzAPI_Map_GetPlatformVIP takes player whichPlayer returns integer
return 1
endfunction
function RequestExtraIntegerData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns integer
return 1
endfunction
function RequestExtraBooleanData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns boolean
return true
endfunction
function RequestExtraStringData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns string
return ""
endfunction
function RequestExtraRealData takes integer dataType, player whichPlayer, string param1, string param2, boolean param3, integer param4, integer param5, integer param6 returns real
return 0.
endfunction
function V1 takes unit Iv,item O8 returns nothing
call DisableTrigger(VW)
call UnitRemoveItemSwapped(O8,Iv)
call EnableTrigger(VW)
endfunction
function V3 takes trigger Jv,integer Jw,integer Jx returns nothing
if Jv==null then
return
endif
call DzTriggerRegisterKeyEvent(Jv,Jx,Jw,true,null)
endfunction
function WD takes string KT returns string
return RequestExtraStringData(36,GetLocalPlayer(),KT,null,false,0,0,0)
endfunction
function WQ takes player J1,string KT,integer JH returns nothing
set KT="I"+KT
call DzAPI_Map_SaveServerValue(J1,KT,I2S(JH))
set KT=null
set J1=null
endfunction
function WR takes player J1,string KT returns integer
local integer JH
set KT="I"+KT
set JH=S2I(DzAPI_Map_GetServerValue(J1,KT))
set KT=null
set J1=null
return JH
endfunction
function Wy takes nothing returns nothing
endfunction
function Wz takes nothing returns nothing
set GH=GetRandomInt(1,14)
if GH==1 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead霜冻新星")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304E,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),GetUnitFacing(GetTriggerUnit())),"frostnova",GetSpellTargetUnit())
return
elseif GH==2 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead困缚")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304E,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),GetUnitFacing(GetTriggerUnit())),"entanglingroots",GetSpellTargetUnit())
return
elseif GH==3 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead封魔")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304E,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),GetUnitFacing(GetTriggerUnit())),"soulburn",GetSpellTargetUnit())
return
elseif GH==4 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead冰冻")
call IssueTargetOrderById(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304D,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),0),852095,GetSpellTargetUnit())
return
elseif GH==5 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead冰封")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304E,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit())),"impale",GetSpellTargetUnit())
return
elseif GH==6 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead闪电链")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304E,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),GetUnitFacing(GetTriggerUnit())),"chainlightning",GetSpellTargetUnit())
return
elseif GH==7 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead叉状闪电")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304E,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),GetUnitFacing(GetTriggerUnit())),"forkedlightning",GetSpellTargetUnit())
return
elseif GH==8 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead地火")
call IssuePointOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304F,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit())),"carrionswarm",GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
return
elseif GH==9 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead冲击波")
call IssuePointOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304F,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit())),"shockwave",GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
return
elseif GH==10 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead火焰吐息")
call IssuePointOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304F,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit())),"breathoffire",GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()))
return
elseif GH==11 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead减速")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304F,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),GetUnitFacing(GetTriggerUnit())),"slow",GetSpellTargetUnit())
return
elseif GH==12 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead残废")
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304F,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),GetUnitFacing(GetTriggerUnit())),"cripple",GetSpellTargetUnit())
return
elseif GH==13 then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"发动随机技能:|cffffdead雷霆一击")
call IssueImmediateOrderById(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304F,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),0),852253)
return
elseif GH==14 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(GetTriggerUnit()),$6530304F,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),GetUnitFacing(GetTriggerUnit())),"manaburn",GetSpellTargetUnit())
endif
endfunction
function W0 takes nothing returns nothing
set VX[1]=31
set VX[2]=28
set VX[3]=31
set VX[4]=30
set VX[5]=31
set VX[6]=30
set VX[7]=31
set VX[8]=31
set VX[9]=30
set VX[10]=31
set VX[11]=30
set VX[12]=31
set VY[0]="日"
set VY[1]="一"
set VY[2]="二"
set VY[3]="三"
set VY[4]="四"
set VY[5]="五"
set VY[6]="六"
endfunction
function W1 takes integer Vh,integer Vi returns integer
local integer Vj=Vh-Vh/Vi*Vi
if Vj<0 then
set Vj=Vj+Vi
endif
return Vj
endfunction
function W3 takes integer Iu returns boolean
if W1(Iu,4)==0 then
if W1(Iu,100)==0 then
if W1(Iu,400)==0 then
return true
else
return false
endif
endif
return true
endif
return false
endfunction
function W4 takes integer Iu,integer Vm,integer Vg returns nothing
local boolean Vn=W3(Iu)
local real Vo=I2R(Vm)/(24*60*60)
local integer Vp=R2I(Vo*1.)
local integer Vr=0
local integer Vq=1
if Vo-I2R(Vp)>0 then
set Vp=Vp+1
endif
if Vp==0 then
set Vp=1
endif
set Vg=Vg+Vp
loop
exitwhen Vq>12
if Vn and Vq==2 then
set Vr=VX[Vq]+1
else
set Vr=VX[Vq]
endif
if Vp<=Vr then
set HU=Iu
set HV=Vq
set HW=Vp
set HX=W1(R2I(Vm/(60*60)*1.),24)
set HY=W1(R2I(Vm/60*1.),60)
set HZ=W1(Vm,60)
set Vq=100
endif
set Vq=Vq+1
set Vp=Vp-Vr
endloop
set Ha=W1(W1(Vg,7)+Vs,7)
endfunction
function W5 takes integer Va returns nothing
local integer Ve=Va-Vb+Vc
local integer Iu=2016
local integer Vd=0
local integer Vg=0
local integer Vf=0
loop
exitwhen Iu>3000
set Vd=Ve
set Vf=Vg
if W3(Iu) then
set Ve=Ve-Vk
set Vg=Vg+366
else
set Ve=Ve-Vl
set Vg=Vg+365
endif
if Ve<0 then
call W4(Iu,Vd,Vf)
set Iu=10000
endif
set Iu=Iu+1
endloop
endfunction
function W7 takes nothing returns nothing
set VZ=VZ+1
call W5(VZ)
endfunction
function W8 takes nothing returns nothing
local timer CS=CreateTimer()
call W0()
set VZ=DzAPI_Map_GetGameStartTime()
call W5(VZ)
call TimerStart(CS,1,true,function W7)
set CS=null
endfunction
function W9 takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
call RemoveUnit(LoadUnitHandle(Ia,Ix,$C0EA83B6))
call DestroyTimer(GetExpiredTimer())
call FlushChildHashtable(Ia,Ix)
endfunction
// 马甲技能函数
function XB takes integer JX,integer JY,integer JZ,integer Ja,real It,real Iu,real Im,real Jb returns unit
local timer CS
if JY<=0 or JY==$65306D6A then
set bj_lastCreatedUnit=CreateUnit(Player(JX),$65303939,It,Iu,Im)
else
set bj_lastCreatedUnit=CreateUnit(Player(JX),JY,It,Iu,Im)
endif
if JZ!=0 and JZ!=$41303030 and Ja!=0 then
call UnitAddAbility(bj_lastCreatedUnit,JZ)
call SetUnitAbilityLevel(bj_lastCreatedUnit,JZ,Ja)
endif
if Jb!=0 then
set CS=CreateTimer()
call UnitApplyTimedLife(bj_lastCreatedUnit,$42544C46,Jb+.1)
call SaveUnitHandle(Ia,GetHandleId(CS),$C0EA83B6,bj_lastCreatedUnit)
call TimerStart(CS,Jb,false,function W9)
endif
set CS=null
return bj_lastCreatedUnit
endfunction


function XE takes nothing returns boolean
local integer FN=GetDestructableTypeId(GetFilterDestructable())
if FN==$4C546C74 or FN==$41547472 or FN==$42547477 or FN==$4B547477 or FN==$59546674 or FN==$4A546374 or FN==$59547374 or FN==$59546374 or FN==$59547774 or FN==$4A547477 or FN==$44547368 or FN==$46547477 or FN==$43547472 or FN==$49547477 or FN==$4E547477 or FN==$4F547477 or FN==$5A547477 or FN==$57547374 or FN==$47547368 or FN==$56546C74 or FN==$57547477 or FN==$41547463 or FN==$42547463 or FN==$43547463 or FN==$49547463 or FN==$4E547463 or FN==$5A547463 then
return true
endif
if not FO then
if FN==$59546662 or FN==$59546663 then
set FP=true
return false
endif
if FQ then
if FN==$59546162 or FN==$59546163 then
set FP=true
endif
else
if FN==$59547062 or FN==$59547063 then
set FP=true
endif
endif
endif
return false
endfunction
function XF takes nothing returns nothing
local destructable Iz=GetEnumDestructable()
if R2==1 then
if GetWidgetLife(Iz)>.405 then
call KillDestructable(Iz)
endif
elseif R2==2 and GetWidgetLife(Iz)>.405 then
set FP=true
endif
set Iz=null
endfunction
function XG takes unit CE returns boolean
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and not IsUnitHidden(CE) then
if IsUnitEnemy(CE,GetOwningPlayer(Rt)) then
if IsUnitType(CE,UNIT_TYPE_STRUCTURE) then
if not Ru then
set FP=true
endif
elseif not Rv then
set FP=true
endif
return true
endif
endif
return false
endfunction
function XH takes nothing returns boolean
local integer FZ
local real Ii
set R5=GetFilterUnit()
if not IsUnitInGroup(R5,Rz) and R5!=Rt and R5!=Rs then
if not FP and XG(R5) then
call GroupAddUnit(Rz,R5)
set FZ=GetHandleId(GetExpiredTimer())
set Ii=LoadReal(B,FZ,19)
if Ii>0 and Rr then
call UnitDamageTarget(Rs,R5,Ii,false,false,ConvertAttackType(5),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
endif
set FZ=1
loop
exitwhen FZ>R6
if IsTriggerEnabled(R7[FZ]) then
if TriggerEvaluate(R7[FZ]) then
call TriggerExecute(R7[FZ])
endif
endif
set FZ=FZ+1
endloop
call DestroyEffect(AddSpecialEffect(R4,GetUnitX(R5),GetUnitY(R5)))
return true
endif
endif
set R5=null
return false
endfunction
function XI takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer KT=GetHandleId(CS)
local boolean Rp=LoadBoolean(B,KT,5)
local real Rh=LoadReal(B,KT,4)
local real Rf=LoadReal(B,KT,3)-.02
local real Rx
local real Ry
local string Rn=LoadStr(B,KT,10)
local group I2=CreateGroup()
local real R0
local real R1
local real Rd
local real Re
local rect R3
local integer FZ
local real Rq=LoadReal(B,KT,17)
local real Rg=LoadReal(B,KT,18)
local unit Rc=LoadUnitHandle(B,KT,20)
set Rr=Rc!=null
set Rs=Rc
set Rt=LoadUnitHandle(B,KT,1)
set Ru=LoadBoolean(B,KT,8)
set Rv=LoadBoolean(B,KT,7)
set Rw=LoadUnitHandle(B,KT,2)
set FP=false
set FQ=IsUnitType(Rt,UNIT_TYPE_FLYING)
set FO=LoadBoolean(B,KT,9)
if Rp then
set Rx=GetUnitX(Rw)
set Ry=GetUnitY(Rw)
else
set Rx=LoadReal(B,KT,13)
set Ry=LoadReal(B,KT,14)
endif
set Rz=LoadGroupHandle(B,KT,16)
set R0=Rx-GetUnitX(Rt)
set R1=Ry-GetUnitY(Rt)
set Re=SquareRoot(R0*R0+R1*R1)
if Rf<Rg or Re<30 then
set FP=true
endif
if HaveSavedReal(B,KT,15) then
set Re=LoadReal(B,KT,15)
set Rd=LoadReal(B,KT,20)
else
set Rd=bj_RADTODEG*Atan2(R1,R0)
set Re=Re*(Rg/Rf)*2
endif
if not FP then
set Rx=GetUnitX(Rt)+Re*Cos(Rd*bj_DEGTORAD)
set Ry=GetUnitY(Rt)+Re*Sin(Rd*bj_DEGTORAD)
set Rx=RMinBJ(RMaxBJ(Rx,FR[1]),FR[3])
set Ry=RMinBJ(RMaxBJ(Ry,FR[2]),FR[4])
if not FO and IsTerrainPathable(Rx,Ry,PATHING_TYPE_WALKABILITY) then
set FP=true
else
set R2=LoadInteger(B,KT,6)
set R3=LoadRectHandle(B,KT,15)
call MoveRectTo(R3,Rx,Ry)
call EnumDestructablesInRect(R3,FM,function XF)
set R3=null
endif
set R4=LoadStr(B,KT,12)
if not FP then
call SetUnitX(Rt,Rx)
call SetUnitY(Rt,Ry)
call DestroyEffect(AddSpecialEffect(Rn,Rx,Ry))
call GroupEnumUnitsInRange(I2,Rx,Ry,Rh,Condition(function XH))
endif
endif
if FP then
set FZ=1
loop
exitwhen FZ>R8
if IsTriggerEnabled(R9[FZ]) then
if TriggerEvaluate(R9[FZ]) then
call TriggerExecute(R9[FZ])
endif
endif
set FZ=FZ+1
endloop
call DestroyTimer(CS)
call RemoveRect(LoadRectHandle(B,KT,15))
call DestroyGroup(Rz)
call FlushChildHashtable(B,KT)
endif
call DestroyGroup(I2)
call SaveReal(B,KT,3,Rf)
set CS=null
set Rc=null
set Rr=false
set Rt=null
set Rw=null
set Rs=null
set Rz=null
set FP=false
set I2=null
endfunction
function XL takes unit Rc,real Rd,real Re,real Rf,real Rg,real Rh,real Ii,unit Ri,integer Rj,boolean Rk,boolean Rl,boolean Rm,string Rn,string Ro returns nothing
local timer CS=CreateTimer()
local integer KT=GetHandleId(CS)
call SaveUnitHandle(B,KT,1,Rc)
call SaveReal(B,KT,3,Rf)
call SaveReal(B,KT,4,Rh)
call SaveReal(B,KT,17,Rf)
call SaveReal(B,KT,18,Rg)
call SaveReal(B,KT,19,Ii)
call SaveUnitHandle(B,KT,20,Ri)
call SaveInteger(B,KT,6,Rj)
call SaveBoolean(B,KT,9,Rm)
call SaveBoolean(B,KT,7,Rk)
call SaveBoolean(B,KT,8,Rl)
call SaveRectHandle(B,KT,15,Rect(-Rh,-Rh,Rh,Rh))
call SaveStr(B,KT,10,Rn)
call SaveStr(B,KT,12,Ro)
call SaveReal(B,KT,20,Rd)
call SaveReal(B,KT,15,Re/(Rf/Rg))
call SaveGroupHandle(B,KT,16,CreateGroup())
call TimerStart(CS,Rg,true,function XI)
set SB=KT
call SaveTimerHandle(B,KT,0,CS)
set CS=null
endfunction
function XO takes nothing returns nothing
set FM=Filter(function XE)
set FR[1]=GetCameraBoundMinX()-GetCameraMargin(CAMERA_MARGIN_LEFT)
set FR[2]=GetCameraBoundMinY()-GetCameraMargin(CAMERA_MARGIN_BOTTOM)
set FR[3]=GetCameraBoundMaxX()+GetCameraMargin(CAMERA_MARGIN_RIGHT)
set FR[4]=GetCameraBoundMaxY()+GetCameraMargin(CAMERA_MARGIN_TOP)
endfunction
function XP takes nothing returns nothing
local group KB
local unit KC
local integer Oe
local integer Sf=0
local integer Se=0
local integer Sg=0
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,9794.,-4409.,999.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitAlly(KC,Player(8))==true and GetUnitState(KC,ConvertUnitState(0))>.405 then
set Se=Se+1
if HG[GetPlayerId(GetOwningPlayer(KC))+1]==true then
set Sf=1
endif
elseif GetUnitState(KC,ConvertUnitState(0))>.405 then
set Sg=Sg+1
endif
endloop
call DestroyGroup(KB)
if Sg<12 then
if Sf>0 then
set Oe=1
loop
exitwhen Oe>8
call CreateUnit(Player(9),N7[G5],9820.,-4380.,bj_UNIT_FACING)
set Oe=Oe+1
endloop
else
set Oe=1
loop
exitwhen Oe>6
call CreateUnit(Player(9),N7[G5],9820.,-4380.,bj_UNIT_FACING)
set Oe=Oe+1
endloop
endif
else
endif
set KB=null
set KC=null
endfunction
function XQ takes nothing returns nothing
set FS=InitHashtable()
set FT=InitHashtable()
endfunction
function XR takes unit CE,integer JE,integer Ji returns real
return EXGetAbilityState(EXGetUnitAbility(CE,JE),Ji)
endfunction
function XV takes unit CE,integer JE,integer Ji,real JH returns boolean
return EXSetAbilityState(EXGetUnitAbility(CE,JE),Ji,JH)
endfunction
function XX takes unit CE,integer JE,integer JF,integer JG,real JH returns boolean
return EXSetAbilityDataReal(EXGetUnitAbility(CE,JE),JF,JG,JH)
endfunction
function XY takes unit CE,integer JE,integer JF,integer JG,string JH returns boolean
return EXSetAbilityDataString(EXGetUnitAbility(CE,JE),JF,JG,JH)
endfunction
function XZ takes unit CE,integer JE,integer K6 returns nothing
call UnitAddAbility(CE,JE)
call EXSetAbilityDataInteger(EXGetUnitAbility(CE,JE),1,K7,GetUnitTypeId(CE))
call EXSetAbilityAEmeDataA(EXGetUnitAbility(CE,JE),GetUnitTypeId(CE))
call UnitRemoveAbility(CE,JE)
call UnitAddAbility(CE,JE)
call EXSetAbilityAEmeDataA(EXGetUnitAbility(CE,JE),K6)
call UnitRemoveAbility(CE,JE)
endfunction
function Z9 takes unit SJ,unit LI returns real
return SquareRoot((GetUnitX(SJ)-GetUnitX(LI))*(GetUnitX(SJ)-GetUnitX(LI))+(GetUnitY(SJ)-GetUnitY(LI))*(GetUnitY(SJ)-GetUnitY(LI)))
endfunction
function aD takes unit CE returns nothing
call UnitAddAbility(CE,$416D7266)
call UnitRemoveAbility(CE,$416D7266)
endfunction
function aL takes unit Ij,integer JV returns nothing
local integer FZ=0
loop
exitwhen FZ>=Uo
if Up[FZ]==JV then
set Uq=Ij
if Ur[FZ]!=null and TriggerEvaluate(Ur[FZ]) and IsTriggerEnabled(Ur[FZ]) then
call TriggerExecute(Ur[FZ])
endif
endif
set FZ=FZ+1
endloop
endfunction
function aY takes nothing returns boolean
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,30,"|cFF1E90FF当前编辑器版本为： |r|cFF00FF00YDWE 0.0.0.0")
return false
endfunction
function aZ takes nothing returns nothing
local trigger CS=CreateTrigger()
local integer FZ=0
loop
exitwhen FZ==12
call TriggerRegisterPlayerChatEvent(CS,Player(FZ),"YDWE Version",true)
set FZ=FZ+1
endloop
call TriggerAddCondition(CS,Condition(function aY))
set CS=null
endfunction
function aa takes nothing returns nothing
set FS=InitHashtable()
set FU=GetCameraBoundMinX()-GetCameraMargin(CAMERA_MARGIN_LEFT)
set FV=GetCameraBoundMinY()-GetCameraMargin(CAMERA_MARGIN_BOTTOM)
set FW=GetCameraBoundMaxX()+GetCameraMargin(CAMERA_MARGIN_RIGHT)
set FX=GetCameraBoundMaxY()+GetCameraMargin(CAMERA_MARGIN_TOP)
set FY[0]="|cFFFF0303"
set FY[1]="|cFF0042FF"
set FY[2]="|cFF1CE6B9"
set FY[3]="|cFF540081"
set FY[4]="|cFFFFFC01"
set FY[5]="|cFFFE8A0E"
set FY[6]="|cFF20C000"
set FY[7]="|cFFE55BB0"
set FY[8]="|cFF959697"
set FY[9]="|cFF7EBFF1"
set FY[10]="|cFF106246"
set FY[11]="|cFF4E2A04"
set FY[12]="|cFF282828"
set FY[13]="|cFF282828"
set FY[14]="|cFF282828"
set FY[15]="|cFF282828"
call aZ()
endfunction
function ai takes player J1 returns force
local force J2=CreateForce()
call ForceAddPlayer(J2,J1)
set J3=J2
set J2=null
return J3
endfunction
function aj takes unit I6,integer JU returns item
local integer JV=0
loop
set M1=UnitItemInSlot(I6,JV)
if GetItemTypeId(M1)==JU then
return M1
endif
set JV=JV+1
exitwhen JV>=bj_MAX_INVENTORY
endloop
return null
endfunction
function ak takes player J1 returns force
local force J2=CreateForce()
call ForceEnumAllies(J2,J1,null)
set J3=J2
set J2=null
return J3
endfunction
function al takes boolexpr Jz returns force
local force J2=CreateForce()
call ForceEnumPlayers(J2,Jz)
call DestroyBoolExpr(Jz)
set J3=J2
set J2=null
return J3
endfunction
function am takes nothing returns nothing
if bj_randomSubGroupWant>0 then
if bj_randomSubGroupWant>=bj_randomSubGroupTotal or GetRandomInt(1,bj_randomSubGroupTotal)<=bj_randomSubGroupWant then
call GroupAddUnit(bj_randomSubGroupGroup,GetEnumUnit())
set bj_randomSubGroupWant=bj_randomSubGroupWant-1
endif
endif
set bj_randomSubGroupTotal=bj_randomSubGroupTotal-1
endfunction
function an takes real PX,location PY,boolexpr Jz returns group
local group I2=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(I2,PY,PX,Jz)
call DestroyBoolExpr(Jz)
set J0=I2
set I2=null
return J0
endfunction
function ao takes rect JT,boolexpr Jz returns group
local group I2=CreateGroup()
call GroupEnumUnitsInRect(I2,JT,Jz)
call DestroyBoolExpr(Jz)
set J0=I2
set I2=null
return J0
endfunction
function ap takes rect JT,player J1 returns group
local group I2=CreateGroup()
set bj_groupEnumOwningPlayer=J1
call GroupEnumUnitsInRect(I2,JT,filterGetUnitsInRectOfPlayer)
set J0=I2
set I2=null
return J0
endfunction
function aq takes player J1,boolexpr Jz returns group
local group I2=CreateGroup()
call GroupEnumUnitsOfPlayer(I2,J1,Jz)
call DestroyBoolExpr(Jz)
set J0=I2
set I2=null
return J0
endfunction
function at takes multiboard Sl,integer Sm,integer Sn,boolean St,boolean Su returns nothing
local integer Sq=0
local integer Sr=0
local integer So=MultiboardGetRowCount(Sl)
local integer Sp=MultiboardGetColumnCount(Sl)
local multiboarditem Ss=null
loop
set Sq=Sq+1
exitwhen Sq>So
if Sn==0 or Sn==Sq then
set Sr=0
loop
set Sr=Sr+1
exitwhen Sr>Sp
if Sm==0 or Sm==Sr then
set Ss=MultiboardGetItem(Sl,Sq-1,Sr-1)
call MultiboardSetItemStyle(Ss,St,Su)
call MultiboardReleaseItem(Ss)
endif
endloop
endif
endloop
set Ss=null
endfunction
function au takes multiboard Sl,integer Sm,integer Sn,string Iw returns nothing
local integer Sq=0
local integer Sr=0
local integer So=MultiboardGetRowCount(Sl)
local integer Sp=MultiboardGetColumnCount(Sl)
local multiboarditem Ss=null
loop
set Sq=Sq+1
exitwhen Sq>So
if Sn==0 or Sn==Sq then
set Sr=0
loop
set Sr=Sr+1
exitwhen Sr>Sp
if Sm==0 or Sm==Sr then
set Ss=MultiboardGetItem(Sl,Sq-1,Sr-1)
call MultiboardSetItemValue(Ss,Iw)
call MultiboardReleaseItem(Ss)
endif
endloop
endif
endloop
set Ss=null
endfunction
function av takes multiboard Sl,integer Sm,integer Sn,real Sv returns nothing
local integer Sq=0
local integer Sr=0
local integer So=MultiboardGetRowCount(Sl)
local integer Sp=MultiboardGetColumnCount(Sl)
local multiboarditem Ss=null
loop
set Sq=Sq+1
exitwhen Sq>So
if Sn==0 or Sn==Sq then
set Sr=0
loop
set Sr=Sr+1
exitwhen Sr>Sp
if Sm==0 or Sm==Sr then
set Ss=MultiboardGetItem(Sl,Sq-1,Sr-1)
call MultiboardSetItemWidth(Ss,Sv/100.)
call MultiboardReleaseItem(Ss)
endif
endloop
endif
endloop
set Ss=null
endfunction
function aw takes boolean OK returns nothing
local integer JV
local player OL
local group I2
set bj_pauseAllUnitsFlag=OK
set I2=CreateGroup()
set JV=0
loop
set OL=Player(JV)
if GetPlayerController(OL)==MAP_CONTROL_COMPUTER then
call PauseCompAI(OL,OK)
endif
call GroupEnumUnitsOfPlayer(I2,OL,null)
call ForGroup(I2,function PauseAllUnitsBJEnum)
call GroupClear(I2)
set JV=JV+1
exitwhen JV==bj_MAX_PLAYER_SLOTS
endloop
call DestroyGroup(I2)
set I2=null
endfunction
function ay takes real LO returns nothing
local timer CS
local real MM
if LO>0 then
set CS=CreateTimer()
call TimerStart(CS,LO,false,null)
loop
set MM=TimerGetRemaining(CS)
exitwhen MM<=0
if MM>bj_POLLED_WAIT_SKIP_THRESHOLD then
call TriggerSleepAction(.1*MM)
else
call TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)
endif
endloop
call DestroyTimer(CS)
endif
set CS=null
endfunction
function az takes unit I6,location P8,real LO returns nothing
local location P9=GetUnitLoc(I6)
call SetUnitFacingTimed(I6,AngleBetweenPoints(P9,P8),LO)
call RemoveLocation(P9)
set P9=null
endfunction
function a0 takes nothing returns nothing
local integer FZ=0
loop
exitwhen FZ>=L3
if L5[FZ]!=null and IsTriggerEnabled(L5[FZ]) and TriggerEvaluate(L5[FZ]) then
call TriggerExecute(L5[FZ])
endif
set FZ=FZ+1
endloop
endfunction
function a1 takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(),$416C6F63)<=0 then
call TriggerRegisterUnitEvent(L4,GetFilterUnit(),EVENT_UNIT_DAMAGED)
endif
return false
endfunction
function a2 takes nothing returns nothing
local group I2=CreateGroup()
local integer FZ=0
loop
call GroupEnumUnitsOfPlayer(I2,Player(FZ),Condition(function a1))
set FZ=FZ+1
exitwhen FZ>=bj_MAX_PLAYER_SLOTS
endloop
call DestroyGroup(I2)
set I2=null
endfunction
function a3 takes nothing returns nothing
local trigger CS=CreateTrigger()
local region JT=CreateRegion()
local rect L6=GetWorldBounds()
call RegionAddRect(JT,L6)
call TriggerRegisterEnterRegion(CS,JT,Condition(function a1))
call RemoveRect(L6)
set CS=null
set JT=null
set L6=null
endfunction
function a4 takes nothing returns nothing
local boolean L9=IsTriggerEnabled(L4)
local group I2=CreateGroup()
call DisableTrigger(L4)
if MB!=null then
call DestroyTrigger(MB)
endif
set MB=L4
set L4=CreateTrigger()
if not L9 then
call DisableTrigger(L4)
endif
call TriggerAddAction(L4,function a0)
call a2()
endfunction
function a5 takes trigger Jv returns nothing
if Jv==null then
return
endif
if L3==0 then
set L4=CreateTrigger()
call TriggerAddAction(L4,function a0)
call a2()
call a3()
if L7 then
call TimerStart(CreateTimer(),L8,true,function a4)
endif
endif
set L5[L3]=Jv
set L3=L3+1
endfunction
function a9 takes trigger KJ,rect JT returns event
local region NQ=CreateRegion()
call RegionAddRect(NQ,JT)
set NR=NQ
set NQ=null
return TriggerRegisterEnterRegion(KJ,NR,null)
endfunction
function bB takes trigger KJ,rect JT returns event
local region NQ=CreateRegion()
call RegionAddRect(NQ,JT)
set NR=NQ
set NQ=null
return TriggerRegisterLeaveRegion(KJ,NR,null)
endfunction
function bC takes unit I6,integer JU returns boolean
local integer JV=0
if JU!=0 then
loop
if GetItemTypeId(UnitItemInSlot(I6,JV))==JU then
return true
endif
set JV=JV+1
exitwhen JV>=bj_MAX_INVENTORY
endloop
endif
return false
endfunction

// 范围眩晕事件
function range_stunEffect takes unit Ij, real It, real Iu, real Iy, real Iz,boolean self returns nothing
    // Ij单位，It、Iu单位坐标、Iy技能范围，Iz持续时间，
local unit CE
local group I2=CreateGroup()
 local timer stunTime = CreateTimer()
call GroupEnumUnitsInRange(I2,It,Iu,Iy,null)

loop
set CE=FirstOfGroup(I2)
call GroupAddUnit(StunGroup,CE)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
// 如果是以自身为
if self ==true and Ij != CE and GetUnitState(CE, UNIT_STATE_LIFE) > .405 and IsUnitEnemy(CE, GetOwningPlayer(Ij)) == true and IsUnitType(CE, UNIT_TYPE_STRUCTURE) == false and GetUnitTypeId(CE) != GetUnitTypeId(she) then
    // 眩晕时间
// call DisplayTextToPlayer(GetOwningPlayer(Ij), 0, 0, "|cffff0000范围眩晕|r")
if bC(Ij, 'it0r') == true then
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ij)),$65303939,$41623261,1,GetUnitX(Ij),GetUnitY(Ij),bj_UNIT_FACING,3),852095,CE)
else
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ij)),$65303939,$41623071,1,GetUnitX(Ij),GetUnitY(Ij),bj_UNIT_FACING,3),852095,CE)
endif
endif

if self ==false and Ij != CE and GetUnitState(CE, UNIT_STATE_LIFE) > .405 and IsUnitEnemy(CE, GetOwningPlayer(Ij)) == true and IsUnitType(CE, UNIT_TYPE_STRUCTURE) == false and GetUnitTypeId(CE) != GetUnitTypeId(she) then
    // 眩晕时间
// call DisplayTextToPlayer(GetOwningPlayer(Ij), 0, 0, "|cffff0000范围眩晕|r")
if bC(Ij, 'it0r') == true then
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ij)),$65303939,$41623261,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)
else
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ij)),$65303939,$41623071,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)
endif
endif

endloop

set CE=null
call DestroyGroup(I2)
set I2=null
endfunction











    // 心之钢对应事件
function XinzhigangAttack takes nothing returns nothing
local unit CE
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
// 如果角色没带心之钢，则直接销毁计时器
if bC(Iv,$69743069)==false then
    // call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00销毁定时器！" )
    call DestroyTimer(CS)
    // call SaveReal(FS,GetHandleId(Iv),$130B62E2,0.)
    // 重新设置射程
    call SetUnitState(Iv, ConvertUnitState(22), LoadReal(FS,GetHandleId(Iv),$130B62E5))
    call SaveReal(FS,GetHandleId(Iv),$130B62E5,0.)
    return
endif
// 如果倒计时时间已经就绪
if LoadReal(FS,GetHandleId(Iv),$130B62E2)<=0. then
    // call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00心之钢已准备就绪！" )
    // 如果心之钢已经冷却好
    if LoadBoolean(FS,GetHandleId(Iv),$130B62E4) ==true then
        //  call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00心之钢已准备就绪2！" )
    else
     // 如果心之钢还没冷却好 
     call SaveBoolean(FS,GetHandleId(Iv),$130B62E4,true) 
    //  set xinZhiGangReady = true
    // 下次攻击射程+300
    call SetUnitState(Iv, ConvertUnitState(22), 300 + LoadReal(FS,GetHandleId(Iv),$130B62E5))
    call SaveReal(FS,GetHandleId(Iv),$130B62E2,0.)
    endif

else
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00心之钢冷却剩余：" + R2S(LoadReal(FS,GetHandleId(Iv),$130B62E2)))
//   set xinZhiGangReady = false
  call SaveBoolean(FS,GetHandleId(Iv),$130B62E4,false) 
//   重新设置射程
  call SetUnitState(Iv,ConvertUnitState(22),LoadReal(FS,GetHandleId(Iv),$130B62E5))
  call XV(Iv,$41623167,1,LoadReal(FS,GetHandleId(Iv),$130B62E2))
 call SaveReal(FS,GetHandleId(Iv),$130B62E2,LoadReal(FS,GetHandleId(Iv),$130B62E2)-.1)   
endif

//  call SaveReal(FS,GetHandleId(Iv),$130B62E2,LoadReal(FS,GetHandleId(Iv),$130B62E2)-.1) 
endfunction

function conditionXinzhigang takes nothing returns boolean 
return bC(GetTriggerUnit(), $69743069) == true and GetItemTypeId(GetManipulatedItem()) == $69743069 and LoadReal(FS, GetHandleId(GetTriggerUnit()), $130B62E5) == 0.
endfunction

function computeXinzhigang takes nothing returns nothing
local timer CS
local integer Ix=0
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00捡起心之钢：" )
call SaveUnitHandle(Ia, Ix, 0, GetTriggerUnit())
// 重新计算心之钢冷却时间
// call SaveReal(FS,GetHandleId(GetTriggerUnit()),$130B62E2,30.)
// 重新计算当前最大生命值
call SaveReal(FS,GetHandleId(GetTriggerUnit()),$130B62E3, GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_LIFE))
// 重新设置心之钢冷却为未完成
call SaveBoolean(FS,GetHandleId(GetTriggerUnit()),$130B62E4,false)
// 重新设置心之钢角色射程
call SaveReal(FS, GetHandleId(GetTriggerUnit()), $130B62E5, GetUnitState(GetTriggerUnit(),ConvertUnitState(22)))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00初始射程！" + R2S(LoadReal(FS, GetHandleId(GetTriggerUnit()), $130B62E5)))
call TimerStart(CS,.1,true,function XinzhigangAttack)
endfunction

function registerXinzhigang takes nothing returns nothing
set XinZhiGangTrigger=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(XinZhiGangTrigger,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(XinZhiGangTrigger,Condition(function conditionXinzhigang))
call TriggerAddAction(XinZhiGangTrigger,function computeXinzhigang)
endfunction


function bH takes real Px,real Py,real JP,real JQ returns real
return bj_RADTODEG*Atan2(JQ-Py,JP-Px)
endfunction
function bI takes real Px,real Py,real JP,real JQ returns real
return SquareRoot((JP-Px)*(JP-Px)+(JQ-Py)*(JQ-Py))
endfunction
function bL takes real Px,real Py,real JP,real JQ returns real
return bj_RADTODEG*Atan2(JQ-Py,JP-Px)
endfunction
function bM takes real Px,real Py,real JP,real JQ returns real
return SquareRoot((JP-Px)*(JP-Px)+(JQ-Py)*(JQ-Py))
endfunction
function bN takes unit JK,unit JL returns real
return bj_RADTODEG*Atan2(GetUnitY(JL)-GetUnitY(JK),GetUnitX(JL)-GetUnitX(JK))
endfunction
function bO takes unit JK,unit JL returns real
return SquareRoot((GetUnitX(JL)-GetUnitX(JK))*(GetUnitX(JL)-GetUnitX(JK))+(GetUnitY(JL)-GetUnitY(JK))*(GetUnitY(JL)-GetUnitY(JK)))
endfunction
function bP takes unit CE,real It,real Iu returns real
return SquareRoot((It-GetUnitX(CE))*(It-GetUnitX(CE))+(Iu-GetUnitY(CE))*(Iu-GetUnitY(CE)))
endfunction
function bQ takes unit JK,real It,real Iu returns real
return bj_RADTODEG*Atan2(Iu-GetUnitY(JK),It-GetUnitX(JK))
endfunction
function bR takes unit CE,real Im,real In returns nothing
local real It=GetUnitX(CE)+In*Cos(Im*bj_DEGTORAD)
local real Iu=GetUnitY(CE)+In*Sin(Im*bj_DEGTORAD)
call SetUnitPosition(CE,It,Iu)
endfunction
function bS takes unit CE,real It,real Iu,real Im,real In returns nothing
local real QH=It+In*Cos(Im*bj_DEGTORAD)
local real QI=Iu+In*Sin(Im*bj_DEGTORAD)
call SetUnitPosition(CE,QH,QI)
endfunction
function bT takes real Px,real Py,real JP,real JQ returns real
return bj_RADTODEG*Atan2(JQ-Py,JP-Px)
endfunction
function bU takes real Px,real Py,real JP,real JQ returns real
return SquareRoot((JP-Px)*(JP-Px)+(JQ-Py)*(JQ-Py))
endfunction
function bV takes unit CE,real It,real Iu,real Im,real In returns nothing
local real QL=RMinBJ(RMaxBJ((It+In*Cos(Im*bj_DEGTORAD))*1.,QJ),QK)
local real QO=RMinBJ(RMaxBJ((Iu+In*Sin(Im*bj_DEGTORAD))*1.,QM),QN)
call SetUnitX(CE,QL)
call SetUnitY(CE,QO)
endfunction
function bW takes unit I6,integer JU returns item
local integer JV=0
loop
exitwhen JV>5
if GetItemTypeId(UnitItemInSlot(I6,JV))==JU then
return UnitItemInSlot(I6,JV)
endif
set JV=JV+1
endloop
return null
endfunction
function bX takes unit CE returns nothing
call UnitAddAbility(CE,$416D7266)
call UnitRemoveAbility(CE,$416D7266)
endfunction
function ba takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Is=GetHandleId(CS)
local unit CE=LoadUnitHandle(Ia,Is,$756E6974)
local integer Ir=GetHandleId(CE)
local integer FZ=LoadInteger(Ia,Ir,$3079756E)-1
call SaveInteger(Ia,Ir,$3079756E,FZ)
if FZ<=0 or GetUnitState(CE,ConvertUnitState(0))<.405 then
call EXPauseUnit(CE,false)
call DestroyEffect(LoadEffectHandle(Ia,Is,$65666668))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Is)
if GetUnitState(CE,ConvertUnitState(0))<=.405 and IsUnitType(CE,UNIT_TYPE_HERO)==false then
call FlushChildHashtable(Ia,GetHandleId(CE))
endif
endif
set CS=null
set CE=null
endfunction
function bb takes unit CE,real Iq returns nothing
local timer CS
local integer Ir=GetHandleId(CE)
local integer Is=0
if GetUnitState(CE,ConvertUnitState(0))<.405 then
set CS=null
return
endif
if LoadInteger(Ia,Ir,$3079756E)>0 then
call SaveInteger(Ia,Ir,$3079756E,IMaxBJ(R2I(Iq*10),LoadInteger(Ia,Ir,$3079756E)))
set CS=null
return
endif
set CS=CreateTimer()
set Is=GetHandleId(CS)
call EXPauseUnit(CE,true)
call SaveUnitHandle(Ia,Is,$756E6974,CE)
call SaveInteger(Ia,Ir,$3079756E,R2I(Iq*10))
call SaveEffectHandle(Ia,Is,$65666668,AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget.mdl",CE,"overhead"))
call TimerStart(CS,.1,true,function ba)
set CS=null
endfunction
function bc takes nothing returns nothing
local integer Is=GetHandleId(GetExpiredTimer())
local real Il=LoadReal(Ia,Is,$30686967)
local integer FZ=LoadInteger(Ia,Is,$30307469)-1
call SaveInteger(Ia,Is,$30307469,FZ)
if LoadReal(Ia,Is,$30646973)>0 then
call bR(LoadUnitHandle(Ia,Is,$756E6974),LoadReal(Ia,Is,$30616E67),LoadReal(Ia,Is,$30646973))
else
call SetUnitPosition(LoadUnitHandle(Ia,Is,$756E6974),GetUnitX(LoadUnitHandle(Ia,Is,$756E6974)),GetUnitY(LoadUnitHandle(Ia,Is,$756E6974)))
endif
if FZ>=LoadInteger(Ia,Is,$646F776E) and LoadUnitHandle(Ia,Is,$756E6974)!=null then
call SetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974),GetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974))+Il,0.)
else
call SetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974),GetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974))-Il,0.)
if FZ<=0 or LoadUnitHandle(Ia,Is,$756E6974)==null then
call SetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974),0,0.)
call UnitRemoveType(LoadUnitHandle(Ia,Is,$756E6974),UNIT_TYPE_GIANT)
call SetUnitPosition(LoadUnitHandle(Ia,Is,$756E6974),GetUnitX(LoadUnitHandle(Ia,Is,$756E6974)),GetUnitY(LoadUnitHandle(Ia,Is,$756E6974)))
call UnitDamageTarget(LoadUnitHandle(Ia,Is,$6865726F),LoadUnitHandle(Ia,Is,$756E6974),LoadReal(Ia,Is,$3064656D),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call DestroyTimer(GetExpiredTimer())
call FlushChildHashtable(Ia,Is)
endif
endif
endfunction
// 被击飞阶段计算
function strikedTime takes nothing returns nothing
local integer Is=GetHandleId(GetExpiredTimer())
local real Il=LoadReal(Ia,Is,$30686967)
local integer FZ=LoadInteger(Ia,Is,$30307469)-1
call SaveInteger(Ia,Is,$30307469,FZ)
if LoadReal(Ia,Is,$30646973)>0 then
call bR(LoadUnitHandle(Ia,Is,$756E6974),LoadReal(Ia,Is,$30616E67),LoadReal(Ia,Is,$30646973))
else
call SetUnitPosition(LoadUnitHandle(Ia,Is,$756E6974),GetUnitX(LoadUnitHandle(Ia,Is,$756E6974)),GetUnitY(LoadUnitHandle(Ia,Is,$756E6974)))
endif
if FZ>=LoadInteger(Ia,Is,$646F776E) and LoadUnitHandle(Ia,Is,$756E6974)!=null then
call SetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974),GetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974))+Il,0.)
else
call SetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974),GetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974))-Il,0.)
if FZ<=0 or LoadUnitHandle(Ia,Is,$756E6974)==null then
call SetUnitFlyHeight(LoadUnitHandle(Ia,Is,$756E6974),0,0.)
call UnitRemoveType(LoadUnitHandle(Ia,Is,$756E6974),UNIT_TYPE_GIANT)
call SetUnitPosition(LoadUnitHandle(Ia,Is,$756E6974),GetUnitX(LoadUnitHandle(Ia,Is,$756E6974)),GetUnitY(LoadUnitHandle(Ia,Is,$756E6974)))
call UnitDamageTarget(LoadUnitHandle(Ia,Is,$6865726F),LoadUnitHandle(Ia,Is,$756E6974),LoadReal(Ia,Is,$3064656D),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call DestroyTimer(GetExpiredTimer())
call FlushChildHashtable(Ia,Is)
endif
endif
endfunction

// 被击飞函数
function striked takes unit Ij,unit CE,integer Ik,real Il,real Im,real In,real Io,real Ip returns nothing
local timer CS
local integer Is=0
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 then
call bb(CE,Ip)
if IsUnitType(CE,UNIT_TYPE_GIANT)==false then
set CS=CreateTimer()
set Is=GetHandleId(CS)
call UnitAddType(CE,UNIT_TYPE_GIANT)
call UnitAddAbility(CE,$41726176)
call UnitRemoveAbility(CE,$41726176)
call SaveUnitHandle(Ia,Is,$6865726F,Ij)
call SaveUnitHandle(Ia,Is,$756E6974,CE)
call SaveInteger(Ia,Is,$30307469,Ik)
call SaveInteger(Ia,Is,$646F776E,Ik/2)
call SaveReal(Ia,Is,$30686967,Il)
call SaveReal(Ia,Is,$30616E67,Im)
call SaveReal(Ia,Is,$30646973,In)
call SaveReal(Ia,Is,$3064656D,Io)
call TimerStart(CS,.03,true,function strikedTime)
endif
endif
set CS=null
endfunction
function bd takes unit Ij,unit CE,integer Ik,real Il,real Im,real In,real Io,real Ip returns nothing
local timer CS
local integer Is=0
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 then
call bb(CE,Ip)
if IsUnitType(CE,UNIT_TYPE_GIANT)==false then
set CS=CreateTimer()
set Is=GetHandleId(CS)
call UnitAddType(CE,UNIT_TYPE_GIANT)
call UnitAddAbility(CE,$41726176)
call UnitRemoveAbility(CE,$41726176)
call SaveUnitHandle(Ia,Is,$6865726F,Ij)
call SaveUnitHandle(Ia,Is,$756E6974,CE)
call SaveInteger(Ia,Is,$30307469,Ik)
call SaveInteger(Ia,Is,$646F776E,Ik/2)
call SaveReal(Ia,Is,$30686967,Il)
call SaveReal(Ia,Is,$30616E67,Im)
call SaveReal(Ia,Is,$30646973,In)
call SaveReal(Ia,Is,$3064656D,Io)
call TimerStart(CS,.03,true,function bc)
endif
endif
set CS=null
endfunction
function bf takes nothing returns integer
local integer Pu=1
loop
exitwhen Gt[Pu]==null
set Pu=Pu+1
endloop
set Gt[Pu]=CreateTimer()
if Pu>IL then
set IL=Pu
endif
return Pu
endfunction
function bg takes timer Pz returns integer
local integer Pu=1
loop
exitwhen Gt[Pu]==Pz
set Pu=Pu+1
endloop
return Pu
endfunction
function bh takes integer Pu returns nothing
call PauseTimer(Gt[Pu])
call DestroyTimer(Gt[Pu])
set Gt[Pu]=null
set Pv[Pu]=null
set Pw[Pu]=null
set MX[Pu]=null
set P1[Pu]=null
endfunction
function bi takes unit JN,unit CE returns boolean
return GetUnitState(CE,UNIT_STATE_LIFE)>0 and IsUnitEnemy(CE,GetOwningPlayer(JN))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false
endfunction
function bj takes unit CE returns boolean
return GetWidgetLife(CE)>.405 and (IsUnitType(CE,UNIT_TYPE_ANCIENT)==false and IsUnitType(CE,UNIT_TYPE_GIANT)==false and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false) and GetUnitDefaultMoveSpeed(CE)>1.
endfunction
function bk takes unit Ij,integer Ik,integer JS returns real
local integer Ix=0
// 额外装备伤害系数，法强系数
local real extra =0
// IJ是伤害来源，IK是技能类型，JS是技能等级
local real JT=I2R(JS*200)
// 如果IK == 0 则设置JT的初始值为英雄单位的三维 *js*0.75+初始JT
if Ik==0 then
set JT=I2R((GetHeroStr(Ij,true)+GetHeroAgi(Ij,true)+GetHeroInt(Ij,true))*JS)*.75+JT
// 力量伤害技能系数
elseif Ik == 1  then
    if IsUnitEnemy(Ij, Player(8)) ==false then
        set JT=I2R(GetHeroStr(Ij,true)*(JS+1))+JT+I2R(JS+1)*.02*GetUnitState(Ij,ConvertUnitState(1))
    else  
        set JT=I2R(GetHeroStr(Ij,true)*(JS+1))

    endif

// set JT=JT*(I2R(GetPlayerTechCount(GetOwningPlayer(Ij),$52686163,true))*.03)+JT
// set extra = extra +I2R(GetPlayerTechCount(GetOwningPlayer(Ij),$52686163,true))*.05

// 敏捷伤害技能系数
elseif Ik==2 then
set JT=I2R(GetHeroAgi(Ij,true)*(JS+1))+JT
// 敏捷英雄每级防御科技增加0.05法强系数
set extra = extra +I2R(GetPlayerTechCount(GetOwningPlayer(Ij),$52686163,true))*.05
// 智力伤害技能系数
elseif Ik==3 then
set JT=I2R(GetHeroInt(Ij,true)*(JS+1))*.9+I2R(JS+1)*.03*GetUnitState(Ij,ConvertUnitState(3))+JT
elseif Ik==4 then
set JT=I2R(GetHeroStr(Ij,true))+I2R(GetHeroAgi(Ij,true))+I2R(GetHeroInt(Ij,true)*(JS+1))*.5+I2R(JS)*.02*GetUnitState(Ij,ConvertUnitState(3))+JT
endif
// call DisplayTextToPlayer(GetOwningPlayer(Ij), 0, 0, "|Cff00ff00基础技能伤害：" + R2S(JT))
// 五虎每级+5%的技能伤害
set JT=JT*(I2R(GetPlayerTechCount(GetOwningPlayer(Ij),$526F7374,true))*.05)+JT
// 攻击科技每级+5%的技能伤害(修改为7%)
// set JT=JT*(I2R(GetPlayerTechCount(GetOwningPlayer(Ij),$52686D65,true))*.05)+JT
set extra = extra +I2R(GetPlayerTechCount(GetOwningPlayer(Ij),$52686D65,true))*.05
// 伏羲琴伤害系数1.1，即10点法强(修改为1.25)

if GetUnitAbilityLevel(Ij,$41303552)>0 then
// set JT=JT*1.15
set extra = extra +0.25
endif
//如果带了的卢
if GetUnitAbilityLevel(Ij,$41304256)>0 then
// set JT=JT*1.2
set extra = extra +0.3
endif
//如果带了烛龙刀
if GetUnitAbilityLevel(Ij,$41623031)>0 then
// set JT=JT*1.8
set extra = extra +1
endif
//如果带了极八蛇矛
if GetUnitAbilityLevel(Ij,$41303042)>0 then
// set JT=JT*1.5
set extra = extra +0.7
endif
//如果带了青钢
if GetUnitAbilityLevel(Ij,$41303735)>0 then
// set JT=JT*1.2
set extra = extra +0.3
endif
// 镇魂套伤害系数1.3
if GetUnitAbilityLevel(Ij,$41303149)>0 then
set extra = extra +0.6
// set JT=JT*1.5
endif
// 自然套伤害1.6
if GetUnitAbilityLevel(Ij,$4130444D)>0 then
set extra = extra +0.6
// set JT=JT*1.4
endif
// 蚩尤套伤害系数1.5
if GetUnitAbilityLevel(Ij,$4130444B)>0 then
    set extra = extra +0.8
// set JT=JT*1.7
endif
// 朱雀修真1.35
if GetUnitAbilityLevel(Ij,$41303458)>0 then 
// set JT=JT*1.3
set extra = extra +0.35
endif
// 自修系数1.3（自改）
if GetUnitAbilityLevel(Ij,$41304238)>0 then
// set JT=JT*1.15
set extra = extra +0.15
endif

// 青龙套伤害系数1.45（存疑，可能被删除）
if GetUnitAbilityLevel(Ij,$4130464E)>0 or GetUnitAbilityLevel(Ij,$41304657)>0 then
// set JT=JT*1.45
set extra = extra +0.8
endif 
// 机关车+30法强
if GetUnitAbilityLevel(Ij,$41303237)>0 then
// set JT=JT*1.5
set extra = extra +0.3
endif
// 朱雀套系数1.5
if GetUnitAbilityLevel(Ij,$41304241)>0 then
// set JT=JT*1.5
set extra = extra +0.6
endif
// 太极阵（姜维Q）、鼎文杖、末日星陨（星彩大招）、剑意（王越）、昊天塔、效果增伤1.2
if GetUnitAbilityLevel(Ij,$41497365)>0 then
// set JT=JT*1.2
set extra = extra +0.2
endif
// 青倚双剑效果
if GetUnitAbilityLevel(Ij, 'Ab4f') > 0  then
set Ix=GetItemCharges(bW(Ij,'it0z'))
set extra = extra + 0.2 + I2R(Ix)*.05
// set JT=JT*(1.05+I2R(Ix)*.05)
endif
//苍玄之书
if bC(Ij, 'it0s') == true then
set extra = extra +0.7
endif 
//羽渡尘
if bC(Ij, 'it0r') == true then
set extra = extra +0.6
endif 
// 七星灯效果增伤 基础1.05 + 每级灯0.05
if GetUnitAbilityLevel(Ij, $41303231) > 0  then
set Ix=GetItemCharges(bW(Ij,$7372746C))
set extra = extra + 0.2 + I2R(Ix)*.07
// set JT=JT*(1.05+I2R(Ix)*.05)
endif

// 自然之力
if bC(Ij, $6974306B) == true then
// call DisplayTextToPlayer(GetOwningPlayer(Ij), 0, 0, "|Cff00ff00自然之怒")
set Ix = LoadInteger(Ia, GetHandleId(Ij), $130B62E6)
// set JT=JT*(1.25+I2R(Ix)*.065)
set extra = extra + 0.5 + I2R(Ix)*.09
endif
// 入魔系数1.1
if GetUnitAbilityLevel(Ij,$4130354E)>0 then
set extra = extra +0.2 
// set JT=JT*1.2
endif
// 升仙系数1.2
if GetUnitAbilityLevel(Ij,$4130354D)>0 then
// set JT=JT*1.3
set extra = extra +0.4 
endif
// 和氏璧等其他法强装系数1.2
if GetUnitAbilityLevel(Ij,$41304542)>0 then
// set JT=JT*1.1
set extra = extra +0.2
endif
// 姜维重修系数每级0.2
if awakeTime>0 then
    if GetUnitTypeId(Ij)==$486B616C or GetUnitTypeId(Ij)==$484A5731 then
        set extra = extra +awakeTime*.3
    // set JT=JT*(1+awakeTime*.2)
    endif
endif
// 落宝铜钱+法强
if GetUnitAbilityLevel(Ij,$41623078)>0 then
// set JT=JT*1.2
set extra = extra +0.4
endif
// 太平令法强
if GetUnitAbilityLevel(Ij,'Ab40')>0 then 
set extra = extra +0.3
endif
// 天书法强
if GetUnitAbilityLevel(Ij,'Ab42')>0 then 
set extra = extra +0.8
endif

// 霸王套伤害系数2
if GetUnitAbilityLevel(Ij,$41304730)>0 then
// set JT=JT*2
set extra = extra * 1.8
endif

// 如果是玩家8，系数0.2
if IsUnitEnemy(Ij,Player(8)) then
set JT=JT*.2
endif
// 轩辕剑60法强
if GetUnitAbilityLevel(Ij,'Ab3o')>0 then
set extra=extra*1.6
endif

if GetUnitAbilityLevel(Ij,'Ab42')>0 then 

    if GetRandomInt(1, 10) <3 then
        set extra=extra*2
    endif
endif
set JT = JT * (1 +extra)
call DisplayTextToPlayer(GetOwningPlayer(Ij), 0, 0, "|Cff00ff00额外法强系数：" + R2S(extra) + " 总伤害：" + R2S(JT))
return JT
endfunction
// 根据英雄智力和法强返回相应值
function getMasterServent takes unit Ij returns real
local real JT=0
local integer result =0
// set result = R2I(bk(Ij, 3, 1))
set JT = bk(Ij, 3, 1)
return JT
endfunction

function bm takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
call SaveReal(Ia,Ix,$6C6F6F70,LoadReal(Ia,Ix,$6C6F6F70)-.1)
if LoadReal(Ia,Ix,$6C6F6F70)<=0 then
call UnitRemoveAbility(Iv,LoadInteger(Ia,Ix,1))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
endfunction
function bn takes unit Iv,integer VB,real JT returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call UnitAddAbility(Iv,VB)
call SaveReal(Ia,Ix,$6C6F6F70,JT)
call SaveInteger(Ia,Ix,1,VB)
call TimerStart(CS,.1,true,function bm)
set CS=null
endfunction
function bo takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer LQ=LoadInteger(Ia,Ix,1)-1
if LQ<=0 then
call SetUnitState(Iv,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(18))-LoadReal(Ia,Ix,$3061746B))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
else
call SaveInteger(Ia,Ix,1,LQ)
endif
set Iv=null
set CS=null
endfunction
function bp takes unit Iv,real ME,integer Ik returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$3061746B,ME)
call SaveInteger(Ia,Ix,1,Ik)
call SetUnitState(Iv,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(18))+ME)
call TimerStart(CS,1,true,function bo)
set CS=null
endfunction
function bq takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local integer LQ=LoadInteger(Ia,Ix,2)
set LQ=LQ-1
if LQ<=0 then
if GetUnitState(Iv,ConvertUnitState(0))>.405 then
if LoadInteger(Ia,Ix,0)==0 then
call SetHeroStr(Iv,GetHeroStr(Iv,false)-LoadInteger(Ia,Ix,1),true)
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)-LoadInteger(Ia,Ix,1),true)
call SetHeroInt(Iv,GetHeroInt(Iv,false)-LoadInteger(Ia,Ix,1),true)
elseif LoadInteger(Ia,Ix,0)==1 then
call SetHeroStr(Iv,GetHeroStr(Iv,false)-LoadInteger(Ia,Ix,1),true)
elseif LoadInteger(Ia,Ix,0)==2 then
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)-LoadInteger(Ia,Ix,1),true)
elseif LoadInteger(Ia,Ix,0)==3 then
call SetHeroInt(Iv,GetHeroInt(Iv,false)-LoadInteger(Ia,Ix,1),true)
endif
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
else
call SaveInteger(Ia,Ix,2,1)
endif
else
call SaveInteger(Ia,Ix,2,LQ)
endif
set Iv=null
set CS=null
endfunction
function br takes unit Ij,integer UL,integer ME,integer Ik returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Ij)
call SaveInteger(Ia,Ix,0,UL)
call SaveInteger(Ia,Ix,1,ME)
call SaveInteger(Ia,Ix,2,Ik)
if UL==0 then
call SetHeroStr(Ij,GetHeroStr(Ij,false)+ME,true)
call SetHeroAgi(Ij,GetHeroAgi(Ij,false)+ME,true)
call SetHeroInt(Ij,GetHeroInt(Ij,false)+ME,true)
elseif UL==1 then
call SetHeroStr(Ij,GetHeroStr(Ij,false)+ME,true)
elseif UL==2 then
call SetHeroAgi(Ij,GetHeroAgi(Ij,false)+ME,true)
elseif UL==3 then
call SetHeroInt(Ij,GetHeroInt(Ij,false)+ME,true)
endif
call TimerStart(CS,1,true,function bq)
set CS=null
endfunction
function bs takes unit Ij,real It,real Iu,real Iy,real Iz,integer I0,integer I1 returns nothing
local unit CE
local group I2=CreateGroup()
call GroupEnumUnitsInRange(I2,It,Iu,Iy,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if Ij != CE and GetUnitState(CE, UNIT_STATE_LIFE) > .405 and IsUnitEnemy(CE, GetOwningPlayer(Ij)) == true and IsUnitType(CE, UNIT_TYPE_STRUCTURE) == false and GetUnitTypeId(CE) != GetUnitTypeId(she) then
    if IsUnitType(CE, UNIT_TYPE_HERO) == true and GetUnitPointValue(CE) == 100 then
        return
    endif
call UnitDamageTarget(Ij,CE,Iz,false,false,I3[I0],I4[I1],WEAPON_TYPE_WHOKNOWS)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
endfunction
function bt takes unit Ij,real It,real Iu,real Iy,real Iz,real Jf,integer I0,integer I1 returns nothing
local unit CE
local group I2=CreateGroup()
call GroupEnumUnitsInRange(I2,It,Iu,Iy,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call UnitDamageTarget(Ij,CE,Iz+GetUnitState(CE,UNIT_STATE_LIFE)*Jf,false,false,I3[I0],I4[I1],WEAPON_TYPE_WHOKNOWS)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
endfunction
function bu takes unit Ij,real It,real Iu,real Iy,real Iz,real Jf,integer I0,integer I1 returns nothing
local unit CE
local group I2=CreateGroup()
call GroupEnumUnitsInRange(I2,It,Iu,Iy,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call UnitDamageTarget(Ij,CE,Iz+GetUnitState(CE,UNIT_STATE_MAX_LIFE)*Jf,false,false,I3[I0],I4[I1],WEAPON_TYPE_WHOKNOWS)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
endfunction
function bv takes unit Iv,real Ii,real Im,real In,real JM returns nothing
local group I2=CreateGroup()
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real JP=0.
local real JQ=0.
local real JO=0.
local real JR=0.
local unit CE
call GroupEnumUnitsInRange(I2,It,Iu,In,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and bi(Iv,CE) then
set JO=bO(Iv,CE)
set JP=It+JO*1.*Cos(Im*bj_DEGTORAD)
set JQ=Iu+JO*1.*Sin(Im*bj_DEGTORAD)
set JR=SquareRoot(Pow(JP-GetUnitX(CE),2.)+Pow(JQ-GetUnitY(CE),2.))
if JO<=50. or JR<=JM then
call UnitDamageTarget(Iv,CE,Ii,false,false,ConvertAttackType(5),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",CE,"origin"))
endif
endif
endloop
call DestroyGroup(I2)
set I2=null
set CE=null
endfunction
// 张鲁技能开始

// 添加超负荷
// function zhanglu_E_add takes unit Iv returns nothing
// call UnitAddAbility(Iv,1094801476)
// call UnitMakeAbilityPermanent(Iv,true,1094801476)
// endfunction
// 
// function zhanglu_E_actions takes unit Iv,unit CE,integer Ii returns nothing
// local real loc_damage=0
// local unit loc_unit=null
// local real loc_x=GetUnitX(CE)
// local real loc_y=GetUnitY(CE)
// local group loc_group
// set loc_damage=15*Ii+15
// // 超负荷减速
// call UnitAddAbility(II_I1_I,1093686069)
// call IssueTargetOrder(II_I1_I,"slow",loc_unit)
// call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",loc_x,loc_y))
// // call GroupClear(loc_group)
// call GroupEnumUnitsInRange(loc_group,loc_x,loc_y,300,null)
// loop
// set loc_unit=FirstOfGroup(loc_group)
// exitwhen loc_unit==null
// if I1III1_I(loc_unit,0,2,0,0,null,Iv,false)then
// call SetUnitOwner(II_I1_I,Player(15),false)
// call IssueTargetOrder(II_I1_I,"slow",loc_unit)
// if true then
// call SaveInteger(FS,GetHandleId(loc_unit),'',0)
// else
// call SaveInteger(FS,GetHandleId(loc_unit),'',1)
// endif
// endif
// call GroupRemoveUnit(loc_group,loc_unit)
// endloop
// call UnitRemoveAbility(II_I1_I,1093686069)
// call UnitRemoveAbility(Iv,1094801476)
// endfunction
// // 移动闪电特效
function move_lightning takes lightning loc_l,unit loc_u1,unit loc_u2 returns lightning
local real loc_h1=128*(GetTerrainCliffLevel(GetUnitX(loc_u1),GetUnitY(loc_u1))-2)+GetUnitFlyHeight(loc_u1)+30
local real loc_h2=128*(GetTerrainCliffLevel(GetUnitX(loc_u2),GetUnitY(loc_u2))-2)+GetUnitFlyHeight(loc_u2)+30
call MoveLightningEx(loc_l,true,GetUnitX(loc_u1),GetUnitY(loc_u1),loc_h1,GetUnitX(loc_u2),GetUnitY(loc_u2),loc_h2)
return loc_l
endfunction
// // 设置单位飞行效果
function unit_fly takes unit Iv,real fly_height,integer nothingelse returns nothing
call UnitAddAbility(Iv,'Arav')
call UnitRemoveAbility(Iv,'Arav')
call SetUnitFlyHeight(Iv,fly_height,0)
endfunction

// // 球状闪电位移
function zhangjiao_R_action takes nothing returns nothing
local timer CS=GetExpiredTimer()
local unit Iv = LoadUnitHandle(FS, GetHandleId(CS), 115)
local unit loc_u=LoadUnitHandle(FS, GetHandleId(CS),117)
local unit loc_f=LoadUnitHandle(FS, GetHandleId(CS),102)
local unit loc_e=LoadUnitHandle(FS, GetHandleId(CS),101)
local lightning loc_l=LoadLightningHandle(FS, GetHandleId(CS),108)
local integer loc_i=LoadInteger(FS, GetHandleId(CS),105)
local real loc_x=LoadReal(FS, GetHandleId(CS),88)
local real loc_y=LoadReal(FS, GetHandleId(CS),89)
local real loc_x1=LoadReal(FS, GetHandleId(CS),120)
local real loc_y1=LoadReal(FS, GetHandleId(CS),121)
local real loc_d=SquareRoot((loc_x-loc_x1)*(loc_x-loc_x1)+(loc_y-loc_y1)*(loc_y-loc_y1))
local real loc_r=GetUnitMoveSpeed(Iv)*(2+1*loc_i)*0.025
local real loc_a=Atan2(loc_y1-loc_y,loc_x1-loc_x)
local group loc_group=null

if IsUnitType(Iv,UNIT_TYPE_STUNNED) or IsUnitType(Iv,UNIT_TYPE_SNARED) or IsUnitType(Iv,UNIT_TYPE_POLYMORPHED) or IsUnitType(Iv,UNIT_TYPE_SLEEPING) or IsUnitPaused(Iv) or GetUnitMoveSpeed(Iv)<10 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),'Ab3u',true)
call UnitRemoveAbility(Iv,'Avul')
call SetUnitPathing(Iv,true)

call DestroyEffect(LoadEffectHandle(FS,GetHandleId(CS),104))
call RemoveUnit(loc_u)
call RemoveUnit(loc_f)
call UnitApplyTimedLife(loc_e,0,0)
call DestroyLightning(loc_l)

call PauseTimer(CS)
call FlushChildHashtable(FS,GetHandleId(CS))
call DestroyTimer(CS)
elseif GetWidgetLife(Iv)>1 and loc_d>loc_r and GetUnitState(Iv, UNIT_STATE_MANA) >100 then
set loc_x=loc_x+Cos(loc_a)*loc_r
set loc_y=loc_y+Sin(loc_a)*loc_r

call SetUnitState(Iv, UNIT_STATE_MANA, GetUnitState(Iv, UNIT_STATE_MANA) -(3 + loc_i *2))
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000当前法力值:" + R2S(GetUnitState(Iv, UNIT_STATE_MANA)))


call SetUnitX(Iv,loc_x)
call SetUnitY(Iv,loc_y)
call SetUnitPosition(loc_u,loc_x,loc_y)
call SetUnitPosition(loc_f,loc_x,loc_y)
call move_lightning(loc_l,Iv,loc_e)
call SaveReal(FS,GetHandleId(CS),88,loc_x)
call SaveReal(FS,GetHandleId(CS),89,loc_y)

else
if GetWidgetLife(Iv)>1 then
call SetUnitPosition(Iv,loc_x1,loc_y1)
endif
if GetUnitState(Iv, UNIT_STATE_MANA) >100 then
    // 实际距离/100*技能*智力
call bs(Iv, loc_x, loc_y, 330, (1+LoadReal(FS, GetHandleId(CS), 118) / 5000 ) * getMasterServent(Iv), 1, 0)
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000落地伤害:" + R2S( LoadReal(FS, GetHandleId(CS), 118) / 1000 * getMasterServent(Iv)))

endif
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),'Ab3u',true)
call UnitRemoveAbility(Iv,'Avul')
call SetUnitPathing(Iv,true)
set loc_d=SquareRoot((GetUnitX(Iv)-GetUnitX(loc_e))*(GetUnitX(Iv)-GetUnitX(loc_e))+(GetUnitY(Iv)-GetUnitY(loc_e))*(GetUnitY(Iv)-GetUnitY(loc_e)))
set loc_d=loc_d*0.01*(2.8+2.8*loc_i)

call DestroyEffect(LoadEffectHandle(FS,GetHandleId(CS),104))
call RemoveUnit(loc_u)
call RemoveUnit(loc_f)
call UnitApplyTimedLife(loc_e,0,0)
call DestroyLightning(loc_l)
set loc_group=CreateGroup()
call GroupEnumUnitsInRange(loc_group,GetUnitX(Iv),GetUnitY(Iv),75+75*loc_i,null)
loop
set loc_f=FirstOfGroup(loc_group)
exitwhen loc_f==null
// if I1III1_I(loc_f,0,2,0,0,null,Iv,true)then
// call I1III__I(Iv,loc_f,1,loc_d+I1II1_II(Iv,1)*0.6)
// call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",loc_f,"origin"))
// endif
// call FlushChildHashtable(FS,GetHandleId(CS))
call GroupRemoveUnit(loc_group,loc_f)
endloop
call DestroyGroup(loc_group)
set loc_group=null
call PauseTimer(CS)

call DestroyTimer(CS)
endif



set CS=null
set Iv=null
set loc_u=null
set loc_f=null
set loc_e=null
set loc_l=null
endfunction
// // 球状闪电触发
function zhangjiao_R takes unit Iv returns nothing
local integer ability_level=GetUnitAbilityLevel(Iv,'Ab3u')
local timer CS=CreateTimer()
local real loc_x=GetUnitX(Iv)
local real loc_y=GetUnitY(Iv)
local real fact_distance =0
// // 球状闪电模型
local unit loc_u=CreateUnit(GetOwningPlayer(Iv),'ua01',loc_x,loc_y,0)
// // 本体模型
local unit loc_f=CreateUnit(GetOwningPlayer(Iv),'ua01',loc_x,loc_y,0)
// // 马甲
local unit loc_e=CreateUnit(GetOwningPlayer(Iv),'e099',loc_x,loc_y,0)
// // 闪电特效
local lightning loc_l=AddLightning("FORK",true,loc_x,loc_y,loc_x,loc_y)

set fact_distance = SquareRoot((GetUnitX(Iv)-GetSpellTargetX())*(GetUnitX(Iv)-GetSpellTargetX())+(GetUnitY(Iv)-GetSpellTargetY())*(GetUnitY(Iv)-GetSpellTargetY()))
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000目标实际距离:" + R2S(fact_distance))

call move_lightning(loc_l,Iv,loc_e)
call UnitApplyTimedLife(loc_e,0,50)

call SetUnitPathing(Iv,false)
call SetUnitPathing(loc_u,false)
call UnitAddAbility(Iv,'Avul')
call unit_fly(loc_f,GetUnitFlyHeight(Iv),0)
call unit_fly(loc_u,GetUnitFlyHeight(Iv),0)

call SaveReal(FS,GetHandleId(CS),118,fact_distance)
call SaveReal(FS,GetHandleId(Iv),'Avul',1.0)
call SaveUnitHandle(FS,GetHandleId(CS),115,Iv)
call SaveUnitHandle(FS,GetHandleId(CS),117,loc_u)
call SaveUnitHandle(FS,GetHandleId(CS),102,loc_f)
call SaveUnitHandle(FS,GetHandleId(CS),101,loc_e)
call SaveLightningHandle(FS,GetHandleId(CS),108,loc_l)
call SaveInteger(FS,GetHandleId(CS),105,ability_level)
call SaveReal(FS,GetHandleId(CS),120,GetSpellTargetX())
call SaveReal(FS,GetHandleId(CS),121,GetSpellTargetY())
call SaveReal(FS,GetHandleId(CS),88,GetUnitX(Iv))
call SaveReal(FS,GetHandleId(CS),89,GetUnitY(Iv))
call SaveReal(FS,GetHandleId(CS),116,1.0)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),'Ab3u',false)
call SaveEffectHandle(FS,GetHandleId(CS),104,AddSpecialEffectTarget("effects\\Lightning_Ball_Tail_FX.mdx",loc_f,"origin"))
call TimerStart(CS,0.025,true,function zhangjiao_R_action)

// set CS=CreateTimer()
// call TimerStart(CS,1,false,function I_11111II)
// call II11I1II(CS,115,Iv)
set Iv=null
set CS=null
set loc_u=null
set loc_f=null
set loc_e=null
set loc_l=null
endfunction

function zhangjiao_Q_action takes nothing returns nothing 
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
// 残影
local unit Iv=LoadUnitHandle(Ia,Ix,102)
local unit CE =null
local group loc_g=CreateGroup()
call SaveReal(Ia, Ix, 100, LoadReal(Ia, Ix, 100) -0.1)
call GroupEnumUnitsInRange(loc_g,GetUnitX(Iv),GetUnitY(Iv),220.,null)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000风暴残影计时:" + R2S(LoadReal(Ia, Ix, 100)))

loop
set CE=FirstOfGroup(loc_g)
call GroupRemoveUnit(loc_g,CE)
exitwhen IsPlayerAlly(GetOwningPlayer(CE), Player(8)) == false 
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000风暴残影判定:" + GetUnitName(CE))

endloop
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000风暴残影判定:" + GetUnitName(CE))

if IsPlayerAlly(GetOwningPlayer(CE), Player(8)) == false and CE != null then
call DestroyTimer(CS)
call UnitApplyTimedLife(Iv,$42487765,.1)
set loc_g =null
call DestroyGroup(loc_g)
endif

// 倒计时结束杀死残影并造成范围伤害
if LoadReal(Ia, Ix, 100) <=0 then
    call DestroyTimer(CS)
    call UnitApplyTimedLife(Iv,$42487765,.1)
    call DestroyGroup(loc_g)
endif
endfunction
function zhangjiao_Q takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real loc_x = GetUnitX(Iv)
local real loc_y = GetUnitY(Iv)
local unit loc_u =null
// 当前技能Id
local integer loc_ab_id=GetSpellAbilityId()
// 当前技能等级
local integer loc_ab_level=GetUnitAbilityLevel(Iv,loc_ab_id)
// 定时器计时
local real loc_time = 5.0 *loc_ab_level
// 倒计时
call SaveReal(Ia, Ix, 100,loc_time)
// 本体

// 在技能点创建一个残影
// 将残影存入哈希表
set loc_u = CreateUnit(GetOwningPlayer(Iv),'ua01',loc_x,loc_y,0)
if IsTerrainPathable(GetUnitX(loc_u), GetUnitY(loc_u), PATHING_TYPE_WALKABILITY) == true then
call UnitApplyTimedLife(loc_u,$42487765,.1)
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000残影无法存留在此地形" )
return
endif
// 太平令和天书加射程
if GetUnitAbilityLevel(Iv, 'Ab40') >0 then
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000有太平射程效果:" )

call SetUnitState(loc_u,ConvertUnitState(22),800) 
 call SetUnitAcquireRange(loc_u,900)
call UnitAddAbility(loc_u,'Z006')
endif
if GetUnitAbilityLevel(Iv, 'Ab3t') >0 then
call UnitAddAbility(loc_u,'Ab3t')
call SetUnitAbilityLevel(loc_u, 'Ab3t',GetUnitAbilityLevel(Iv, 'Ab3t'))
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000残影被动等级:" + I2S(GetUnitAbilityLevel(loc_u,'Ab3t')))

endif
call SaveUnitHandle(Ia, GetHandleId(loc_u), 101, Iv)
call SaveUnitHandle(Ia,Ix,102,loc_u)

call TimerStart(CS,.1,true,function zhangjiao_Q_action)
// 计时器时间用技能等级计算


endfunction

function zhangjiao_Q_death_condtion takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit()) == 'ua01'
endfunction

function zhangjiao_Q_death_action takes nothing returns nothing
local real loc_x = GetUnitX(GetTriggerUnit())
local real loc_y = GetUnitY(GetTriggerUnit())
local unit Iv = LoadUnitHandle(Ia, GetHandleId(GetTriggerUnit()),101)
local real loc_dmg = bk(Iv, 3, GetUnitAbilityLevel(Iv, 'Ab3r'))
// war3mapImported\\
call DestroyEffect(AddSpecialEffect("zhangjiao_Q_texiao.mdl",loc_x,loc_y))

// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffff0000残影死亡造成伤害:" + R2S(loc_dmg))
call bs(Iv,loc_x,loc_y,450,loc_dmg,1,0)
call FlushChildHashtable(Ia, GetHandleId(GetTriggerUnit()))
endfunction

function zhangjiao_Q_death_init takes nothing returns nothing
set Q_death_trig=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Q_death_trig,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Q_death_trig,Condition(function zhangjiao_Q_death_condtion))
call TriggerAddAction(Q_death_trig,function zhangjiao_Q_death_action)
endfunction

function zhangjiao_F_action  takes nothing returns nothing
local timer CS=GetExpiredTimer()
 local group I2=CreateGroup()
local unit CE
local unit Iv = LoadUnitHandle(FS, GetHandleId(CS),101)
// local real Ii=bk(Iv,3,GetUnitAbilityLevel(Iv,$4130355A))*.5
local real Ii = bk(Iv, 3, GetUnitAbilityLevel(Iv, 'Ab3v')) *0.5

call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),1000,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(Iv)) and GetWidgetLife(CE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
// call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl",GetUnitX(CE),GetUnitY(CE)))
call DestroyEffect(AddSpecialEffect("zhangjiao_F_texiao.mdl",GetUnitX(CE),GetUnitY(CE)))
if GetUnitAbilityLevel(Iv, 'Ab41') >0 then
call SaveInteger(Ia, GetHandleId(CE), 103, LoadInteger(Ia, GetHandleId(CE), 103) +1)
endif
call UnitDamageTarget(Iv,CE,Ii,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
endloop

if LoadReal(FS, GetHandleId(CS), 103) <0 then
     call DestroyTimer(CS)
     call DestroyGroup(I2)
else
    call SaveReal(FS, GetHandleId(CS), 103, LoadReal(FS, GetHandleId(CS), 103) -LoadReal(FS, GetHandleId(CS), 102))
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000万雷天牢剩余时间2:" + R2S(LoadReal(FS, GetHandleId(CS), 103)))

endif
call DestroyGroup(I2)
set I2=null
set CE=null   
endfunction

function zhangjiao_F takes unit Iv returns nothing 
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real loc_time =0
local real loc_long_time =0
set loc_long_time = 5 + GetUnitAbilityLevel(Iv, 'Ab3v') *0.5
set loc_time = 0.8 - GetUnitAbilityLevel(Iv, 'Ab3v') * 0.1
call SaveUnitHandle(FS, Ix, 101,Iv)
// 触发间隔
call SaveReal(FS, Ix, 102,loc_time)
// 持续时间
call SaveReal(FS, Ix, 103,loc_long_time)
if GetUnitAbilityLevel(Iv, 'Ab41') >0 then
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000有太平增伤效果:" )

endif

call TimerStart(CS,loc_time,true,function zhangjiao_F_action)

endfunction
// 张鲁技能结束
// 精卫技能开始
function jingwei_Q_Action takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$68303030)
local unit UV=LoadUnitHandle(Ia,Ix,$6D6A3030)
local integer FZ=LoadInteger(Ia,Ix,$69303030)
local real In=bU(GetUnitX(UV),GetUnitY(UV),LoadReal(Ia,Ix,$6D783030),LoadReal(Ia,Ix,$6D793030))
set FZ=FZ-1
if GetUnitState(UV,ConvertUnitState(0))<.405 or FZ<=0 or In<=100 then
call DestroyTimer(CS)
call SetUnitPosition(UV,LoadReal(Ia,Ix,$6D783030),LoadReal(Ia,Ix,$6D793030))
call DestroyEffect(AddSpecialEffect("war3mapImported\\cool_explosion.mdx",GetUnitX(UV),GetUnitY(UV)))
// 添加技能眩晕效果，然后发布指令使用眩晕，这里用的是战争践踏的指令
if bC(Iv, 'it0s') == true then
call UnitAddAbility(UV,'Ab3d')
call IssueImmediateOrderById(UV,852588)
endif
call UnitApplyTimedLife(UV,$42487765,.1)
call bs(Iv,GetUnitX(UV),GetUnitY(UV),330,LoadReal(Ia,Ix,$64616D30),3,0)
call FlushChildHashtable(Ia,Ix)
else
call SaveInteger(Ia,Ix,$69303030,FZ)
call bR(UV,LoadReal(Ia,Ix,$616E6730),100)
call bs(Iv,GetUnitX(UV),GetUnitY(UV),330,LoadReal(Ia,Ix,$64616D30),3,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetUnitX(UV),GetUnitY(UV)))
endif
set CS=null
set Iv=null
set UV=null
endfunction
// 精卫Q
function jingwei_Q takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real loc_dmg 
call SaveUnitHandle(Ia,Ix,$68303030,Iv)
call SaveUnitHandle(Ia,Ix,$6D6A3030,CreateUnit(GetOwningPlayer(Iv),'h008',GetUnitX(Iv),GetUnitY(Iv),bT(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY())))
call SaveReal(Ia,Ix,$68783030,GetUnitX(Iv))
call SaveReal(Ia,Ix,$68793030,GetUnitY(Iv))
set loc_dmg = bk(Iv, 3, GetUnitAbilityLevel(Iv, 'Ab38')) *0.2
if LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F) == 4 then
set loc_dmg = loc_dmg *1.5
endif
call SaveReal(Ia, Ix,$64616D30,loc_dmg )
call SaveReal(Ia,Ix,$6D783030,GetSpellTargetX())
call SaveReal(Ia,Ix,$6D793030,GetSpellTargetY())
call SaveReal(Ia,Ix,$616E6730,bT(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY()))
call SaveReal(Ia,Ix,$64697330,bU(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY()))
call SaveInteger(Ia,Ix,$6C763030,GetUnitAbilityLevel(Iv,'Ab38'))
call SaveInteger(Ia,Ix,$69303030,R2I(bU(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY()))/100+1)
call TimerStart(CS,.02,true,function jingwei_Q_Action)
set CS=null
endfunction
function jingwei_w_actions takes nothing returns nothing 
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$68303030)
local real loc_dmg =LoadReal(Ia,Ix,$64616D30)
call bs(Iv,LoadReal(Ia,Ix,$6D783030),LoadReal(Ia,Ix,$6D793030),400,loc_dmg,5,0)
call SaveReal(Ia, Ix, $69303030, LoadReal(Ia, Ix, $69303030) -0.1)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "烈焰焚烧时间：" + R2S(LoadReal(Ia, Ix, $69303030)))
if LoadReal(Ia, Ix, $69303030) <=0 then
call DestroyTimer(CS)
endif
endfunction
function jingwei_w takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real loc_dmg 
set loc_dmg = bk(Iv, 3, GetUnitAbilityLevel(Iv, 'Ab39')) *0.05
if LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F) == 4 and bC(Iv, 'it0r') == true then
set loc_dmg = loc_dmg *1.5
endif
call SaveUnitHandle(Ia,Ix,$68303030,Iv)
call SaveReal(Ia, Ix,$64616D30,loc_dmg )
call SaveReal(Ia,Ix,$6D783030,GetSpellTargetX())
call SaveReal(Ia,Ix,$6D793030,GetSpellTargetY())
call SaveReal(Ia,Ix,$69303030,5.0)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "烈焰焚烧坐标：" + R2S(GetSpellTargetX()) + "," +R2S(GetSpellTargetY()))
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "烈焰焚烧每秒伤害：" + R2S(loc_dmg) )

call TimerStart(CS,.1,true,function jingwei_w_actions)
endfunction   
function jingwei_E_actions takes nothing returns nothing
if LoadBoolean(FS, GetHandleId(GetEnumUnit()), $14141414) == false then
// 生命值
call SetUnitState(GetEnumUnit(), ConvertUnitState(1), GetUnitState(GetEnumUnit(), ConvertUnitState(1)) + GetHeroLevel(jingwei) * 200 + GetHeroInt(jingwei, true) * 20)
// 攻击
call SetUnitState(GetEnumUnit(), ConvertUnitState(18), GetUnitState(GetEnumUnit(), ConvertUnitState(18)) +GetHeroLevel(jingwei) *15 + GetHeroInt(jingwei, true) *2)
// 护甲
call SetUnitState(GetEnumUnit(), ConvertUnitState(32), GetUnitState(GetEnumUnit(), ConvertUnitState(32)) + GetHeroInt(jingwei, true) *0.1 + GetUnitState(jingwei, ConvertUnitState(32)) * 3)
call SaveBoolean(FS,GetHandleId(GetEnumUnit()),$14141414,true)
endif
endfunction 

function jingwei_E_conditions  takes nothing returns boolean
// function Trig_HXHLFunc001Func001Func001002002 takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit()) == 'na03'
endfunction

function jingwei_E takes unit Iv returns nothing
  local  group jingwei_kuilei 
  call TriggerSleepAction(2)
  set jingwei_kuilei = GetUnitsOfPlayerMatching(GetOwningPlayer(Iv), Condition(function jingwei_E_conditions))
  call ForGroupBJ( jingwei_kuilei, function jingwei_E_actions )
    call GroupClear( jingwei_kuilei )
call DestroyGroup( jingwei_kuilei )
endfunction

// 马良技能开始
function maliangW_Action takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
// call DisplayTextToPlayer(GetOwningPlayer(maliang), 0, 0, "马良W" )
if LoadInteger(Ia, Ix, 2) <=0 then
    // call DisplayTextToPlayer(GetOwningPlayer(maliang), 0, 0, "销毁！" )
    call DestroyEffect(LoadEffectHandle(Ia, Ix,$65666667))
     call DestroyTimer(CS)
else
    //  call DisplayTextToPlayer(GetOwningPlayer(maliang), 0, 0, "倒计时" )
   call SaveInteger(Ia, Ix, 2, LoadInteger(Ia, Ix, 2) -1)
 
endif 


endfunction
function maliangW_Start takes location loc_point returns nothing
local timer CS
local integer Ix

set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveInteger(Ia, Ix, 2,5)
call SaveEffectHandle(Ia, Ix, $65666667, AddSpecialEffectLoc("war3mapImported\\anyingW.mdx",loc_point))

call TimerStart(CS,1,true,function maliangW_Action)

endfunction

function maliangE_Action takes nothing returns nothing
    local timer CS=GetExpiredTimer()
    local unit CE=LoadUnitHandle(Ia, GetHandleId(maliang),0)

call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(maliang)), $65303939, $4162326A, 1, GetUnitX(maliang), GetUnitY(maliang), bj_UNIT_FACING, 0.5), 852125, CE)
call UnitDamageTarget(maliang,CE,bk(maliang, 3, GetUnitAbilityLevel(maliang, 'Ab2j')) *0.5,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)

    if GetRandomInt(1, 100) > 2 * GetUnitAbilityLevel(maliang, 'Ab2m') then
        call DestroyTimer(CS)
    else
call DisplayTextToPlayer(GetOwningPlayer(maliang), 0, 0, "暗影追魂" )
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(maliang)), $65303939, $4162326A, 1, GetUnitX(maliang), GetUnitY(maliang), bj_UNIT_FACING, 0.5), 852125, CE)
call UnitDamageTarget(maliang,CE,bk(maliang, 3, GetUnitAbilityLevel(maliang, 'Ab2j')) *0.5,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)

    endif
endfunction

function maliangE_Start takes nothing returns nothing
local timer CS
set CS=CreateTimer()
call TimerStart(CS,1,true,function maliangE_Action)

endfunction

// 吸引判定
function Trig_AnnihilateABlackHole2Func003002003 takes nothing returns boolean
return((((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)and(IsUnitAliveBJ(GetFilterUnit())==true))and((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_AnnihilateABlackHoleCasters))==true)and(GetUnitDefaultMoveSpeed(GetFilterUnit())>0.00))))
endfunction
function Trig_AnnihilateABlackHole2Func004A takes nothing returns nothing
set udg_AnnihilateABlackHoleEUPoint=GetUnitLoc(GetEnumUnit())
set udg_AnnihilateABlackHoleP2P = PolarProjectionBJ(udg_AnnihilateABlackHoleEUPoint, (5 + udg_AnnihilateBlackHoleSLv *5), AngleBetweenPoints(udg_AnnihilateABlackHoleEUPoint, udg_AnnihilateABlackHoleSPoint))

call SetUnitX(GetEnumUnit(),GetLocationX(udg_AnnihilateABlackHoleP2P))
call SetUnitY(GetEnumUnit(),GetLocationY(udg_AnnihilateABlackHoleP2P))
call RemoveLocation(udg_AnnihilateABlackHoleEUPoint)
call RemoveLocation(udg_AnnihilateABlackHoleP2P)
set udg_AnnihilateABlackHoleP2P=null
set udg_AnnihilateABlackHoleEUPoint=null
endfunction
// 黑洞吸人单位组筛选
function Trig_AnnihilateABlackHole2Func006Func002002003 takes nothing returns boolean
return((((IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)!=true)and(IsUnitAliveBJ(GetFilterUnit())==true))and(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_AnnihilateABlackHoleCasters))==true)))
endfunction
// 有专属伤害
function Trig_AnnihilateABlackHole2Func006Func003Func001A takes nothing returns nothing
call UnitDamageTargetBJ(udg_AnnihilateABlackHoleCasters,GetEnumUnit(),100,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)
endfunction
// 没专属伤害
function Trig_AnnihilateABlackHole2Func006Func003Func002A takes nothing returns nothing
call UnitDamageTargetBJ(udg_AnnihilateABlackHoleCasters, GetEnumUnit(), 100 + getMasterServent(maliang) , ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED)
endfunction
// 黑洞吸人动作
function Trig_AnnihilateABlackHole2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
// call StartTimerBJ(udg_AnnihilateABlackHoleTimer,false,0.03)
// call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"黑洞吸人")
set udg_AnnihilateABlackHoleDInteger=(udg_AnnihilateABlackHoleDInteger+1)
// set udg_AnnihilateABlackHoleGruop=YDWEGetUnitsInRangeOfLocMatchingNull(700.00,udg_AnnihilateABlackHoleSPoint,Condition(function Trig_AnnihilateABlackHole2Func003002003))
set udg_AnnihilateABlackHoleGruop=an(1000.00,udg_AnnihilateABlackHoleSPoint,Condition(function Trig_AnnihilateABlackHole2Func003002003))
call ForGroupBJ(udg_AnnihilateABlackHoleGruop,function Trig_AnnihilateABlackHole2Func004A)
call DestroyGroup(udg_AnnihilateABlackHoleGruop)
if((udg_AnnihilateABlackHoleDInteger==8))then
set udg_AnnihilateABlackHoleDInteger=0
// set udg_AnnihilateABlackHoleGruop2=YDWEGetUnitsInRangeOfLocMatchingNull(700.00,udg_AnnihilateABlackHoleSPoint,Condition(function Trig_AnnihilateABlackHole2Func006Func002002003))
set udg_AnnihilateABlackHoleGruop2=an(1000.00,udg_AnnihilateABlackHoleSPoint,Condition(function Trig_AnnihilateABlackHole2Func006Func002002003))
// if((YDWEUnitHasItemOfTypeBJNull(maliang,'I0JM')==true))then
// call ForGroupBJ(udg_AnnihilateABlackHoleGruop2,function Trig_AnnihilateABlackHole2Func006Func003Func001A)
// else
call ForGroupBJ(udg_AnnihilateABlackHoleGruop2,function Trig_AnnihilateABlackHole2Func006Func003Func002A)
// endif
call DestroyGroup(udg_AnnihilateABlackHoleGruop)
else
endif
if GetUnitState(udg_AnnihilateABlackHoleCUnit, UNIT_STATE_LIFE) <.405 then
call DestroyTimer(CS)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_AnnihilateABlackHole2 takes nothing returns nothing
set gg_trg_AnnihilateABlackHole2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_AnnihilateABlackHole2,udg_AnnihilateABlackHoleTimer)
call TriggerAddAction(gg_trg_AnnihilateABlackHole2,function Trig_AnnihilateABlackHole2Actions)
endfunction

// 黑洞技能开始
function Trig_AnnihilateABlackHoleConditions takes nothing returns boolean
return((GetSpellAbilityId()=='Ab2o'))
endfunction
function Trig_AnnihilateABlackHoleActions takes nothing returns nothing
local timer CS
local integer Ix=0
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia, Ix, 0, GetTriggerUnit())
call SaveInteger(Ia, GetHandleId(GetTriggerUnit()), $140B62E5,Ix)
// 
set udg_AnnihilateABlackHoleSPoint=GetSpellTargetLoc()
set udg_AnnihilateABlackHoleCasters=GetSpellAbilityUnit()
set udg_AnnihilateABlackHoleCUnit=CreateUnitAtLoc(GetOwningPlayer(udg_AnnihilateABlackHoleCasters),'u00k',udg_AnnihilateABlackHoleSPoint,0)
call SetUnitState(udg_AnnihilateABlackHoleCUnit, UNIT_STATE_MAX_LIFE, 4 + 2 * GetUnitAbilityLevel(maliang, 'Ab2o'))
call SetUnitState(udg_AnnihilateABlackHoleCUnit, UNIT_STATE_LIFE, 4 + 2 *GetUnitAbilityLevel(maliang, 'Ab2o'))
set udg_AnnihilateBlackHoleSLv=I2R(GetUnitAbilityLevelSwapped(GetSpellAbilityId(),GetSpellAbilityUnit()))
set udg_AnnihilateABlackHoleDInteger=0
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "扭曲虚空开始")
call TimerStart(CS,.05,true,function Trig_AnnihilateABlackHole2Actions)
// call StartTimerBJ(udg_AnnihilateABlackHoleTimer,false,0.03)
// if((YDWEUnitHasItemOfTypeBJNull(maliang,'I0JM')==true))then
// set bj_forLoopAIndex=-1
// set bj_forLoopAIndexEnd=-1
// loop
// exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
// call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetTriggerUnit()),udg_AnnihilateABlackHoleSPoint,GetRandomDirectionDeg())
// call UnitApplyTimedLife(bj_lastCreatedUnit,'BHwe',20.00)
// call ShowUnitHide(bj_lastCreatedUnit)
// call UnitAddAbility(bj_lastCreatedUnit,'AEsb')
// call SetUnitAbilityLevel(bj_lastCreatedUnit,'AEsb',3)
// call IssueImmediateOrder(bj_lastCreatedUnit,"starfall")
// set bj_forLoopAIndex=bj_forLoopAIndex+1
// endloop
// set bj_forLoopAIndex=-1
// set bj_forLoopAIndexEnd=-1
// loop
// exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
// call CreateNUnitsAtLoc(1,'e000',GetOwningPlayer(GetTriggerUnit()),udg_AnnihilateABlackHoleSPoint,GetRandomDirectionDeg())
// call UnitApplyTimedLife(bj_lastCreatedUnit,'BHwe',10.00)
// call ShowUnitHide(bj_lastCreatedUnit)
// call UnitAddAbility(bj_lastCreatedUnit,'A0CP')
// call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0CP',4)
// call IssuePointOrderLoc(bj_lastCreatedUnit,"blizzard",udg_AnnihilateABlackHoleSPoint)
// set bj_forLoopAIndex=bj_forLoopAIndex+1
// endloop
// else
// endif
endfunction
function InitTrig_AnnihilateABlackHole takes nothing returns nothing
set gg_trg_AnnihilateABlackHole=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_AnnihilateABlackHole, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_AnnihilateABlackHole,Condition(function Trig_AnnihilateABlackHoleConditions))
call TriggerAddAction(gg_trg_AnnihilateABlackHole,function Trig_AnnihilateABlackHoleActions)
endfunction


// 黑洞爆炸事件
function condition_Dummy  takes nothing returns boolean
return GetUnitTypeId(GetDyingUnit())=='u00k'
endfunction
function Trig_S_DummyUnitDeathFunc001Func005002003 takes nothing returns boolean
return(((IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_TriggerUnit))==true)and(IsUnitAliveBJ(GetFilterUnit())==true)))
endfunction

function Trig_S_DummyUnitDeathFunc001Func006Func005A takes nothing returns nothing

call UnitDamageTargetBJ(maliang, GetEnumUnit(), bk(maliang, 3, GetUnitAbilityLevel(maliang, 'Ab2o')) *2, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED)
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(maliang)),$65303939,'Ab2a',1,GetUnitX(GetEnumUnit()),GetUnitY(GetEnumUnit()),bj_UNIT_FACING,3),852095,GetEnumUnit())
endfunction
// 黑洞爆炸动作

function Trig_S_DummyUnitDeathActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"黑洞到期")
if((GetUnitTypeId(GetDyingUnit())=='u00k'))then
set udg_AnnihilateABlackHoleDInteger=0
set udg_TriggerUnit=GetDyingUnit()
set udg_TemporaryCreatedPoint=GetUnitLoc(udg_TriggerUnit)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", GetUnitX(udg_TriggerUnit), GetUnitY(udg_TriggerUnit)))

call PauseTimer(udg_AnnihilateABlackHoleTimer)
set udg_GetUnitsInRectAllGroup=an(500.00,udg_TemporaryCreatedPoint,Condition(function Trig_S_DummyUnitDeathFunc001Func005002003))
call ForGroupBJ(udg_GetUnitsInRectAllGroup,function Trig_S_DummyUnitDeathFunc001Func006Func005A)
// endif
call DestroyGroup(udg_GetUnitsInRectAllGroup)
call RemoveLocation(udg_TemporaryCreatedPoint)
call RemoveLocation(udg_AnnihilateABlackHoleSPoint)
set udg_TriggerUnit=null
set udg_TemporaryCreatedPoint=null
set udg_AnnihilateABlackHoleSPoint=null
set udg_AnnihilateABlackHoleCasters=null
set udg_AnnihilateABlackHoleCUnit=null
else
endif
set ydl_group=null
set ydl_unit=null
endfunction

function InitTrig_S_DummyUnitDeath takes nothing returns nothing
set gg_trg_S_DummyUnitDeath=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_S_DummyUnitDeath,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_S_DummyUnitDeath,Condition(function condition_Dummy))
call TriggerAddAction(gg_trg_S_DummyUnitDeath,function Trig_S_DummyUnitDeathActions)
endfunction


// 马良技能结束


// 宗预技能开始
// 找宝结果
function compute_found_result takes integer res, unit Iv,integer loc_level returns nothing 
// 三个入参分别是，随机结果，触发单位，奖池等级
if res <10 then
call ModifyHeroStat(bj_HEROSTAT_STR, Iv, bj_MODIFYMETHOD_ADD, 10 *loc_level)
call ModifyHeroStat(bj_HEROSTAT_AGI,Iv,bj_MODIFYMETHOD_ADD,10*loc_level)
call ModifyHeroStat(bj_HEROSTAT_INT,Iv,bj_MODIFYMETHOD_ADD,10*loc_level)
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, GetPlayerName(GetOwningPlayer(Iv)) + "使用洛书河图找到了：增强体能的方法，全属性增加:" + I2S(10*loc_level))
elseif res <20 then
call AddHeroXP(Iv, 200 * loc_level *found_time, true)
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, GetPlayerName(GetOwningPlayer(Iv)) + "使用洛书河图找到了：兵法残页，战斗经验增加:" +I2S(200 * loc_level *found_time))

elseif res <30 then
call AdjustPlayerStateBJ(1*loc_level*found_time,GetOwningPlayer(Iv),PLAYER_STATE_RESOURCE_LUMBER)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(Iv))+"使用洛书河图找到了：稀有物资，木材增加:"+I2S(1 * loc_level *found_time))
elseif res <40 then
call AdjustPlayerStateBJ(500*loc_level*found_time,GetOwningPlayer(Iv),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, GetPlayerName(GetOwningPlayer(Iv)) + "使用洛书河图找到了：" + I2S(500 * loc_level * found_time) +"两黄金")

elseif res <50 then
call ModifyHeroStat(bj_HEROSTAT_STR, Iv, bj_MODIFYMETHOD_ADD, IMinBJ((GetRandomInt(1, 20) + found_time) * loc_level,100))
call ModifyHeroStat(bj_HEROSTAT_AGI,Iv,bj_MODIFYMETHOD_ADD, IMinBJ((GetRandomInt(1, 20) + found_time) * loc_level,100))
call ModifyHeroStat(bj_HEROSTAT_INT,Iv,bj_MODIFYMETHOD_ADD, IMinBJ((GetRandomInt(1, 20) + found_time) * loc_level,100))
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, GetPlayerName(GetOwningPlayer(Iv)) + "使用洛书河图找到了：增强体能的方法，全属性增加:" + I2S( IMinBJ((GetRandomInt(1, 20) + found_time) * loc_level,100)))

elseif res <60 then
call AddHeroXP(Iv, 500 * loc_level *found_time, true)
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, GetPlayerName(GetOwningPlayer(Iv)) + "使用洛书河图找到了：兵法残页，战斗经验增加:" +I2S(500 * loc_level *found_time))

elseif res <70 then
call AdjustPlayerStateBJ(2*loc_level*found_time,GetOwningPlayer(Iv),PLAYER_STATE_RESOURCE_LUMBER)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(Iv))+"使用洛书河图找到了：稀有物资，木材增加:"+I2S(2 * loc_level *found_time))

elseif res <80 then
call AdjustPlayerStateBJ(700*loc_level*found_time,GetOwningPlayer(Iv),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(Iv))+"使用洛书河图找到了："+I2S(700 * loc_level *found_time)+"两黄金")

elseif res <90 then
     set found_percent = 0
    set zongyu_R_enchance = zongyu_R_enchance +1
   if loc_level == 5 then
    call UnitAddItemByIdSwapped(hight_level_item_pool[GetRandomInt(99,132)],Iv)
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000在墓穴中找到了极品宝物："+GetItemName(GetLastCreatedItem()))
    if Iv == zongyu and GetUnitAbilityLevel(Iv, 'Ab28') >0 then
    call SetUnitState(Iv, ConvertUnitState(37), GetUnitState(Iv, ConvertUnitState(37)) -0.05)  
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000在墓穴中找到了武功秘籍！他的拳法水平精进了！每次叠加攻击额外造成100点伤害并减少0.05的攻击间隔！")
    if GetUnitAbilityLevel(Iv, 'Ab28') <7 then
    call IncUnitAbilityLevel(Iv,'Ab28')
    endif

        endif    
    else
    call UnitAddItemByIdSwapped(hight_level_item_pool[GetRandomInt(1,63)],Iv)
    call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"恭喜" + GetUnitName(Iv) + "找到了"+GetItemName(GetLastCreatedItem()))

    endif
else
    set found_percent = 0
    set zongyu_R_enchance = zongyu_R_enchance +1
    if loc_level > 3 then   
    call UnitAddItemByIdSwapped(hight_level_item_pool[GetRandomInt(99,132)],Iv)
    call DisplayTimedTextToForce(GetPlayersAll(),6.,GetUnitName(Iv) +"|cffff0000在墓穴中找到了极品宝物："+GetItemName(GetLastCreatedItem()))
    call SetUnitState(Iv, ConvertUnitState(37), GetUnitState(Iv, ConvertUnitState(37)) -0.05)  
    call DisplayTimedTextToForce(GetPlayersAll(), 6., GetUnitName(Iv) + "|cffff0000在墓穴中找到了武功秘籍！减少0.05的攻击间隔！")
    if  Iv ==zongyu  and GetUnitAbilityLevel(Iv, 'Ab28') >0 then
    if GetUnitAbilityLevel(Iv, 'Ab28') <7 then
    call IncUnitAbilityLevel(Iv,'Ab28')
    call DisplayTimedTextToForce(GetPlayersAll(),6.,GetUnitName(Iv) +"|cffff0000在墓穴中找到了武功秘籍！他的拳法水平精进了！怒拳破等级突破了自身上限！")

    endif

        endif  
    else
    call UnitAddItemByIdSwapped(hight_level_item_pool[GetRandomInt(1,84)],Iv)
    call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "恭喜" + GetUnitName(Iv) + "找到了" + GetItemName(GetLastCreatedItem()))

    endif

endif 

if loc_level == 6  then
if  Iv ==zongyu then
set zongyu_R_enchance = zongyu_R_enchance +3
call SetUnitState(Iv, ConvertUnitState(37), GetUnitState(Iv, ConvertUnitState(37)) -0.05)  
call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000在墓穴中找到了武功秘籍！他的拳法水平精进了！每次叠加攻击额外造成100点伤害并减少0.05的攻击间隔！")
call IncUnitAbilityLevel(Iv,'Ab28')
call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000在墓穴中找到了武功秘籍！他的拳法水平精进了！怒拳破等级突破了自身上限！")
call UnitAddItemByIdSwapped(hight_level_item_pool[GetRandomInt(99,132)],Iv)
call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000在墓穴中找到了极品宝物："+GetItemName(GetLastCreatedItem()))
else
set zongyu_R_enchance = zongyu_R_enchance +1
call UnitAddItemByIdSwapped(hight_level_item_pool[GetRandomInt(99,132)],Iv)
call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000在墓穴中找到了极品宝物："+GetItemName(GetLastCreatedItem()))
endif
endif

if GetRandomInt(1, 10) ==3 then
set found_time = found_time +2
call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000多次挖掘后，摸金校尉的掘墓水平进步了！累计掘墓次数额外+2")
endif

endfunction

function found_result takes unit Iv returns nothing
    local integer loc_num = GetRandomInt(1,100)
    set found_time = found_time +1
    // 第五次没挖到极品宝物增加保底概率
    if loc_num <90 and ModuloInteger(found_time,5)==0 then
        set found_percent = found_percent+5
    endif
    set loc_num = loc_num +found_percent
    if found_time > 20 and daomu_find ==false then
    call DisplayTextToForce(GetPlayersAll(),"在摸金校尉不懈努力下，孔明从墓穴中找到了另一本洛书河图！")
    call SetItemInvulnerable(CreateItem('it0o',-1220.,-5240.),true)
    call SetItemInvulnerable(CreateItem('it0y',-1220.,-5240.),true)
    set daomu_find =true
    endif
    // 结果判定
    // 挖掘次数1
   if ModuloInteger(found_time,5)==1 then
    // 小概率变更高一阶的
    if loc_num <95 then
      call  compute_found_result(loc_num, Iv,1)
    else
      call  compute_found_result(loc_num, Iv,2)
    endif
   endif
   if ModuloInteger(found_time,5)==2 then
// 小概率变更高一阶的
    if loc_num <95 then
      call  compute_found_result(loc_num, Iv,2)
    else
      call  compute_found_result(loc_num, Iv,3)
    endif
   endif
   if ModuloInteger(found_time,5)==3 then
// 小概率变更高一阶的
    if loc_num <95 then
      call  compute_found_result(loc_num, Iv,3)
    else
      call  compute_found_result(loc_num, Iv,4)
    endif
   endif
   if ModuloInteger(found_time,5)==4 then
// 小概率变更高一阶的
    if loc_num <95 then
      call  compute_found_result(loc_num, Iv,4)
    else
        // set found_percent = 0
      call  compute_found_result(loc_num, Iv,5)
    endif
   endif

   if ModuloInteger(found_time,5)==0 then
// 小概率变更高一阶的
    if loc_num <95 then
      call  compute_found_result(loc_num, Iv,5)
    else
     
      call  compute_found_result(loc_num, Iv,6)
    endif
   endif
endfunction
// 宗预天赋挖宝
function zongyu_found_conditions takes nothing returns boolean
return GetSpellAbilityId()=='Ab47'
endfunction
function zongyu_found_actions takes nothing returns nothing
        // call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00望气" )

    // 判断是否开始挖宝了
    if zongyu_found[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
         set zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-7480.,7200.)
         set zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-5000.,14250.)
        loop
            exitwhen IsTerrainPathable(zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],PATHING_TYPE_WALKABILITY)==false
            set zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-7480.,7200.)
            set zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-5000.,14250.)
            call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"搜索墓穴中") 

        endloop
        // 获取两个随机坐标点
        
        // 判断两个点是否是可通行的
        if IsTerrainPathable(zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],PATHING_TYPE_WALKABILITY)==false then
        call PingMinimapForForce(ai(GetOwningPlayer(GetTriggerUnit())),zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],3.)
        set zongyu_found[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
        call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00宝物所在坐标：X "+(I2S(R2I(zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))+("/ Y "+I2S(R2I(zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))))+(" |cffFF0000你当前所在坐标：X "+(I2S(R2I(GetUnitX(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))+("/ Y "+I2S(R2I(GetUnitY(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))))))
        call XV(GetTriggerUnit(),GetSpellAbilityId(),1,1)   
        else
        call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"图纸模糊不清,请看仔细2") 
        endif
        // 如果已经开始挖宝了
        else
            // 如果当前单位所在坐标满足要求
            if zongyu_found[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true and GetUnitX(GetTriggerUnit())+500.>=zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitX(GetTriggerUnit())-500.<=zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitY(GetTriggerUnit())+500.>=zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitY(GetTriggerUnit())-500.<=zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] then
                
                set zongyu_found[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] = false
                call found_result(GetTriggerUnit())
                // call SaveBoolean(FS,GetHandleId(GetTriggerUnit()),$140B62E4,false) 

                // call SaveReal(FS,GetHandleId(GetTriggerUnit()),$150B62E2,180.)
                if bC(GetTriggerUnit(), 'it0y') == true then
                      call XV(GetTriggerUnit(),'Ab47',1,120.1) 
                else
                      call XV(GetTriggerUnit(),'Ab47',1,240.1) 
                endif
              

                
                //  call XV(GetTriggerUnit(),GetSpellAbilityId(),1,240.0)
            else
               call PingMinimapForForce(ai(GetOwningPlayer(GetTriggerUnit())),zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],3.)

               call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00宝物所在坐标：X "+(I2S(R2I(zongyu_found_x[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))+("/ Y "+I2S(R2I(zongyu_found_y[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))))+(" |cffFF0000你当前所在坐标：X "+(I2S(R2I(GetUnitX(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))+("/ Y "+I2S(R2I(GetUnitY(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))))))
               call TriggerSleepAction(0.5)
               call XV(GetTriggerUnit(),'Ab47',1,1) 
            //    call TriggerSleepAction(0.5)
            //    call XV(GetTriggerUnit(),GetSpellAbilityId(),1,1)
            endif
    endif
   
endfunction

// 藏宝图挖宝
function found_conditions takes nothing returns boolean
return GetSpellAbilityId()=='Ab23'
endfunction
function found_actions takes nothing returns nothing
    // call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00寻龙" )
    // 判断是否开始挖宝了
    if IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
         set IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-7480.,7200.)
         set II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-5000.,14250.)
        loop
            exitwhen IsTerrainPathable(IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],PATHING_TYPE_WALKABILITY)==false
            set IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-7480.,7200.)
            set II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-5000.,14250.)
            call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"搜索墓穴中") 

        endloop
        // 获取两个随机坐标点
        
        // 判断两个点是否是可通行的
        if IsTerrainPathable(IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],PATHING_TYPE_WALKABILITY)==false then
        call PingMinimapForForce(ai(GetOwningPlayer(GetTriggerUnit())),IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],3.)
        set IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
        call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00宝物所在坐标：X "+(I2S(R2I(IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))+("/ Y "+I2S(R2I(II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))))+(" |cffFF0000你当前所在坐标：X "+(I2S(R2I(GetUnitX(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))+("/ Y "+I2S(R2I(GetUnitY(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))))))
        call XV(GetTriggerUnit(),GetSpellAbilityId(),1,1)   
        else
        call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"图纸模糊不清,请看仔细2") 
        endif
        // 如果已经开始挖宝了
        else
            // 如果当前单位所在坐标满足要求
            if IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true and GetUnitX(GetTriggerUnit())+500.>=IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitX(GetTriggerUnit())-500.<=IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitY(GetTriggerUnit())+500.>=II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitY(GetTriggerUnit())-500.<=II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] then
                
                if LoadBoolean(FS,GetHandleId(GetTriggerUnit()),$140B62E4) ==true  then
                set IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] = false
                call found_result(GetTriggerUnit())
                call SaveBoolean(FS,GetHandleId(GetTriggerUnit()),$140B62E4,false) 

                call SaveReal(FS,GetHandleId(GetTriggerUnit()),$140B62E2,150.)
                // call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00冷却开始：" )
                if bC(GetTriggerUnit(), 'it0y') == true then
                       call SaveReal(FS,GetHandleId(GetTriggerUnit()),$140B62E2,120.)
                    //   call XV(GetTriggerUnit(),'Ab23',1,120.1) 
                else
                      call SaveReal(FS,GetHandleId(GetTriggerUnit()),$140B62E2,240.)
                    //   call XV(GetTriggerUnit(),'Ab23',1,180.1) 
                endif
                else

                endif
           
                
                //  call XV(GetTriggerUnit(),GetSpellAbilityId(),1,240.0)
            else
               call PingMinimapForForce(ai(GetOwningPlayer(GetTriggerUnit())),IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],3.)

               call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00宝物所在坐标：X "+(I2S(R2I(IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))+("/ Y "+I2S(R2I(II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))))+(" |cffFF0000你当前所在坐标：X "+(I2S(R2I(GetUnitX(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))+("/ Y "+I2S(R2I(GetUnitY(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))))))
               call TriggerSleepAction(0.2)
               call XV(GetTriggerUnit(),'Ab23',1,LoadReal(FS,GetHandleId(GetTriggerUnit()),$140B62E2)) 
            //    call TriggerSleepAction(0.5)
            //    call XV(GetTriggerUnit(),GetSpellAbilityId(),1,1)
            endif
    endif
   
endfunction

// 挖宝事件
function Trig_found takes nothing returns nothing
set found_trig=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(found_trig,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(found_trig,Condition(function found_conditions))
call TriggerAddAction(found_trig,function found_actions)
endfunction

function zongyun_found_init takes nothing returns nothing

set zongyu_found_trig =CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(zongyu_found_trig,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(zongyu_found_trig,Condition(function zongyu_found_conditions))
call TriggerAddAction(zongyu_found_trig,function zongyu_found_actions)
endfunction

// 地图事件
function Trig_listen_map_action takes nothing returns nothing
    if( bC(Ib[GetConvertedPlayerId(GetTriggerPlayer())], 'it0o') == true) then
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "累计已掘墓:" + I2S(found_time) +" 次") 
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "健体术累计增幅伤害（宗预）:" + I2S(zongyu_R_enchance *50) + " 点") 

    else
    call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0,"你没有洛书河图！")
    endif
endfunction
function Trig_listen_map takes nothing returns nothing
set map_listen=CreateTrigger()
call TriggerRegisterPlayerChatEvent(map_listen,Player(0),"-map",true)
call TriggerRegisterPlayerChatEvent(map_listen,Player(1),"-map",true)
call TriggerRegisterPlayerChatEvent(map_listen,Player(2),"-map",true)
call TriggerRegisterPlayerChatEvent(map_listen,Player(3),"-map",true)
call TriggerRegisterPlayerChatEvent(map_listen,Player(4),"-map",true)
call TriggerRegisterPlayerChatEvent(map_listen,Player(5),"-map",true)
call TriggerRegisterPlayerChatEvent(map_listen,Player(6),"-map",true)
call TriggerRegisterPlayerChatEvent(map_listen,Player(7),"-map",true)
call TriggerAddAction(map_listen,function Trig_listen_map_action)
endfunction
// 救命事件
function Trig_sos_time_off takes nothing returns nothing

call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|Cffff0000七星守护已经准备就绪！使用后可以使孔明进入9秒的无敌状态！")
set sos_cooldown = false
endfunction

function Trig_listen_sos_action takes nothing returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)

if sos_cooldown == true and bC(Dz, 'srtl') == true then
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0,"七星灯的力量暂时还没有恢复！")

elseif sos_cooldown ==false and bC(Dz,'srtl') == true then
    if Dz !=null then
call UnitAddItem(Dz,CreateItem('IR01',GetUnitX(Dz),GetUnitY(Dz)))
    endif
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|Cffff0000玩家" + I2S(GetConvertedPlayerId(GetTriggerPlayer())) + "使用了七星守护！孔明进入18秒的无敌状态！冷却时间10分钟")
set sos_cooldown = true
call TimerStart(CS,600,false,function Trig_sos_time_off)
else 
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "孔明无法使用七星续命！")
endif    
// set CS=null
endfunction
function Trig_listen_sos takes nothing returns nothing
set sos_listen=CreateTrigger()
call TriggerRegisterPlayerChatEvent(sos_listen,Player(0),"-sos",true)
call TriggerRegisterPlayerChatEvent(sos_listen,Player(1),"-sos",true)
call TriggerRegisterPlayerChatEvent(sos_listen,Player(2),"-sos",true)
call TriggerRegisterPlayerChatEvent(sos_listen,Player(3),"-sos",true)
call TriggerRegisterPlayerChatEvent(sos_listen,Player(4),"-sos",true)
call TriggerRegisterPlayerChatEvent(sos_listen,Player(5),"-sos",true)
call TriggerRegisterPlayerChatEvent(sos_listen,Player(6),"-sos",true)
call TriggerRegisterPlayerChatEvent(sos_listen,Player(7),"-sos",true)
call TriggerAddAction(sos_listen,function Trig_listen_sos_action)
endfunction

function Trig_select_condition takes nothing returns boolean 
    //  call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "选择的单位是:" + GetUnitName(GetTriggerUnit())) 
    return true
    endfunction
function Trig_select_action takes nothing returns nothing
local unit loc_unit
set loc_unit =GetTriggerUnit()
if GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP) < 5 then
if GetUnitTypeId(loc_unit) == 'HYP0' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "夏侯月姬：夏侯氏，本名不详。为夏侯霸之从妹，张飞之妻，于采桑时为张飞所得，后生二子二女；其二女皆为蜀汉后主皇后")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q折翼之舞，W镇魂怒吼，E勇往直前，R勇冠三军")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：放逐之锋")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00武器激荡着圣灵的能量，在15秒的持续时间里，给予她20％的攻击力加成，并提高她的攻击距离，并拥有一次使用|cffffcc00疾风斩|R的能力。|n|n|cffffcc00疾风斩|R：挥出三道冲击波，能够对被它命中的敌人造成力量属性伤害。")
elseif GetUnitTypeId(loc_unit) == 'HZF0' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "张飞：字益德，幽州涿郡人，三国时期蜀汉名将，五虎上将之一。因其勇武过人，而与关羽并称为“万人敌")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "建安十三年（208年），刘备于长坂坡败退时，张飞仅率二十骑断后，曹军无人敢逼近，刘备因此得以免难。在巴西之战中，击败魏国名将张郃、在武都之战中，兵败而还。后因暴而无恩，被部将范强、张达杀害，追谥为桓侯。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q泰山压顶，W狮子吼，E醉卧沙场，R勇冠三军")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：万夫莫敌")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00被动提高护甲并减少近战伤害，攻击时有概率对目标造成基于自身攻击和最大生命值的真实伤害")
elseif GetUnitTypeId(loc_unit) == 'HAHN' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "阿会喃：史上无载，《三国演义》中人物，南蛮王孟获属下大将，第三洞元帅")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "与董荼那等人一起担任孟获的援军出征，但是被俘虏，又被诸葛亮释放，再次出战时，被唾骂不知羞耻，面红耳赤的退军。后同董荼那共同绑架孟获献于蜀军，却被诸葛亮在其二人与孟获的重要性间权衡后出卖了他们，放走了孟获，使其为孟获所杀。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q嗜血杀戮，W蔑视，E旋风斩，R狂怒之心")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：无尽怒火")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00使英雄在5/7/9/11秒内免疫任何伤害和控制，并使攻击伤害提高30%")
elseif GetUnitTypeId(loc_unit) == 'HGY0' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "关羽：字云长，河东郡解县人，三国时期蜀汉名将，五虎上将之首。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "因事亡命涿郡，跟从刘备起兵，镇压黄巾起义。官渡之战中，阵斩颜良文丑，解白马之围，受封汉寿亭侯。刘备称王后，拜前将军，围攻樊城，水淹于禁统帅的七军，斩杀敌将庞德，威震华夏。后败走麦城兵败身死，追谥为壮缪侯。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q千里走单骑，W拖刀斩，E威震四方，R武道")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：水淹七军")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00创建一个持续15秒的深渊瀑布围困敌人，并使敌人受到额外伤害加成")
elseif GetUnitTypeId(loc_unit) == 'HGS0' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "吕布：字奉先，五原郡九原人，东汉末年名将，汉末群雄之一。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "吕布初因勇武被并州刺史丁原任为主簿，大见亲待。董卓入京之后，诱其杀丁原，并任骑都尉，后任中郎将，封都亭侯，与董卓誓为父子。关东军起兵讨董卓，吕布参战，因与将领胡轸不和，被孙坚战败。后被王允、士孙瑞、杨瓒等拉拢，成功刺杀董卓，任职奋威将军，进封温侯，与王允同掌朝政。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "王允死后，其先后投靠袁术、袁绍、刘备均未遂，故占据徐州一带，自称徐州刺史。建安三年（198年），吕布被曹操围困数月，后下城投降，最终被曹操缢杀。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q鬼*方天画斩，W赤兔.魂，E天下无敌，R鬼神之力")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：魔神降临")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00短暂的延迟后从天而降（延迟和晕眩时间视施法距离而定），对范围内的敌人造成敏捷属性附加十倍距离的真实伤害和持续的魔法伤害。")
elseif GetUnitTypeId(loc_unit) == 'HWD0' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "黄舞蝶：史上无载，黄忠之女，随父亲一齐投效刘备。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q急速射击，W冰冻冷箭，E恋恋蝶舞，R百步穿杨")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：魔神降临")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00短暂的延迟后从天而降（延迟和晕眩时间视施法距离而定），对范围内的敌人造成敏捷属性附加十倍距离的真实伤害和持续的魔法伤害。")
elseif GetUnitTypeId(loc_unit) == 'QTDS' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "齐天大圣：孙悟空（又称美猴王、齐天大圣、孙行者、斗战胜佛），是中国古典神魔小说《西游记》中的人物")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "由开天辟地产生的仙石孕育而生，出生地位于东胜神洲的花果山上，因带领猴群进入水帘洞而被尊为美猴王")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "五百余年后经观音点化，被唐僧救出，法号行者，保护唐僧西天取经， [95]一路降妖除魔，不畏艰难困苦，历经九九八十一难，最后取得真经修成正果，被封为斗战胜佛")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q掣天撼地，W大闹天宫，E粉碎打击，R大成仙体")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：斗战胜佛")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00齐天大圣获得腾云驾雾能力、使用技能可以幻化出存在60秒的6个分身。")
elseif GetUnitTypeId(loc_unit) == 'HWY0' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "魏延：字文长，义阳人，三国时期蜀汉名将，官至前军师、征西大将军、假节，封爵南郑侯")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "魏延初率部曲随刘备入蜀，屡立战功，升任牙门将军。刘备称汉中王，提拔魏延为汉中都督、汉中太守，镇守汉中。蜀汉建立后升为镇北将军，封爵都亭侯。此后跟随诸葛亮北伐曹魏，建兴八年（230年），魏延率军大破魏将郭淮、费瑶。建兴九年（231年），魏延率军大败魏军，获得甲首三千级")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "建兴十二年（234年），诸葛亮去世，魏延不愿受长史杨仪约束，在退军途中烧绝栈道，反攻杨仪，却因部属离心而落败，最终被杀，并被灭族")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q十方俱灭，W恪守不渝，E反击螺旋，R孤注一掷")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：不灭意志")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00让该单位增加100%/150%/200%/250%的攻击速度和移动速度，状态期间无视一切伤害，无视一切负面状态。普通攻击额外造成目标3%当前最大生命值的伤害")
elseif GetUnitTypeId(loc_unit) == 'HWY1' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "卧龙：孔明身外化身。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "赤壁之战中与周瑜二人利用曹操的骄傲轻敌，内部将黄盖之议采用火攻，设计诈降，命其率小战船十艘，上装柴草，灌以膏油，假称投降，向北岸而进，至离曹营二里之处时，各船一齐点火，然后借助风势，直向曹军冲去，大破曹军80万人马。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00天赋闪烁，所习技能为：Q风卷残云，W黑暗物质，E魔法结节，R无中生有")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：隔岸观火")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff001000码内令敌人移动速度减少90%并每秒损失智力*（技能等级+3）的技能系数伤害，持续15秒")
elseif GetUnitTypeId(loc_unit) == 'HZGG' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "诸葛果：史上无载。为《历代神仙通鉴》中诸葛亮女儿的名字，《历代神仙通鉴》记录从上古到明代的神仙，因此诸葛果不见于任何史书。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "容貌甚伟，时人异焉。出生时，野外仙气缥缈、白鹤环绕，生来天资聪慧，对道学由衷热爱，成都西南有朝真观，即乘烟观。相传，诸葛果在这里避战乱，最终修成仙道，羽化升天。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00天赋多情剑客无情剑，所习技能为：Q风卷残云，W黑暗物质，E魔法结节，R无中生有")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：隔岸观火")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff001000码内令敌人移动速度减少90%并每秒损失智力*（技能等级+3）的技能系数伤害，持续15秒")
elseif GetUnitTypeId(loc_unit) == 'Hvsh' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "鲍三娘：鲍氏者，关索之妻也。居夔州之鲍家庄，勇力绝伦，有廉康贼求取，不许。与战，破之。关索往征，不胜遂以城降，同扶汉室焉")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "蜀炎兴元年（公元263年），钟会率15万大军兵攻蜀，蜀军5万将士在今昭化古城东门外的桔柏渡西岸进行阻击。关索被魏将庞会打落江中淹死，鲍三娘则在土基坝一带战死")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q幽灵身法，W闪身，E迷魂术，R暗杀术")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：神佑")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00让该单位增加100%/150%/200%/300%的攻击速度，状态期间无视一切伤害，消除一切负面魔法状态（免疫重击）")
elseif GetUnitTypeId(loc_unit) == 'O003' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "凤姬：又名关银屏。武圣关羽之女，喜好舞刀弄枪，义薄云天，行侠仗义，每每作战都身先士卒，蜀国上下皆以她为楷模")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "诸葛亮南征时，启用了俞元（今澄江）的李恢共同南征平叛，同时亲自作媒，把银屏许配给李恢的儿子李遗为妻。银屏随李恢父子南征中，立下了汗马功劳，战争结束后，在俞元住了下来。一直和俞元人民相处得很好，还亲自教俞元人民纺织、耕种，教俞元人民读书识字。大家都很敬重她，都称她为“关三小姐”")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q救援，W镜像，E武道，R避实就虚")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：圣灵护体")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00让该单位增加100%/150%/200%/300%的攻击速度，状态期间无视一切伤害。")
elseif GetUnitTypeId(loc_unit) == 'Opgh' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "关索：关羽的第三子。荆州失陷后逃难到鲍家庄养病，伤愈后听说东吴仇人已死，乃回归蜀汉，并随同诸葛亮南征。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "蜀炎兴元年（公元263年），钟会率15万大军兵攻蜀，蜀军5万将士在今昭化古城东门外的桔柏渡西岸进行阻击。关索被魏将庞会打落江中淹死，鲍三娘则在土基坝一带战死")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q春秋刀法，W八门金锁阵，E重击，R分裂攻击")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：武神")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00每级减少0.05的攻击间隔，提高攻击伤害15%，提高5%*技能等级技能伤害，魔法免疫。（攻击时有5%*技能等级的几率施展横扫千军对周围目标造成力量+敏捷属性伤害）")
elseif GetUnitTypeId(loc_unit) == 'HWQ0' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "霍弋：字绍先，南郡枝江人。三国时期蜀汉至西晋初时将领，蜀汉将领霍峻之子。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "刘备时为太子舍人，后主登基为谒者。诸葛亮北驻汉中时用为丞相府记室，诸葛亮死后为黄门侍郎，刘禅立太子后为中庶子。尽言规谏太子，甚为得体。后永昌郡蛮夷作乱，刘禅以霍弋领永昌太守，率军讨伐，斩其豪帅，郡界宁静之后迁监军翊军将军，领建宁太守，统南中诸郡。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "景耀六年（263年），进号安南将军。邓艾偷袭阴平，霍弋想率军救援成都，但刘禅以成都已有准备，不准，后刘禅投降，霍弋在得知司马氏善待刘禅后，方才率领南中六郡投降。降晋后仍为南中都督，平定交阯、日南、九真三郡，功封列侯。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q敲竹杠，W抽冷子，E不买账，R脑瓜崩")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：碎瓜娃")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00增加武将75+技能等级*25点的护甲，每级减少0.05的攻击间隔。每3次攻击额外造成2倍攻击的真实伤害。）")
elseif GetUnitTypeId(loc_unit) == 'Nbbc' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "关兴：字安国，河东解县人，关羽的第二子。弱冠时就因得到丞相诸葛亮的赏识而深受重用，官至侍中、中监军，随后英年早逝")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "在《三国演义》中，关兴随刘备兴兵伐吴斩杀潘璋夺回父亲的青龙偃月刀，为蜀汉后期重要将领，并与张飞之子张苞结义，多次参加诸葛亮北伐，后在诸葛亮第六次北伐前去世。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q幻影斩，W青龙刀法，E反戈一击，R武道")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：真实残像")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00制造出5/6/7/8个具有攻击力幻象来迷惑敌人。同时也会驱逐掉武将身上所有的魔法效果，持续60秒。）")
elseif GetUnitTypeId(loc_unit) == 'Hjai' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "黄月英：本名不详，沔南名士黄承彦之女，诸葛亮之妻，传说名为黄月英。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "其人记载见《襄阳耆旧记》，其父称其长相丑陋、黄头发、黑皮肤，但才华却与诸葛亮相称 。乡间有“莫作孔明择妇，正得阿承丑女”的谚语流传。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q玄冰爆，W玄冰咒，E玄冰甲，R玄冰真气")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：天降甘霖")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00在一大片范围内召唤出一阵强大的能量雨，能以每秒500/1000/1500/2000点的速度恢复其中友军单位的生命值。并提高周围友军100/200/300/400的防御,同时对范围内敌人造成智力*(技能等级+3)的伤害，持续30秒。）")
elseif GetUnitTypeId(loc_unit) == 'H006' then
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "黄忠：字汉升，三国时期蜀汉名将，五虎上将之一。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "建安二十四年（219年），定军山之战中，黄忠阵斩曹操部下名将夏侯渊，拜征西将军。刘备称汉中王后，加封后将军，赐关内侯。次年（220年），黄忠病逝。")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00所习技能为：Q击晕矢，W老当益壮，E百发百中，R百步穿杨")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff0030级时解锁终极技：烈炎之矢")
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "|Cff00ff00射出远距离的带着火焰的箭矢，对沿途的敌人造成伤害，并在终点发生爆炸伤害范围内的敌人。）")

endif
endif
endfunction
function Trig_Selected_unit takes nothing returns nothing
set select_listen=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(0),true)
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(1),true)
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(2),true)
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(3),true)
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(4),true)
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(5),true)
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(6),true)
call TriggerRegisterPlayerSelectionEventBJ(select_listen, Player(7),true)
call TriggerAddCondition(select_listen, Condition(function Trig_select_condition))
call TriggerAddAction(select_listen,function Trig_select_action)
endfunction
// 速度监听
// function Trig_listen_speed_action takes nothing returns nothing
//     if( bC(Ib[GetConvertedPlayerId(GetTriggerPlayer())], 'it0o') == true) then
//     call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "累计已掘墓:" + I2S(found_time) +" 次") 
//     else
//     call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0,"你没有洛书河图！")
//     endif
// endfunction
// function Trig_listen_speed takes nothing returns nothing
// set speed_listen=CreateTrigger()
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(0),"-speed",true)
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(1),"-speed",true)
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(2),"-speed",true)
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(3),"-speed",true)
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(4),"-speed",true)
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(5),"-speed",true)
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(6),"-speed",true)
// call TriggerRegisterPlayerChatEvent(speed_listen,Player(7),"-speed",true)
// call TriggerAddAction(speed_listen,function Trig_listen_map_action)
// endfunction
// 
    // 掘墓对应事件
function found_event takes nothing returns nothing
local unit CE
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)

if Ix != LoadInteger(Ia, GetHandleId(Iv), $140B62E5) then
        call DestroyTimer(CS)
endif

// 如果倒计时时间已经就绪
if LoadReal(FS,GetHandleId(Iv),$140B62E2)<=0. then
    // call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00洛河图书准备就绪！" )
    // 如果心之钢已经冷却好
    if LoadBoolean(FS,GetHandleId(Iv),$140B62E4) ==true then
     call XV(Iv,'Ab23',1,0)
    else
     // 如果心之钢还没冷却好 
     call SaveBoolean(FS,GetHandleId(Iv),$140B62E4,true) 


    call SaveReal(FS,GetHandleId(Iv),$140B62E2,0.)
    endif

else

  call SaveBoolean(FS,GetHandleId(Iv),$140B62E4,false) 
//   重新设置冷却
//   call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00计算冷却中！" + R2S(LoadReal(FS,GetHandleId(Iv),$140B62E2)))
  call XV(Iv,'Ab23',1,LoadReal(FS,GetHandleId(Iv),$140B62E2))
 call SaveReal(FS,GetHandleId(Iv),$140B62E2,LoadReal(FS,GetHandleId(Iv),$140B62E2)-.1)   
endif

endfunction

function condition_found takes nothing returns boolean 
return  GetItemTypeId(GetManipulatedItem())=='it0o'
endfunction

function computed_found takes nothing returns nothing
local timer CS
local integer Ix=0
set CS=CreateTimer()
set Ix=GetHandleId(CS)
// 去除上一个定时
call SaveInteger(Ia, GetHandleId(GetTriggerUnit()), $140B62E5,Ix)
// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00保存的定时器ID：" + I2S(Ix))
// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00捡起洛河图书：" )
call SaveUnitHandle(Ia, Ix, 0, GetTriggerUnit())

// 重新设置心之钢冷却为未完成
call SaveBoolean(FS,GetHandleId(GetTriggerUnit()),$140B62E4,false)
// 重新设置心之钢角色射程
// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00初始射程！" + R2S(LoadReal(FS, GetHandleId(GetTriggerUnit()), $130B62E5)))
call TimerStart(CS,.1,true,function found_event)
endfunction

function registerBook takes nothing returns nothing
set found_resgister=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(found_resgister,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(found_resgister,Condition(function condition_found))
call TriggerAddAction(found_resgister,function computed_found)
endfunction


function Trig_zongyuW_conditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'Ab25' ) )
endfunction
function zongyu_W_Action takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local real loc_distance 
    local real loc_distance2
    local unit Iv =LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)
    local unit CE=LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xE1001B12)
    set loc_distance = SquareRoot((GetUnitX(Iv) -GetUnitX(CE)) * (GetUnitX(Iv) -GetUnitX(CE)) + (GetUnitY(Iv) -GetUnitY(CE)) * (GetUnitY(Iv) -GetUnitY(CE)))
    // call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "当前实际距离为：" + R2S(loc_distance))


    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D, ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) ) + ( 1.00 ) ))
    call SetUnitFacing(Iv, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2))
    if ( ( LoadBoolean(YDLOC, GetHandleId(GetExpiredTimer()), 0xC2781FCF) == false ) and ( loc_distance <= 80.00 ) ) then
        call SaveBoolean(YDLOC, GetHandleId(GetExpiredTimer()), 0xC2781FCF, true)
        // 如果跳跃的目标是敌人则造成眩晕
        if IsUnitEnemy(CE, GetOwningPlayer(Iv)) == true then
        call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623071,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,1),852095,CE)
        call UnitDamageTarget(Iv, CE, bk(Iv, 2, GetUnitAbilityLevel(Iv, 'Ab25')), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_DIVINE, WEAPON_TYPE_WHOKNOWS)
        endif
    else
    endif
    if ( ( LoadBoolean(YDLOC, GetHandleId(GetExpiredTimer()), 0xC2781FCF) == true ) ) then
        if ( ( LoadInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x9FDB62AC) < 6 ) ) then
        else
            if ( ( LoadInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x9FDB62AC) == 6 ) ) then
                call DisableTrigger(zongyu_trg_X)
                call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2FC9F415, 20.00)
                if ( ( udg_xx == null ) ) then
                    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2))
                    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E, 8.00)
                    set udg_xx=CreateUnit(Player(0), 'u00j', ( ( GetUnitX(CE) ) + ( ( ( CosBJ(LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2)) ) * ( 300.00 ) ) ) ), ( ( GetUnitY(CE) ) + ( ( ( SinBJ(LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2)) ) * ( 300.00 ) ) ) ), 0)
                else
                    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2, YDWEAngleBetweenUnits(Iv , udg_xx))
                    set loc_distance2 = SquareRoot((GetUnitX(Iv) -GetUnitX(udg_xx)) * (GetUnitX(Iv) -GetUnitX(udg_xx)) + (GetUnitY(Iv) -GetUnitY(udg_xx)) * (GetUnitY(Iv) -GetUnitY(udg_xx)))
                    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E, ( ( RMinBJ(loc_distance2, 1200.00) ) / ( 40.00 ) ))
                endif
                call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Weapons\\FaerieDragonMissile\\FaerieDragonMissile.mdl", Iv, "weapon"))
                call SetUnitAnimation(Iv, "attack slam")
            else
                call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA99320FA, ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA99320FA) ) + ( 1.00 ) ))
                call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x9E4D0A0D, SquareRoot(( ( Pow(LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2FC9F415), 2.00) ) - ( Pow(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA99320FA) ) - ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2FC9F415) ) ), 2.00) ) )))
                call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x9F0C6E00, ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x9E4D0A0D) ) * ( 9.00 ) ))
                call SetUnitFlyHeight(Iv, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x9F0C6E00), 0.00)
                call SetUnitX(Iv, ( ( GetUnitX(Iv) ) + ( ( ( CosBJ(LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2)) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
                call SetUnitY(Iv, ( ( GetUnitY(Iv) ) + ( ( ( SinBJ(LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2)) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
                if ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x9E4D0A0D) < 1.00 ) ) then
                    call RemoveUnit(udg_xx)
                    call SetUnitFlyHeight(Iv, 0.00, 0.00)
                    call YDWETimerDestroyEffect(1.00 , AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(Iv), GetUnitY(Iv)))
                    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86, CreateUnit(ConvertedPlayer(LoadInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x32A9E4C8)), 'u00i', GetUnitX(Iv), GetUnitY(Iv), 0))
                    // call UnitAddAbility(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86), 'A003')
                    // 减速
                    call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41314C54,1,GetUnitX(Iv),GetUnitY(Iv),bj_UNIT_FACING,1),852096)

                    set ydl_group=CreateGroup()
                    call GroupEnumUnitsInRange(ydl_group, GetUnitX(Iv), GetUnitY(Iv), 350.00, null)
                    loop
                        set ydl_unit=FirstOfGroup(ydl_group)
                        exitwhen ydl_unit == null
                        call GroupRemoveUnit(ydl_group, ydl_unit)
                        if IsUnitEnemy(ydl_unit, GetOwningPlayer(Iv)) == true and ydl_unit !=Iv then
                            // call IssueTargetOrder(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86), "slow", ydl_unit)
                        call UnitDamageTarget(Iv, ydl_unit, bk(Iv, 2, GetUnitAbilityLevel(Iv, 'Ab25')), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_DIVINE, WEAPON_TYPE_WHOKNOWS)
                        else
                        endif
                    endloop
                    call DestroyGroup(ydl_group)
                    call YDWETimerRemoveUnit(0.10 , LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86))
                    // call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
                    call DestroyTimer(GetExpiredTimer())
                else
                endif
            endif
        endif
        call SaveInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x9FDB62AC, ( ( LoadInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x9FDB62AC) ) + ( 1 ) ))
    else
        call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x38344552, YDWEAngleBetweenUnits(Iv , CE))
        call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E, ( ( 25.00 ) * ( ( ( 1.00 ) - ( ( ( ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) ) * ( 0.03 ) ) ) / ( ( ( 3.00 ) + ( ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) ) * ( 0.03 ) ) ) ) ) ) ) ) ) ))
        call SetUnitX(Iv, ( ( GetUnitX(Iv) ) + ( ( ( CosBJ(LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x38344552)) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
        call SetUnitY(Iv, ( ( GetUnitY(Iv) ) + ( ( ( SinBJ(LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x38344552)) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
    endif
    set ydl_group=null
    set ydl_unit=null
endfunction
function Trig_zongyu_w takes nothing returns nothing
    local timer ydl_timer
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
    set ydl_localvar_step=ydl_localvar_step + 3
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xE1001B12, GetSpellTargetUnit())
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2970F80D, 0.00)
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9FDB62AC, 0)
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2, YDWEAngleBetweenUnits(GetTriggerUnit() , GetSpellTargetUnit()))
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x32A9E4C8, GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
    call SaveBoolean(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC2781FCF, false)
    call UnitAddAbility(GetTriggerUnit(), 'Arav')
    call UnitRemoveAbility(GetTriggerUnit(), 'Arav')
    set udg_xx=null
    call EnableTrigger(zongyu_trg_X)
    set ydl_timer=CreateTimer()
    call SaveTriggerHandle(YDLOC, GetHandleId(ydl_timer), 0x0FEDE78C, LoadTriggerHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x0FEDE78C))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x2E1BF0CA, GetSpellTargetUnit())
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
    call SaveInteger(YDLOC, GetHandleId(ydl_timer), 0x9FDB62AC, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9FDB62AC))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xA3098AE2, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x9F0C6E00, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00))
    call SaveBoolean(YDLOC, GetHandleId(ydl_timer), 0xC2781FCF, LoadBoolean(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC2781FCF))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0xE1001B12, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xE1001B12))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x384C9D86, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x384C9D86))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x2970F80D, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2970F80D))
    call SaveInteger(YDLOC, GetHandleId(ydl_timer), 0x32A9E4C8, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x32A9E4C8))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x2FC9F415, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2FC9F415))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x34D6230E, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x34D6230E))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x38344552, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x38344552))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xA99320FA, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA99320FA))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x9E4D0A0D, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9E4D0A0D))
    call TimerStart(ydl_timer, 0.01, true, function zongyu_W_Action)
    // call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
    set ydl_timer=null
endfunction
//===========================================================================
function InitTrig_zongyuW takes nothing returns nothing
    set zongyu_trg_W=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(zongyu_trg_W, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(zongyu_trg_W, Condition(function Trig_zongyuW_conditions))
    call TriggerAddAction(zongyu_trg_W, function Trig_zongyu_w)
endfunction

function Trig_zongyuX_Conditions takes nothing returns boolean
    return ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("smart") ) and ( GetTriggerUnit() == zongyu ) )
endfunction
function Trig_zongyuX_Actions takes nothing returns nothing
    call RemoveUnit(udg_xx)
    set udg_xx=CreateUnit(Player(0), 'u00j', GetOrderPointX(), GetOrderPointY(), 0)
endfunction
//===========================================================================
function InitTrig_zongyuX takes nothing returns nothing
    set zongyu_trg_X=CreateTrigger()
    call DisableTrigger(zongyu_trg_X)
    call TriggerRegisterAnyUnitEventBJ(zongyu_trg_X, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
    call TriggerAddCondition(zongyu_trg_X, Condition(function Trig_zongyuX_Conditions))
    call TriggerAddAction(zongyu_trg_X, function Trig_zongyuX_Actions)
endfunction

// 宗预Q
function Trig_qConditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == 'Ab24' ) )
endfunction
function zongyu_Q_Action takes nothing returns nothing
    local group ydl_group
    // 目标
    local unit CE
    // 自己
    local unit Iv = LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)
 
    // call YDWETimerDestroyEffect(2 , AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845)), GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845))))
    set ydl_group=CreateGroup()
    call GroupEnumUnitsInRange(ydl_group, GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845)), GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845)), 350.00, null)
    loop
        set CE=FirstOfGroup(ydl_group)
        exitwhen CE == null
        call GroupRemoveUnit(ydl_group, CE)
        if IsUnitEnemy(CE, GetOwningPlayer(Iv)) == true and CE !=Iv then

          
            if bC(Iv, $69743061) ==true then 
                  call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,'Ab2a',1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,1),852095,CE)
                  call UnitDamageTarget(Iv, CE, bk(Iv, 2, GetUnitAbilityLevel(Iv, 'Ab24') +2), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_DIVINE, WEAPON_TYPE_WHOKNOWS)
            else
                  call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623071,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,1),852095,CE)
                  call UnitDamageTarget(Iv, CE,  bk(Iv, 2, GetUnitAbilityLevel(Iv, 'Ab24')), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_DIVINE, WEAPON_TYPE_WHOKNOWS)
            endif
        else
        endif
    endloop
    call DestroyGroup(ydl_group)

    // call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
    call DestroyTimer(GetExpiredTimer())
    set ydl_group=null
    set CE=null
endfunction
function Trig_zongyu_Q takes nothing returns nothing
    local timer ydl_timer
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
    local real point_x
    local real point_y
    local unit loc_unit =GetSpellTargetUnit()

    set ydl_localvar_step=ydl_localvar_step + 3
//  如果有混元霹雳手，移除其无敌效果
    if bC(GetTriggerUnit(), $69743061) ==true then 
        if UnitHasBuffBJ(loc_unit, 'BHds') == true and IsUnitAlly(loc_unit,Player(8)) ==false then
        call UnitRemoveBuffBJ('BHds', loc_unit)
        endif
    endif
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2, YDWEAngleBetweenUnits(GetSpellTargetUnit() , GetTriggerUnit()))
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2B0A6845, GetSpellTargetUnit())
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x32A9E4C8, GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
    call YDWEJumpTimer(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2B0A6845) , LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) , 500.00 , 0.40 , 0.01 , 300.00)
    // call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("abilities\\weapons\\DemolisherMissile\\DemolisherMissile.mdl", LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2B0A6845), "origin"))
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x2B0A6845, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2B0A6845))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x384C9D86, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x384C9D86))
    call SaveInteger(YDLOC, GetHandleId(ydl_timer), 0x32A9E4C8, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x32A9E4C8))
    call TimerStart(ydl_timer, 0.38, false, function zongyu_Q_Action)
    call TriggerSleepAction(1)
 

    // 防止卡怪
    set point_x = GetUnitX(loc_unit)
    set point_y =GetUnitY(loc_unit)
    // call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "开始进行判定"+ R2S(point_x) + "," + R2S(point_y)) 
    if IsTerrainPathable(point_x,point_y ,PATHING_TYPE_WALKABILITY)==true then
    //    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "进行路径判定，当前目标坐标：" + R2S(point_x) + "," + R2S(point_y)) 

        set point_x = GetRandomReal(point_x - 400, point_x +400)
        set point_y =GetRandomReal(point_y - 400, point_y +400)
        loop
            exitwhen IsTerrainPathable(point_x,point_y ,PATHING_TYPE_WALKABILITY)==false 
            set point_x = GetRandomReal(point_x - 400, point_x +400)
            set point_y =GetRandomReal(point_y - 400, point_y +400)
            // call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "进行判定中，当前目标坐标：" + R2S(point_x) + "," + R2S(point_y)) 
        endloop
        call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "防止卡怪！" ) 
        call SetUnitX(loc_unit,point_x)
        call SetUnitY(loc_unit,point_y)
        else
           
    endif

    // call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
    set ydl_timer=null
endfunction
//===========================================================================
function InitTrig_ZongyuQ takes nothing returns nothing
    set zongyu_trg_Q=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(zongyu_trg_Q, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(zongyu_trg_Q, Condition(function Trig_qConditions))
    call TriggerAddAction(zongyu_trg_Q, function Trig_zongyu_Q)
endfunction


// 宗预技能结束

// 陈到技能触发开始
function Trig_Xuyi1Conditions takes nothing returns boolean
 
    //  call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "技能是id：" + I2S(GetSpellAbilityId()))
    return GetSpellAbilityId() == $41623174
endfunction
function Trig_Xuyi1Func014Func003A takes nothing returns nothing
    call SetUnitX(GetEnumUnit(), ( ( GetUnitX(GetEnumUnit()) ) + ( ( ( CosBJ(GetUnitFacing(GetEnumUnit())) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
    call SetUnitY(GetEnumUnit(), ( ( GetUnitY(GetEnumUnit()) ) + ( ( ( SinBJ(GetUnitFacing(GetEnumUnit())) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
endfunction
function Trig_Xuyi1Func014Func004Func001A takes nothing returns nothing
    call KillUnit(GetEnumUnit())
endfunction
function Trig_Xuyi1Func014T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    call SaveInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845, ( ( LoadInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845) ) + ( 1 ) ))
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E, 13.00)
    call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xCD6688F9), function Trig_Xuyi1Func014Func003A)
    if ( ( LoadInteger(YDLOC, GetHandleId(GetExpiredTimer()), 0x2B0A6845) == 60 ) ) then
        call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xCD6688F9), function Trig_Xuyi1Func014Func004Func001A)
        call SetUnitTimeScale(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9), 1.00)
        call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
        call DestroyTimer(GetExpiredTimer())
    else
    endif
    set ydl_group=null
    set ydl_unit=null
endfunction
function Trig_Xuyi1Func015Func011Func004A takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x1ADEDE7B, GetEnumUnit())
    call SetUnitX(GetEnumUnit(), ( ( GetUnitX(GetEnumUnit()) ) + ( ( ( CosBJ(GetUnitFacing(GetEnumUnit())) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
    call SetUnitY(GetEnumUnit(), ( ( GetUnitY(GetEnumUnit()) ) + ( ( ( SinBJ(GetUnitFacing(GetEnumUnit())) ) * ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E) ) ) ) ))
    call SetUnitScale(GetEnumUnit(), LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x1FB8CFB5), LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x1FB8CFB5), LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x1FB8CFB5))
    set ydl_group=CreateGroup()
    call GroupEnumUnitsInRange(ydl_group, GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x1ADEDE7B)), GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x1ADEDE7B)), 180.00, null)
    loop
        set ydl_unit=FirstOfGroup(ydl_group)
        exitwhen ydl_unit == null
        call GroupRemoveUnit(ydl_group, ydl_unit)
        if((IsUnitEnemy(ydl_unit, GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9))) == true) and(IsUnitInGroup(ydl_unit, LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xD13A3460)) == false)) and ydl_unit != chendao then
            call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xD13A3460), ydl_unit)
            // 蓄意伤害
            call UnitDamageTarget(chendao, ydl_unit, GetUnitState(chendao, ConvertUnitState(18)) * (1 + GetUnitState(chendao, UNIT_STATE_MAX_LIFE) * 0.00005), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
            call UnitDamageTarget(chendao, ydl_unit, GetUnitAbilityLevel(chendao, 'Ab1t') * 300 , true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)

            call YDWETimerDestroyEffect(2 , AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdl", ydl_unit, "origin"))
        else
        endif
    endloop
    call DestroyGroup(ydl_group)
    set ydl_group=null
    set ydl_unit=null
endfunction
function Trig_Xuyi1Func015Func011Func005Func001A takes nothing returns nothing
    call KillUnit(GetEnumUnit())
endfunction
function Trig_Xuyi1Func015Func011T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D, ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) ) + ( 1.00 ) ))
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E, ( ( 100.00 ) * ( Pow(0.89, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D)) ) ))
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x1FB8CFB5, ( ( 0.50 ) + ( ( ( 1.40 ) - ( Pow(0.40, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D)) ) ) ) ))
    call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), function Trig_Xuyi1Func015Func011Func004A)
    if ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) >= 22.00 ) ) then
        call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), function Trig_Xuyi1Func015Func011Func005Func001A)
        call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7))
        call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
        call DestroyTimer(GetExpiredTimer())
    else
    endif
    set ydl_group=null
    set ydl_unit=null
endfunction
function Trig_Xuyi1Func015T takes nothing returns nothing
    local timer ydl_timer
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2))
    call SaveGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7, CreateGroup())
    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x9CD60476, CreateUnit(GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)), $75303065, ( ( GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 100.00 ) ) ) ), ( ( GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 100.00 ) ) ) ), LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2)))
    call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x9CD60476))
    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2F128C38, CreateUnit(GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)), $75303065, ( ( GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( - 90.00 ) )) ) * ( 100.00 ) ) ) ), ( ( GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( - 90.00 ) )) ) * ( 100.00 ) ) ) ), LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2)))
    call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2F128C38))
    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x9CD60476, CreateUnit(GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)), $75303065, ( ( GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 100.00 ) ) ) ), ( ( GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 100.00 ) ) ) ), ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 10.00 ) )))
    call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x9CD60476))
    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2F128C38, CreateUnit(GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)), $75303065, ( ( GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( - 90.00 ) )) ) * ( 100.00 ) ) ) ), ( ( GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( - 90.00 ) )) ) * ( 100.00 ) ) ) ), ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( - 10.00 ) )))
    call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x2F128C38))
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x458B7DE9, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x1FB8CFB5, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x1FB8CFB5))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x2970F80D, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0xD13A3460, LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xD13A3460))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x34D6230E, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x34D6230E))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x20CD7CD7, LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x1ADEDE7B, LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x1ADEDE7B))
    call TimerStart(ydl_timer, 0.01, true, function Trig_Xuyi1Func015Func011T)
    call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
    call DestroyTimer(GetExpiredTimer())
    set ydl_timer=null
endfunction
function Trig_Xuyi1Actions takes nothing returns nothing
   

    local timer ydl_timer
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
    
    set ydl_localvar_step=ydl_localvar_step + 3
//   call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"开始释放蓄意轰拳2")
 if GetUnitTypeId(GetTriggerUnit()) == 'HA02' then
        call SetUnitAnimationByIndex(GetTriggerUnit(), 4)
       endif
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl", GetTriggerUnit(), "hand left"))
    call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Disenchant\\DisenchantSpecialArt.mdl", GetTriggerUnit(), "hand right"))
    call YDWETimerDestroyEffect(0.70 , AddSpecialEffectTarget("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", GetTriggerUnit(), "hand left"))
    call YDWETimerDestroyEffect(0.70 , AddSpecialEffectTarget("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", GetTriggerUnit(), "hand right"))
    call SetUnitTimeScale(GetTriggerUnit(), 0.45)
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2, AngleBetweenPoints(GetUnitLoc(GetTriggerUnit()), GetSpellTargetLoc()))
    call SaveGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCD6688F9, CreateGroup())
    call SaveGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD13A3460, CreateGroup())
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9CD60476, CreateUnit(GetOwningPlayer(GetTriggerUnit()), $65303031, ( ( GetUnitX(GetTriggerUnit()) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 110.00 ) ) ) ), ( ( GetUnitY(GetTriggerUnit()) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 110.00 ) ) ) ), ( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( 12.00 ) )))
    call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCD6688F9), LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9CD60476))
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2F128C38, CreateUnit(GetOwningPlayer(GetTriggerUnit()), $65303031, ( ( GetUnitX(GetTriggerUnit()) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( - 90.00 ) )) ) * ( 110.00 ) ) ) ), ( ( GetUnitY(GetTriggerUnit()) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( - 90.00 ) )) ) * ( 110.00 ) ) ) ), ( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( - 12.00 ) )))
    call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCD6688F9), LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2F128C38))
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2B0A6845, 0)
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
    call SaveInteger(YDLOC, GetHandleId(ydl_timer), 0x2B0A6845, LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2B0A6845))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x34D6230E, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x34D6230E))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0xCD6688F9, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xCD6688F9))
    call TimerStart(ydl_timer, 0.01, true, function Trig_Xuyi1Func014T)
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xA3098AE2, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x9CD60476, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9CD60476))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x1FB8CFB5, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1FB8CFB5))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x2F128C38, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2F128C38))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x2970F80D, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2970F80D))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0xD13A3460, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD13A3460))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x34D6230E, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x34D6230E))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x20CD7CD7, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x20CD7CD7))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x1ADEDE7B, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1ADEDE7B))
    call TimerStart(ydl_timer, 1.10, false, function Trig_Xuyi1Func015T)
    call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
    set ydl_timer=null
endfunction
//===========================================================================
function InitTrig_Xuyi1 takes nothing returns nothing
    set gg_trg_Xuyi1=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_Xuyi1, EVENT_PLAYER_UNIT_SPELL_CAST)
    call TriggerAddCondition(gg_trg_Xuyi1, Condition(function Trig_Xuyi1Conditions))
    call TriggerAddAction(gg_trg_Xuyi1, function Trig_Xuyi1Actions)
endfunction

// 强手裂颅事件
function Trig_llConditions takes nothing returns boolean
    return GetSpellAbilityId() == 'Ab1r'
endfunction

function Trig_llFunc004T takes nothing returns nothing
    call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9), "hand left"))
    call SetUnitAnimationByIndex(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9), 4)
    set udg_hy=LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)
    call TriggerExecute(gg_trg_hy)
    call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
    call DestroyTimer(GetExpiredTimer())
endfunction

function Trig_llFunc005Func007Func003A takes nothing returns nothing
    // 减速事件
    call IssueTargetOrder(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86), "slow", GetEnumUnit())
endfunction

function Trig_llFunc005Func007Func004A takes nothing returns nothing
    // 眩晕事件
    call IssueTargetOrder(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86), "thunderbolt", GetEnumUnit())
endfunction
// 强手裂颅判定
function Trig_llFunc005T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    call SaveGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x898E1EC5, CreateGroup())
    call SaveGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x113DF22B, CreateGroup())
    call SaveGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7, CreateGroup())
    call SaveUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86, CreateUnit(GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)), $65303939, 0, 0, 0))
    set ydl_group=CreateGroup()
    call GroupEnumUnitsInRange(ydl_group, ( ( GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 200.00 ) ) ) ), ( ( GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 200.00 ) ) ) ), 300.00, null)
    loop
        set ydl_unit=FirstOfGroup(ydl_group)
        exitwhen ydl_unit == null
        call GroupRemoveUnit(ydl_group, ydl_unit)
        if((IsUnitEnemy(ydl_unit, GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9))) == true and ydl_unit != chendao)) then
            call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x898E1EC5), ydl_unit)
            call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), ydl_unit)
            call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x38AB9941, RMaxBJ(1.00, ( ( YDWEDistanceBetweenUnits(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9) , ydl_unit) ) - ( 100.00 ) )))
            call YDWEJumpTimer(ydl_unit , ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) - ( 90.00 ) ) , LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x38AB9941) , 0.15 , 0.01 , 100.00)
            call YDWETimerDestroyEffect(1.00 , AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(ydl_unit), GetUnitY(ydl_unit)))
            // 强手裂颅伤害
            call UnitDamageTarget(chendao, ydl_unit,bk(chendao,1,GetUnitAbilityLevel(chendao,'Ab1r')), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
                   call UnitDamageTarget(chendao, ydl_unit, GetUnitAbilityLevel(chendao, 'Ab1r') * 200 , true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
        else
        endif
    endloop
    call DestroyGroup(ydl_group)

    set ydl_group=CreateGroup()
    call GroupEnumUnitsInRange(ydl_group, ( ( GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) - ( 90.00 ) )) ) * ( 200.00 ) ) ) ), ( ( GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) - ( 90.00 ) )) ) * ( 200.00 ) ) ) ), 300.00, null)
    loop
        set ydl_unit=FirstOfGroup(ydl_group)
        exitwhen ydl_unit == null
        call GroupRemoveUnit(ydl_group, ydl_unit)
        if ( ( IsUnitEnemy(ydl_unit, GetOwningPlayer(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9))) == true and ydl_unit != chendao ) ) then
            call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x113DF22B), ydl_unit)
            call GroupAddUnit(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), ydl_unit)
            call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x38AB9941, RMaxBJ(1.00, ( ( YDWEDistanceBetweenUnits(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9) , ydl_unit) ) - ( 100.00 ) )))
            call YDWEJumpTimer(ydl_unit , ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0xA3098AE2) ) + ( 90.00 ) ) , LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x38AB9941) , 0.15 , 0.01 , 100.00)
            call YDWETimerDestroyEffect(1.00 , AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(ydl_unit), GetUnitY(ydl_unit)))
            // 强手裂颅伤害
            call UnitDamageTarget(chendao, ydl_unit,  bk(chendao, 1, GetUnitAbilityLevel(chendao, 'Ab1r')), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
            call UnitDamageTarget(chendao, ydl_unit, GetUnitAbilityLevel(chendao, 'Ab1r') * 200 , true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)

        else
        endif
    endloop
    call DestroyGroup(ydl_group)
    if ( ( ( CountUnitsInGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x898E1EC5)) == 0 ) or ( CountUnitsInGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x113DF22B)) == 0 ) ) ) then
        // call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), function Trig_llFunc005Func007Func003A)
        call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(chendao)),$65303939,$41314C54,1,GetUnitX(chendao),GetUnitY(chendao),bj_UNIT_FACING,1),852096)

    else
        call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9), "hand right"))
        call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x458B7DE9), "hand left"))
        // call ForGroupBJ(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7), function Trig_llFunc005Func007Func004A)
        call range_stunEffect(chendao, GetUnitX(chendao), GetUnitY(chendao), 500, 3,true)

    endif
    call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x20CD7CD7))
    call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x898E1EC5))
    call DestroyGroup(LoadGroupHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x113DF22B))
    call KillUnit(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x384C9D86))
    call KillUnit(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x1E9E05F9))
    call KillUnit(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0xE5067F58))
    call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
    call DestroyTimer(GetExpiredTimer())
    set ydl_group=null
    set ydl_unit=null
endfunction

function Trig_llActions takes nothing returns nothing
    local timer ydl_timer
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
    set ydl_localvar_step=ydl_localvar_step + 3
       if GetUnitTypeId(GetTriggerUnit()) == 'HA02' then
        call SetUnitAnimationByIndex(GetTriggerUnit(), 3)
       endif
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
    call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2, GetUnitFacing(GetTriggerUnit()))
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1E9E05F9, CreateUnit(GetOwningPlayer(GetTriggerUnit()), $75303068, ( ( GetUnitX(GetTriggerUnit()) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 80.00 ) ) ) ), ( ( GetUnitY(GetTriggerUnit()) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( 90.00 ) )) ) * ( 80.00 ) ) ) ), ( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) - ( 90.00 ) )))
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xE5067F58, CreateUnit(GetOwningPlayer(GetTriggerUnit()), $75303068, ( ( GetUnitX(GetTriggerUnit()) ) + ( ( ( CosBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) - ( 90.00 ) )) ) * ( 80.00 ) ) ) ), ( ( GetUnitY(GetTriggerUnit()) ) + ( ( ( SinBJ(( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) - ( 90.00 ) )) ) * ( 80.00 ) ) ) ), ( ( LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2) ) + ( 90.00 ) )))
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
    call TimerStart(ydl_timer, 0.00, false, function Trig_llFunc004T)
    

    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0xA3098AE2, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xA3098AE2))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x38AB9941, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x38AB9941))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x898E1EC5, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x898E1EC5))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x1E9E05F9, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1E9E05F9))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x384C9D86, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x384C9D86))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x113DF22B, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x113DF22B))
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0xE5067F58, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xE5067F58))
    call SaveGroupHandle(YDLOC, GetHandleId(ydl_timer), 0x20CD7CD7, LoadGroupHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x20CD7CD7))
    call TimerStart(ydl_timer, 0.30, false, function Trig_llFunc005T)
    call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
    set ydl_timer=null
endfunction
//===========================================================================
function InitTrig_ll takes nothing returns nothing
    set gg_trg_ll=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_ll, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_ll, Condition(function Trig_llConditions))
    call TriggerAddAction(gg_trg_ll, function Trig_llActions)
endfunction


function Trig_hyFunc011T takes nothing returns nothing
    call SaveReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D, ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) ) + ( 2.00 ) ))
    call SetUnitVertexColorBJ(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x9F0C6E00), 100, 100, 100, LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D))
    if ( ( LoadReal(YDLOC, GetHandleId(GetExpiredTimer()), 0x2970F80D) == 100.00 ) ) then
        call RemoveUnit(LoadUnitHandle(YDLOC, GetHandleId(GetExpiredTimer()), 0x9F0C6E00))
        call FlushChildHashtable(YDLOC, GetHandleId(GetExpiredTimer()))
        call DestroyTimer(GetExpiredTimer())
    else
    endif
endfunction


function Trig_hyActions takes nothing returns nothing
    local timer ydl_timer
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
 set ydl_localvar_step=ydl_localvar_step + 3
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D, udg_hy)
    call SaveUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00, CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE), GetUnitTypeId(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D)), GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D)), GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D)), GetUnitFacing(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D))))
    call UnitAddAbility(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00), 'Aloc')
    call UnitAddAbility(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00), 'Abun')
    call SetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00), GetUnitX(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D)))
    call SetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00), GetUnitY(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D)))
    call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00), "hand right"))
    call SetUnitAnimationByIndex(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00), 5)
    call QueueUnitAnimation(LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC303079D), "stand")
    call SaveReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2970F80D, 0.00)
    set ydl_timer=CreateTimer()
    call SaveUnitHandle(YDLOC, GetHandleId(ydl_timer), 0x9F0C6E00, LoadUnitHandle(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9F0C6E00))
    call SaveReal(YDLOC, GetHandleId(ydl_timer), 0x2970F80D, LoadReal(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2970F80D))
    call TimerStart(ydl_timer, 0.02, true, function Trig_hyFunc011T)
    call FlushChildHashtable(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
    set ydl_timer=null
endfunction
//===========================================================================
function InitTrig_hy takes nothing returns nothing
    set gg_trg_hy=CreateTrigger()
    call TriggerAddAction(gg_trg_hy, function Trig_hyActions)
endfunction
// 
function Trig_qrConditions takes nothing returns boolean
    return GetSpellAbilityId() == $41623175
endfunction
function Trig_qrActions takes nothing returns nothing
    set udg_CS=0
endfunction
//===========================================================================
function InitTrig_qr takes nothing returns nothing
    set gg_trg_qr=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_qr, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_qr, Condition(function Trig_qrConditions))
    call TriggerAddAction(gg_trg_qr, function Trig_qrActions)
endfunction

//===========================================================================
// Trigger: mm
//===========================================================================
function Trig_mmConditions takes nothing returns boolean
    return ( ( UnitHasBuffBJ(GetEventDamageSource(), $42303257) == true ) )
endfunction
function Trig_mmActions takes nothing returns nothing
    // set udg_CS=( ( udg_CS ) + ( 1 ) )
    // // call UnitDamageTarget(chendao, GetTriggerUnit(),  GetUnitState(chendao, ConvertUnitState(18)) * 3, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
    // // call DisplayTextToPlayer(GetOwningPlayer(chendao), 0, 0, "正在强化攻击：" + I2S(udg_CS))
    // if ( ( udg_CS == GetUnitAbilityLevel(chendao,'Ab1u') ) ) then
    //     call UnitRemoveBuffBJ($42303257, GetEventDamageSource())
    // else
    // endif
endfunction
//===========================================================================
function InitTrig_mm takes nothing returns nothing
    set gg_trg_mm=CreateTrigger()
    call YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg_mm)
    call TriggerAddCondition(gg_trg_mm, Condition(function Trig_mmConditions))
    call TriggerAddAction(gg_trg_mm, function Trig_mmActions)
endfunction
//===========================================================================
// Trigger: lllfff
//===========================================================================
function Trig_lllfffConditions takes nothing returns boolean
    return ( ( GetAttacker() == chendao ) )
endfunction
function Trig_lllfffActions takes nothing returns nothing
    if ( ( udg_lr == false ) ) then
        // call UnitAddAbility(chendao, 'A005')
        // call UnitRemoveAbility(chendao, 'A008')
        if GetUnitTypeId(chendao) == 'HA02' then
        call SetUnitAnimationByIndex(chendao, 1)
        else
        call SetUnitAnimationByIndex(chendao, 5)
        endif
        
        call QueueUnitAnimation(GetAttacker(), "stand")
        // 
        call SetUnitState(chendao, ConvertUnitState(37), GetUnitState(chendao, ConvertUnitState(37)) -0.5)
        set udg_lr=true
    else
        // call UnitAddAbility(chendao, 'A008')
        // call UnitRemoveAbility(chendao, 'A005')
       
        call SetUnitState(chendao, ConvertUnitState(37), GetUnitState(chendao, ConvertUnitState(37)) + 0.5)
        if GetUnitTypeId(chendao) == 'HA02' then
        call SetUnitAnimationByIndex(chendao, 2)
        else
        call SetUnitAnimationByIndex(chendao, 4)
        endif

    
        call QueueUnitAnimation(GetAttacker(), "stand")
        set udg_lr=false
        set udg_hy=GetTriggerUnit()
        call TriggerExecute(gg_trg_hy)
        call TriggerSleepAction(0.5)
        // 右勾拳伤害
        // call UnitDamageTarget(chendao, GetTriggerUnit(), GetUnitAbilityLevel(chendao, 'Ab1u') * 200, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
        call UnitDamageTarget(chendao, GetTriggerUnit(), GetEventDamage() *2, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
        call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", GetAttacker(), "hand left"))

    endif
endfunction
//===========================================================================
function InitTrig_lllfff takes nothing returns nothing
    set gg_trg_lllfff=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_lllfff, EVENT_PLAYER_UNIT_ATTACKED)
    call TriggerAddCondition(gg_trg_lllfff, Condition(function Trig_lllfffConditions))
    call TriggerAddAction(gg_trg_lllfff, function Trig_lllfffActions)
endfunction
//===========================================================================
// Trigger: tiao
//===========================================================================
function Trig_tiaoConditions takes nothing returns boolean
    return ( ( GetSpellAbilityId() == $41623173 ) )
endfunction

function Trig_tiaoFunc014T takes nothing returns nothing
    local group ydl_group
    local unit ydl_unit
    local integer loc_id = GetHandleId(GetExpiredTimer())
    local unit loc_self = LoadUnitHandle(YDLOC,loc_id, 0x458B7DE9)
    local unit loc_target = LoadUnitHandle(YDLOC,loc_id, 0xE1001B12)
    local real loc_distance
    call SaveReal(YDLOC,loc_id, 0x2970F80D, ( ( LoadReal(YDLOC,loc_id, 0x2970F80D) ) + ( 1.00 ) ))
    call SetUnitFacing(loc_self, LoadReal(YDLOC,loc_id, 0xA3098AE2))
    // call DisplayTextToForce(GetPlayersAll(), GetUnitName(loc_self) + "<-->" + GetUnitName(loc_target))
 set loc_distance = SquareRoot((GetUnitX(loc_self) -GetUnitX(loc_target)) * (GetUnitX(loc_self) -GetUnitX(loc_target)) + (GetUnitY(loc_self) -GetUnitY(loc_target)) * (GetUnitY(loc_self) -GetUnitY(loc_target)))
    if LoadBoolean(YDLOC,loc_id, 0xC2781FCF) == false then

    else

    endif
    if  ( LoadBoolean(YDLOC,loc_id, 0xC2781FCF) == false ) and ( loc_distance <= 120.00 )  then
        call YDWETimerDestroyEffect(1.00 , AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", loc_self, "origin"))
        call SaveUnitHandle(YDLOC,loc_id, 0x384C9D86, CreateUnit(GetOwningPlayer(loc_self), $65303939, 0, 0, 0))
        call IssueTargetOrder(LoadUnitHandle(YDLOC,loc_id, 0x384C9D86), "thunderbolt", loc_target)
          if GetUnitTypeId(loc_self) == 'HA02' then
        call SetUnitAnimationByIndex(loc_self, 8)
        else
        call SetUnitAnimation(loc_self, "attack")
        endif
        call SaveBoolean(YDLOC,loc_id, 0xC2781FCF, true)
    else
    endif
    if ( ( LoadBoolean(YDLOC,loc_id, 0xC2781FCF) == true ) ) then
        if ( ( LoadInteger(YDLOC,loc_id, 0x9FDB62AC) < 3 ) ) then
            call SaveInteger(YDLOC,loc_id, 0x9FDB62AC, ( ( LoadInteger(YDLOC,loc_id, 0x9FDB62AC) ) + ( 1 ) ))
            call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget(LoadStr(YDLOC,loc_id, 0x62C50DE6), loc_self, "handright"))
            call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget(LoadStr(YDLOC,loc_id, 0x62C50DE6), loc_self, "handleft"))
            call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget(LoadStr(YDLOC,loc_id, 0x62C50DE6), loc_self, "head"))
           if GetUnitTypeId(loc_self) == 'HA02' then
            call SetUnitAnimationByIndex(loc_self, 6)
           endif
        else
            call SaveReal(YDLOC,loc_id, 0xA99320FA, ( ( LoadReal(YDLOC,loc_id, 0xA99320FA) ) + ( ( ( 1.80 ) - ( Pow(0.94, LoadReal(YDLOC,loc_id, 0x9E4D0A0D)) ) ) ) ))
            call SaveReal(YDLOC,loc_id, 0x9E4D0A0D, SquareRoot(( ( Pow(LoadReal(YDLOC,loc_id, 0x2FC9F415), 2.00) ) - ( Pow(( ( LoadReal(YDLOC,loc_id, 0xA99320FA) ) - ( LoadReal(YDLOC,loc_id, 0x2FC9F415) ) ), 2.00) ) )))
            call SaveReal(YDLOC,loc_id, 0x9F0C6E00, ( ( LoadReal(YDLOC,loc_id, 0x9E4D0A0D) ) * ( 9.50 ) ))
            call SetUnitFlyHeight(loc_self, LoadReal(YDLOC,loc_id, 0x9F0C6E00), 0.00)
            call SaveReal(YDLOC,loc_id, 0x34D6230E, 12.00)
            call SetUnitX(loc_self, ( ( GetUnitX(loc_self) ) + ( ( ( CosBJ(LoadReal(YDLOC,loc_id, 0xA3098AE2)) ) * ( LoadReal(YDLOC,loc_id, 0x34D6230E) ) ) ) ))
            call SetUnitY(loc_self, ( ( GetUnitY(loc_self) ) + ( ( ( SinBJ(LoadReal(YDLOC,loc_id, 0xA3098AE2)) ) * ( LoadReal(YDLOC,loc_id, 0x34D6230E) ) ) ) ))
            call SetUnitFlyHeight(loc_target, ( ( GetUnitFlyHeight(loc_self) ) - ( 50.00 ) ), 0.00)
            call SetUnitX(loc_target, ( ( GetUnitX(loc_self) ) + ( ( ( CosBJ(LoadReal(YDLOC,loc_id, 0xA3098AE2)) ) * ( ( ( LoadReal(YDLOC,loc_id, 0x9E4D0A0D) ) - ( 60.00 ) ) ) ) ) ))
            call SetUnitY(loc_target, ( ( GetUnitY(loc_self) ) + ( ( ( SinBJ(LoadReal(YDLOC,loc_id, 0xA3098AE2)) ) * ( ( ( LoadReal(YDLOC,loc_id, 0x9E4D0A0D) ) - ( 60.00 ) ) ) ) ) ))
            if ( ( LoadReal(YDLOC,loc_id, 0x9E4D0A0D) < 1.00 ) ) then
                call SetUnitFlyHeight(loc_self, 0.00, 0.00)
                call SetUnitFlyHeight(loc_target, 0.00, 0.00)
                call YDWETimerDestroyEffect(1.00 , AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(loc_target), GetUnitY(loc_target)))
                call YDWETimerDestroyEffect(1.00 , AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", GetUnitX(loc_target), GetUnitY(loc_target)))
                call YDWETimerDestroyEffect(1.00 , AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", GetUnitX(loc_self), GetUnitY(loc_self)))
                set ydl_group=CreateGroup()
                call GroupEnumUnitsInRange(ydl_group, GetUnitX(loc_target), GetUnitY(loc_target), 450.00, null)
                loop
                    set ydl_unit=FirstOfGroup(ydl_group)
                    exitwhen ydl_unit == null
                    call GroupRemoveUnit(ydl_group, ydl_unit)
                    if ( ( IsUnitEnemy(ydl_unit, GetOwningPlayer(loc_self)) == true ) ) then
                        // 叹为观止伤害
                        call IssueTargetOrder(LoadUnitHandle(YDLOC,loc_id, 0x384C9D86), "thunderbolt", ydl_unit)
                        call UnitDamageTarget(loc_self, ydl_unit,GetUnitState(loc_self, ConvertUnitState(18))  * (1 + GetUnitState(loc_self, UNIT_STATE_MAX_LIFE) * 0.00005) + GetUnitState(loc_target, UNIT_STATE_MAX_LIFE) * 0.07, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
                        // call YDWETimerDestroyEffect(1.00 , AddSpecialEffect("Objects\\Spawnmodels\\Orc\\OrcLargeDeathExplode\\OrcLargeDeathExplode.mdl", GetUnitX(ydl_unit), GetUnitY(ydl_unit)))
                         call range_stunEffect(chendao, GetUnitX(chendao), GetUnitY(chendao), 500, 3,true)
                    else
                    endif
                endloop
                call DestroyGroup(ydl_group)
                call KillUnit(LoadUnitHandle(YDLOC,loc_id, 0x384C9D86))
                // call FlushChildHashtable(YDLOC,loc_id)
                call DestroyTimer(GetExpiredTimer())
            else
            endif
        endif
    else
        // call DisplayTextToPlayer(GetOwningPlayer(loc_self), 0, 0, "|Cff00ff00技能目标")
        // call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(loc_self))+"正在计算坐标")

        call SaveReal(YDLOC,loc_id, 0x38344552, YDWEAngleBetweenUnits(loc_self , loc_target))
        call SaveReal(YDLOC,loc_id, 0x34D6230E, ( ( 25.00 ) * ( ( ( 1.00 ) - ( ( ( ( ( LoadReal(YDLOC,loc_id, 0x2970F80D) ) * ( 0.03 ) ) ) / ( ( ( 3.00 ) + ( ( ( LoadReal(YDLOC,loc_id, 0x2970F80D) ) * ( 0.03 ) ) ) ) ) ) ) ) ) ))
        call SetUnitX(loc_self, ( ( GetUnitX(loc_self) ) + ( ( ( CosBJ(LoadReal(YDLOC,loc_id, 0x38344552)) ) * ( LoadReal(YDLOC,loc_id, 0x34D6230E) ) ) ) ))
        call SetUnitY(loc_self, ( ( GetUnitY(loc_self) ) + ( ( ( SinBJ(LoadReal(YDLOC,loc_id, 0x38344552)) ) * ( LoadReal(YDLOC,loc_id, 0x34D6230E) ) ) ) ))
    endif
    set ydl_group=null
    set ydl_unit=null
endfunction

function Trig_tiaoActions takes nothing returns nothing
    local timer CS
    
    local integer ydl_localvar_step= LoadInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
    local  integer loc_num
 set ydl_localvar_step=ydl_localvar_step + 3
 set loc_num =GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
 call SaveInteger(YDLOC, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
    //  这个是技能目标
    call SaveUnitHandle(YDLOC, loc_num, 0xE1001B12, GetSpellTargetUnit())
    // 移除无敌
    if UnitHasBuffBJ(GetSpellTargetUnit(), 'BHds') == true then
        call UnitRemoveBuffBJ('BHds', GetSpellTargetUnit())
    endif
          if GetUnitTypeId(GetTriggerUnit()) == 'HA02' then
        call SetUnitAnimationByIndex(GetTriggerUnit(), 8)
       endif
    call SaveReal(YDLOC, loc_num, 0x2970F80D, 0.00)
    call SaveInteger(YDLOC, loc_num, 0x9FDB62AC, 0)
    call SaveReal(YDLOC, loc_num, 0xA3098AE2, YDWEAngleBetweenUnits(GetTriggerUnit() , GetSpellTargetUnit()))
    call SaveBoolean(YDLOC, loc_num, 0xC2781FCF, false)
    call UnitAddAbility(GetTriggerUnit(), $41726176)
    call UnitAddAbility(LoadUnitHandle(YDLOC, loc_num, 0xE1001B12), $41726176)
    call UnitRemoveAbility(GetTriggerUnit(), $41726176)
    call UnitRemoveAbility(LoadUnitHandle(YDLOC, loc_num, 0xE1001B12), $41726176)
    call SaveStr(YDLOC, loc_num, 0x62C50DE6, "Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummonMissile.mdl")
    // call YDWETimerDestroyEffect(0.30 , AddSpecialEffectTarget(LoadStr(YDLOC, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x62C50DE6), GetTriggerUnit(), "handright"))
    call SaveReal(YDLOC, loc_num, 0x2FC9F415, 35.00)
    set CS=CreateTimer()
    // 
    // call SaveUnitHandle(YDLOC, GetHandleId(CS), 0x2E1BF0CA, GetSpellTargetUnit())
    // 自身
    call SaveUnitHandle(YDLOC, GetHandleId(CS), 0x458B7DE9, GetTriggerUnit())
    call SaveInteger(YDLOC, GetHandleId(CS), 0x9FDB62AC, LoadInteger(YDLOC, loc_num, 0x9FDB62AC))
    call SaveReal(YDLOC, GetHandleId(CS), 0xA3098AE2, LoadReal(YDLOC, loc_num, 0xA3098AE2))
    call SaveReal(YDLOC, GetHandleId(CS), 0x9F0C6E00, LoadReal(YDLOC, loc_num, 0x9F0C6E00))
    call SaveBoolean(YDLOC, GetHandleId(CS), 0xC2781FCF, LoadBoolean(YDLOC, loc_num, 0xC2781FCF))
    call SaveUnitHandle(YDLOC, GetHandleId(CS), 0xE1001B12, LoadUnitHandle(YDLOC, loc_num, 0xE1001B12))
    call SaveUnitHandle(YDLOC, GetHandleId(CS), 0x384C9D86, LoadUnitHandle(YDLOC, loc_num, 0x384C9D86))
    call SaveReal(YDLOC, GetHandleId(CS), 0x2970F80D, LoadReal(YDLOC, loc_num, 0x2970F80D))
    call SaveReal(YDLOC, GetHandleId(CS), 0x2FC9F415, LoadReal(YDLOC, loc_num, 0x2FC9F415))
    call SaveReal(YDLOC, GetHandleId(CS), 0x34D6230E, LoadReal(YDLOC, loc_num, 0x34D6230E))
    // call SaveStr(YDLOC, GetHandleId(CS), 0x62C50DE6, LoadStr(YDLOC, loc_num, 0x62C50DE6))
    call SaveReal(YDLOC, GetHandleId(CS), 0x38344552, LoadReal(YDLOC, loc_num, 0x38344552))
    call SaveReal(YDLOC, GetHandleId(CS), 0xA99320FA, LoadReal(YDLOC, loc_num, 0xA99320FA))
    call SaveReal(YDLOC, GetHandleId(CS), 0x9E4D0A0D, LoadReal(YDLOC, loc_num, 0x9E4D0A0D))
    call TimerStart(CS, 0.01, true, function Trig_tiaoFunc014T)
    // call FlushChildHashtable(YDLOC, loc_num)
    set CS=null
endfunction
//===========================================================================
function InitTrig_tiao takes nothing returns nothing
    set gg_trg_tiao=CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ(gg_trg_tiao, EVENT_PLAYER_UNIT_SPELL_EFFECT)
    call TriggerAddCondition(gg_trg_tiao, Condition(function Trig_tiaoConditions))
    call TriggerAddAction(gg_trg_tiao, function Trig_tiaoActions)
endfunction
// 陈到技能结束


function rongzhu_ability_choose takes nothing returns nothing
local button loc_btn=GetClickedButton()
local integer loc_index = 1
local integer loc_ab 
local integer loc_ab_level 
   loop 
    exitwhen rongzhu_btn[GetPlayerId(GetTriggerPlayer()) * 100 + loc_index] == loc_btn
    set loc_index = loc_index +1
    endloop
set loc_ab = LoadInteger(Ia, GetPlayerId(GetTriggerPlayer()),GetPlayerId(GetTriggerPlayer()) * 100 +loc_index)
set loc_ab_level = LoadInteger(Ia, GetPlayerId(GetTriggerPlayer()), StringHash(GetAbilityName(loc_ab))) 
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "选择的技能：" + GetAbilityName(loc_ab))
call DisplayTextToPlayer(GetTriggerPlayer(), 0, 0, "选择的技能等级：" + I2S(loc_ab_level))

call DestroyTrigger(GetTriggeringTrigger())
call DialogDestroy(GetClickedDialog())
set loc_btn =null
endfunction

function rongzhu_foreach_4 takes player loc_player returns nothing 
    local dialog loc_dialog=DialogCreate()
    local trigger loc_trig = CreateTrigger()
    local integer loc_level = LoadInteger(Ia, GetPlayerId(loc_player), StringHash("rongzhu_times"))
    local integer loc_time1 = GetRandomInt(0,1)
    local integer loc_time2
    local integer loc_time3
    local integer loc_time4
    call DialogSetMessage(loc_dialog,"请选择熔铸技能")
    // set rongzhu_btn[1] = DialogAddButton(loc_dialog, "测试",1)
    if loc_time1 == 1 then
    //  取随机数
    set loc_time2 = GetRandomInt(1,7) 
    set loc_time3 = GetRandomInt(1,7)
    set loc_time4 = GetRandomInt(1,7)
    loop 
    exitwhen loc_time2 != loc_time3
    set loc_time3 = GetRandomInt(1,7)
    endloop
    loop 
    exitwhen loc_time2 != loc_time4 and loc_time3 != loc_time4
    set loc_time4 = GetRandomInt(1,7)
    endloop
    // I2S(GetAbilityName(rongzhu_extra_pool[1])) + "(1)"
    set rongzhu_btn[GetPlayerId(loc_player) * 100 + 1] = DialogAddButton(loc_dialog, GetAbilityName(rongzhu_extra_pool[loc_time2]) + "(1)", 1)
    // 将对应技能存起来
    call SaveInteger(Ia, GetPlayerId(loc_player), GetPlayerId(loc_player) * 100 + 1,rongzhu_extra_pool[loc_time2])
    call SaveInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time2])), LoadInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time2]))) + 1)
    
    set rongzhu_btn[GetPlayerId(loc_player) * 100 + 2] = DialogAddButton(loc_dialog, GetAbilityName(rongzhu_extra_pool[loc_time3]) + "(1)", 1)
    // 将对应技能存起来
    call SaveInteger(Ia, GetPlayerId(loc_player), GetPlayerId(loc_player) * 100 + 2,rongzhu_extra_pool[loc_time3])
    call SaveInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time3])), LoadInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time3]))) + 1)
    
    set rongzhu_btn[GetPlayerId(loc_player) * 100 + 3] = DialogAddButton(loc_dialog, GetAbilityName(rongzhu_extra_pool[loc_time4]) + "(1)", 1)
    // 将对应技能存起来
    call SaveInteger(Ia, GetPlayerId(loc_player), GetPlayerId(loc_player) * 100 + 3,rongzhu_extra_pool[loc_time4])
    call SaveInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time4])), LoadInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time4]))) + 1)
    else
    set loc_time2 = GetRandomInt(1,21) 
    set loc_time3 = GetRandomInt(1,21)
    set loc_time4 = GetRandomInt(1,21)
    loop 
    exitwhen loc_time2 != loc_time3
    set loc_time3 = GetRandomInt(1,21)
    endloop
    loop 
    exitwhen loc_time2 != loc_time4 and loc_time3 != loc_time4
    set loc_time4 = GetRandomInt(1,21)
    endloop
    // 
    set loc_time1=GetRandomInt(1,loc_level)
    set rongzhu_btn[GetPlayerId(loc_player) * 100 + 1] = DialogAddButton(loc_dialog, GetAbilityName(rongzhu_ability_pool[loc_time2]) + "(" + I2S(loc_level) + ")", loc_level)
    call SaveInteger(Ia, GetPlayerId(loc_player), GetPlayerId(loc_player) * 100 + 1,rongzhu_ability_pool[loc_time2])
    call SaveInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_ability_pool[loc_time2])), LoadInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time2]))) + loc_level)
    // 
    set loc_time1=GetRandomInt(1,loc_level)
    set rongzhu_btn[GetPlayerId(loc_player) * 100 + 2] = DialogAddButton(loc_dialog, GetAbilityName(rongzhu_ability_pool[loc_time3]) + "(" + I2S(loc_level) + ")", loc_level)
    call SaveInteger(Ia, GetPlayerId(loc_player), GetPlayerId(loc_player) * 100 + 2,rongzhu_ability_pool[loc_time3])
    call SaveInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_ability_pool[loc_time3])), LoadInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time3]))) + loc_level)
    // 
    set loc_time1=GetRandomInt(1,loc_level)
    set rongzhu_btn[GetPlayerId(loc_player) * 100 + 3] = DialogAddButton(loc_dialog, GetAbilityName(rongzhu_ability_pool[loc_time4]) + "(" + I2S(loc_level) + ")", loc_level)
    call SaveInteger(Ia, GetPlayerId(loc_player), GetPlayerId(loc_player) * 100 + 3,rongzhu_ability_pool[loc_time4])
    call SaveInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_ability_pool[loc_time4])), LoadInteger(Ia, GetPlayerId(loc_player), StringHash(GetAbilityName(rongzhu_extra_pool[loc_time4]))) + loc_level)


    endif
    
    call TriggerRegisterDialogEvent(loc_trig,loc_dialog)
    call TriggerAddAction(loc_trig,function rongzhu_ability_choose)
    call DialogDisplay(loc_player,loc_dialog,true)

    // call DialogClear(loc_dialog)
    // set loc_dialog = null
    set loc_trig =null
    // call DestroyTrigger(loc_trig)
endfunction
// 开始熔铸
function rongzhu_start takes unit Iv, item loc_item,boolean loc_bool returns nothing
    // 分别传入打造人、被打造的物品，是否可以使用第四级打造
    local integer loc_num = 0

    if bC(Iv, 'it12') == true and loc_bool then
    call SaveItemHandle(Ia, GetPlayerId(GetTriggerPlayer()), StringHash("rongzhu_item"),loc_item)
    call SaveInteger(Ia, GetPlayerId(GetTriggerPlayer()), StringHash("rongzhu_times"), 4)
    call rongzhu_foreach_4(GetTriggerPlayer())
    elseif bC(Iv, 'it11') == true then
    elseif bC(Iv, 'it10') == true then
    elseif bC(Iv, 'rat9') == true then
    else

    endif

endfunction
function rongzhu_condition takes nothing returns boolean
// return GetItemTypeId(GetManipulatedItem())=='IR04'
return (GetItemTypeId(GetManipulatedItem())=='IR04')
endfunction

function rongzhu_actions takes nothing returns nothing
local unit Iv = GetTriggerUnit()
local item trig_item = UnitItemInSlot(Iv,0)
// 
local integer loc_item_level=ModuloInteger(GetItemLevel(trig_item),10)
// 
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00开始熔铸")
// 如果触发英雄是刘睿，则可以使用天外陨铁，且任意装备都能锻造
if Iv == liurui then
call rongzhu_start(Iv, trig_item,true)
else
    // 判断第一件是不是武器
if loc_item_level !=8 then
 call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00无法熔铸武器以外的装备！")
return
else
    //开始熔铸 
endif

endif
endfunction
// // 初始化熔铸事件
function init_rongzhu takes nothing returns nothing
set rongzhu_trig=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(rongzhu_trig,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(rongzhu_trig,Condition(function rongzhu_condition))
call TriggerAddAction(rongzhu_trig,function rongzhu_actions)
endfunction


function InitCustomTriggers takes nothing returns nothing
    call InitTrig_Xuyi1()
    call InitTrig_ll()
    call InitTrig_hy()
    call InitTrig_qr()
    call InitTrig_mm()
    call InitTrig_lllfff()
    call InitTrig_tiao()
    // 
    call InitTrig_ZongyuQ()
    call InitTrig_zongyuW()
    call InitTrig_zongyuX()
    call Trig_found()
    call zongyun_found_init()
    call Trig_listen_map()
    call Trig_Selected_unit()
    call registerBook()
    call Trig_listen_sos()
    call init_rongzhu()
    // 
    call InitTrig_AnnihilateABlackHole()
    call InitTrig_AnnihilateABlackHole2()
    call InitTrig_S_DummyUnitDeath()
    // 
    call zhangjiao_Q_death_init()
    set udg_AnnihilateBlackHoleSLv=0
    set udg_AnnihilateABlackHoleDInteger=0
    set udg_AnnihilateABlackHoleTimer=CreateTimer()
    set udg_AnnihilateABlackHoleGruop=CreateGroup()
    set udg_AnnihilateABlackHoleGruop2=CreateGroup()
endfunction


// 陈到技能事件结束

// 增加了范围变量的击飞计算
function computeStrike takes unit Iv, real Ii, real Im, real In, real JM, integer VC, real VD, real VE,real factRange returns nothing
    // VE是击飞时间
local group I2=CreateGroup()
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real JP=0.
local real JQ=0.
local real JO=0.
local real JR=0.
local unit CE
call GroupEnumUnitsInRange(I2,It,Iu,In,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and bi(Iv,CE) then
set JO=bO(Iv,CE)
set JP=It+JO*1.*Cos(Im*bj_DEGTORAD)
set JQ=Iu+JO*1.*Sin(Im*bj_DEGTORAD)
set JR=SquareRoot(Pow(JP-GetUnitX(CE),2.)+Pow(JQ-GetUnitY(CE),2.))
if JO<=factRange or JR<=JM then
call striked(Iv,CE,VC,VD,0.,0.,Ii,VE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",CE,"origin"))
endif
endif
endloop
call DestroyGroup(I2)
set I2=null
set CE=null
endfunction
// 击飞计算
function bw takes unit Iv,real Ii,real Im,real In,real JM,integer VC,real VD,real VE returns nothing
local group I2=CreateGroup()
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real JP=0.
local real JQ=0.
local real JO=0.
local real JR=0.
local unit CE
call GroupEnumUnitsInRange(I2,It,Iu,In,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and bi(Iv,CE) then
set JO=bO(Iv,CE)
set JP=It+JO*1.*Cos(Im*bj_DEGTORAD)
set JQ=Iu+JO*1.*Sin(Im*bj_DEGTORAD)
set JR=SquareRoot(Pow(JP-GetUnitX(CE),2.)+Pow(JQ-GetUnitY(CE),2.))
if JO<=50. or JR<=JM then
call bd(Iv,CE,VC,VD,0.,0.,Ii,VE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",CE,"origin"))
endif
endif
endloop
call DestroyGroup(I2)
set I2=null
set CE=null
endfunction
function bx takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
call SetUnitPosition(LoadUnitHandle(Ia,Ix,$6865726F),LoadReal(Ia,Ix,$30303078),LoadReal(Ia,Ix,$30303079))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(LoadUnitHandle(Ia,Ix,$6865726F)),GetUnitY(LoadUnitHandle(Ia,Ix,$6865726F))))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
set CS=null
endfunction
function by takes unit Iv,unit CE returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
if Iv==CE then
call SaveReal(Ia,Ix,$30303078,-1218)
call SaveReal(Ia,Ix,$30303079,-4351)
else
call SaveReal(Ia,Ix,$30303078,GetUnitX(CE))
call SaveReal(Ia,Ix,$30303079,GetUnitY(CE))
endif
call TimerStart(CS,0.,false,function bx)
set CS=null
endfunction

// 追随者事件
function registerZhuisuiBody takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
// call DisplayTextToPlayer(GetOwningPlayer(zhuiSuiZhe), 0, 0, "|Cff00ff00追随者！" + R2S(getMasterServent(zhuGeGuo)))

// 生命值
call SetUnitState(zhuiSuiZhe, ConvertUnitState(1), GetHeroLevel(zhuGeGuo) *150 + GetHeroInt(zhuGeGuo, true) *20)
// 攻击
call SetUnitState(zhuiSuiZhe, ConvertUnitState(18), GetHeroLevel(zhuGeGuo) * 20) 
// 护甲
call SetUnitState(zhuiSuiZhe, ConvertUnitState(32), GetHeroInt(zhuGeGuo, true) *0.1 + GetUnitState(Iv, ConvertUnitState(32)) * 2)
if GetOwningPlayer(Iv)==Player(15) then
call PauseTimer(CS)
call RemoveUnit(zhuiSuiZhe)
call DestroyTrigger(LoadTriggerHandle(Ia,Ix,$74726730))
call FlushChildHashtable(Ia,Ix)
call FlushChildHashtable(Ia,GetHandleId(Iv))
call DestroyTimer(CS)
elseif bO(Iv,zhuiSuiZhe)>30000 then
call SetUnitPosition(zhuiSuiZhe,GetUnitX(Iv),GetUnitY(Iv))
call IssuePointOrderById(zhuiSuiZhe,851971,GetUnitX(Iv),GetUnitY(Iv))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(zhuiSuiZhe),GetUnitY(zhuiSuiZhe)))
endif
set CS=null
set Iv=null
endfunction
function registerZhuisuiMove takes nothing returns nothing
if GetIssuedOrderId()==851971 then
if GetWidgetX(GetOrderTarget())!=0. and GetWidgetY(GetOrderTarget())!=0. then
call IssuePointOrderById(zhuiSuiZhe,851983,GetWidgetX(GetOrderTarget()),GetWidgetY(GetOrderTarget()))
else
call IssuePointOrderById(zhuiSuiZhe,851990,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
endif
endfunction
function registerZhuisuiBorn takes unit Iv,integer LD returns nothing
local trigger Jv=CreateTrigger()
local timer CS=CreateTimer()
set zhuiSuiZhe=CreateUnit(GetOwningPlayer(Iv),LD,GetUnitX(Iv),GetUnitY(Iv),0.)
call UnitRemoveType(zhuiSuiZhe,UNIT_TYPE_HERO)
call SetHeroLevel(zhuiSuiZhe,200,false)
call AddHeroXP(zhuiSuiZhe,$895440,false)
// call TriggerRegisterUnitEvent(Jv,Iv,EVENT_UNIT_ISSUED_POINT_ORDER)
// call TriggerRegisterUnitEvent(Jv,Iv,EVENT_UNIT_ISSUED_TARGET_ORDER)
// call TriggerAddAction(Jv,function registerZhuisuiMove)
call SaveUnitHandle(Ia,GetHandleId(CS),$6865726F,Iv)
call SaveTriggerHandle(Ia,GetHandleId(CS),$74726730,Jv)
call TimerStart(CS,1.,true,function registerZhuisuiBody)
set Jv=null
set CS=null
endfunction

// 哮天犬加攻击函数
function bz takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
call SetUnitState(LE,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(21))*3)
call SetUnitState(LE,ConvertUnitState(32),GetUnitState(Iv,ConvertUnitState(32))*3)
if GetOwningPlayer(Iv)==Player(15) then
call PauseTimer(CS)
call RemoveUnit(LE)
call DestroyTrigger(LoadTriggerHandle(Ia,Ix,$74726730))
call FlushChildHashtable(Ia,Ix)
call FlushChildHashtable(Ia,GetHandleId(Iv))
call DestroyTimer(CS)
elseif bO(Iv,LE)>30000 then
call SetUnitPosition(LE,GetUnitX(Iv),GetUnitY(Iv))
call IssuePointOrderById(LE,851971,GetUnitX(Iv),GetUnitY(Iv))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(LE),GetUnitY(LE)))
endif
set CS=null
set Iv=null
endfunction
function b0 takes nothing returns nothing
if GetIssuedOrderId()==851971 then
if GetWidgetX(GetOrderTarget())!=0. and GetWidgetY(GetOrderTarget())!=0. then
call IssuePointOrderById(LE,851983,GetWidgetX(GetOrderTarget()),GetWidgetY(GetOrderTarget()))
else
call IssuePointOrderById(LE,851990,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
endif
endfunction
function b1 takes unit Iv,integer LD returns nothing
local trigger Jv=CreateTrigger()
local timer CS=CreateTimer()
set LE=CreateUnit(GetOwningPlayer(Iv),LD,GetUnitX(Iv),GetUnitY(Iv),0.)
// call UnitRemoveType(LE,UNIT_TYPE_HERO)
call SetHeroLevel(LE,200,false)
call AddHeroXP(LE,$895440,false)
call TriggerRegisterUnitEvent(Jv,Iv,EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(Jv,Iv,EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddAction(Jv,function b0)
call SaveUnitHandle(Ia,GetHandleId(CS),$6865726F,Iv)
call SaveTriggerHandle(Ia,GetHandleId(CS),$74726730,Jv)
call TimerStart(CS,1.,true,function bz)
set Jv=null
set CS=null
endfunction
function b4 takes unit Iv returns nothing
local integer KX
call UnitAddAbility(Iv,$414A5335)
call SaveUnitHandle(Ia,GetHandleId(Iv),$5A484747,CreateUnit(GetOwningPlayer(Iv),$48474730,GetUnitX(Iv),GetUnitY(Iv),0))
call UnitRemoveType(LoadUnitHandle(Ia,GetHandleId(Iv),$5A484747),UNIT_TYPE_HERO)
set KX=GetPlayerId(GetOwningPlayer(Iv))
call SetUnitOwner(Iv,Player(bj_PLAYER_NEUTRAL_VICTIM),true)
call SetUnitOwner(Iv,Player(KX),true)
endfunction
function b5 takes string I5,unit I6,real I7,real I8,integer I9,integer JB,integer JC,integer JD returns texttag
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag,I5,I8*.023/10)
call SetTextTagPosUnit(bj_lastCreatedTextTag,I6,-100.)
call SetTextTagColor(bj_lastCreatedTextTag,I9,JB,JC,JD)
call SetTextTagVelocity(bj_lastCreatedTextTag,0.,I7)
call SetTextTagVisibility(bj_lastCreatedTextTag,true)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.)
return bj_lastCreatedTextTag
endfunction
function b6 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Ii=LoadReal(Ia,GetHandleId(Iv),$30304844)-LoadReal(Ia,Ix,0)
call UnitRemoveAbility(Iv,$41305850)
if Ii<=0 then
call SaveReal(Ia,GetHandleId(Iv),$30304844,0)
if GetUnitAbilityLevel(Iv,$41304844)>0 then
call UnitRemoveAbility(Iv,$41304844)
endif
if Ii<0 then
call UnitDamageTarget(CE,Iv,-Ii,false,false,K,N,WEAPON_TYPE_WHOKNOWS)
endif
else
call b5(I2S(R2I(LoadReal(Ia,Ix,0))),Iv,.05,10,255,255,255,255)
call SaveReal(Ia,GetHandleId(Iv),$30304844,Ii)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
set Iv=null
set CE=null
endfunction
function b7 takes unit Iv,unit CE,real Iw returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call UnitAddAbility(Iv,$41305850)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,0,Iw)
call TimerStart(CS,0.,false,function b6)
endfunction
function b8 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Ii=LoadReal(Ia,GetHandleId(Iv),$30314844)-LoadReal(Ia,Ix,0)
call UnitRemoveAbility(Iv,$41305850)
if Ii<=0 then
call SaveReal(Ia,GetHandleId(Iv),$30314844,0)
if GetUnitAbilityLevel(Iv,$41413034)>0 then
call UnitRemoveAbility(Iv,$41413034)
endif
if Ii<0 then
call UnitDamageTarget(CE,Iv,-Ii,false,false,K,N,WEAPON_TYPE_WHOKNOWS)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\0098.mdl",Iv,"chest"))
call bs(DB,GetUnitX(Iv),GetUnitY(Iv),500,LoadReal(Ia,GetHandleId(Iv),$6864616D),5,0)
else
call b5(I2S(R2I(LoadReal(Ia,Ix,0))),Iv,.05,10,255,255,255,255)
call SaveReal(Ia,GetHandleId(Iv),$30314844,Ii)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
set Iv=null
set CE=null
endfunction
function b9 takes unit Iv,unit CE,real Iw returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call UnitAddAbility(Iv,$41305850)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,0,Iw)
call TimerStart(CS,0.,false,function b8)
endfunction
function cD takes unit Ij,unit Ig,real Iy,real Iz,integer I0,real Im returns nothing
local unit CE
local group I2=CreateGroup()
local real It=GetUnitX(Ig)
local real Iu=GetUnitY(Ig)
call GroupEnumUnitsInRange(I2,It,Iu,Iy,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if RAbsBJ(bN(Ij,CE)-Im)>=270. or RAbsBJ(bN(Ij,CE)-Im)<=90. and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call UnitDamageTarget(Ij,CE,Iz,false,false,ConvertAttackType(5),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
endfunction
function cE takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
call FlushChildHashtable(Ia,GetHandleId(LoadUnitHandle(Ia,Ix,$756E6974)))
call RemoveUnit(LoadUnitHandle(Ia,Ix,$756E6974))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
set CS=null
endfunction
function cF takes unit CE,real JT returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call TimerStart(CS,JT,false,function cE)
endfunction
function cG takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local group I2=LoadGroupHandle(Ia,Ix,$67303030)
local group VH=CreateGroup()
local unit CE
local integer TZ=LoadInteger(Ia,Ix,1)-1
call SaveInteger(Ia,Ix,1,TZ)
if TZ<=0 then
call DestroyTimer(CS)
call SetUnitFlyHeight(Iv,0.,0.)
call DestroyEffect(AddSpecialEffect("dekan_lol_yasuo_stomp.mdx",GetUnitX(LoadUnitHandle(Ia,Ix,$756E6974)),GetUnitY(LoadUnitHandle(Ia,Ix,$756E6974))))
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call UnitDamageTarget(Iv,CE,bk(Iv,0,GetUnitAbilityLevel(Iv,$41415352)+5)*5,false,false,ConvertAttackType(5),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call GroupRemoveUnit(I2,CE)
call PauseUnit(CE,false)
call SetUnitFlyHeight(CE,0.,0.)
call bb(CE,1.5)
endloop
call PauseUnit(Iv,false)
call DestroyGroup(VH)
call FlushChildHashtable(Ia,Ix)
call SetUnitAnimation(Iv,"stand")
call DestroyTimer(CS)
else
if TZ==15 then
call SetUnitPosition(Iv,GetUnitX(LoadUnitHandle(Ia,Ix,$756E6974)),GetUnitY(LoadUnitHandle(Ia,Ix,$756E6974)))
elseif TZ==8 then
call DestroyEffect(LoadEffectHandle(Ia,Ix,$65666630))
endif
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call SetUnitFlyHeight(CE,500.,0.)
call GroupAddUnit(VH,CE)
call PauseUnit(CE,true)
endloop
call SaveGroupHandle(Ia,Ix,$67303030,VH)
endif
call DestroyGroup(I2)
set I2=null
set VH=null
set Iv=null
set CE=null
set CS=null
endfunction
function cH takes unit Iv returns nothing
local group I2=CreateGroup()
local group VH=CreateGroup()
local unit CE
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer SC=0
if LoadInteger(Ia,$41534545,GetHandleId(Iv))<1 then
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),1100,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=null and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitState(CE,ConvertUnitState(0))>.405 and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true and GetUnitFlyHeight(CE)>5. then
set SC=SC+1
if SC==1 then
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
endif
if bO(CE,LoadUnitHandle(Ia,Ix,$756E6974))<385. then
call bX(CE)
call SetUnitFlyHeight(CE,500.,0.)
call GroupAddUnit(VH,CE)
call PauseUnit(CE,true)
endif
endif
endloop
endif
if SC>0 then
call PauseUnit(Iv,true)
call bX(Iv)
call SetUnitFlyHeight(Iv,100.,0.)
call PlaySoundOnUnitBJ(Q,100,Iv)
call PlaySoundOnUnitBJ(R,100,Iv)
call SetUnitAnimationByIndex(Iv,10)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveInteger(Ia,Ix,1,16)
call SaveEffectHandle(Ia,Ix,$65666630,AddSpecialEffectTarget("dekan_lol_yasuo_r_weaponeffect.mdx",Iv,"hand right"))
call SaveGroupHandle(Ia,Ix,$67303030,VH)
call TimerStart(CS,.1,true,function cG)
else
call IssueImmediateOrderById(Iv,851972)
call FlushChildHashtable(Ia,Ix)
call DestroyGroup(VH)
call DestroyTimer(CS)
endif
call DestroyGroup(I2)
set I2=null
set VH=null
set CS=null
set CE=null
endfunction
function cI takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit UV=LoadUnitHandle(Ia,Ix,$6D6A3030)
local real Im=LoadReal(Ia,Ix,$616E6730)
local integer TZ=LoadInteger(Ia,Ix,1)
local group I2
local unit CE
local real It=LoadReal(Ia,Ix,$68783030)
local real Iu=LoadReal(Ia,Ix,$68793030)
local real JP=0.
local real JQ=0.
local real JO=0.
call bR(Iv,Im,34.6)
set JP=GetUnitX(Iv)
set JQ=GetUnitY(Iv)
set JO=bM(It,Iu,JP,JQ)
set TZ=TZ-1
if TZ<=0 or JO<=30. or JO>=40. then
if LoadInteger(Ia,$41535151,GetHandleId(Iv))>0 then
call SaveInteger(Ia,$41535151,GetHandleId(Iv),0)
call DestroyEffect(AddSpecialEffectTarget("dekan_lol_yasuo_q_bladeflashcircle.mdl",Iv,"origin"))
if GetUnitAbilityLevel(Iv,$41415351)<3 then
call SetUnitAbilityLevel(Iv,$41415351,GetUnitAbilityLevel(Iv,$41415351)+1)
if GetUnitAbilityLevel(Iv,$41415351)==3 then
call SaveEffectHandle(Ia,GetHandleId(Iv),$65666666,AddSpecialEffectTarget("war3mapImported\\Effect_DouQi.mdx",Iv,"origin"))
endif
call bs(Iv,JP,JQ,380,bk(Iv,0,GetUnitAbilityLevel(Iv,$41415331))*4,5,26)
else
call SetUnitAbilityLevel(Iv,$41303030,1)
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,JP,JQ,380,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and bi(Iv,CE) then
call bd(Iv,CE,40,20.,0.,0.,LoadReal(Ia,Ix,$64616D30)*4,1.5)
endif
endloop
call DestroyGroup(I2)
endif
else
call UnitDamageTarget(Iv,LoadUnitHandle(Ia,Ix,$756E6974),LoadReal(Ia,Ix,$64616D30)*2,true,false,ConvertAttackType(5),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
endif
call EXSetUnitMoveType(Iv,2)
call SetUnitTimeScale(Iv,1.)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$416D6F76,true)
call DestroyEffect(LoadEffectHandle(Ia,Ix,$68656666))
call RemoveUnit(UV)
call FlushChildHashtable(Ia,Ix)
call SetUnitAnimation(Iv,"stand")
call DestroyTimer(CS)
call SaveInteger(Ia,$41534545,GetHandleId(Iv),0)
else
if TZ<12 then
call bR(UV,Im,34.6)
else
call SetUnitTimeScale(UV,2.)
call SetUnitVertexColor(UV,255,255,255,150)
call SetUnitAnimationByIndex(Iv,6)
call SetUnitAnimationByIndex(UV,6)
endif
call SaveInteger(Ia,Ix,1,TZ)
call SaveReal(Ia,Ix,$68783030,JP)
call SaveReal(Ia,Ix,$68793030,JQ)
endif
set CS=null
set Iv=null
set I2=null
set CE=null
endfunction
function cJ takes unit Iv,unit CE,real JT returns nothing
local timer MG
local integer Ix=0
local real Im=bN(Iv,CE)
set MG=CreateTimer()
set Ix=GetHandleId(MG)
call SetUnitFacing(Iv,Im)
call EXSetUnitFacing(Iv,Im)
call SetUnitTimeScale(Iv,2.)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$416D6F76,false)
call EXSetUnitMoveType(Iv,16)
call SaveUnitHandle(bj_lastCreatedHashtable,Ix,$6865726F,Iv)
call SaveUnitHandle(bj_lastCreatedHashtable,Ix,$756E6974,CE)
call SaveUnitHandle(bj_lastCreatedHashtable,Ix,$6D6A3030,CreateUnit(GetOwningPlayer(Iv),$6E303051,GetUnitX(Iv),GetUnitY(Iv),Im))
call SaveReal(bj_lastCreatedHashtable,Ix,$616E6730,Im)
call SaveInteger(Ia,Ix,1,13)
call SaveReal(Ia,Ix,$64616D30,JT)
call SaveEffectHandle(Ia,Ix,$68656666,AddSpecialEffectTarget("dekan_lol_yasuo_smoke.mdx",Iv,"origin"))
call SaveReal(Ia,Ix,$68783030,GetUnitX(Iv))
call SaveReal(Ia,Ix,$68793030,GetUnitY(Iv))
call SaveInteger(Ia,$41534545,GetHandleId(Iv),1)
call TimerStart(MG,.03,true,function cI)
set MG=null
endfunction
function cK takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local real Im=LoadReal(Ia,Ix,$616E6730)
local group I2=CreateGroup()
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real JP=0.
local real JQ=0.
local real JO=0.
local real JR=0.
local unit CE
local integer SC=0
call XB(15,$6E303054,0,0,GetUnitX(Iv),GetUnitY(Iv),Im,1)
call XB(15,$6E303053,0,0,GetUnitX(Iv)*1.+100.*1.*Cos(Im*1.*bj_DEGTORAD),GetUnitY(Iv)*1.+100.*1.*Sin(Im*bj_DEGTORAD*1.*bj_DEGTORAD),Im,1)
call GroupEnumUnitsInRange(I2,It,Iu,240,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and bi(Iv,CE) then
set JO=bO(Iv,CE)
set JP=It+JO*1.*Cos(Im*bj_DEGTORAD)
set JQ=Iu+JO*1.*Sin(Im*bj_DEGTORAD)
set JR=SquareRoot(Pow(JP-GetUnitX(CE),2.)+Pow(JQ-GetUnitY(CE),2.))
if JO<=50. or JR<=110 then
call UnitDamageTarget(Iv,CE,LoadReal(Ia,Ix,$64616D30),true,false,ConvertAttackType(5),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",CE,"origin"))
set SC=1
endif
endif
endloop
if SC>0 then
call SetUnitAbilityLevel(Iv,$41415351,GetUnitAbilityLevel(Iv,$41415351)+1)
if GetUnitAbilityLevel(Iv,$41415351)==3 then
call SaveEffectHandle(Ia,GetHandleId(Iv),$65666666,AddSpecialEffectTarget("war3mapImported\\Effect_DouQi.mdx",Iv,"origin"))
endif
else
call SetUnitAbilityLevel(Iv,$41415351,1)
endif
call DestroyTimer(CS)
call DestroyGroup(I2)
call FlushChildHashtable(Ia,Ix)
set CS=null
set Iv=null
set I2=null
set CE=null
endfunction
function cL takes nothing returns nothing
local timer MG
local integer JX=S2I(DzGetTriggerSyncData())
local real Im=bQ(Ib[JX],IQ,IR)
local unit Iv=Ib[JX]
local unit CE
local real Ii=bk(Iv,0,GetUnitAbilityLevel(Iv,$41415331))*2
if GetUnitAbilityLevel(Ib[JX],$41415351)==3 then
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$65666666))
call SetUnitAbilityLevel(Ib[JX],$41415351,1)
call SetUnitFacing(Ib[JX],Im)
call EXSetUnitFacing(Ib[JX],Im)
call SetUnitAnimationByIndex(Ib[JX],13)
call PlaySoundOnUnitBJ(S,100.,Ib[JX])
set CE=XB(JX-1,$6E303052,0,0,GetUnitX(Iv),GetUnitY(Iv),Im,.6)
call XL(CE,Im,900.,.6,.02,128,Ii,CE,0,true,true,true,"","")
else
call SetUnitFacing(Ib[JX],Im)
call EXSetUnitFacing(Ib[JX],Im)
call PlaySoundOnUnitBJ(T,100.,Ib[JX])
call SetUnitAnimationByIndex(Ib[JX],11)
set MG=CreateTimer()
call SaveReal(bj_lastCreatedHashtable,GetHandleId(MG),$64616D30,Ii)
call SaveUnitHandle(bj_lastCreatedHashtable,GetHandleId(MG),$6865726F,Ib[JX])
call SaveReal(bj_lastCreatedHashtable,GetHandleId(MG),$616E6730,Im)
call TimerStart(MG,.1,false,function cK)
endif
set Iv=null
set CE=null
set MG=null
endfunction
function cM takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
call SaveInteger(Ia,Ix,$30696E64,LoadInteger(Ia,Ix,$30696E64)-1)
call SetUnitState(Iv,ConvertUnitState(0),GetUnitState(Iv,ConvertUnitState(0))-GetUnitState(Iv,ConvertUnitState(1))*.01)
if LoadInteger(Ia,Ix,$30696E64)<=0 or GetUnitState(Iv,ConvertUnitState(0))<1 then
call SetUnitState(Iv,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(18))-LoadReal(Ia,Ix,$3061746B))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(GetExpiredTimer())
endif
set Iv=null
endfunction
function cN takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real UP=GetUnitState(Iv,ConvertUnitState(1))*.05
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveInteger(Ia,Ix,$30696E64,15)
call SetUnitState(Iv,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(18))+UP)
call SaveReal(Ia,Ix,$3061746B,UP)
call TimerStart(CS,1.,true,function cM)
endfunction
function cO takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
if GetUnitAbilityLevel(Iv,$4230334F)>0 then
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),280.,GetUnitState(Iv,ConvertUnitState(21))*.3*I2R(GetUnitAbilityLevel(Iv,$41444433)),5,0)
endif
if GetUnitAbilityLevel(Iv,$42303255)>0 then
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00日炎护体！" )
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),280.,GetUnitState(Iv,ConvertUnitState(1))*.01*I2R(GetUnitAbilityLevel(Iv,$41623163)),5,0)
endif
set Iv=null
endfunction
function cP takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call TimerStart(CS,1.,true,function cO)
endfunction
// 攻击时触发函数
function cQ takes unit JW,unit Ig returns nothing
local integer Je=0
local real attackTime =0
// if JW == zongyu then 
//     call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "技能等级:" + I2S( GetUnitAbilityLevel(JW, 'Ab27')))
// endif
if GetUnitAbilityLevel(JW, 'Ab2r') >0 and IsUnitType(Ig, UNIT_TYPE_FLYING) == false and IsUnitType(Ig, UNIT_TYPE_HERO) == false and IsUnitType(Ig, UNIT_TYPE_STRUCTURE) == false and IsUnitType(Ig, UNIT_TYPE_STRUCTURE) == false and IsUnitEnemy(JW, GetOwningPlayer(Ig)) == true then
    call IssueTargetOrderById(JW, 852247,Ig)
endif

if  GetUnitAbilityLevel(JW, 'Ab26') >0 then
    call UnitDamageTarget(JW, Ig, (GetHeroAgi(JW, true))+(GetHeroInt(JW, true))+(GetHeroStr(JW, true)), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
    //如果当前攻击的单位不是
    if Ig != LoadUnitHandle(Ia, GetHandleId(JW), $30304846) then
        // call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "" )

        call SaveUnitHandle(Ia, GetHandleId(JW), $30304846,Ig)
        call SaveReal(Ia, GetHandleId(JW), $30304847,0)
    else
        // 让攻击次数+1
         call SaveReal(Ia, GetHandleId(JW), $30304847, LoadReal(Ia, GetHandleId(JW), $30304847) +1)
         
         set attackTime = LoadReal(Ia, GetHandleId(JW), $30304847) 
        call UnitDamageTarget(JW, Ig, 50 * (GetUnitAbilityLevel(JW, 'Ab26') +zongyu_R_enchance) * attackTime, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)

        // call UnitDamageTarget(JW, Ig, 50 * GetUnitAbilityLevel(JW, 'Ab26') * attackTime, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
        if bC(JW, $69743061) ==true then
        call SaveReal(Ia, GetHandleId(JW), $30304847, LoadReal(Ia, GetHandleId(JW), $30304847) +2)
        set attackTime = LoadReal(Ia, GetHandleId(JW), $30304847)  
        call UnitDamageTarget(JW, Ig, 50 * GetUnitAbilityLevel(JW, 'Ab26') * attackTime, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
        call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "累计攻击伤害:" + R2S(50 * GetUnitAbilityLevel(JW, 'Ab26') * attackTime))
     
    endif
        
    endif
endif
// 宗预F攻速
if JW == zongyu and UnitHasBuffBJ(JW, 'B02Y') == true then
// call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "怒拳破攻击！" )
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$41314C54,1,GetUnitX(Ig),GetUnitY(Ig),bj_UNIT_FACING,0.1),852096)

else
    // 
if JW == zongyu and UnitHasBuffBJ(JW, 'B02Y') == false and LoadReal(Ia, GetHandleId(JW), $30304845) >0 and LoadReal(Ia, GetHandleId(JW), $30304845) != GetUnitState(JW, ConvertUnitState(37)) then
// call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "怒拳破结束！" )
call SetUnitState(JW, ConvertUnitState(37),LoadReal(Ia, GetHandleId(JW), $30304845))  
endif
endif
// 宗预E回血
if JW == zongyu and GetUnitAbilityLevel(JW, 'Ab26') >0 then
call SetUnitState(JW,UNIT_STATE_LIFE,GetUnitState(JW,UNIT_STATE_LIFE)+300*(I2R(GetUnitAbilityLevel(JW, 'Ab26'))))
    
endif
// 陈到Q伤害
if UnitHasBuffBJ(JW, $42303257) == true then
// call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "过来挨打：" )
call UnitDamageTarget(JW, Ig, GetUnitAbilityLevel(chendao, 'Ab1u') * 400 + GetUnitState(JW, ConvertUnitState(18)) * 3, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
set udg_CS=( ( udg_CS ) + ( 1 ) )
if ( ( udg_CS == GetUnitAbilityLevel(chendao,'Ab1u') ) ) then
call UnitRemoveBuffBJ($42303257, GetEventDamageSource())
else
endif
endif

// 心之钢
if bW(JW, $69743069) != null and LoadBoolean(FS,GetHandleId(JW),$130B62E4) == true  then
call PlaySoundOnUnitBJ(gang,150,JW)
// call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "|Cff00ff00心之钢攻击！" )
call UnitDamageTarget(JW, Ig, LoadReal(FS,GetHandleId(Ig),$130B62E3) * .5, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call SetUnitState(JW,ConvertUnitState(22),LoadReal(FS,GetHandleId(JW),$130B62E5))
call SetItemCharges(aj(JW,$69743069), GetItemCharges(aj(JW,$69743069)) + R2I(GetUnitState(JW, UNIT_STATE_MAX_LIFE) * 0.01))
call SetUnitState(JW, ConvertUnitState(1), GetUnitState(JW, UNIT_STATE_MAX_LIFE) *1.01)
if GetUnitState(JW, UNIT_STATE_MAX_LIFE) < 5000000 then
call SaveReal(FS,GetHandleId(JW),$130B62E3, GetUnitState(JW, UNIT_STATE_MAX_LIFE))
endif

call SaveBoolean(FS,GetHandleId(JW),$130B62E4,false) 
call SaveReal(FS,GetHandleId(JW),$130B62E2,30.)
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$41623071,1,GetUnitX(JW),GetUnitY(JW),bj_UNIT_FACING,3),852095,Ig)

//  call SaveReal(FS,GetHandleId(JW),$130B62E2,LoadReal(FS,GetHandleId(JW),$130B62E2)-.1)   
// call XinzhigangAttack()
endif
// 高翔反伤
// if Ig == gaoxiang and IsUnitAlly(JW, Player(8)) == false and GetUnitAbilityLevel(Ig, $41623163) >0 then 
// call UnitDamageTarget(Ig, JW, LoadReal(FS,GetHandleId(Ig),$130B62E3) * .01 *GetUnitAbilityLevel(Ig, $41623163), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
// call DisplayTextToPlayer(GetOwningPlayer(Ig), 0, 0, "|Cff00ff00反伤！" + R2S(LoadReal(FS,GetHandleId(Ig),$130B62E3) * .01 * GetUnitAbilityLevel(Ig, $41623163)) + "角色生命值：" + R2S( LoadReal(FS,GetHandleId(Ig),$130B62E3)))

// endif
// 天使被动-登神长阶伤害
if JW == juFu and GetUnitAbilityLevel(JW, $41623132) > 11 then
call bs(JW, GetUnitX(Ig), GetUnitY(Ig), 330, GetEventDamage() *0.1 + bk(JW, 2, GetUnitAbilityLevel(JW, $41623132)) * .002* GetHeroLevel(juFu), 5, 2)
endif

if JW == juFu and GetUnitAbilityLevel(JW, $41623132) == 18 and GetRandomInt(1, 6) ==6 then
call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "|Cff00ff00制裁八方！造成伤害：" + R2S(GetEventDamage() * 0.6 + bk(JW, 2, GetUnitAbilityLevel(JW, $41623132)) * .04 * GetHeroLevel(juFu)))
call bs(JW, GetUnitX(Ig), GetUnitY(Ig), 330, GetEventDamage() * 0.7 + bk(JW, 2, GetUnitAbilityLevel(JW, $41623132)) * .0012 * GetHeroLevel(juFu), 5, 2)
endif
// 项羽战刃效果
if  bC(JW, $73747265) ==true  then
if GetRandomInt(0,12)<4 then

call bv(JW,GetEventDamage()*.1+bk(JW,1,3),bN(JW,Ig),600,320)
call IssuePointOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$4143666C,1,GetUnitX(JW),GetUnitY(JW),0.,1),852587,GetUnitX(Ig),GetUnitY(Ig))
endif
endif

// 触发丈八效果JW==Cu and
if  bW(JW,$69743062)!=null  then
if GetRandomInt(0,12)<4 then
// call DisplayTextToPlayer(GetOwningPlayer(JW),0,0,"|Cff00ff00真龙吐息！")
call bv(JW,GetEventDamage()*.1+bk(JW,1,3),bN(JW,Ig),600,320)
call IssuePointOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$5A303033,1,GetUnitX(JW),GetUnitY(JW),0.,1),852125,GetUnitX(Ig),GetUnitY(Ig))
endif
endif
// 马岱触发无形剑效果
if GetUnitTypeId(JW)==$45696C6C and GetUnitAbilityLevel(JW,$414E6567)>0 and GetUnitAbilityLevel(JW,$41303342)>0  then
if GetRandomInt(0,12)<GetUnitAbilityLevel(JW,$414E6567) then
// call DisplayTextToPlayer(GetOwningPlayer(JW),0,0,"|Cff00ff00剑气纵横三万里！")
call bv(JW,GetEventDamage()*.1+bk(JW,1,GetUnitAbilityLevel(JW,$41303342)),bN(JW,Ig),1200,320)
call IssuePointOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$41303342,1,GetUnitX(JW),GetUnitY(JW),0.,1),852125,GetUnitX(Ig),GetUnitY(Ig))
endif
// call UnitDamageTarget(JW,Ig,bk(JW,2,GetUnitAbilityLevel(JW,$414E6567)),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
// 黄忠触发技能效果
if GetUnitTypeId(JW) == GetUnitTypeId(huntingUnit) and GetRandomInt(1,10)>8 then
call IssuePointOrder(CreateUnit(GetOwningPlayer(JW),$65303048,GetUnitX(JW),GetUnitY(JW),GetUnitFacing(JW)),"carrionswarm",GetUnitX(Ig),GetUnitY(Ig))
call DisplayTextToPlayer(GetOwningPlayer(JW),0,0,"|Cff00ff00百步穿杨！")

// call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00百步穿杨！")
endif
if IsUnitAlly(JW,Player(8))==true and bW(JW,$72616D33)!=null and GetRandomInt(1,10)==1 then
call IssuePointOrder(CreateUnit(GetOwningPlayer(JW),$65303048,GetUnitX(JW),GetUnitY(JW),GetUnitFacing(JW)),"carrionswarm",GetUnitX(Ig),GetUnitY(Ig))
if huntingStart==true  and huntingFinish==false then
set huntingTime=huntingTime+1
call DisplayTextToPlayer(GetOwningPlayer(JW),0,0,"|Cff00ff00百步穿杨！已完成"+I2S(huntingTime)+"/30次！")
// call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00百步穿杨！已完成"+I2S(huntingTime)+"/30次！")
endif
if huntingTime>29 and huntingStart==true and huntingFinish==false then
    // set huntingStart=false
call DisplayTextToPlayer(GetOwningPlayer(JW),0,0,"|Cff00ff00你已完成了30次强化射击，去找猎人证明给他看吧！")

    // call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00你已完成了30次强化射击，去找猎人证明给他看吧！")

endif
endif
// 玄龙刀破甲
if IsPlayerAlly(GetOwningPlayer(Ig),Player(8))==false and GetPlayerController(GetOwningPlayer(Ig))!=MAP_CONTROL_USER and GetUnitAbilityLevel(Ig,$5A303034)<1 and GetUnitAbilityLevel(JW,$41623038)==1 then
call UnitAddAbility(Ig,$5A303034)
endif
// 玄铁套破甲
if IsPlayerAlly(GetOwningPlayer(Ig),Player(8))==false and GetPlayerController(GetOwningPlayer(Ig))!=MAP_CONTROL_USER and GetUnitAbilityLevel(Ig,$41303348)<1 and GetUnitAbilityLevel(JW,$41303347)==1 then
call UnitAddAbility(Ig,$41303348)
endif
if GetUnitAbilityLevel(JW,$41647431)>0 then
if GetRandomInt(1,10)==5 then
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$41304654,1,GetUnitX(Ig),GetUnitY(Ig),bj_UNIT_FACING,1),852111,Ig)
endif
endif
// 青釭剑特效+冰龙被动攻击
if GetUnitAbilityLevel(JW,$41303735)>0  then
if GetRandomInt(1,4)==3 then
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$4143666E,1,GetUnitX(Ig),GetUnitY(Ig),bj_UNIT_FACING,1),852226,Ig)
call bs(JW, GetUnitX(Ig), GetUnitY(Ig), 330., bk(JW, 0, 1 + GetItemCharges(bW(JW, $676F626D))) , 4, 0)
call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "|Cff00ff00青釭如虹！伤害：" + R2S(bk(JW, 0, 1 + GetItemCharges(bW(JW, $676F626D)))))
endif
if IsPlayerAlly(GetOwningPlayer(Ig),GetOwningPlayer(JW))==false and GetUnitAbilityLevel(Ig,$41303543)<1 then
call UnitAddAbility(Ig,$41303543)
call CreateTextTagUnitBJ("削铁如泥",Ig,0.,12.,100,100,0.,10.)
set Jc[7]=bj_lastCreatedTextTag
call SetTextTagVelocity(Jc[7],64*.071/128*Cos(90*bj_DEGTORAD),64*.071/128*Sin(90*bj_DEGTORAD))
call SetTextTagPermanent(Jc[7],false)
call SetTextTagLifespan(Jc[7],1.)
endif
endif
// +冰龙被动攻击
if  GetUnitAbilityLevel(JW,$41667262)>0 then
if GetRandomInt(1,4)==3 then
call DisplayTextToPlayer(GetOwningPlayer(JW), 0, 0, "|Cff00ff00冰龙吐息！伤害：" + R2S(bk(JW, 0, GetUnitAbilityLevel(JW,$41667262))))
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$65303939,$4143666E,1,GetUnitX(Ig),GetUnitY(Ig),bj_UNIT_FACING,1),852226,Ig)
call bs(JW, GetUnitX(Ig), GetUnitY(Ig), 330., bk(JW, 0, GetUnitAbilityLevel(JW,$41303649)) , 4, 0)
endif
if IsPlayerAlly(GetOwningPlayer(Ig),GetOwningPlayer(JW))==false and GetUnitAbilityLevel(Ig,$41303543)<1 then
call UnitAddAbility(Ig,$41303543)
call CreateTextTagUnitBJ("削铁如泥",Ig,0.,12.,100,100,0.,10.)
set Jc[7]=bj_lastCreatedTextTag
call SetTextTagVelocity(Jc[7],64*.071/128*Cos(90*bj_DEGTORAD),64*.071/128*Sin(90*bj_DEGTORAD))
call SetTextTagPermanent(Jc[7],false)
call SetTextTagLifespan(Jc[7],1.)
endif
endif

if IsPlayerEnemy(GetOwningPlayer(JW),GetOwningPlayer(Ig))==true then
if LoadInteger(Ia,GetHandleId(JW),$41594D31)>=1 then
call SaveInteger(Ia,GetHandleId(JW),$41594D31,0)
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(JW),$30656666))
call IssuePointOrderById(XB(GetPlayerId(GetOwningPlayer(JW)),$6530594D,0,0,GetUnitX(JW),GetUnitY(JW),GetUnitFacing(JW),1),852218,GetUnitX(Ig),GetUnitY(Ig))
call bv(JW,GetUnitState(JW,ConvertUnitState(21))*2,bN(JW,Ig),1500,110)
elseif GetUnitAbilityLevel(JW,$4262736B)>0 and IsUnitAlly(JW,Player(8))==true then
if GetUnitTypeId(JW)==$55647265 or GetUnitTypeId(JW)==$55303038 and IsUnitType(JW,UNIT_TYPE_HERO)==true then
if bW(JW,$49303034)!=null and GetRandomInt(1,5)==3 then
call UnitAddItem(JW,CreateItem($66676668,GetUnitX(JW),GetUnitY(JW)))
elseif GetRandomInt(1,10)==5 then
call UnitAddItem(JW,CreateItem($66676668,GetUnitX(JW),GetUnitY(JW)))
endif
endif
elseif GetUnitAbilityLevel(JW,$41304C31)>0 and IsPlayerAlly(GetOwningPlayer(Ig),GetOwningPlayer(JW))==false and bW(JW,$6D6C7374)!=null or bW(JW,$676F626D)!=null then
if GetRandomInt(2,5)==5 then
set Jd[10]=GetUnitLoc(JW)
call UnitDamageTargetBJ(JW, Ig, I2R(GetHeroAgi(JW, true) + GetHeroStr(JW,true)) * GetRandomReal(2., 6.), ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL)
call CreateTextTagLocBJ("冲锋之志",Jd[10],1.,15.,100.,100,40.,20.)
set Jc[4]=bj_lastCreatedTextTag
call SetTextTagVelocity(Jc[4],64*.071/128*Cos(90*bj_DEGTORAD),64*.071/128*Sin(90*bj_DEGTORAD))
call SetTextTagPermanent(Jc[4],false)
call SetTextTagLifespan(Jc[4],1.)
call RemoveLocation(Jd[10])
endif
elseif bW(JW,$6C6E726E)!=null and IsPlayerAlly(GetOwningPlayer(Ig),GetOwningPlayer(JW))==false and JW==C0 then
if GetRandomInt(GetUnitAbilityLevel(JW,$41303645),20)==20 then
    // 刘湛冲击波伤害
call UnitDamageTarget(JW,Ig,GetEventDamage()+I2R((GetHeroAgi(JW, true) +GetHeroStr(JW,true))*5),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
endif
if IsUnitAlly(JW,Player(8))==true and IsUnitType(JW,UNIT_TYPE_HERO)==true then
if IsItemInvulnerable(bW(JW,$6D6C7374))==true and GetRandomInt(1,10)==1 then
set Je=GetRandomInt(1,9)
if Je==1 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(JW),$6530304E,GetUnitX(Ig),GetUnitY(Ig),0.),"frostnova",Ig)
elseif Je==2 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(JW),$6530304E,GetUnitX(Ig),GetUnitY(Ig),0.),"entanglingroots",Ig)
elseif Je==3 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(JW),$6530304E,GetUnitX(Ig),GetUnitY(Ig),0.),"soulburn",Ig)
elseif Je==4 then
call IssueTargetOrderById(CreateUnit(GetOwningPlayer(JW),$6530304D,GetUnitX(Ig),GetUnitY(Ig),0),852095,Ig)
elseif Je==5 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(JW),$6530304E,GetUnitX(Ig),GetUnitY(Ig),0.),"impale",Ig)
elseif Je==6 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(JW),$6530304F,GetUnitX(JW),GetUnitY(JW),0.),"manaburn",Ig)
elseif Je==7 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(JW),$6530304F,GetUnitX(Ig),GetUnitY(Ig),0.),"cripple",Ig)
elseif Je==8 then
call IssueImmediateOrderById(CreateUnit(GetOwningPlayer(JW),$6530304F,GetUnitX(Ig),GetUnitY(Ig),0),852253)
elseif Je==9 then
call IssuePointOrder(CreateUnit(GetOwningPlayer(JW),$6530304F,GetUnitX(Ig),GetUnitY(Ig),0.),"shockwave",GetUnitX(Ig),GetUnitY(Ig))
endif
endif
endif
endif
endfunction
function cR takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local integer Ua=0
local real It=0.
local real Iu=0.
call SaveInteger(Ia,Ix,$A707D18B,LoadInteger(Ia,Ix,$A707D18B)-1)
loop
exitwhen Ua>9
set Ua=Ua+1
set It=LoadReal(Ia,Ix,$A99320FA+Ua)
set Iu=LoadReal(Ia,Ix,$FDF65382+Ua)
call DestroyEffect(AddSpecialEffect("war3mapImported\\great_lightning.mdx",It,Iu))
call bs(LoadUnitHandle(Ia,Ix,$B06AB615),It,Iu,220,I2R(G5*200*(Hp+Gq)),5,0)
call bs(LoadUnitHandle(Ia,Ix,$B06AB615),It,Iu,220,I2R(G5*200*(Hp+Gq)),2,3)
endloop
call FlushChildHashtable(Ia,Ix)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endfunction
function cS takes unit CE,real UY,real UZ returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer Ua=0
local real It=0.
local real Iu=0.
call SaveUnitHandle(Ia,Ix,$B06AB615,CE)
loop
exitwhen Ua>9
set Ua=Ua+1
set It=UY+I2R(GetRandomInt(-3,3))*200
set Iu=UZ+I2R(GetRandomInt(-3,3))*200
call SaveReal(Ia,Ix,$A99320FA+Ua,It)
call SaveReal(Ia,Ix,$FDF65382+Ua,Iu)
call DestroyEffect(AddSpecialEffect("war3mapImported\\chidorielectric.mdx",It,Iu))
endloop
call TimerStart(CS,2.,false,function cR)
endfunction
function cT takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local integer Ua=1
local real It=0.
local real Iu=0.
call SaveInteger(Ia,Ix,$A707D18B,LoadInteger(Ia,Ix,$A707D18B)-1)
if LoadInteger(Ia,Ix,$A707D18B)<=0 then
call FlushChildHashtable(Ia,Ix)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
loop
exitwhen Ua>5
set It=LoadReal(Ia,Ix,$A99320FA+Ua)
set Iu=LoadReal(Ia,Ix,$FDF65382+Ua)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",It,Iu))
call bs(LoadUnitHandle(Ia,Ix,$E6E64075),It,Iu,220,I2R(G5*100*(Hp+Gq)),5,0)
call bs(LoadUnitHandle(Ia,Ix,$E6E64075),It,Iu,220,I2R(G5*100*(Hp+Gq)),2,3)
set It=LoadReal(Ia,Ix,$A99320FA)+I2R(GetRandomInt(-3,3))*200
set Iu=LoadReal(Ia,Ix,$FDF65382)+I2R(GetRandomInt(-3,3))*200
call SaveReal(Ia,Ix,$A99320FA+Ua,It)
call SaveReal(Ia,Ix,$FDF65382+Ua,Iu)
call DestroyEffect(LoadEffectHandle(Ia,Ix,Ua))
if LoadInteger(Ia,Ix,$A707D18B)>1 then
call SaveEffectHandle(Ia,Ix,Ua,AddSpecialEffect("Abilities\\Spells\\NightElf\\TrueshotAura\\TrueshotAura.mdl",It,Iu))
endif
set Ua=Ua+1
endloop
endif
endfunction
function cU takes unit CE,real UY,real UZ returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer Ua=1
local real It=0.
local real Iu=0.
call SaveUnitHandle(Ia,Ix,$E6E64075,CE)
call SaveReal(Ia,Ix,$A99320FA,UY)
call SaveReal(Ia,Ix,$FDF65382,UZ)
loop
exitwhen Ua>5
set It=UY+I2R(GetRandomInt(-3,3))*200
set Iu=UZ+I2R(GetRandomInt(-3,3))*200
call SaveReal(Ia,Ix,$A99320FA+Ua,It)
call SaveReal(Ia,Ix,$FDF65382+Ua,Iu)
call SaveEffectHandle(Ia,Ix,Ua,AddSpecialEffect("Abilities\\Spells\\NightElf\\TrueshotAura\\TrueshotAura.mdl",It,Iu))
set Ua=Ua+1
endloop
call SaveInteger(Ia,Ix,$A707D18B,5)
call TimerStart(CS,1.5,true,function cT)
endfunction
function cV takes nothing returns nothing
local integer Ix=bg(GetExpiredTimer())
set Gu[Ix]=Gu[Ix]+1
if GetUnitState(Pw[Ix],ConvertUnitState(0))<=.34 or Gu[Ix]>=36 then
call bS(Pv[Ix],Gy[Ix],Gz[Ix],Gu[Ix]*20,150)
call DestroyTimer(GetExpiredTimer())
call SetUnitTimeScale(Pv[Ix],1.)
call SetUnitAnimation(Pv[Ix],"stand")
call SetUnitAnimation(Pw[Ix],"stand")
if Gv[Ix]>=0 then
call UnitRemoveAbility(Pv[Ix],$4176756C)
endif
call bh(Ix)
else
call bV(Pv[Ix],Gy[Ix],Gz[Ix],Gu[Ix]*20,150)
call UnitDamageTarget(Pv[Ix],Pw[Ix],Gx[Ix],false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",Pw[Ix],"origin"))
call SetUnitAnimation(Pv[Ix],"spin")
endif
endfunction
function cW takes unit Ij,unit CE returns nothing
local integer Ix=bf()
set Pv[Ix]=Ij
set Pw[Ix]=CE
set Gy[Ix]=GetUnitX(CE)
set Gz[Ix]=GetUnitY(CE)
set G0[Ix]=bN(Ij,CE)
set Gu[Ix]=0
set Gx[Ix]=(GetHeroStr(Ij,true)+GetHeroAgi(Ij,true))
// 如果拥有轩辕剑或项羽战刃
if bC(Ij,$6D6C7374)==true or bC(Ij,$73747265)==true then
set Gx[Ix]=Gx[Ix]*2
endif
if GetUnitAbilityLevel(Ij,$4176756C)==0 then
call UnitAddAbility(Ij,$4176756C)
set Gv[Ix]=1
endif
call SetUnitAnimation(Ij,"Spell Slam")
call SetUnitTimeScale(Ij,2.)
call SetUnitAnimation(Pw[Ix],"death")
call TimerStart(Gt[Ix],.03,true,function cV)
endfunction
function cX takes player CC,integer KY,string KT,string Iw,integer FZ returns string
if FZ==1 then
if KY==$CB8A8F5D then
call DzAPI_Map_Stat_SetStat(Player(0),KT,Iw)
elseif KY==$B3B2543A then
call DzAPI_Map_SaveServerValue(CC,"I"+KT,Iw)
elseif KY==$64078743 then
call DzAPI_Map_SaveServerValue(CC,"S"+KT,Iw)
elseif KY==$33FCAEA9 then
call DzAPI_Map_UseConsumablesItem(CC,KT)
endif
else
if KY==$1FAC80C2 then
set KT=DzAPI_Map_GetServerValue(CC,"I"+KT)
elseif KY==$86D499F9 then
set KT=DzAPI_Map_GetServerValue(CC,"S"+KT)
elseif KY==$B3B75F69 then
if DzAPI_Map_HasMallItem(CC,KT)==true then
if StringHash(KT)==$F8C3912 then
set KT="128"
elseif StringHash(KT)==$A7E80352 then
set KT="64"
elseif StringHash(KT)==$B801A756 then
set KT="32"
elseif StringHash(KT)==$4F746704 then
set KT="1"
endif
endif
elseif KY==$5F58D847 then
set KT=I2S(DzAPI_Map_GetServerValueErrorCode(CC)+7)
elseif KY==$ECC8BBCA then
set KT=I2S(DzAPI_Map_GetMapLevel(CC))
elseif KY==$5D6EBA0F then
set KT=I2S(DzAPI_Map_GetMapLevelRank(CC))
endif
endif
return KT
endfunction
function cY takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local real Ii=I2R(GetHeroAgi(LoadUnitHandle(Ia,Ix,0),true)*GetUnitAbilityLevel(LoadUnitHandle(Ia,Ix,0),$41475335)*(20-GetUnitAbilityLevel(LoadUnitHandle(Ia,Ix,0),$41475335)))+LoadReal(Ia,Ix,3)
if GetUnitAbilityLevel(LoadUnitHandle(Ia,Ix,0),$4130424D)>0 then
set Ii=Ii*2
endif
call SetUnitX(LoadUnitHandle(Ia,Ix,0),LoadReal(Ia,Ix,1))
call SetUnitY(LoadUnitHandle(Ia,Ix,0),LoadReal(Ia,Ix,2))
call SetUnitFlyHeight(LoadUnitHandle(Ia,Ix,0),0,0.)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",LoadReal(Ia,Ix,1),LoadReal(Ia,Ix,2)))
call bs(LoadUnitHandle(Ia,Ix,0),LoadReal(Ia,Ix,1),LoadReal(Ia,Ix,2),495,Ii,5,0)
call UnitRemoveAbility(LoadUnitHandle(Ia,Ix,0),$4176756C)
call IssueImmediateOrderById(LoadUnitHandle(Ia,Ix,1),852127)
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(GetExpiredTimer())
endfunction
function cZ takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real In=bP(Iv,It,Iu)
local integer UU=R2I(In/250)+1
call UnitAddAbility(Iv,$4176756C)
call bX(Iv)
call SetUnitFlyHeight(Iv,In,In*2)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveUnitHandle(Ia,Ix,1,XB(GetPlayerId(GetOwningPlayer(Iv)),$65475330,$41304258,UU,It,Iu,0.,6.))
call SaveReal(Ia,Ix,1,It)
call SaveReal(Ia,Ix,2,Iu)
call SaveReal(Ia,Ix,3,In*10)
call TimerStart(CS,In/1000,false,function cY)
set CS=null
endfunction
function ca takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,1)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550,LoadReal(Ia,Ix,$3064616D),1,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl",GetUnitX(Iv)+GetRandomReal(-500.,500.),GetUnitY(Iv)+GetRandomReal(-500.,500.)))
if LoadInteger(Ia,Ix,1)<=0 then
call DestroyTimer(CS)
call DestroyEffect(LoadEffectHandle(Ia, GetHandleId(Iv),$65666666))
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function cb takes unit Iv,real Ii,integer JV returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,1,Iv)
call SaveInteger(Ia,Ix,1,JV)
call SaveReal(Ia,Ix,$3064616D,Ii*.1)
call UnitAddItem(Iv,CreateItem($49303232,GetUnitX(Iv),GetUnitY(Iv)))
call TimerStart(CS,.2,true,function ca)
set CS=null
endfunction
function cc takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local real It=LoadReal(Ia,Ix,$30303078)
local real Iu=LoadReal(Ia,Ix,$30303079)
local integer TZ=0
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
call bs(Iv,It,Iu,550,LoadReal(Ia,Ix,$3064616D),1,0)
if LoadInteger(Ia,Ix,1)<=0 then
call TerrainDeformStop(bj_lastCreatedTerrainDeformation,0)
loop
exitwhen TZ>72
set TZ=TZ+1
call RemoveDestructable(LoadDestructableHandle(Ia,Ix,TZ))
endloop
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function cd takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer TZ=0
local real U1=0
local real U2=0
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveReal(Ia,Ix,$30303078,It)
call SaveReal(Ia,Ix,$30303079,Iu)
call SaveInteger(Ia,Ix,1,30)
call SaveReal(Ia,Ix,$3064616D,bk(Iv,0,GetUnitAbilityLevel(Iv,$41475952))*.5)
set bj_lastCreatedTerrainDeformation=TerrainDeformCrater(It,Iu,500.,500.,R2I(15*1000),false)
loop
exitwhen TZ>72
set TZ=TZ+1
set U1=It*1.+400*1.*Cos(TZ*5*1.*bj_DEGTORAD)
set U2=Iu*1.+400*1.*Sin(TZ*5*1.*bj_DEGTORAD)
call SaveDestructableHandle(Ia,Ix,TZ,CreateDestructableZ($42444853,U1,U2,-100,bH(U1,U2,It,Iu),1,0))
endloop
call TimerStart(CS,.5,true,function cc)
set CS=null
endfunction
function ce takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
if LoadInteger(Ia,Ix,1)<=0 then
call SetUnitFlyHeight(Iv,0.,0.)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(Iv),GetUnitY(Iv)))
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),145,LoadReal(Ia,Ix,$3064616D),1,0)
set JJ=XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41333030,4,GetUnitX(Iv),GetUnitY(Iv),0,1)
call IssueImmediateOrderById(JJ,852127)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function cf takes unit Iv,real Ii returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call UnitAddAbility(Iv,$416D7266)
call UnitRemoveAbility(Iv,$416D7266)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveInteger(Ia,Ix,1,8)
call SetUnitAnimationByIndex(Iv,16)
call SetUnitFlyHeight(Iv,800.,2000.)
call TimerStart(CS,.02,true,function ce)
set CS=null
endfunction
function cg takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local real It=LoadReal(Ia,Ix,$30303078)
local real Iu=LoadReal(Ia,Ix,$30303079)
local real Uz=LoadReal(Ia,Ix,$30306878)
local real U0=LoadReal(Ia,Ix,$30306879)
local real In=0
local real Im=LoadReal(Ia,Ix,$30616E67)
local real Ii=0
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(Iv),GetUnitY(Iv)))
call SaveInteger(Ia,Ix,2,LoadInteger(Ia,Ix,2)+1)
if LoadInteger(Ia,Ix,2)>=LoadInteger(Ia,Ix,1) or GetWidgetLife(Iv)<1 then
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
if GetWidgetLife(Iv)>1 then
set Ii=bk(Iv,1,GetUnitAbilityLevel(Iv,$41475951))*I2R(LoadInteger(Ia,Ix,2))*.02
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),300,Ii,1,0)
call cf(Iv,Ii*10)
call SetUnitAnimationByIndex(Iv,3)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call bS(Iv,GetUnitX(Iv),GetUnitY(Iv),Im,65)
call SetUnitAnimationByIndex(Iv,14)
call SetUnitFacing(Iv,Im)
set In=bP(Iv,Uz,U0)
if In>70 or In<60 then
if GetWidgetLife(Iv)>1 then
set Ii=bk(Iv,1,GetUnitAbilityLevel(Iv,$41475951))*I2R(LoadInteger(Ia,Ix,2))*.02
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),300,Ii,1,0)
call cf(Iv,Ii*20)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
if GetWidgetLife(Iv)>1 then
set Ii=bk(Iv,1,GetUnitAbilityLevel(Iv,$41475951))*I2R(LoadInteger(Ia,Ix,2))*.02
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),300,Ii,1,0)
endif
call SaveReal(Ia,Ix,$30306878,GetUnitX(Iv))
call SaveReal(Ia,Ix,$30306879,GetUnitY(Iv))
endif
endif
set CS=null
set Iv=null
endfunction
function ch takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveReal(Ia,Ix,$30306878,GetUnitX(Iv))
call SaveReal(Ia,Ix,$30306879,GetUnitY(Iv))
call SaveReal(Ia,Ix,$30303078,It)
call SaveReal(Ia,Ix,$30303079,Iu)
call SaveReal(Ia,Ix,$30616E67,bQ(Iv,It,Iu))
call SaveInteger(Ia,Ix,1,R2I(bP(Iv,It,Iu)/65)+1)
call SaveInteger(Ia,Ix,2,0)
call SetUnitFacing(Iv,LoadReal(Ia,Ix,$30616E67))
call SetUnitAnimationByIndex(Iv,14)
call TimerStart(CS,.015,true,function cg)
set CS=null
endfunction
function ci takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local unit UV
local real Io=LoadReal(Ia,Ix,$64656D30)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
if LoadInteger(Ia,Ix,1)<=0 then
call bV(Iv,GetUnitX(CE),GetUnitY(CE),I2R(3-GetRandomInt(0,6))*60+180,300)
call EXSetUnitFacing(Iv,bN(Iv,CE))
call SaveReal(Ia,Ix,$616E6730,bN(Iv,CE))
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
call SaveInteger(Ia,Ix,1,16)
call SetUnitAnimationByIndex(Iv,8)
elseif LoadInteger(Ia,Ix,1)>5 then
set UV=CreateUnit(GetOwningPlayer(Iv),$65303030,GetUnitX(Iv),GetUnitY(Iv),GetUnitFacing(Iv))
call UnitApplyTimedLife(UV,$42487765,.2)
call SetUnitAnimationByIndex(UV,8)
call SetUnitTimeScale(Iv,.8)
call SetUnitVertexColor(UV,255,255,255,100)
call bV(Iv,GetUnitX(Iv),GetUnitY(Iv),LoadReal(Ia,Ix,$616E6730),50)
if LoadInteger(Ia,Ix,1)==6 then
call SetUnitAnimation(CE,"Death")
call UnitDamageTarget(Iv,CE,Io,false,false,ConvertAttackType(6),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl",CE,"chest"))
endif
endif
if LoadInteger(Ia,Ix,0)<=0 or GetWidgetLife(CE)<.405 then
call SetUnitFacing(Iv,bN(Iv,CE))
call PauseUnit(CE,false)
call PauseUnit(Iv,false)
call UnitRemoveAbility(Iv,$4176756C)
call SetUnitTimeScale(Iv,1.)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
set CE=null
set UV=null
endfunction
function cj takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local timer VF=CreateTimer()
local integer VG=GetHandleId(VF)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Io=LoadReal(Ia,Ix,$64656D30)
call SaveUnitHandle(Ia,VG,$6865726F,Iv)
call SaveUnitHandle(Ia,VG,$756E6974,CE)
call SaveReal(Ia,VG,$64656D30,Io)
call SaveInteger(Ia,VG,0,6)
call SaveInteger(Ia,VG,1,16)
call SaveReal(Ia,VG,$616E6730,bN(Iv,CE))
call bV(Iv,GetUnitX(CE),GetUnitY(CE),bN(CE,Iv),300)
call EXSetUnitFacing(Iv,bN(Iv,CE))
call SetUnitTimeScale(Iv,.9)
call SetUnitAnimationByIndex(Iv,8)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call TimerStart(VF,.05,true,function ci)
set CS=null
set VF=null
set Iv=null
set CE=null
endfunction
function ck takes unit Iv,unit CE,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$64656D30,bk(Iv,2,Pt)+ bk(Iv, 3, Pt) *0.4)
call PauseUnit(CE,true)
call PauseUnit(Iv,true)
call UnitAddAbility(Iv,$4176756C)
call SetUnitAnimationByIndex(Iv,12)
call TimerStart(CS,.5,false,function cj)
set CS=null
endfunction
function cl takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Io=LoadReal(Ia,Ix,$64656D30)
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
call UnitDamageTarget(Iv,CE,Io,false,false,ConvertAttackType(6),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call bV(Iv,GetUnitX(CE),GetUnitY(CE),I2R(3-GetRandomInt(0,6))*60+180,150)
call EXSetUnitFacing(Iv,bN(Iv,CE))
if LoadInteger(Ia,Ix,0)<2 then
call SetUnitAnimationByIndex(Iv,3)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",GetUnitX(CE),GetUnitY(CE)))
else
call SetUnitAnimationByIndex(Iv,2)
endif
call SetUnitAnimation(CE,"Death")
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",CE,"chest"))
if LoadInteger(Ia,Ix,0)<=0 or GetWidgetLife(CE)<.405 then
call SetUnitFacing(Iv,bN(Iv,CE))
call PauseUnit(CE,false)
call PauseUnit(Iv,false)
call UnitRemoveAbility(Iv,$4176756C)
call SetUnitAnimationByIndex(Iv,3)
call DestroyEffect(LoadEffectHandle(Ia,Ix,$65666630))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
set CE=null
endfunction
function cm takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local timer VF=CreateTimer()
local integer VG=GetHandleId(VF)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Io=LoadReal(Ia,Ix,$64656D30)
call SaveUnitHandle(Ia,VG,$6865726F,Iv)
call SaveUnitHandle(Ia,VG,$756E6974,CE)
call SaveReal(Ia,VG,$64656D30,Io)
call SaveInteger(Ia,VG,0,6)
call SetUnitPosition(Iv,GetUnitX(CE),GetUnitY(CE))
call SetUnitAnimationByIndex(Iv,2)
call UnitDamageTarget(Iv,CE,Io,false,false,ConvertAttackType(6),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call SetUnitAnimation(CE,"Death")
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",CE,"chest"))
call SaveEffectHandle(Ia,VG,$65666630,LoadEffectHandle(Ia,Ix,$65666630))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call TimerStart(VF,.5,true,function cl)
set CS=null
set VF=null
set Iv=null
set CE=null
endfunction
function cn takes unit Iv,unit CE,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$64656D30,bk(Iv,2,Pt)+ bk(Iv, 3, Pt) *0.4)
call PauseUnit(CE,true)
call PauseUnit(Iv,true)
call UnitAddAbility(Iv,$4176756C)
call SetUnitAnimationByIndex(Iv,4)
call SaveEffectHandle(Ia,Ix,$65666630,AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",CE,"weapon"))
call EXSetUnitFacing(Iv,bN(Iv,CE))
call TimerStart(CS,.5,false,function cm)
set CS=null
endfunction
function co takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Io=LoadReal(Ia,Ix,$64656D30)
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
call EXSetUnitFacing(Iv,bN(Iv,CE))
call UnitDamageTarget(Iv,CE,Io,false,false,ConvertAttackType(6),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
if LoadInteger(Ia,Ix,0)>2 then
call SetUnitAnimationByIndex(Iv,2)
elseif LoadInteger(Ia,Ix,0)==2 then
call SetUnitAnimationByIndex(Iv,3)
endif
call SetUnitAnimation(CE,"Death")
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Orc\\Orcblood\\BattrollBlood.mdl",CE,"chest"))
if LoadInteger(Ia,Ix,0)<=0 or GetWidgetLife(CE)<.405 then
call PauseUnit(CE,false)
call PauseUnit(Iv,false)
call SetUnitTimeScale(Iv,1.)
call UnitRemoveAbility(Iv,$4176756C)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
set CE=null
endfunction
function cp takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local timer VF=CreateTimer()
local integer VG=GetHandleId(VF)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Io=LoadReal(Ia,Ix,$64656D30)
call SaveUnitHandle(Ia,VG,$6865726F,Iv)
call SaveUnitHandle(Ia,VG,$756E6974,CE)
call SaveReal(Ia,VG,$64656D30,Io)
call SaveInteger(Ia,VG,0,8)
call bS(Iv,GetUnitX(CE),GetUnitY(CE),0,128)
call EXSetUnitFacing(Iv,bN(Iv,CE))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAura.mdl",GetUnitX(CE),GetUnitY(CE)))
call UnitDamageTarget(Iv,CE,Io,false,false,ConvertAttackType(6),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call SetUnitAnimation(Iv,"Attack")
call SetUnitAnimation(CE,"Death")
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Orc\\Orcblood\\BattrollBlood.mdl",CE,"chest"))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call TimerStart(VF,.25,true,function co)
set CS=null
set VF=null
set Iv=null
set CE=null
endfunction
function cq takes unit Iv,unit CE,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia, Ix, $64656D30, bk(Iv, 2, Pt) + bk(Iv, 3, Pt) *0.4)
call PauseUnit(CE,true)
call PauseUnit(Iv,true)
call UnitAddAbility(Iv,$4176756C)
call SetUnitTimeScale(Iv,2.)
call TimerStart(CS,.5,false,function cp)
set CS=null
endfunction
function cr takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Io=LoadReal(Ia,Ix,$64656D30)
local group I2=CreateGroup()
local group UX=CreateGroup()
local unit Jg
call GroupEnumUnitsInRange(I2,LoadReal(Ia,Ix,$78303030),LoadReal(Ia,Ix,$79303030),550,null)
loop
set Jg=FirstOfGroup(I2)
exitwhen Jg==null
call GroupRemoveUnit(I2,Jg)
if Iv!=Jg and GetUnitState(Jg,UNIT_STATE_LIFE)>.405 and IsUnitEnemy(Jg,GetOwningPlayer(Iv))==true and IsUnitType(Jg,UNIT_TYPE_STRUCTURE)==false and IsUnitVisible(Jg,GetOwningPlayer(Iv))==true then
call GroupAddUnit(UX,Jg)
endif
endloop
set Jg=GroupPickRandomUnit(UX)
if Jg!=null then
call bS(Iv,GetUnitX(Jg),GetUnitY(Jg),I2R(GetRandomInt(1,15)*24),128)
call SetUnitAnimationByIndex(Iv,2)
call EXSetUnitFacing(Iv,bN(Iv,Jg))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(Jg),GetUnitY(Jg)))
call UnitDamageTarget(Iv,Jg,Io,false,false,ConvertAttackType(6),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623071,1,GetUnitX(Jg),GetUnitY(Jg),bj_UNIT_FACING,3),852095,Jg)
else
call SaveInteger(Ia,Ix,0,0)
endif
loop
set Jg=FirstOfGroup(UX)
exitwhen Jg==null
call GroupRemoveUnit(UX,Jg)
endloop
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
call SetUnitAnimationByIndex(Iv,8)
if LoadInteger(Ia,Ix,0)<=0 then
call DestroyEffect(LoadEffectHandle(Ia,Ix,0))
call DestroyEffect(LoadEffectHandle(Ia,Ix,1))
call DestroyEffect(LoadEffectHandle(Ia,Ix,2))
call UnitRemoveAbility(Iv,$4176756C)
call PauseUnit(Iv,false)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
call DestroyGroup(I2)
set I2=null
call DestroyGroup(UX)
set UX=null
set CS=null
set Iv=null
set CE=null
set Jg=null
endfunction
function cs takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local timer VF=CreateTimer()
local integer VG=GetHandleId(VF)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
call SetUnitAnimationByIndex(Iv,2)
call SaveUnitHandle(Ia,VG,$6865726F,Iv)
call SaveUnitHandle(Ia,VG,$756E6974,CE)
call SaveReal(Ia,VG,$64656D30,LoadReal(Ia,Ix,$64656D30))
call SaveInteger(Ia,VG,0,10)
call SaveReal(Ia,VG,$78303030,LoadReal(Ia,Ix,$78303030))
call SaveReal(Ia,VG,$79303030,LoadReal(Ia,Ix,$79303030))
call SaveEffectHandle(Ia,VG,0,LoadEffectHandle(Ia,Ix,0))
call SaveEffectHandle(Ia,VG,1,LoadEffectHandle(Ia,Ix,1))
call SaveEffectHandle(Ia,VG,2,LoadEffectHandle(Ia,Ix,2))
call bS(Iv,GetUnitX(CE),GetUnitY(CE),I2R(GetRandomInt(1,15)*24),128)
call EXSetUnitFacing(Iv,bN(Iv,CE))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(CE),GetUnitY(CE)))
call UnitDamageTarget(Iv,CE,LoadReal(Ia,Ix,$64656D30),false,false,ConvertAttackType(6),ConvertDamageType(26),WEAPON_TYPE_WHOKNOWS)
call TimerStart(VF,.5,true,function cr)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
set CS=null
set VF=null
endfunction
function ct takes unit Iv,unit CE,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$64656D30,bk(Iv,2,Pt)+ bk(Iv, 3, Pt) *0.4)
call PauseUnit(Iv,true)
call SaveReal(Ia,Ix,$78303030,GetUnitX(CE))
call SaveReal(Ia,Ix,$79303030,GetUnitY(CE))
call UnitAddAbility(Iv,$4176756C)
call SetUnitTimeScale(Iv,2.)
call SaveEffectHandle(Ia,Ix,0,AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",Iv,"weapon,left"))
call SaveEffectHandle(Ia,Ix,1,AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",Iv,"weapon,right"))
call SaveEffectHandle(Ia,Ix,2,AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",Iv,"chest"))
call TimerStart(CS,.01,false,function cs)
set CS=null
endfunction
function cu takes nothing returns nothing
local player CC=GetTriggerPlayer()
local integer LF=GetPlayerId(CC)+1
local integer Ix=1
local button LI=GetClickedButton()
call DisplayTextToPlayer(CC,0,0,"开始更换")
loop
if LI==LG[Ix] then
call XZ(Ib[LF],$41304B32,LH[Ix])
set IK[LF]=true
if Ix==19 then
call SetUnitVertexColor(Ib[LF],255,255,255,255)
endif
exitwhen true
endif
set Ix=Ix+1
// 按钮判断范围,皮肤可选范围
exitwhen Ix>26
endloop
call DialogDisplay(CC,IM[LF],false)
set CC=null
set LI=null
endfunction
function cv takes nothing returns nothing
local integer Ix=1
local trigger Jv=CreateTrigger()
loop
set IM[Ix]=DialogCreate()
call TriggerRegisterDialogEvent(Jv,IM[Ix])
set Ix=Ix+1
exitwhen Ix==8
endloop
call TriggerAddAction(Jv,function cu)
set Jv=null
endfunction
function cw takes unit Iv returns unit
local player CC=GetTriggerPlayer()
local integer LF=GetPlayerId(CC)+1
local boolean LI=false
if GetUnitTypeId(Iv)==$4E626263 then
call DialogSetMessage(IM[LF],"选择替换关兴皮肤")
set LG[1]=DialogAddButton(IM[LF],"绿袍关羽",1)
set LH[1]=$4E303055
set LG[2]=DialogAddButton(IM[LF],"武圣关羽",2)
set LH[2]=$4E303056
set LI=true
elseif GetUnitTypeId(Iv)==$486C6772 then
call DialogSetMessage(IM[LF],"选择替换张苞皮肤")
set LG[3]=DialogAddButton(IM[LF],"虎将张飞",1)
set LH[3]=$4830304F
set LI=true
elseif GetUnitTypeId(Iv)==$48617266 then
call DialogSetMessage(IM[LF],"选择替换赵统皮肤")
set LG[4]=DialogAddButton(IM[LF],"银甲赵统",1)
set LH[4]=$4830304C
set LI=true
elseif GetUnitTypeId(Iv)==$456B6565 then
call DialogSetMessage(IM[LF],"选择替换马超皮肤")
set LG[5]=DialogAddButton(IM[LF],"银枪马超",1)
set LH[5]=$45303059
set LG[6]=DialogAddButton(IM[LF],"骑马马超",2)
set LH[6]=$484D4331
set LI=true
elseif GetUnitTypeId(Iv)==$48303036 then
call DialogSetMessage(IM[LF],"选择替换黄忠皮肤")
set LG[7]=DialogAddButton(IM[LF],"老将黄忠",1)
set LH[7]=$4830304D
set LI=true
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
set LG[10]=DialogAddButton(IM[LF],"黄忠",2)
set LH[10]=$48485A31
set LI=true
endif
elseif GetUnitTypeId(Iv)==$4F303033 then
call DialogSetMessage(IM[LF],"选择替换凤姬皮肤")
set LG[8]=DialogAddButton(IM[LF],"女版关羽",1)
set LH[8]=$4F303035
set LI=true
elseif GetUnitTypeId(Iv)==$48767368 and DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG") then
call DialogSetMessage(IM[LF],"选择替换鲍三娘皮肤")
set LG[9]=DialogAddButton(IM[LF],"双刀忍者",1)
set LH[9]=$4842534E
set LI=true
elseif GetUnitTypeId(Iv)==$48575930 then
call DialogSetMessage(IM[LF],"选择替换魏延皮肤")
set LG[11]=DialogAddButton(IM[LF],"红皮剑圣",1)
set LH[11]=$4E30304D
set LI=true
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"JGND")==true then
set LG[12]=DialogAddButton(IM[LF],"刘禅",2)
set LH[12]=$48575932
set LI=true
endif
elseif GetUnitTypeId(Iv)==$484A5330 then
call DialogSetMessage(IM[LF],"选择替换王越皮肤")
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"JGND")==true then
set LG[13]=DialogAddButton(IM[LF],"恶魔猎手",3)
set LH[13]=$484A5331
endif
set LG[15]=DialogAddButton(IM[LF],"巫妖王",1)
set LH[15]=$484A5332
set LG[18]=DialogAddButton(IM[LF],"剑星魂",2)
set LH[18]=$484A5333
set LI=true
elseif GetUnitTypeId(Iv)==$484C4C51 then
if StringHash(Hg[GetConvertedPlayerId(GetOwningPlayer(Iv))])==$4F85EB3D and DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"GLLQ") then
call DialogSetMessage(IM[LF],"选择替换吕玲琦皮肤")
set LG[14]=DialogAddButton(IM[LF],"初音",1)
set LH[14]=$484C5132
set LI=true
elseif StringHash(Hg[GetConvertedPlayerId(GetOwningPlayer(Iv))])==$D52CC6AD then
call DialogSetMessage(IM[LF],"选择替换吕玲琦皮肤")
set LG[21]=DialogAddButton(IM[LF],"天煞吕玲琦",1)
set LH[21]=$484C5131
set LI=true
endif
elseif GetUnitTypeId(Iv)==$48475930 then
call DialogSetMessage(IM[LF],"选择替换关羽皮肤")
set LG[16]=DialogAddButton(IM[LF],"美髯公",1)
set LH[16]=$48475931
set LI=true
elseif GetUnitTypeId(Iv)==$48706232 and RequestExtraBooleanData(50,GetOwningPlayer(Iv),null,null,false,0,0,0) or RequestExtraIntegerData(54,GetOwningPlayer(Iv),null,null,false,0,0,0)>=7 then
call DialogSetMessage(IM[LF],"选择替换夏侯霸皮肤")
set LG[17]=DialogAddButton(IM[LF],"地下拳王",1)
set LH[17]=$48584842
set LI=true
elseif GetUnitTypeId(Iv)==$48594D30 and StringHash(Hg[GetConvertedPlayerId(GetOwningPlayer(Iv))])==$D52CC6AD then
call DialogSetMessage(IM[LF],"选择替换貂蝉皮肤")
set LG[19]=DialogAddButton(IM[LF],"红衣貂蝉",1)
set LH[19]=$48594D31
set LI=true
elseif GetUnitTypeId(Iv)==$485A5930 then
call DialogSetMessage(IM[LF],"选择替换赵云皮肤")
set LG[20]=DialogAddButton(IM[LF],"英雄赵云",1)
set LH[20]=$485A5931
set LI=true
elseif GetUnitTypeId(Iv)==$48475330 then
call DialogSetMessage(IM[LF],"选择替换鬼神吕布皮肤")
set LG[22]=DialogAddButton(IM[LF],"伊利丹",1)
set LH[22]=$48475332
set LI=true
elseif GetUnitTypeId(Iv)==$48303033 then
call DialogSetMessage(IM[LF],"选择替换陈到皮肤")
set LG[23]=DialogAddButton(IM[LF],"拉丝塔亚拳皇",1)
set LH[23]='HA02'
set LI=true
elseif GetUnitTypeId(Iv)=='HZF0' then
call DialogSetMessage(IM[LF],"选择替换张飞皮肤")
set LG[24] = DialogAddButton(IM[LF], "冥王-张飞", 1)
set LH[24]='HA03'
set LI=true
elseif GetUnitTypeId(Iv)=='H008' then
call DialogSetMessage(IM[LF],"选择替换宗预皮肤")
set LG[25] = DialogAddButton(IM[LF], "无心僧人-宗预", 1)
set LH[25]='HA05'
set LI=true
elseif GetUnitTypeId(Iv)=='HA01' then
call DialogSetMessage(IM[LF],"选择替换精卫皮肤")
set LG[26] = DialogAddButton(IM[LF], "女帝-精卫", 1)
set LH[26]='HA06'
set LI=true
endif
if LI then
set LG[0]=DialogAddButton(IM[LF],"默认皮肤（回车键）",513)
call DialogDisplay(CC,IM[LF],true)
endif
set CC=null
return Iv
endfunction
function cx takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
call SaveInteger(Ia,Ix,3,LoadInteger(Ia,Ix,3)-1)
if LoadInteger(Ia,Ix,3)<=0 or GetUnitAbilityLevel(Iv,$42575133)==0 then
if LoadInteger(Ia,Ix,3)<=0 then
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41333030,1,GetUnitX(Iv),GetUnitY(Iv),bj_UNIT_FACING,1),852127)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),330,bk(Iv,0,GetUnitAbilityLevel(Iv,$41575133)),3,0)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function cy takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveInteger(Ia,Ix,3,29)
call TimerStart(CS,.1,true,function cx)
set CS=null
endfunction
function cz takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer JX=GetPlayerId(GetOwningPlayer(Iv))
local real UF=LoadReal(Ia,Ix,$30616E67)
local integer PQ=LoadInteger(Ia,Ix,$6C6F6F70)
local integer U5=LoadInteger(Ia,Ix,$736D6178)
local real U7=LoadReal(Ia,Ix,$6D617868)
local real U6=LoadReal(Ia,Ix,$6D646973)
local real UC=LoadReal(Ia,Ix,$68696774)
local real UH=LoadReal(Ia,Ix,$30306868)
local real It=LoadReal(Ia,Ix,$30306878)
local real Iu=LoadReal(Ia,Ix,$30306879)
local real Px=0
local real Py=0
local real U9=0
local real U8=LoadReal(Ia,Ix,$3064616D)
if PQ<U5 and GetWidgetLife(Iv)>1 then
set Px=It+PQ*U6*Cos(UF*3.14159/180.)
set Py=Iu+PQ*U6*Sin(UF*3.14159/180.)
call SetUnitX(Iv,Px)
call SetUnitY(Iv,Py)
set PQ=PQ+1
call SaveInteger(Ia,Ix,$6C6F6F70,PQ)
set U9=(-(2*I2R(PQ)*UC-1)*(2*I2R(PQ)*UC-1)+1)*U7+UH
call SetUnitFlyHeight(Iv,U9,0)
call SetUnitFacing(Iv,UF)
else
call SetUnitPathing(Iv,true)
if GetWidgetLife(Iv)>1 then
call SetUnitFlyHeight(Iv,0,0)
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
if LoadStr(Ia,Ix,$65666673)!="" then
call DestroyEffect(AddSpecialEffect(LoadStr(Ia,Ix,$65666673),GetUnitX(Iv),GetUnitY(Iv)))
endif
if LoadReal(Ia,Ix,$3064616D)>0 then
call UnitDamageTarget(Iv,LoadUnitHandle(Ia,Ix,$756E6974),LoadReal(Ia,Ix,$3064616D),true,false,ConvertAttackType(3),ConvertDamageType(5),WEAPON_TYPE_WOOD_HEAVY_BASH)
call IssueTargetOrderById(Iv,851983,LoadUnitHandle(Ia,Ix,$756E6974))
endif
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function c0 takes unit Iv,unit CE,real Ii returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real T7=GetWidgetX(CE)
local real T8=GetWidgetY(CE)
local real In=SquareRoot((T7-It)*(T7-It)+(T8-Iu)*(T8-Iu))
local integer U5=R2I(In/2000./.02)
local integer PQ=0
local real U6=In/RMaxBJ(U5,.1)
local real UC=1./RMaxBJ(U5,.1)
call UnitAddAbility(Iv,$416D7266)
call UnitRemoveAbility(Iv,$416D7266)
call SetUnitPathing(Iv,false)
call SetUnitAnimation(Iv,"slam")
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$30306868,GetUnitFlyHeight(Iv))
call SaveReal(Ia,Ix,$30616E67,Atan2(T8-Iu,T7-It)*(180./3.14159))
call SaveReal(Ia,Ix,$6D617868,In/2)
call SaveReal(Ia,Ix,$6D646973,U6)
call SaveReal(Ia,Ix,$68696774,UC)
call SaveReal(Ia,Ix,$30306878,It)
call SaveReal(Ia,Ix,$30306879,Iu)
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveInteger(Ia,Ix,$6C6F6F70,PQ)
call SaveInteger(Ia,Ix,$736D6178,U5)
call TimerStart(CS,.01,true,function cz)
set CS=null
endfunction
function c1 takes unit Iv,item CE,real Ii returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real T7=GetWidgetX(CE)
local real T8=GetWidgetY(CE)
local real In=SquareRoot((T7-It)*(T7-It)+(T8-Iu)*(T8-Iu))
local integer U5=R2I(In/2000./.02)
local integer PQ=0
local real U6=In/RMaxBJ(U5,.1)
local real UC=1./RMaxBJ(U5,.1)
call UnitAddAbility(Iv,$416D7266)
call UnitRemoveAbility(Iv,$416D7266)
call SetUnitPathing(Iv,false)
call SetUnitAnimation(Iv,"slam")
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveItemHandle(Ia,Ix,$6974656D,CE)
call SaveReal(Ia,Ix,$30306868,GetUnitFlyHeight(Iv))
call SaveReal(Ia,Ix,$30616E67,Atan2(T8-Iu,T7-It)*(180./3.14159))
call SaveReal(Ia,Ix,$6D617868,In/2)
call SaveReal(Ia,Ix,$6D646973,U6)
call SaveReal(Ia,Ix,$68696774,UC)
call SaveReal(Ia,Ix,$30306878,It)
call SaveReal(Ia,Ix,$30306879,Iu)
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveInteger(Ia,Ix,$6C6F6F70,PQ)
call SaveInteger(Ia,Ix,$736D6178,U5)
call TimerStart(CS,.01,true,function cz)
set CS=null
endfunction
function c2 takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer JV=Hi[FN]
local unit Ij=MX[FN]
set JV=JV+1
set Hi[FN]=JV
call bs(Ij,Hj[FN],Hk[FN],550,HO[FN],1,0)
if JV>=40 then
set MX[FN]=null
call bh(FN)
endif
set Ij=null
endfunction
function c3 takes unit Iv,integer Pt,real It,real Iu returns nothing
local integer FN=0
set FN=bf()
set Hi[FN]=0
set HO[FN]=bk(Iv,3,Pt)*5*.01
set MX[FN]=GetTriggerUnit()
set Hj[FN]=It
set Hk[FN]=Iu
call TimerStart(Gt[FN],.25,true,function c2)
endfunction
function c4 takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer JV=Hi[FN]
local unit Ij=MX[FN]
set JV=JV+1
set Hi[FN]=JV
call bs(Ij,Hj[FN],Hk[FN],550,HO[FN],1,0)
if JV>=40 then
set MX[FN]=null
call bh(FN)
endif
set Ij=null
endfunction
function c5 takes unit Iv,integer Pt,real It,real Iu returns nothing
local integer FN=0
set FN=bf()
set Hi[FN]=0
set HO[FN]=bk(Iv,3,Pt)*.05
set MX[FN]=GetTriggerUnit()
set Hj[FN]=It
set Hk[FN]=Iu
call TimerStart(Gt[FN],.25,true,function c4)
endfunction
function c6 takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer JV=Hi[FN]
local unit Ij=MX[FN]
local unit CE=null
local group I2=CreateGroup()
local integer Ix=0
set JV=JV+1
set Hi[FN]=JV
call GroupEnumUnitsInRange(I2,Hj[FN],Hk[FN],1000,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and (IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false) and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call UnitDamageTarget(Ij,CE,HO[FN],false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
set CE=null
endloop
loop
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",Hj[FN]+I2R(GetRandomInt(-5,5)*200),Hk[FN]+I2R(GetRandomInt(-5,5)*200)))
set Ix=Ix+1
exitwhen Ix>=5
endloop
if JV>=30 or GetUnitCurrentOrder(MX[FN])!=String2OrderIdBJ("earthquake") then
set MX[FN]=null
call bh(FN)
endif
call DestroyGroup(I2)
set I2=null
set CE=null
set Ij=null
endfunction
function c7 takes unit Iv,integer Pt,real It,real Iu returns nothing
local integer FN=0
local integer Ix=0
set FN=bf()
set Hi[FN]=0
set HO[FN]=bk(Iv,3,Pt+3)*.25
set MX[FN]=GetTriggerUnit()
set Hj[FN]=It
set Hk[FN]=Iu
loop
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",Hj[FN]+I2R(GetRandomInt(-5,5)*200),Hk[FN]+I2R(GetRandomInt(-5,5)*200)))
set Ix=Ix+1
exitwhen Ix>=5
endloop
call bs(Iv,It,Iu,1000,HO[FN],5,0)
call TimerStart(Gt[FN],.25,true,function c6)
endfunction
function c8 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
if GetUnitAbilityLevel(CE,$41314844)>0 then
call UnitRemoveAbility(Iv,$41314844)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\0098.mdl",CE,"chest"))
call bs(Iv,GetUnitX(CE),GetUnitY(CE),330,LoadReal(Ia,Ix,$3064616D),5,0)
endif
call UnitRemoveAbility(Iv,LoadInteger(Ia,Ix,1))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
set CS=null
set Iv=null
set CE=null
endfunction
function c9 takes unit Iv,unit CE,integer VB,real JT returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveInteger(Ia,Ix,1,VB)
call SaveReal(Ia,Ix,$3064616D,JT)
call TimerStart(CS,6,false,function c8)
set CS=null
endfunction
function dC takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit UV=LoadUnitHandle(Ia,Ix,$30306D6A)
local unit CE
local group I2=CreateGroup()
call DestroyEffect(LoadEffectHandle(Ia,Ix,$30656666))
call GroupEnumUnitsInRange(I2,GetUnitX(UV),GetUnitY(UV),440,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and CE!=UV and GetWidgetLife(CE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitDefaultMoveSpeed(CE)>0. and IsUnitEnemy(CE,GetOwningPlayer(Iv)) and GetUnitAbilityLevel(CE,$416C6F63)==0 and GetUnitAbilityLevel(CE,$4176756C)==0 then
call SetUnitPosition(CE,GetUnitX(UV),GetUnitY(UV))
call UnitDamageTarget(Iv,CE,LoadReal(Ia,Ix,0),false,false,G,N,WEAPON_TYPE_WHOKNOWS)
endif
endloop
call DestroyGroup(I2)
call RemoveUnit(UV)
call FlushChildHashtable(Ia,Ix)
call PauseTimer(CS)
call DestroyTimer(CS)
set CS=null
set Iv=null
set UV=null
endfunction
function dD takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local unit CE=CreateUnit(GetOwningPlayer(Iv),$65445948,It,Iu,0)
call SetUnitFlyHeight(CE,2000,0)
call SetUnitFlyHeight(CE,0,2000)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$30306D6A,CE)
call SaveEffectHandle(Ia,Ix,$30656666,AddSpecialEffect("war3mapImported\\ZuoCiTornado.mdx",It,Iu))
call SaveReal(Ia,Ix,0,bk(Iv,0,GetUnitAbilityLevel(Iv,$41474733)))
call TimerStart(CS,1,false,function dC)
set CS=null
set CE=null
endfunction
function dE takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,1)
local unit UV=LoadUnitHandle(Ia,Ix,$30306D6A)
local integer Ik=LoadInteger(Ia,Ix,1)-1
local group UX=LoadGroupHandle(Ia,Ix,0)
local group I2
local unit CE
if Ik>0 then
call SaveInteger(Ia,Ix,1,Ik)
call bR(UV,GetUnitFacing(UV),30.)
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(UV),GetUnitY(UV),165,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitInGroup(CE,UX)==false and CE!=Iv and CE!=UV and GetWidgetLife(CE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Iv)) and GetUnitAbilityLevel(CE,$416C6F63)==0 and GetUnitAbilityLevel(CE,$4176756C)==0 then
call UnitDamageTarget(Iv,CE,LoadReal(Ia,Ix,0),false,false,G,N,WEAPON_TYPE_WHOKNOWS)
call bb(CE,3)
call GroupAddUnit(UX,CE)
endif
endloop
call DestroyGroup(I2)
else
if GetTerrainType(GetUnitX(UV),GetUnitY(UV))!=$634F6331 then
call SetUnitPosition(Iv,GetUnitX(UV),GetUnitY(UV))
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(Iv),GetUnitY(Iv)))
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),220,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and CE!=UV and GetWidgetLife(CE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Iv)) and GetUnitAbilityLevel(CE,$416C6F63)==0 and GetUnitAbilityLevel(CE,$4176756C)==0 then
call UnitDamageTarget(Iv,CE,LoadReal(Ia,Ix,0),false,false,G,N,WEAPON_TYPE_WHOKNOWS)
call bb(CE,3)
call GroupAddUnit(UX,CE)
endif
endloop
call GroupClear(UX)
call DestroyGroup(UX)
call RemoveUnit(UV)
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
set UV=null
set UX=null
set I2=null
set CE=null
endfunction
function dF takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,1,Iv)
call SaveUnitHandle(Ia,Ix,$30306D6A,CreateUnit(GetOwningPlayer(Iv),$6530425A,GetUnitX(Iv),GetUnitY(Iv),bQ(Iv,It,Iu)))
call SaveInteger(Ia,Ix,1,R2I(bP(Iv,It,Iu)/30)+1)
call SaveGroupHandle(Ia,Ix,0,CreateGroup())
call SaveReal(Ia,Ix,0,bk(Iv,3,GetUnitAbilityLevel(Iv,$41304430))*.1)
call TimerStart(CS,.03,true,function dE)
set CS=null
endfunction
function dK takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer Iz=LoadInteger(Ia,Ix,$696E6478)-1
call bs(Iv,LoadReal(Ia,Ix,$30303078),LoadReal(Ia,Ix,$30303079),500.,LoadReal(Ia,Ix,$3064616D),5,0)
if Iz>0 then
call SaveInteger(Ia,Ix,$696E6478,Iz)
else
call PauseTimer(CS)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set Iv=null
set CS=null
endfunction
function dL takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$30303078,It)
call SaveReal(Ia,Ix,$30303079,Iu)
call SaveReal(Ia,Ix,$3064616D,bk(Iv,3,GetUnitAbilityLevel(Iv,$41303651))*.1)
call SaveInteger(Ia,Ix,$696E6478,28)
call IssuePointOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),0,$41303650,1,It,Iu,bj_UNIT_FACING,7.),852591,It,Iu)
call TimerStart(CS,.25,true,function dK)
set CS=null
endfunction
function dM takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local group I2=CreateGroup()
local unit CE
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local real US=GetUnitState(Iv,ConvertUnitState(21))*I2R(GetUnitAbilityLevel(Iv,$41574436)+1)/2
local real Ii=0.
call GroupEnumUnitsInRange(I2,LoadReal(Ia,Ix,$30303078),LoadReal(Ia,Ix,$30303079),660.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(Iv))==true and GetUnitAbilityLevel(CE,$416C6F63)<1 and GetUnitAbilityLevel(CE,$4176756C)<1 and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
set Ii=GetUnitState(CE,ConvertUnitState(0))*.02+US
call UnitDamageTarget(Iv,CE,Ii,false,false,I3[4],I4[0],WEAPON_TYPE_WHOKNOWS)
endif
endloop
call DestroyGroup(I2)
set I2=null
set CE=null
set Iv=null
call SaveInteger(Ia,Ix,$74696D65,LoadInteger(Ia,Ix,$74696D65)-1)
if LoadInteger(Ia,Ix,$74696D65)<=0 then
call FlushChildHashtable(Ia,Ix)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function dN takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveInteger(Ia,Ix,$74696D65,20)
call SaveReal(Ia,Ix,$30303078,It)
call SaveReal(Ia,Ix,$30303079,Iu)
call IssuePointOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65574435,$30303030,0,It,Iu,GetUnitFacing(Iv),10),852089,It,Iu)
call TimerStart(CS,.5,true,function dM)
set CS=null
endfunction
function dO takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
call SaveInteger(Ia,Ix,$74696D65,LoadInteger(Ia,Ix,$74696D65)-1)
if LoadInteger(Ia,Ix,$74696D65)<=0 and GetWidgetLife(LoadUnitHandle(Ia,Ix,$6865726F))>1 then
call SetUnitState(LoadUnitHandle(Ia,Ix,$6865726F),ConvertUnitState(37),GetUnitState(LoadUnitHandle(Ia,Ix,$6865726F),ConvertUnitState(37))+LoadReal(Ia,Ix,$61746364))
call FlushChildHashtable(Ia,Ix)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function dP takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveInteger(Ia,Ix,$74696D65,5)
call SaveReal(Ia,Ix,$61746364,GetUnitState(Iv,ConvertUnitState(37))*.5)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))*.5)
call TimerStart(CS,1.,true,function dO)
set CS=null
endfunction
function dQ takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local group I2=CreateGroup()
local unit CE
local integer Pt=LoadInteger(Ia,Ix,$30306C76)
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),300.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(Iv))==false and GetUnitAbilityLevel(CE,$416C6F63)<1 and GetUnitAbilityLevel(CE,$4176756C)<1 and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call SetUnitState(CE,ConvertUnitState(0),GetUnitState(CE,ConvertUnitState(0))+I2R(Pt*500))
endif
endloop
call FlushChildHashtable(Ia,Ix)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
call DestroyGroup(I2)
set I2=null
set CE=null
set Iv=null
endfunction
function dR takes unit Iv,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveInteger(Ia,Ix,$30306C76,Pt)
call TimerStart(CS,.01,true,function dQ)
set CS=null
endfunction
function dS takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$68303030)
local unit UV=LoadUnitHandle(Ia,Ix,$6D6A3030)
local integer FZ=LoadInteger(Ia,Ix,$69303030)
local real In=bU(GetUnitX(UV),GetUnitY(UV),LoadReal(Ia,Ix,$6D783030),LoadReal(Ia,Ix,$6D793030))
set FZ=FZ-1
if GetUnitState(UV,ConvertUnitState(0))<.405 or FZ<=0 or In<=100 then
call DestroyTimer(CS)
call SetUnitPosition(UV,LoadReal(Ia,Ix,$6D783030),LoadReal(Ia,Ix,$6D793030))
call DestroyEffect(AddSpecialEffect("war3mapImported\\cool_explosion.mdx",GetUnitX(UV),GetUnitY(UV)))
// 添加技能眩晕效果，然后发布指令使用眩晕，这里用的是战争践踏的指令
call UnitAddAbility(UV,$41333030)
call SetUnitAbilityLevel(UV,$41333030,LoadInteger(Ia,Ix,$6C763030))
call IssueImmediateOrderById(UV,852127)
call UnitApplyTimedLife(UV,$42487765,.1)
call bs(Iv,GetUnitX(UV),GetUnitY(UV),330,LoadReal(Ia,Ix,$64616D30),2,0)
call FlushChildHashtable(Ia,Ix)
else
call SaveInteger(Ia,Ix,$69303030,FZ)
call bR(UV,LoadReal(Ia,Ix,$616E6730),100)
call bs(Iv,GetUnitX(UV),GetUnitY(UV),330,LoadReal(Ia,Ix,$64616D30),2,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl",GetUnitX(UV),GetUnitY(UV)))
endif
set CS=null
set Iv=null
set UV=null
endfunction
// 黄忠大招
function dT takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$68303030,Iv)
call SaveUnitHandle(Ia,Ix,$6D6A3030,CreateUnit(GetOwningPlayer(Iv),$65485A30,GetUnitX(Iv),GetUnitY(Iv),bT(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY())))
call SaveReal(Ia,Ix,$68783030,GetUnitX(Iv))
call SaveReal(Ia,Ix,$68793030,GetUnitY(Iv))
call SaveReal(Ia, Ix, $64616D30, bk(Iv, 2, GetUnitAbilityLevel(Iv, $41485A52)) *2)
call SaveReal(Ia,Ix,$6D783030,GetSpellTargetX())
call SaveReal(Ia,Ix,$6D793030,GetSpellTargetY())
call SaveReal(Ia,Ix,$616E6730,bT(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY()))
call SaveReal(Ia,Ix,$64697330,bU(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY()))
call SaveInteger(Ia,Ix,$6C763030,GetUnitAbilityLevel(Iv,$41485A52))
call SaveInteger(Ia,Ix,$69303030,R2I(bU(GetUnitX(Iv),GetUnitY(Iv),GetSpellTargetX(),GetSpellTargetY()))/100+1)
call TimerStart(CS,.02,true,function dS)
set CS=null
endfunction
function dU takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real UQ=LoadReal(Ia,Ix,$30307578)
local real UR=LoadReal(Ia,Ix,$30307579)
local real In=0
local real Im=LoadReal(Ia,Ix,$30616E67)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(CE),GetUnitY(CE)))
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
if LoadInteger(Ia,Ix,1)<=0 or GetWidgetLife(CE)<1 then
if GetWidgetLife(CE)>1 then
call bs(Iv,GetUnitX(CE),GetUnitY(CE),135,LoadReal(Ia,Ix,$3064616D),1,0)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call bS(CE,GetUnitX(CE),GetUnitY(CE),Im,65)
set In=bP(CE,UQ,UR)
if In>70 or In<60 then
if GetWidgetLife(CE)>1 then
call bs(Iv,GetUnitX(CE),GetUnitY(CE),300,LoadReal(Ia,Ix,$3064616D),1,0)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call SaveReal(Ia,Ix,$30307578,GetUnitX(CE))
call SaveReal(Ia,Ix,$30307579,GetUnitY(CE))
endif
endif
set CS=null
set Iv=null
set CE=null
endfunction
function dV takes unit Iv,unit CE,real In,real Ii returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$30307578,GetUnitX(CE))
call SaveReal(Ia,Ix,$30307579,GetUnitY(CE))
call SaveReal(Ia,Ix,$30616E67,bN(Iv,CE))
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveInteger(Ia,Ix,1,R2I(In/65)+1)
call TimerStart(CS,.015,true,function dU)
set CS=null
endfunction
function dW takes unit Iv,unit Jg,real Iz returns nothing
local unit CE
local group I2=CreateGroup()
local real Iy=400.+20.*I2R(GetUnitAbilityLevel(Iv,$414F6878))
local unit UV=CreateUnit(GetOwningPlayer(Iv),$65303053,GetUnitX(Jg),GetUnitY(Jg),0)
call GroupEnumUnitsInRange(I2,GetUnitX(Jg),GetUnitY(Jg),Iy,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>1 and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call UnitDamageTarget(Iv,CE,Iz,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
if GetUnitState(CE,UNIT_STATE_LIFE)>1 and CE!=Jg then
call IssueTargetOrderById(UV,852502,CE)
endif
endif
endloop
set CE=null
call DestroyGroup(I2)
call RemoveUnit(UV)
set UV=null
set I2=null
endfunction
function dX takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local integer FZ=LoadInteger(Ia,Ix,0)
set FZ=FZ-1
if FZ<=0 or GetUnitCurrentOrder(LoadUnitHandle(Ia,Ix,0))!=852480 then
set FZ=LoadInteger(Ia,Ix,1)
loop
exitwhen FZ<=0
call RemoveUnit(LoadUnitHandle(Ia,Ix,FZ))
set FZ=FZ-1
endloop
call FlushChildHashtable(Ia,Ix)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
call SaveInteger(Ia,Ix,0,FZ)
endif
endfunction
function dY takes unit Iv,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer FZ=0
local group I2=CreateGroup()
local unit CE
local unit UV
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),1000.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and IsUnitVisible(CE,GetOwningPlayer(Iv))==true and IsUnitType(CE,UNIT_TYPE_ANCIENT)==false then
set FZ=FZ+1
set UV=CreateUnit(GetOwningPlayer(Iv),$65303053,GetUnitX(Iv),GetUnitY(Iv),0)
call SetUnitAbilityLevel(UV,$416D6C73,Pt)
call IssueTargetOrderById(UV,852480,CE)
call SaveUnitHandle(Ia,Ix,FZ,UV)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveInteger(Ia,Ix,0,15+Pt*5)
call SaveInteger(Ia,Ix,1,FZ)
call TimerStart(CS,.1,true,function dX)
set CS=null
set I2=null
set UV=null
endfunction
function dZ takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local real It=LoadReal(Ia,Ix,$30303078)
local real Iu=LoadReal(Ia,Ix,$30303079)
local real Ii=LoadReal(Ia,Ix,$3064616D)
local integer TZ=0
local integer PQ=0
call SaveInteger(Ia,Ix,$636F756E,LoadInteger(Ia,Ix,$636F756E)-1)
call DestroyEffect(AddSpecialEffect("war3mapImported\\lightningwrath.mdx",It,Iu))
call bs(Iv,It,Iu,550,Ii,1,0)
loop
exitwhen PQ>5
set PQ=PQ+1
endloop
if LoadInteger(Ia,Ix,$636F756E)<=0 then
loop
exitwhen TZ>72
set TZ=TZ+1
call RemoveDestructable(LoadDestructableHandle(Ia,Ix,TZ))
endloop
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function da takes unit Iv,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer TZ=0
local real U1=0
local real U2=0
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$30303078,It)
call SaveReal(Ia,Ix,$30303079,Iu)
call SaveInteger(Ia,Ix,$636F756E,20)
call SaveReal(Ia,Ix,$3064616D,bk(Iv,3,GetUnitAbilityLevel(Iv,$41303750)+1)*.3)
loop
exitwhen TZ>72
set TZ=TZ+1
set U1=It*1.+500*1.*Cos(TZ*5*1.*bj_DEGTORAD)
set U2=Iu*1.+500*1.*Sin(TZ*5*1.*bj_DEGTORAD)
call SaveDestructableHandle(Ia,Ix,TZ,CreateDestructableZ($42303031,U1,U2,-100,bH(U1,U2,It,Iu),1,0))
endloop
call TimerStart(CS,.5,true,function dZ)
set CS=null
endfunction
function db takes unit Iv returns nothing
local group I2=CreateGroup()
local unit CE
local real Ii=bk(Iv,3,GetUnitAbilityLevel(Iv,$4130355A))*.5
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),880,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(Iv)) and GetWidgetLife(CE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl",GetUnitX(CE),GetUnitY(CE)))
call UnitDamageTarget(Iv,CE,Ii,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
endloop
call DestroyGroup(I2)
set I2=null
set CE=null
endfunction
function dc takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real It=LoadReal(Ia,Ix,$30303078)
local real Iu=LoadReal(Ia,Ix,$30303079)
local real In=LoadReal(Ia,Ix,$30646973)
local real Im=LoadReal(Ia,Ix,$30616E67)
if bI(GetUnitX(CE),GetUnitY(CE),It,Iu)>50 then
call bV(CE,GetUnitX(CE),GetUnitY(CE),Im,50)
if bI(GetUnitX(CE),GetUnitY(CE),It,Iu)>In then
call SetUnitFlyHeight(CE,GetUnitFlyHeight(CE)+40.,0.)
else
call SetUnitFlyHeight(CE,GetUnitFlyHeight(CE)-40.,0.)
endif
else
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",It,Iu))
call SetUnitX(CE,It)
call SetUnitY(CE,Iu)
call SetUnitFlyHeight(CE,0,0.)
call RemoveUnit(CE)
set JJ=XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41333030,3,It,Iu,0,1.)
call IssueImmediateOrderById(JJ,852127)
call bs(Iv,It,Iu,330.,LoadReal(Ia,Ix,$3064616D),3,2)
call PauseTimer(CS)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set Iv=null
set CE=null
set CS=null
endfunction
function dd takes unit Iv,integer Pt,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real Im=bH(GetUnitX(Iv),GetUnitY(Iv),It,Iu)
local unit CE=CreateUnit(GetOwningPlayer(Iv),$6530314A,GetUnitX(Iv),GetUnitY(Iv),Im)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$30303078,It)
call SaveReal(Ia,Ix,$30303079,Iu)
call SaveReal(Ia,Ix,$30616E67,bQ(Iv,It,Iu))
call SaveReal(Ia,Ix,$3064616D,bk(Iv,0,Pt))
call SaveReal(Ia,Ix,$30646973,bI(GetUnitX(Iv),GetUnitY(Iv),It,Iu)/2)
call SetUnitFlyHeight(CE,30,0.)
call TimerStart(CS,.02,true,function dc)
set CS=null
set CE=null
endfunction
function de takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer FZ=0
if Gv[FN]==1 then
call bs(Pv[FN],G9[1],HB[1],150.,Gx[FN],0,0)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl",G9[1],HB[1]))
set G9[1]=G9[1]+100.*Cos(HC[1]*bj_DEGTORAD)
set HB[1]=HB[1]+100.*Sin(HC[1]*bj_DEGTORAD)
else
loop
exitwhen FZ==Gv[FN]
set FZ=FZ+1
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl",G9[FZ],HB[FZ]))
set G9[FZ]=G9[FZ]+100.*Cos(HC[FZ]*bj_DEGTORAD)
set HB[FZ]=HB[FZ]+100.*Sin(HC[FZ]*bj_DEGTORAD)
endloop
endif
set Gu[FN]=Gu[FN]-1
if Gu[FN]<=0 then
call bh(FN)
set Pv[FN]=null
endif
endfunction
function df takes unit Ij,integer UN,real It,real Iu,real Iz returns nothing
local integer FN=bf()
local integer FZ=0
set Pv[FN]=Ij
set G9[0]=It
set HB[0]=Iu
set HC[0]=GetUnitFacing(Ij)
set Gx[FN]=Iz*.5
set Gu[FN]=10
set Gv[FN]=UN
loop
exitwhen FZ==Gv[FN]
set FZ=FZ+1
set HC[FZ]=HC[FZ-1]-360/I2R(UN)
set G9[FZ]=G9[0]+100.*Cos(HC[FZ]*bj_DEGTORAD)
set HB[FZ]=HB[0]+100.*Sin(HC[FZ]*bj_DEGTORAD)
endloop
call TimerStart(Gt[FN],.02,true,function de)
endfunction
function dg takes unit Ij,real It,real Iu,real Iy returns nothing
local unit CE
local group I2=CreateGroup()
local real UM=GetUnitState(Ij,UNIT_STATE_MAX_LIFE)
local real UO=0
call df(Ij,20,It,Iu,GetUnitState(Ij,ConvertUnitState(21)))
call GroupEnumUnitsInRange(I2,It,Iu,Iy,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>0 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl",CE,"overhead"))
set UO=GetUnitState(CE,UNIT_STATE_MAX_LIFE)*.2
if UM>UO then
set UO=UM
endif
call UnitDamageTarget(Ij,CE,UO,true,false,I3[5],I4[2],WEAPON_TYPE_WHOKNOWS)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
endfunction
function dh takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
local real Ii=0.
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local integer FZ=LoadInteger(Ia,Ix,$30303069)
local real In=bU(GetUnitX(Iv),GetUnitY(Iv),GetUnitX(CE),GetUnitY(CE))
local real Im=bT(GetUnitX(Iv),GetUnitY(Iv),GetUnitX(CE),GetUnitY(CE))
set FZ=FZ-1
call SaveInteger(Ia,Ix,$30303069,FZ)
if GetUnitState(CE,ConvertUnitState(0))<=.405 or FZ<=0 or In<=128 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",Iv,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl",CE,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl",CE,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",CE,"origin"))
call DestroyEffect(LoadEffectHandle(Ia,Ix,$30656666))
if In<=128 then
call IssueTargetOrderById(Iv,851983,CE)
set Ii=GetUnitState(Iv,ConvertUnitState(21))*5
call bd(Iv,CE,24,30,0,0,Ii,4.)
endif
call FlushChildHashtable(Ia,Ix)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
else
call bR(Iv,Im,60)
endif
set Iv=null
set CE=null
endfunction
function di takes unit Ij,unit CE returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call EXSetUnitMoveType(Ij,16)
call SaveUnitHandle(Ia,Ix,$6865726F,Ij)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$30303078,GetUnitX(CE))
call SaveReal(Ia,Ix,$30303079,GetUnitY(CE))
call SaveInteger(Ia,Ix,$30303069,R2I(bO(Ij,CE)/40))
call SaveEffectHandle(Ia,Ix,$30656666,AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",Ij,"chest"))
call SetUnitAnimation(Ij,"Attack 2")
call TimerStart(CS,.02,true,function dh)
set CS=null
endfunction
function dj takes unit Ij,real It,real Iu,real Iy,real Iz returns nothing
local unit CE
local group I2=CreateGroup()
set JJ=XB(GetPlayerId(GetOwningPlayer(Ij)),$65303939,$41304834,1,It,Iu,0,1.)
call IssueImmediateOrderById(JJ,852127)
set JJ=null
call GroupEnumUnitsInRange(I2,It,Iu,Iy,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>0 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl",CE,"overhead"))
call UnitDamageTarget(Ij,CE,Iz,false,false,I3[3],I4[0],WEAPON_TYPE_WHOKNOWS)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
endfunction
function dk takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local integer Ik=LoadInteger(Ia,Ix,1)-1
if Ik>0 and GetUnitState(CE,ConvertUnitState(0))>.405 then
call SaveInteger(Ia,Ix,1,Ik)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(CE),GetUnitY(CE)))
call bR(CE,LoadReal(Ia,Ix,$30616E67),I2R(Ik*2))
else
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
set CE=null
endfunction
function dl takes unit Iv,unit CE,real Ii returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$30616E67,bN(Iv,CE))
call SetUnitX(Iv,GetUnitX(CE))
call SetUnitY(Iv,GetUnitY(CE))
call SaveInteger(Ia,Ix,1,25)
call UnitDamageTarget(Iv,CE,Ii,false,false,I3[4],I4[0],WEAPON_TYPE_WHOKNOWS)
call TimerStart(CS,.02,true,function dk)
set CS=null
endfunction
function dm takes unit CE returns real
call MoveLocation(D,GetUnitX(CE),GetUnitY(CE))
return GetUnitFlyHeight(CE)+GetLocationZ(D)
endfunction
// 钩子计算函数
function dn takes string KT,unit Ub,real It,real Iu,real Um returns nothing
local real Uh=LoadReal(FS,StringHash(KT),StringHash("Damage"))
local group I2=CreateGroup()
local unit J2=null
call GroupEnumUnitsInRange(I2,It,Iu,120.,null)
loop
set J2=FirstOfGroup(I2)
exitwhen J2==null
if GetWidgetLife(J2)>.405 and not IsUnitType(J2,UNIT_TYPE_STRUCTURE) and not IsUnitInGroup(J2,C) and J2!=Ub and GetUnitDefaultMoveSpeed(J2)>0 and GetUnitAbilityLevel(J2,$415A5A5A)==0 then
// 修改判定距离120*120为200*200
if (GetUnitX(J2)-It)*(GetUnitX(J2)-It)+(GetUnitY(J2)-Iu)*(GetUnitY(J2)-Iu)+(dm(J2)-Um)*(dm(J2)-Um)<40000 then
set Un=J2
call aL(Ub,4)
call SaveInteger(FS,StringHash(KT),StringHash("Switch"),2)
call SaveUnitHandle(FS,StringHash(KT),StringHash("Target"),J2)
if IsUnitEnemy(J2,GetOwningPlayer(Ub)) then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",J2,"origin"))
call UnitDamageTarget(Ub,J2,Uh,true,false,Us,Ut,Uu)
endif
call IssueImmediateOrderById(J2,851972)
call GroupAddUnit(C,J2)
exitwhen true
endif
endif
call GroupRemoveUnit(I2,J2)
set J2=null
endloop
call DestroyGroup(I2)
set I2=null
set J2=null
endfunction
function do takes nothing returns nothing
local string KT=I2S(GetHandleId(GetExpiredTimer()))
local integer Ui=LoadInteger(FS,StringHash(KT),StringHash("ChainLinkNumber"))
local integer I8=LoadInteger(FS,StringHash(KT),StringHash("ChainLinkNumberMax"))
local integer Uj=LoadInteger(FS,StringHash(KT),StringHash("ChainLinkId"))
local integer Uk=LoadInteger(FS,StringHash(KT),StringHash("Switch"))
local unit Ub=LoadUnitHandle(FS,StringHash(KT),StringHash("Pudge"))
local unit P8=LoadUnitHandle(FS,StringHash(KT),StringHash("Target"))
local real Re=LoadReal(FS,StringHash(KT),StringHash("Distance"))
local real LQ
local real J2
local real It
local real Iu
local real Uv
local real Uw
local unit array Ul
local integer FZ=0
loop
exitwhen FZ==Ui
set Ul[FZ]=LoadUnitHandle(FS,StringHash(KT),StringHash("ChainLinks"+I2S(FZ)))
set FZ=FZ+1
endloop
if P8==null then
call dn(KT,Ub,GetUnitX(Ul[0]),GetUnitY(Ul[0]),dm(Ul[0]))
else
call SetUnitX(P8,GetUnitX(Ul[0]))
call SetUnitY(P8,GetUnitY(Ul[0]))
if GetLocalPlayer()==GetOwningPlayer(P8) then
call SelectUnit(P8,false)
endif
endif
if Uk==1 then
set It=GetUnitX(Ul[0])+LoadReal(FS,StringHash(KT),StringHash("VelocityX"))
set Iu=GetUnitY(Ul[0])+LoadReal(FS,StringHash(KT),StringHash("VelocityY"))
call SetUnitX(Ul[0],It)
call SetUnitY(Ul[0],Iu)
if RMinBJ(RMaxBJ(It*1.,FU),FW)!=It or RMinBJ(RMaxBJ(Iu*1.,FV),FX)!=Iu then
call SaveInteger(FS,StringHash(KT),StringHash("Switch"),2)
endif
set FZ=1
loop
exitwhen FZ==Ui
set J2=Atan2(GetUnitY(Ul[FZ-1])-GetUnitY(Ul[FZ]),GetUnitX(Ul[FZ-1])-GetUnitX(Ul[FZ]))
call SetUnitX(Ul[FZ],GetUnitX(Ul[FZ])+Cos(J2)*40.)
call SetUnitY(Ul[FZ],GetUnitY(Ul[FZ])+Sin(J2)*40.)
call SetUnitFacing(Ul[FZ],J2*bj_RADTODEG)
set FZ=FZ+1
endloop
elseif Uk==2 then
set LQ=(50.+40.)*(50.+40.)
set FZ=Ui-1
loop
exitwhen FZ<0
if Ul[FZ+1]==null then
set Uv=GetUnitX(Ul[FZ])-GetUnitX(Ub)
set Uw=GetUnitY(Ul[FZ])-GetUnitY(Ub)
if Uv*Uv+Uw*Uw<=LQ then
call RemoveUnit(Ul[FZ])
set Ul[FZ]=null
set Ui=Ui-1
call SaveInteger(FS,StringHash(KT),StringHash("ChainLinkNumber"),Ui)
endif
else
set Uv=GetUnitX(Ul[FZ])-GetUnitX(Ul[FZ+1])
set Uw=GetUnitY(Ul[FZ])-GetUnitY(Ul[FZ+1])
endif
if Ul[FZ]!=null then
set J2=Atan2(Uw,Uv)
call SetUnitX(Ul[FZ],GetUnitX(Ul[FZ])-Cos(J2)*40.)
call SetUnitY(Ul[FZ],GetUnitY(Ul[FZ])-Sin(J2)*40.)
call SetUnitFacing(Ul[FZ],J2*bj_RADTODEG)
endif
set FZ=FZ-1
endloop
if Ui<1 then
call SaveInteger(FS,StringHash(KT),StringHash("Switch"),0)
set Uk=0
endif
endif
if Uk>0 then
set It=GetUnitX(Ul[Ui-1])
set Iu=GetUnitY(Ul[Ui-1])
set Uv=It-GetUnitX(Ub)
set Uw=Iu-GetUnitY(Ub)
set LQ=SquareRoot(Uv*Uv+Uw*Uw)
if LQ>Re+50. then
set J2=bj_RADTODEG*Atan2(Uw,Uv)
set Uv=Uv*(Re/LQ)
set Uw=Uw*(Re/LQ)
loop
exitwhen LQ<Re
if Ui>I8 then
call SaveInteger(FS,StringHash(KT),StringHash("Switch"),2)
exitwhen true
endif
set It=It-Uv
set Iu=Iu-Uw
set Ul[Ui]=CreateUnit(GetOwningPlayer(Ub),Uj,It,Iu,J2)
call SaveUnitHandle(FS,StringHash(KT),StringHash("ChainLinks"+I2S(Ui)),Ul[Ui])
set Ui=Ui+1
set LQ=LQ-Re
endloop
call SaveInteger(FS,StringHash(KT),StringHash("ChainLinkNumber"),Ui)
endif
if LQ>50.+40.*2 then
set LQ=(50.+40.)/Re
set Uv=Uv*LQ
set Uw=Uw*LQ
call SetUnitX(Ul[Ui-1],GetUnitX(Ub)+Uv)
call SetUnitY(Ul[Ui-1],GetUnitY(Ub)+Uw)
call SetUnitFacing(Ul[Ui-1],Atan2(Uw,Uv)*bj_RADTODEG)
set FZ=Ui-2
loop
exitwhen FZ<0
set Uv=GetUnitX(Ul[FZ])-GetUnitX(Ul[FZ+1])
set Uw=GetUnitY(Ul[FZ])-GetUnitY(Ul[FZ+1])
set LQ=Re/SquareRoot(Uv*Uv+Uw*Uw)
call SetUnitX(Ul[FZ],GetUnitX(Ul[FZ+1])+Uv*LQ)
call SetUnitY(Ul[FZ],GetUnitY(Ul[FZ+1])+Uw*LQ)
call SetUnitFacing(Ul[FZ],Atan2(Uw,Uv)*bj_RADTODEG)
set FZ=FZ-1
endloop
endif
endif
if Uk==0 then
call aL(Ub,5)
call FlushChildHashtable(FS,StringHash(KT))
call GroupRemoveUnit(C,P8)
call PauseTimer(GetExpiredTimer())
call DestroyTimer(GetExpiredTimer())
endif
set FZ=0
loop
exitwhen FZ>=Ui
set Ul[FZ]=null
set FZ=FZ+1
endloop
set P8=null
set Ub=null
set KT=""
endfunction
// 参数分别为释放者、目标点、尾端单位、中间单位、距离、距离、伤害、间隔
function dp takes unit Ub,location Uc,integer Ud,integer Ue,real Uf,real Ug,real Uh,real Rg returns nothing
local real J2=Atan2(GetLocationY(Uc)-GetUnitY(Ub),GetLocationX(Uc)-GetUnitX(Ub))
local real It=Cos(J2)*50.
local real Iu=Sin(J2)*50.
local unit CE=CreateUnit(GetOwningPlayer(Ub),Ud,GetUnitX(Ub)+It,GetUnitY(Ub)+Iu,J2*bj_RADTODEG)
local timer CS=CreateTimer()
call SaveUnitHandle(FS,StringHash(I2S(GetHandleId(CS))),StringHash("Pudge"),Ub)
call SaveUnitHandle(FS,StringHash(I2S(GetHandleId(CS))),StringHash("ChainLinks"+I2S(0)),CE)
call SaveReal(FS,StringHash(I2S(GetHandleId(CS))),StringHash("VelocityX"),It*(40./50.)*1.)
call SaveReal(FS,StringHash(I2S(GetHandleId(CS))),StringHash("VelocityY"),Iu*(40./50.)*1.)
call SaveReal(FS,StringHash(I2S(GetHandleId(CS))),StringHash("Face"),J2*bj_RADTODEG*1.)
call SaveReal(FS,StringHash(I2S(GetHandleId(CS))),StringHash("Distance"),Ug*1.)
call SaveInteger(FS,StringHash(I2S(GetHandleId(CS))),StringHash("Switch"),1)
call SaveInteger(FS,StringHash(I2S(GetHandleId(CS))),StringHash("ChainLinkId"),Ue)
call SaveInteger(FS,StringHash(I2S(GetHandleId(CS))),StringHash("ChainLinkNumberMax"),R2I(Uf/Ug))
call SaveInteger(FS,StringHash(I2S(GetHandleId(CS))),StringHash("ChainLinkNumber"),1)
call SaveReal(FS,StringHash(I2S(GetHandleId(CS))),StringHash("Damage"),Uh*1.)
call TimerStart(CS,Rg,true,function do)
set CE=null
set CS=null
endfunction
function dq takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer JX=GetPlayerId(GetOwningPlayer(Iv))
local real UF=LoadReal(Ia,Ix,$30616E67)
local integer PQ=LoadInteger(Ia,Ix,$6C6F6F70)
local integer U5=LoadInteger(Ia,Ix,$736D6178)
local real U7=LoadReal(Ia,Ix,$6D617868)
local real U6=LoadReal(Ia,Ix,$6D646973)
local real UC=LoadReal(Ia,Ix,$68696774)
local real UH=LoadReal(Ia,Ix,$30306868)
local real It=LoadReal(Ia,Ix,$30306878)
local real Iu=LoadReal(Ia,Ix,$30306879)
local real Px=0
local real Py=0
local real U9=0
// local real U8=bk(Iv,0,1)
if PQ<U5 and GetWidgetLife(Iv)>1 then
set Px=It+PQ*U6*Cos(UF*3.14159/180.)
set Py=Iu+PQ*U6*Sin(UF*3.14159/180.)
call SetUnitX(Iv,Px)
call SetUnitY(Iv,Py)
set PQ=PQ+1
call SaveInteger(Ia,Ix,$6C6F6F70,PQ)
set U9=(-(2*I2R(PQ)*UC-1)*(2*I2R(PQ)*UC-1)+1)*U7+UH
call SetUnitFlyHeight(Iv,U9,0)
call SetUnitFacing(Iv,UF)
else
call SetUnitPathing(Iv,true)
if GetWidgetLife(Iv)>1 then
call SetUnitFlyHeight(Iv,0,0)
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
if LoadStr(Ia,Ix,$65666673)!="" then
call DestroyEffect(AddSpecialEffect(LoadStr(Ia,Ix,$65666673),GetUnitX(Iv),GetUnitY(Iv)))
endif
if LoadReal(Ia,Ix,$3064616D)>0 then
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),275,LoadReal(Ia,Ix,$3064616D),1,0)
endif
if LoadInteger(Ia,Ix,$79756E30)>0 then
set bj_lastCreatedUnit=XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41333030,1,GetUnitX(Iv),GetUnitY(Iv),0,1)
call IssueImmediateOrderById(bj_lastCreatedUnit,852127)
endif
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function dr takes unit Iv,real T7,real T8,real Ii,string U3,integer U4 returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real In=SquareRoot((T7-It)*(T7-It)+(T8-Iu)*(T8-Iu))
local integer U5=R2I(In/2000./.02)
local integer PQ=0
local real U6=In/RMaxBJ(U5,.1)
local real UC=1./RMaxBJ(U5,.1)
call UnitAddAbility(Iv,$416D7266)
call UnitRemoveAbility(Iv,$416D7266)
call SetUnitPathing(Iv,false)
call SetUnitAnimation(Iv,"slam")
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$30306868,GetUnitFlyHeight(Iv))
call SaveReal(Ia,Ix,$30616E67,Atan2(T8-Iu,T7-It)*(180./3.14159))
call SaveReal(Ia,Ix,$6D617868,In/2)
call SaveReal(Ia,Ix,$6D646973,U6)
call SaveReal(Ia,Ix,$68696774,UC)
call SaveReal(Ia,Ix,$30306878,It)
call SaveReal(Ia,Ix,$30306879,Iu)
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveInteger(Ia,Ix,$6C6F6F70,PQ)
call SaveInteger(Ia,Ix,$736D6178,U5)
call SaveInteger(Ia,Ix,$79756E30,U4)
if U3!=null then
call SaveStr(Ia,Ix,$65666673,U3)
else
call SaveStr(Ia,Ix,$65666673,"")
endif
call TimerStart(CS,.015,true,function dq)
set CS=null
endfunction
function ds takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,1)
local unit CE=LoadUnitHandle(Ia,Ix,2)
local integer Ik=LoadInteger(Ia,Ix,1)-1
local real Ii=LoadReal(Ia,Ix,1)
if Ii>0 then
if Ik>0 and GetWidgetLife(CE)>.405 and IsUnitType(CE,UNIT_TYPE_ETHEREAL) then
call SaveInteger(Ia,Ix,1,Ik)
call UnitDamageTarget(Iv,CE,Ii,false,false,F,N,WEAPON_TYPE_WHOKNOWS)
else
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
else
if Ik>0 and GetWidgetLife(CE)>.405 and IsUnitType(CE,UNIT_TYPE_ETHEREAL) then
call SaveInteger(Ia,Ix,1,Ik)
call SetUnitState(CE,ConvertUnitState(0),GetUnitState(CE,ConvertUnitState(0))+GetUnitState(CE,ConvertUnitState(1))*.015)
else
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
endif
set CS=null
set Iv=null
set CE=null
endfunction
function dt takes unit Iv,unit CE,real Ii returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,1,Iv)
call SaveUnitHandle(Ia,Ix,2,CE)
call SaveInteger(Ia,Ix,1,10)
call SaveReal(Ia,Ix,1,Ii*.2)
call TimerStart(CS,.5,true,function ds)
set CS=null
set CE=null
endfunction
function du takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,1)
local unit UV=LoadUnitHandle(Ia,GetHandleId(Iv),$41505431)
local integer Ik=LoadInteger(Ia,Ix,1)-1
local group UX=LoadGroupHandle(Ia,Ix,9)
local group I2
local unit CE
local real Ii=LoadReal(Ia,Ix,1)*.5
if Ik>0 then
call SaveInteger(Ia,Ix,1,Ik)
call bR(UV,GetUnitFacing(UV),20.)
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(UV),GetUnitY(UV),330,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitInGroup(CE,UX)==false and CE!=Iv and CE!=UV and GetWidgetLife(CE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Iv)) and GetUnitAbilityLevel(CE,$416C6F63)==0 and GetUnitAbilityLevel(CE,$4176756C)==0 then
if IsUnitType(CE,UNIT_TYPE_ETHEREAL) then
call UnitDamageTarget(Iv,CE,Ii,false,false,F,N,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Iv,CE,Ii,false,false,K,N,WEAPON_TYPE_WHOKNOWS)
endif
call GroupAddUnit(UX,CE)
endif
endloop
call DestroyGroup(I2)
if Ik==20 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505439,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505431,true)
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505439,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505431,true)
call GroupClear(UX)
call DestroyGroup(UX)
call RemoveUnit(UV)
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
set UV=null
set UX=null
set I2=null
set CE=null
endfunction
function dv takes unit Iv,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local unit CE=XB(GetPlayerId(GetOwningPlayer(Iv)),$65505430,0,0,GetUnitX(Iv),GetUnitY(Iv),bQ(Iv,GetSpellTargetX(),GetSpellTargetY()),5)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505431,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505439,true)
call SaveUnitHandle(Ia,Ix,1,Iv)
call SaveUnitHandle(Ia,GetHandleId(Iv),$41505431,CE)
call SaveInteger(Ia,Ix,1,100)
call SaveReal(Ia,Ix,1,I2R(GetHeroInt(Iv,true)*Pt+Pt*300))
call SaveGroupHandle(Ia,Ix,9,CreateGroup())
call TimerStart(CS,.03,true,function du)
set CS=null
set CE=null
endfunction
function dz takes nothing returns nothing
local integer Is=GetHandleId(GetExpiredTimer())
local unit Ir=LoadUnitHandle(Ia,Is,$6865726F)
local real Im=LoadReal(Ia,Is,$30616E67)
local real It=LoadReal(Ia,Is,$30303078)+100*Cos(Im*bj_DEGTORAD)
local real Iu=LoadReal(Ia,Is,$30303079)+100*Sin(Im*bj_DEGTORAD)
local unit CE
local group I2=CreateGroup()
if LoadInteger(Ia,Is,$696E6461)>0 then
call SaveInteger(Ia,Is,$696E6461,LoadInteger(Ia,Is,$696E6461)-1)
call SaveReal(Ia,Is,$30303078,It)
call SaveReal(Ia,Is,$30303079,Iu)
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",It,Iu))
call GroupEnumUnitsInRange(I2,It,Iu,165,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(Ir))==true and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call bd(Ir,CE,30,10.,0,0,LoadReal(Ia,Is,$3064656D),3.)
endif
endloop
else
call DestroyTimer(GetExpiredTimer())
call FlushChildHashtable(Ia,Is)
endif
call DestroyGroup(I2)
set Ir=null
set CE=null
set I2=null
endfunction
function d0 takes unit Ij,integer JZ,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Is=GetHandleId(CS)
local integer Ir=GetHandleId(Ij)
local real Im=bj_RADTODEG*Atan2(Iu-GetUnitY(Ij),It-GetUnitX(Ij))
call SaveUnitHandle(Ia,Is,$6865726F,Ij)
call SaveInteger(Ia,Is,$61626964,JZ)
call SaveInteger(Ia,Is,$696E6461,10)
call SaveReal(Ia,Is,$30303078,GetUnitX(Ij))
call SaveReal(Ia,Is,$30303079,GetUnitY(Ij))
call SaveReal(Ia,Is,$30616E67,Im)
call SaveReal(Ia,Is,$3064656D,bk(Ij,1,GetUnitAbilityLevel(Ij,JZ))*2)
call TimerStart(CS,.01,true,function dz)
set CS=null
endfunction
function d1 takes nothing returns nothing
local integer Is=GetHandleId(GetExpiredTimer())
local unit Ir=LoadUnitHandle(Ia,Is,$6865726F)
local unit CE
local group I2=CreateGroup()
if LoadInteger(Ia,Is,$696E6461)>0 then
call SaveInteger(Ia,Is,$696E6461,LoadInteger(Ia,Is,$696E6461)-1)
call GroupEnumUnitsInRange(I2,GetUnitX(Ir),GetUnitY(Ir),330,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(Ir))==true and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",CE,"chest"))
call UnitDamageTarget(Ir,CE,LoadReal(Ia,Is,$3064656D)/10,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call bd(Ir,CE,33,10.,0,0,LoadReal(Ia,Is,$3064656D),3.)
endif
endloop
else
call DestroyTimer(GetExpiredTimer())
call FlushChildHashtable(Ia,Is)
endif
call DestroyGroup(I2)
set Ir=null
set CE=null
set I2=null
endfunction
function d2 takes unit CE,integer JZ returns nothing
local timer CS=CreateTimer()
local integer Is=GetHandleId(CS)
local integer Ir=GetHandleId(CE)
call SaveUnitHandle(Ia,Is,$6865726F,CE)
call SaveInteger(Ia,Is,$696E6461,5)
if Ff>1 then
call SaveReal(Ia,Is,$3064656D,bk(CE,0,GetUnitAbilityLevel(CE,JZ))*2)
else
call SaveReal(Ia,Is,$3064656D,bk(CE,0,GetUnitAbilityLevel(CE,JZ))*1.5)
endif
call TimerStart(CS,.2,true,function d1)
set CS=null
endfunction
function d3 takes nothing returns nothing
local integer Is=GetHandleId(GetExpiredTimer())
local integer Jh=GetHandleId(LoadUnitHandle(Ia,Is,$6865726F))
local integer Ir=GetHandleId(LoadUnitHandle(Ia,Is,$756E6974))
local integer FZ=LoadInteger(Ia,Ir,Jh)-1
call SaveInteger(Ia,Ir,Jh,FZ)
if FZ<=0 or GetUnitState(LoadUnitHandle(Ia,Is,$756E6974),ConvertUnitState(0))<=0 then
call SetUnitState(LoadUnitHandle(Ia,Is,$756E6974),ConvertUnitState(32),GetUnitState(LoadUnitHandle(Ia,Is,$756E6974),ConvertUnitState(32))+LoadReal(Ia,Ir,Jh))
call DestroyTimer(GetExpiredTimer())
call FlushChildHashtable(Ia,Is)
if GetUnitState(LoadUnitHandle(Ia,Is,$756E6974),ConvertUnitState(0))<=0 then
call FlushChildHashtable(Ia,Ir)
endif
endif
endfunction
// 猴子普攻减甲效果
function d4 takes unit Ij,unit CE returns nothing
local timer CS=CreateTimer()
local integer Is=GetHandleId(CS)
local real Iw=I2R(GetUnitAbilityLevel(Ij,$41445333))
local real JT=LoadReal(Ia,GetHandleId(CE),GetHandleId(Ij))
local real Io=I2R(GetHeroStr(Ij,true)+GetHeroAgi(Ij,true)+GetHeroInt(Ij,true))+GetUnitState(Ij,ConvertUnitState(18))+GetUnitState(Ij,ConvertUnitState(19))
local group I2=CreateGroup()
local unit Jg
call GroupEnumUnitsInRange(I2,GetUnitX(Ij),GetUnitY(Ij),330,null)
loop
set Jg=FirstOfGroup(I2)
exitwhen Jg==null
call GroupRemoveUnit(I2,Jg)
if IsUnitEnemy(Jg,GetOwningPlayer(Ij))==true and GetUnitState(Jg,UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",Jg,"chest"))
call UnitDamageTarget(Ij,Jg,Io,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
endloop
if JT>=Iw*Iw then
call SaveInteger(Ia,GetHandleId(CE),GetHandleId(Ij),3)
else
if JT>0 then
call SetUnitState(CE,ConvertUnitState(32),GetUnitState(CE,ConvertUnitState(32))-Iw)
call SaveReal(Ia,GetHandleId(CE),GetHandleId(Ij),JT+Iw)
call SaveInteger(Ia,GetHandleId(CE),GetHandleId(Ij),3)
else
call SetUnitState(CE,ConvertUnitState(32),GetUnitState(CE,ConvertUnitState(32))-Iw)
call SaveReal(Ia,GetHandleId(CE),GetHandleId(Ij),JT+Iw)
call SaveInteger(Ia,GetHandleId(CE),GetHandleId(Ij),3)
call SaveUnitHandle(Ia,Is,$6865726F,Ij)
call SaveUnitHandle(Ia,Is,$756E6974,CE)
call TimerStart(CS,1,true,function d3)
endif
endif
set CS=null
endfunction
// 黄忠普攻减甲效果
function d10 takes unit Ij,unit CE returns nothing
local timer CS=CreateTimer()
local integer Is=GetHandleId(CS)
local real Iw = I2R(IMaxBJ(archeryTime,75))
local real JT=LoadReal(Ia,GetHandleId(CE),GetHandleId(Ij))
local real Io=I2R(GetHeroStr(Ij,true)+GetHeroAgi(Ij,true)+GetHeroInt(Ij,true))+GetUnitState(Ij,ConvertUnitState(18))+GetUnitState(Ij,ConvertUnitState(19))
local group I2=CreateGroup()
local unit Jg
call GroupEnumUnitsInRange(I2,GetUnitX(Ij),GetUnitY(Ij),100,null)
loop
set Jg=FirstOfGroup(I2)
exitwhen Jg==null
call GroupRemoveUnit(I2,Jg)
if IsUnitEnemy(Jg,GetOwningPlayer(Ij))==true and GetUnitState(Jg,UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",Jg,"chest"))
// call UnitDamageTarget(Ij,Jg,Io,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
endloop
if JT>=Iw*2 then
call SaveInteger(Ia,GetHandleId(CE),GetHandleId(Ij),7)
else
if JT>0 then
call SetUnitState(CE,ConvertUnitState(32),GetUnitState(CE,ConvertUnitState(32))-Iw)
call SaveReal(Ia,GetHandleId(CE),GetHandleId(Ij),JT+Iw)
call SaveInteger(Ia,GetHandleId(CE),GetHandleId(Ij),7)
else
call SetUnitState(CE,ConvertUnitState(32),GetUnitState(CE,ConvertUnitState(32))-Iw)
call SaveReal(Ia,GetHandleId(CE),GetHandleId(Ij),JT+Iw)
call SaveInteger(Ia,GetHandleId(CE),GetHandleId(Ij),7)
call SaveUnitHandle(Ia,Is,$6865726F,Ij)
call SaveUnitHandle(Ia,Is,$756E6974,CE)
call TimerStart(CS,1,true,function d3)
endif
endif
set CS=null
endfunction

function d5 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
call SaveReal(Ia,Ix,$636F756E,LoadReal(Ia,Ix,$636F756E)-.1)
if LoadReal(Ia,Ix,$636F756E)<.1 or GetWidgetLife(Iv)>1 then
if GetWidgetLife(Iv)<=.405 then
call ReviveHero(Iv,-1666.,-7777.,true)
call UnitRemoveAbility(Iv,$4176756C)
call SetUnitInvulnerable(Iv,false)
call SetUnitTimeScale(Iv,1)
call SetUnitFlyHeight(Iv,0.,0.)
call PauseUnit(Iv,true)
call PauseUnit(Iv,false)
endif
call DestroyTimerDialog(LoadTimerDialogHandle(Ia,Ix,$6469616C))
call PauseTimer(LoadTimerHandle(Ia,Ix,$74747474))
call DestroyTimer(LoadTimerHandle(Ia,Ix,$74747474))
call FlushChildHashtable(Ia,Ix)
call PauseTimer(CS)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
endfunction
function d6 takes unit Iv,real VO returns nothing
local timer CS=CreateTimer()
local timer VF=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$636F756E,VO)
call SaveTimerHandle(Ia,Ix,$74747474,VF)
call TimerStart(VF,VO,false,null)
set bj_lastCreatedTimerDialog=CreateTimerDialog(VF)
call TimerDialogSetTitle(bj_lastCreatedTimerDialog,GetUnitName(Iv)+"重返战场：")
call SaveTimerDialogHandle(Ia,Ix,$6469616C,bj_lastCreatedTimerDialog)
if GetLocalPlayer()==GetOwningPlayer(Iv) then
call TimerDialogDisplay(bj_lastCreatedTimerDialog,true)
endif
call TimerStart(CS,.1,true,function d5)
set CS=null
set VF=null
endfunction
function d9 takes unit JK,unit JL returns real
return SquareRoot((GetUnitX(JK)-GetUnitX(JL))*(GetUnitX(JK)-GetUnitX(JL))+(GetUnitY(JK)-GetUnitY(JL))*(GetUnitY(JK)-GetUnitY(JL)))
endfunction
function eB takes player CC returns boolean
if IsPlayerInForce(CC,E) and GetPlayerController(CC)!=MAP_CONTROL_USER or LU==false then
return true
endif
return false
endfunction
function eC takes unit CE returns boolean
if IsUnitType(CE,UNIT_TYPE_HERO) or LT==false then
return true
endif
return false
endfunction
function eD takes unit CE returns boolean
local integer FZ=0
loop
if IsUnitVisible(CE,Player(FZ)) and IsUnitEnemy(CE,Player(FZ)) and IsUnitVisible(CE,Player(FZ)) then
return true
endif
set FZ=FZ+1
exitwhen FZ>15
endloop
return false
endfunction
function eE takes unit CE returns boolean
if GetUnitAbilityLevel(CE,$4176756C)>0 then
return false
endif
return true
endfunction
function eF takes unit CE returns integer
local integer FZ=1
loop
exitwhen FZ>La
if CE==Lb[FZ] then
return FZ
endif
set FZ=FZ+1
endloop
return 0
endfunction
function eG takes timer CS returns integer
local integer FZ=1
loop
exitwhen FZ>La
if CS==Lc[FZ] then
return FZ
endif
set FZ=FZ+1
endloop
return 0
endfunction
function eH takes integer Li returns boolean
if Li==0 or Li==851972 or Li==851983 or Li==852128 then
return true
endif
return false
endfunction
function eI takes unit Lr returns boolean
local integer Li=GetUnitCurrentOrder(Lr)
if Li==0 or Li==851972 or Li==851993 or Li==851983 or Li==851984 or Li==851988 or Li==851990 or Li==851983 or Li==851985 or Li==851986 or Li==851988 or Li==851990 or Li==999999 then
return true
endif
return false
endfunction
function eJ takes unit CE,integer FZ returns boolean
if Ls==false and GetUnitCurrentOrder(CE)!=FZ and FZ!=Lg[eF(CE)] then
return true
endif
return false
endfunction
function eK takes unit CE,integer FZ returns nothing
local integer FN=eF(CE)
set Ls=true
set Lg[FN]=FZ
set Ld[FN]=5
endfunction
function eL takes unit Lr,integer Lv returns nothing
if eJ(Lr,Lv) then
if IssueImmediateOrderById(Lr,Lv) then
call eK(Lr,Lv)
endif
endif
endfunction
function eM takes unit Lr,integer Lv,real It,real Iu returns nothing
if eJ(Lr,Lv) then
if IssuePointOrderById(Lr,Lv,It,Iu) then
call eK(Lr,Lv)
endif
endif
endfunction
function eN takes unit Lr,integer Lv,unit Lt returns nothing
if eJ(Lr,Lv) then
if IssueTargetOrderById(Lr,Lv,Lt) then
call eK(Lr,Lv)
endif
endif
endfunction
function eO takes unit Lr,real Lw returns nothing
local real Kt=GetUnitLifePercent(Lr)
call eL(Lr,852129)
if Lw<=800*LS then
call eL(Lr,852097)
call eL(Lr,852489)
call eL(Lr,852126)
call eL(Lr,852503)
call eL(Lr,852100)
call eL(Lr,852528)
call eL(Lr,852184)
call eL(Lr,852164)
call eL(Lr,852180)
call eL(Lr,852554)
call eL(Lr,852200)
call eL(Lr,852594)
call eL(Lr,852595)
call eL(Lr,852596)
call eL(Lr,852667)
call eL(Lr,852663)
call eL(Lr,852598)
call eL(Lr,852599)
call eL(Lr,852600)
if Kt<=50. then
call eL(Lr,852586)
endif
endif
if Lw<=400*LS then
call eL(Lr,852096)
call eL(Lr,852086)
call eL(Lr,852090)
call eL(Lr,852094)
call eL(Lr,852127)
call eL(Lr,852128)
call eL(Lr,852526)
call eL(Lr,852181)
call eL(Lr,852183)
call eL(Lr,852556)
call eL(Lr,852217)
call eL(Lr,852588)
call eL(Lr,852253)
call eL(Lr,852246)
endif
if Lw<=100*LS then
call eL(Lr,852123)
endif
call eL(Lr,852174)
call eL(Lr,852552)
call eL(Lr,852458)
call eL(Lr,852656)
call eL(Lr,852589)
call eL(Lr,852244)
call eL(Lr,852578)
call eL(Lr,852671)
call eL(Lr,852244)
call eL(Lr,852602)
call eL(Lr,852212)
call eL(Lr,852522)
call eL(Lr,852150)
call eL(Lr,852133)
call eL(Lr,852102)
call eL(Lr,852249)
if Lw<=200*LS then
call eL(Lr,852177)
endif
endfunction
function eP takes unit Lr,real It,real Iu,real Lw returns nothing
if Lw>1200 then
call eM(Lr,852093,It,Iu)
endif
call eM(Lr,852089,It,Iu)
call eM(Lr,852488,It,Iu)
call eM(Lr,852121,It,Iu)
call eM(Lr,852504,It,Iu)
call eM(Lr,852125,It,Iu)
call eM(Lr,852555,It,Iu)
call eM(Lr,852218,It,Iu)
call eM(Lr,852224,It,Iu)
call eM(Lr,852221,It,Iu)
call eM(Lr,852593,It,Iu)
call eM(Lr,852592,It,Iu)
call eM(Lr,852597,It,Iu)
call eM(Lr,852580,It,Iu)
call eM(Lr,852238,It,Iu)
call eM(Lr,852652,It,Iu)
call eM(Lr,852658,It,Iu)
call eM(Lr,852669,It,Iu)
call eM(Lr,852229,It,Iu)
call eM(Lr,852237,It,Iu)
call eM(Lr,852560,It,Iu)
call eM(Lr,852591,It,Iu)
call eM(Lr,852238,It,Iu)
if Lw>800 then
call eM(Lr,852122,It,Iu)
endif
if Lw>400 then
call eM(Lr,852525,It,Iu)
endif
if Lw<200*LS then
call eM(Lr,852664,It,Iu)
endif
call eM(Lr,852600,It,Iu)
endfunction
function eQ takes unit Lr,unit Lt,boolean Lu returns nothing
call eN(Lr,852095,Lt)
call eN(Lr,852119,Lt)
call eN(Lr,852502,Lt)
call eN(Lr,852179,Lt)
call eN(Lr,852171,Lt)
call eN(Lr,852527,Lt)
call eN(Lr,852555,Lt)
call eN(Lr,852227,Lt)
call eN(Lr,852226,Lt)
call eN(Lr,852587,Lt)
call eN(Lr,852585,Lt)
call eN(Lr,852583,Lt)
call eN(Lr,852662,Lt)
call eN(Lr,852665,Lt)
call eN(Lr,852668,Lt)
call eN(Lr,852670,Lt)
call eN(Lr,852230,Lt)
call eN(Lr,852480,Lt)
call eN(Lr,852106,Lt)
call eN(Lr,852487,Lt)
call eN(Lr,852487,Lt)
call eN(Lr,852243,Lt)
call eN(Lr,852560,Lt)
call eN(Lr,852231,Lt)
call eN(Lr,852252,Lt)
call eN(Lr,852501,Lt)
call eN(Lr,852225,Lt)
call eN(Lr,852092,Lt)
call eN(Lr,852222,Lt)
call eN(Lr,852274,Lt)
call eN(Lr,852600,Lt)
endfunction
function eR takes integer FN returns nothing
local unit Ij=Lb[FN]
local real JT=d9(Ij,Lo[FN])
if eI(Ij) and eD(Ij) then
set Ls=false
if Le[FN]==1 then
call eQ(Ij,Lo[FN],false)
elseif Le[FN]==2 then
call eP(Ij,Lp[FN],Lq[FN],JT)
elseif Le[FN]==3 then
call eO(Ij,JT)
endif
endif
set Ij=null
endfunction
function eS takes integer FN returns nothing
local unit CE=null
local unit Lm=null
local unit Ij=Lb[FN]
local real Ln=10000000000.
local real Ll=10000000000.
local real Lj=0.
local real Lk=0.
local real It=GetUnitX(Ij)
local real Iu=GetUnitY(Ij)
local group Lh=CreateGroup()
local player CC=GetOwningPlayer(Ij)
local integer Li=GetUnitCurrentOrder(Ij)
call GroupEnumUnitsInRange(Lh,It,Iu,LR,null)
loop
set CE=FirstOfGroup(Lh)
if eC(CE) then
set Lj=GetUnitState(CE,UNIT_STATE_LIFE)
if Lj>0. and eE(CE) and IsUnitEnemy(CE,CC) then
if LV==false then
set Lk=d9(Ij,CE)
if Lk<Ll then
set Ll=Lk
set Lm=CE
endif
else
if Lj<Ln then
set Ln=Lj
set Lm=CE
endif
endif
endif
endif
call GroupRemoveUnit(Lh,CE)
exitwhen CE==null
endloop
call GroupClear(Lh)
call DestroyGroup(Lh)
if Lm!=null then
set Lo[FN]=Lm
set Lp[FN]=GetUnitX(Lm)
set Lq[FN]=GetUnitY(Lm)
if eH(Li) then
if not IssueTargetOrderById(Ij,851983,Lm) or Le[FN]!=1 then
call IssuePointOrderById(Ij,851983,Lp[FN],Lq[FN])
endif
endif
call eR(FN)
endif
set CE=null
set Lm=null
set Ij=null
set CC=null
set Lh=null
endfunction
function eT takes integer FN returns nothing
if eD(Lb[FN]) then
if Lf[FN]==false then
call RecycleGuardPosition(Lb[FN])
endif
set Lf[FN]=true
else
if Lf[FN]==true then
call RemoveGuardPosition(Lb[FN])
endif
set Lf[FN]=false
endif
endfunction
function eU takes integer FN returns nothing
call DestroyTimer(Lc[FN])
call GroupRemoveUnit(LW,Lb[FN])
set Lb[FN]=Lb[La]
set Lc[FN]=Lc[La]
set Ld[FN]=Ld[La]
set Le[FN]=Le[La]
set Lf[FN]=Lf[La]
set Lb[La]=null
set La=La-1
endfunction
function eV takes nothing returns nothing
local integer FN=eG(GetExpiredTimer())
if IsUnitType(Lb[FN],UNIT_TYPE_HERO)==false and GetUnitState(Lb[FN],UNIT_STATE_LIFE)<=0 then
call eU(FN)
else
if Ld[FN]>0 then
set Ld[FN]=Ld[FN]-1
else
set Lg[FN]=0
endif
set Le[FN]=Le[FN]+1
if Le[FN]>3 then
set Le[FN]=0
endif
call eT(FN)
call eS(FN)
endif
endfunction
function eW takes unit CE returns boolean
if eC(CE) and IsUnitIllusion(CE)==false and IsUnitInGroup(CE,LW)==false and GetUnitAbilityLevel(CE,$416C6F63)==0 and IsUnitType(CE,UNIT_TYPE_PEON)==false and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and eB(GetOwningPlayer(CE)) then
call GroupAddUnit(LW,CE)
return true
endif
return false
endfunction
function eX takes unit CE returns nothing
set La=La+1
set Lb[La]=CE
set Lc[La]=CreateTimer()
set Ld[La]=0
set Le[La]=0
set Lf[La]=true
call TimerStart(Lc[La],1.11,true,function eV)
endfunction
function eY takes nothing returns nothing
local unit CE=GetTriggerUnit()
if eW(CE) then
call eX(CE)
endif
set CE=null
endfunction
function eZ takes nothing returns nothing
local unit CE=GetTriggerUnit()
if IsUnitInGroup(CE,LW)==true then
call eU(eF(CE))
endif
if eW(CE) then
call eX(CE)
endif
set CE=null
endfunction
function ea takes real JT,real LF,boolean Iv,boolean Ix,boolean LQ returns nothing
local unit CE=null
local group I2=CreateGroup()
set LR=JT
set LS=LF
set LT=Iv
set LU=Ix
set LV=LQ
set LW=CreateGroup()
set LX=CreateTrigger()
set LY=CreateTrigger()
set LZ=CreateRegion()
call GroupEnumUnitsInRect(I2,bj_mapInitialPlayableArea,null)
loop
set CE=FirstOfGroup(I2)
if eW(CE) then
call eX(CE)
endif
call GroupRemoveUnit(I2,CE)
exitwhen CE==null
endloop
call GroupClear(I2)
call DestroyGroup(I2)
call RegionAddRect(LZ,GetWorldBounds())
call TriggerAddAction(LX,function eY)
call TriggerAddAction(LY,function eZ)
call TriggerRegisterEnterRegion(LX,LZ,null)
call TriggerRegisterAnyUnitEventBJ(LY,EVENT_PLAYER_UNIT_CHANGE_OWNER)
set CE=null
set I2=null
endfunction
function eb takes player CC returns nothing
if GetPlayerId(CC)<0 then
set CC=Player(0)
elseif GetPlayerId(CC)>15 then
set CC=Player(15)
endif
call ForceAddPlayer(E,CC)
endfunction
function ed takes nothing returns nothing
endfunction
function ee takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local integer Vw=LoadInteger(Ia,Ix,$73746570)
local integer Vv=LoadInteger(Ia,Ix,$734D6178)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local real U9=LoadReal(Ia,Ix,$68303030)
local real Vx=LoadReal(Ia,Ix,$6D683030)
local real Re=LoadReal(Ia,Ix,$64697330)
local real Im=LoadReal(Ia,Ix,$616E6730)
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real Px=0.
local real Py=0.
local real Vy=0.
if Vw<Vv then
set Px=It+Re*Cos(Im*3.14159/180.)
set Py=Iu+Re*Sin(Im*3.14159/180.)
call SetUnitX(Iv,Px)
call SetUnitY(Iv,Py)
set Vw=Vw+1
call SaveInteger(Ia,Ix,$73746570,Vw)
set Vy=(-(2*I2R(Vw)*U9-1)*(2*I2R(Vw)*U9-1)+1)*Vx
call SetUnitFlyHeight(Iv,Vy,0)
call SetUnitFacing(Iv,Im)
else
call SetUnitFlyHeight(Iv,0,0)
call SetUnitPathing(Iv,true)
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
call IssuePointOrderById(Iv,851983,GetUnitX(Iv),GetUnitY(Iv))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call SaveInteger(Ia,GetHandleId(Iv),$6D6F7665,0)
call SaveUnitHandle(Ia,GetHandleId(Iv),$756E6974,null)
endif
set Iv=null
set CS=null
endfunction
function ef takes unit Iv,real T7,real T8,real Ug returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local integer Vv=R2I(Ug/2000/.02)
local real Re=Ug/RMaxBJ(Vv,.1)
local real U9=1./RMaxBJ(Vv,.1)
call SaveInteger(Ia,GetHandleId(Iv),$6D6F7665,1)
call UnitAddAbility(Iv,$416D7266)
call UnitRemoveAbility(Iv,$416D7266)
call SetUnitPathing(Iv,false)
call SetUnitAnimation(Iv,"slam")
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$64683030,GetUnitDefaultFlyHeight(Iv))
call SaveReal(Ia,Ix,$616E6730,Atan2(T8-Iu,T7-It)*(180./3.14159))
call SaveReal(Ia,Ix,$64697330,Re)
call SaveReal(Ia,Ix,$68303030,U9)
call SaveReal(Ia,Ix,$6D683030,Ug/2)
call SaveReal(Ia,GetHandleId(Iv),$78303030,GetUnitX(Iv))
call SaveReal(Ia,GetHandleId(Iv),$79303030,GetUnitY(Iv))
call SaveInteger(Ia,Ix,$73746570,0)
call SaveInteger(Ia,Ix,$734D6178,Vv)
call TimerStart(CS,.015,true,function ee)
set CS=null
endfunction
function eg takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit CE=LoadUnitHandle(Ia,Ix,$756E6974)
local real Uz=LoadReal(Ia,GetHandleId(Iv),$78303030)
local real U0=LoadReal(Ia,GetHandleId(Iv),$79303030)
local real T7=LoadReal(Ia,GetHandleId(Iv),$6D783030)
local real T8=LoadReal(Ia,GetHandleId(Iv),$6D793030)
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real Im=Atan2(T8-Iu,T7-It)
local real Vz=SquareRoot((T7-It)*(T7-It)+(T8-Iu)*(T8-Iu))
local real V0=SquareRoot((Uz-It)*(Uz-It)+(U0-Iu)*(U0-Iu))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",Uz,U0))
call SetUnitAnimation(Iv,"spin")
if Vz<200 or V0>200 then
call SetUnitPosition(Iv,T7,T8)
call SaveInteger(Ia,GetHandleId(Iv),$6D6F7665,0)
if CE!=null and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true then
call IssueTargetOrderById(Iv,851983,CE)
else
call IssueImmediateOrderById(Iv,851972)
endif
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call SaveUnitHandle(Ia,GetHandleId(Iv),$756E6974,null)
else
call SetUnitX(Iv,It+200*Cos(Im))
call SetUnitY(Iv,Iu+200*Sin(Im))
call SaveReal(Ia,GetHandleId(Iv),$78303030,GetUnitX(Iv))
call SaveReal(Ia,GetHandleId(Iv),$79303030,GetUnitY(Iv))
endif
call SetUnitFacing(Iv,Im*(180./3.14159))
set CS=null
set Iv=null
set CE=null
endfunction
function eh takes nothing returns nothing
local timer CS
local integer Ix=0
local unit Iv=GetTriggerUnit()
local real Uz=GetUnitX(Iv)
local real U0=GetUnitY(Iv)
local real T7=GetWidgetX(GetOrderTarget())
local real T8=GetWidgetY(GetOrderTarget())
local real In=0.
set In=SquareRoot((T7-Uz)*(T7-Uz)+(T8-U0)*(T8-U0))
if GetTerrainType(T7,T8)!=$634F6331 and LoadInteger(Ia,GetHandleId(Iv),$6D6F7665)<1 and GetUnitAbilityLevel(Iv,$41304A4E)>0 or (GetUnitAbilityLevel(Iv,$415A4352)>0 and XR(Iv,$415A4352,1)==0) and IsUnitType(Iv,UNIT_TYPE_HERO)==true and GetIssuedOrderId()==851971 and In>300 and In<1200 then
if GetOrderTargetUnit()!=null then
call SaveUnitHandle(Ia,GetHandleId(Iv),$756E6974,GetOrderTargetUnit())
endif
if GetUnitAbilityLevel(Iv,$415A4352)>0 then
call IssueImmediateOrderById(Iv,852090)
endif
call ef(Iv,T7,T8,In)
// 如果斗战胜佛的等级>0 
// or GetItemUserData(bW(Iv,$49303030))==288
elseif GetUnitAbilityLevel(Iv,$41445335)>0  and In>=1000. and GetIssuedOrderId()==851971 then
if LoadInteger(Ia,GetHandleId(Iv),$6D6F7665)<1 then
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,GetHandleId(Iv),$78303030,GetUnitX(Iv))
call SaveReal(Ia,GetHandleId(Iv),$79303030,GetUnitY(Iv))
call SaveReal(Ia,GetHandleId(Iv),$6D783030,T7)
call SaveReal(Ia,GetHandleId(Iv),$6D793030,T8)
call SaveInteger(Ia,GetHandleId(Iv),$6D6F7665,1)
if GetOrderTargetUnit()!=null then
call SaveUnitHandle(Ia,GetHandleId(Iv),$756E6974,GetOrderTargetUnit())
endif
call TimerStart(CS,.02,true,function eg)
elseif GetOrderPointX()!=0 and GetOrderPointY()!=0 then
call SaveReal(Ia,GetHandleId(Iv),$6D783030,GetOrderPointX())
call SaveReal(Ia,GetHandleId(Iv),$6D793030,GetOrderPointY())
endif
endif
set Iv=null
set CS=null
endfunction
function ei takes nothing returns nothing
local timer CS
local integer Ix=0
local unit Iv=GetTriggerUnit()
local integer LF=GetPlayerId(GetOwningPlayer(Iv))
local real T7=LoadReal(Ia,GetHandleId(Iv),$6D783030)
local real T8=LoadReal(Ia,GetHandleId(Iv),$6D793030)
local real It=GetUnitX(Iv)
local real Iu=GetUnitY(Iv)
local real In=SquareRoot((GetOrderPointX()-It)*(GetOrderPointX()-It)+(GetOrderPointY()-Iu)*(GetOrderPointY()-Iu))

if IO then
call IssuePointOrderById(Iv,851971,GetRandomReal(-5000,5000),GetRandomReal(-5000,5000))
call CreateNUnitsAtLoc(9,$65303145,Player(13),GetRandomLocInRect(GetPlayableMapRect()),bj_UNIT_FACING)
endif
if IsTerrainPathable(GetOrderPointX(),GetOrderPointY(),PATHING_TYPE_WALKABILITY)==false and IsUnitType(Iv,UNIT_TYPE_HERO)==true then
    // 加入追日靴判定
if bC(GetTriggerUnit(),$49303030)==true or GetUnitAbilityLevel(Iv,$41445335)>0 or GetItemUserData(bW(Iv,$49303030))==288 and In>=1000. and GetIssuedOrderId()==851971 then
if LoadInteger(Ia,GetHandleId(Iv),$6D6F7665)<1 then
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,GetHandleId(Iv),$78303030,GetUnitX(Iv))
call SaveReal(Ia,GetHandleId(Iv),$79303030,GetUnitY(Iv))
call SaveReal(Ia,GetHandleId(Iv),$6D783030,GetOrderPointX())
call SaveReal(Ia,GetHandleId(Iv),$6D793030,GetOrderPointY())
call SaveInteger(Ia,GetHandleId(Iv),$6D6F7665,1)
call TimerStart(CS,.02,true,function eg)
elseif GetOrderPointX()!=0 and GetOrderPointY()!=0 then
call SaveReal(Ia,GetHandleId(Iv),$6D783030,GetOrderPointX())
call SaveReal(Ia,GetHandleId(Iv),$6D793030,GetOrderPointY())
endif
endif
endif
set Iv=null
set CS=null
endfunction
function ej takes nothing returns nothing
local trigger Vt=CreateTrigger()
local trigger Vu=CreateTrigger()
local integer Ix=0
loop
exitwhen Ix>7
call TriggerRegisterPlayerUnitEvent(Vt,Player(Ix),ConvertPlayerUnitEvent(40),null)
call TriggerRegisterPlayerUnitEvent(Vu,Player(Ix),ConvertPlayerUnitEvent(39),null)
set Ix=Ix+1
endloop
call TriggerAddAction(Vt,function eh)
call TriggerAddAction(Vu,function ei)
set Vt=null
set Vu=null
endfunction
function ek takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer UE=GetPlayerId(GetOwningPlayer(Iv))
local real UF=LoadReal(Ia,Ix,$30616E67)
local integer UD=LoadInteger(Ia,Ix,$696E6478)
local integer T9=LoadInteger(Ia,Ix,$306D6178)
local real UG=LoadReal(Ia,Ix,$686D6178)
local real UB=LoadReal(Ia,Ix,$64697374)
local real UC=LoadReal(Ia,Ix,$68656967)
local real UH=LoadReal(Ia,Ix,$64666C79)
local real T5=LoadReal(Ia,Ix,$30306878)
local real T6=LoadReal(Ia,Ix,$30306879)
local real UI=0
local real UJ=0
local real UK=0
local real Io=0
local group I2
local unit CE
if UD<T9 then
set CE=CreateUnit(GetOwningPlayer(Iv),$654A5331,GetUnitX(Iv),GetUnitY(Iv),GetUnitFacing(Iv))
call UnitApplyTimedLife(CE,$42487765,.1)
call SetUnitTimeScale(CE,.5)
call SetUnitFlyHeight(CE,GetUnitFlyHeight(Iv),0.)
call SetUnitColor(CE,GetPlayerColor(Player(GetRandomInt(0,11))))
set UI=T5+UD*UB*Cos(UF*3.14159/180.)
set UJ=T6+UD*UB*Sin(UF*3.14159/180.)
call SetUnitX(Iv,UI)
call SetUnitY(Iv,UJ)
set UD=UD+1
call SaveInteger(Ia,Ix,$696E6478,UD)
set UK=(-(2*I2R(UD)*UC-1)*(2*I2R(UD)*UC-1)+1)*UG+UH
call SetUnitFlyHeight(Iv,UK,0)
call SetUnitFacing(Iv,UF)
else
call SetUnitFlyHeight(Iv,UH,0)
call SetUnitPathing(Iv,true)
call SetUnitTimeScale(Iv,1)
set CE=XB(GetPlayerId(GetOwningPlayer(Iv)),$654A5330,0,0,GetUnitX(Iv),GetUnitY(Iv),0,.5)
call IssuePointOrderById(CE,852592,GetUnitX(Iv),GetUnitY(Iv))
call EXPauseUnit(LoadUnitHandle(Ia,Ix,$756E6974),false)
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
set Io=LoadReal(Ia,Ix,$3064656D)
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),330,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(Iv))==true and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call UnitDamageTarget(Iv,CE,Io,false,false,L,N,WEAPON_TYPE_WHOKNOWS)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 then
call SetUnitPosition(CE,LoadReal(Ia,Ix,$30303078),LoadReal(Ia,Ix,$30303079))
endif
endif
endloop
if IsUnitEnemy(LoadUnitHandle(Ia,Ix,$756E6974),GetOwningPlayer(Iv))==true and GetUnitState(LoadUnitHandle(Ia,Ix,$756E6974),UNIT_STATE_LIFE)>.405 then
call IssueTargetOrderById(Iv,851983,LoadUnitHandle(Ia,Ix,$756E6974))
endif
call UnitRemoveType(Iv,UNIT_TYPE_GIANT)
call UnitRemoveAbility(Iv,$4176756C)
call DestroyEffect(LoadEffectHandle(Ia,Ix,$30656666))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set Iv=null
set CE=null
endfunction
function el takes unit Iv,unit CE,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real T5=GetUnitX(Iv)
local real T6=GetUnitY(Iv)
local real T7=GetUnitX(CE)
local real T8=GetUnitY(CE)
local real In=bO(Iv,CE)
local integer T9=R2I(In/2000/.02)
local integer UD=0
local real UB=In/RMaxBJ(T9,.01)
local real UC=1./RMaxBJ(T9,.01)
call EXPauseUnit(CE,true)
call UnitAddType(Iv,UNIT_TYPE_GIANT)
call UnitAddAbility(Iv,$416D7266)
call UnitRemoveAbility(Iv,$416D7266)
call UnitAddAbility(Iv,$4176756C)
call SetUnitPathing(Iv,false)
call SetUnitTimeScale(Iv,.5)
call SetUnitAnimationByIndex(Iv,3)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveEffectHandle(Ia,Ix,$30656666,AddSpecialEffectTarget("Abilities\\Weapons\\WaterElementalMissile\\WaterElementalMissile.mdl",Iv,"weapon"))
call SaveReal(Ia,Ix,$64666C79,GetUnitDefaultFlyHeight(Iv))
call SaveReal(Ia,Ix,$30616E67,Atan2(T8-T6,T7-T5)*(180./3.14159))
call SaveReal(Ia,Ix,$686D6178,In/2)
call SaveReal(Ia,Ix,$64697374,UB)
call SaveReal(Ia,Ix,$68656967,UC)
call SaveReal(Ia,Ix,$30306878,T5)
call SaveReal(Ia,Ix,$30306879,T6)
call SaveReal(Ia,Ix,$30303078,GetUnitX(CE))
call SaveReal(Ia,Ix,$30303079,GetUnitY(CE))
call SaveInteger(Ia,Ix,$696E6478,UD)
call SaveInteger(Ia,Ix,$306D6178,T9)
call SaveReal(Ia,Ix,$3064656D,bk(Iv,2,Pt))
call TimerStart(CS,.02,true,function ek)
set CS=null
endfunction
function eo takes nothing returns nothing
local integer Ix=GetHandleId(GetExpiredTimer())
call SetUnitState(LoadUnitHandle(Ia,Ix,0),ConvertUnitState(18),GetUnitState(LoadUnitHandle(Ia,Ix,0),ConvertUnitState(18))-LoadReal(Ia,Ix,0))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(GetExpiredTimer())
endfunction
function ep takes unit CE,real Iw returns nothing
local timer CS
local integer Ix=0
call SetUnitState(CE,ConvertUnitState(0),GetUnitState(CE,ConvertUnitState(0))-GetUnitState(CE,ConvertUnitState(1))*.2)
call SetUnitState(CE,ConvertUnitState(18),GetUnitState(CE,ConvertUnitState(18))+Iw)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,CE)
call SaveReal(Ia,Ix,0,Iw)
call TimerStart(CS,9,false,function eo)
set CS=null
endfunction
function es takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer FZ=0
local real It
local real Iu
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
if LoadInteger(Ia,Ix,0)<=0 then
loop
exitwhen FZ>8
call RemoveUnit(LoadUnitHandle(Ia,Ix,FZ))
set FZ=FZ+1
endloop
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
else
if LoadInteger(Ia,Ix,0)==10 then
set It=GetUnitX(LoadUnitHandle(Ia,Ix,$756E6974))
set Iu=GetUnitY(LoadUnitHandle(Ia,Ix,$756E6974))
call SetUnitX(LoadUnitHandle(Ia,Ix,$6865726F),It)
call SetUnitY(LoadUnitHandle(Ia,Ix,$6865726F),Iu)
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(LoadUnitHandle(Ia,Ix,$6865726F))),0,$41333030,1,GetUnitX(LoadUnitHandle(Ia,Ix,$6865726F)),GetUnitY(LoadUnitHandle(Ia,Ix,$6865726F)),bj_UNIT_FACING,1),852127)
if IsUnitEnemy(LoadUnitHandle(Ia,Ix,$756E6974),GetOwningPlayer(LoadUnitHandle(Ia,Ix,$6865726F)))==true and GetUnitState(LoadUnitHandle(Ia,Ix,$756E6974),UNIT_STATE_LIFE)>.405 then
call IssueTargetOrderById(LoadUnitHandle(Ia,Ix,$6865726F),851983,LoadUnitHandle(Ia,Ix,$756E6974))
endif
call bu(Iv,It,Iu,330.,I2R(GetHeroStr(Iv,true)+GetHeroAgi(Iv,true)*10),.1,5,0)
endif
loop
exitwhen FZ>8
call bR(LoadUnitHandle(Ia,Ix,FZ),GetUnitFacing(LoadUnitHandle(Ia,Ix,FZ)),30.)
set FZ=FZ+1
endloop
endif
set CS=null
set Iv=null
endfunction
function et takes unit Iv,unit CE returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer FZ=0
local real Im=0.
local real It=0.
local real Iu=0.
call SaveInteger(Ia,Ix,0,20)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$756E6974,CE)
call SaveReal(Ia,Ix,$30307578,GetUnitX(CE))
call SaveReal(Ia,Ix,$30307579,GetUnitY(CE))
loop
exitwhen FZ>8
set It=GetUnitX(CE)*1.+300.*1.*Cos(I2R(FZ)*45*1.*bj_DEGTORAD)
set Iu=GetUnitY(CE)*1.+300.*1.*Sin(I2R(FZ)*45*1.*bj_DEGTORAD)
set Im=bH(It,Iu,GetUnitX(CE),GetUnitY(CE))
call SaveUnitHandle(Ia,Ix,FZ,CreateUnit(GetOwningPlayer(Iv),$65305759,It,Iu,Im))
call SetUnitAnimationByIndex(LoadUnitHandle(Ia,Ix,FZ),8)
set FZ=FZ+1
endloop
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\0027.mdx",Iv,"chest"))
call TimerStart(CS,.02,true,function es)
set CS=null
endfunction
function eu takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
call SetUnitState(Iv,ConvertUnitState(22),128.)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595037,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595036,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595052,true)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
set CS=null
set Iv=null
endfunction
// 高翔W护盾计算
function gaoxiangSheild takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00当前护盾：" + R2S(LoadReal(Ia,GetHandleId(Iv),$30304844)))
if LoadReal(FS,GetHandleId(Iv),$130B62EC)<=0. or LoadReal(Ia,GetHandleId(Iv),$30304844)<=0. then
// 如果时间小于0且护盾大于0，则造成伤害
call bs(Iv, GetUnitX(Iv), GetUnitY(Iv), 1000, bk(Iv, 1, GetUnitAbilityLevel(gaoxiang, $41623162)) *0.5, 5, 0)
call range_stunEffect(Iv, GetUnitX(Iv), GetUnitY(Iv), 800, 3,false)
// call DestroyEffect(LoadEffectHandle(FS,GetHandleId(Iv),$3706D225))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,0.)
call SaveReal(Ia,GetHandleId(Iv),$30304844,0)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call UnitRemoveAbility(Iv,$41304844)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00护盾已消失！" )
else
call SaveReal(FS,GetHandleId(Iv),$130B62EC,LoadReal(FS,GetHandleId(Iv),$130B62EC)-.1)
endif
set CS=null
set Iv=null
endfunction

function ev takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00当前护盾：" + R2S(LoadReal(Ia,GetHandleId(Iv),$30304844)))
if LoadReal(FS,GetHandleId(Iv),$130B62EC)<=0. or LoadReal(Ia,GetHandleId(Iv),$30304844)<=0. then
call DestroyEffect(LoadEffectHandle(FS,GetHandleId(Iv),$3706D225))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,0.)
call SaveReal(Ia,GetHandleId(Iv),$30304844,0)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call UnitRemoveAbility(Iv,$41304844)
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00护盾已消失！" )
else
call SaveReal(FS,GetHandleId(Iv),$130B62EC,LoadReal(FS,GetHandleId(Iv),$130B62EC)-.1)
endif
set CS=null
set Iv=null
endfunction
function ew takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local real It=GetUnitX(Iv)+45*Cos(LoadReal(Ia,Ix,0)*bj_DEGTORAD)
local real Iu=GetUnitY(Iv)+45*Sin(LoadReal(Ia,Ix,0)*bj_DEGTORAD)
call SaveInteger(FS,GetHandleId(Iv),$8B0C9DD3,LoadInteger(FS,GetHandleId(Iv),$8B0C9DD3)-1)
if LoadInteger(FS,GetHandleId(Iv),$8B0C9DD3)<=0 or GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or IsTerrainPathable(It,Iu,PATHING_TYPE_AMPHIBIOUSPATHING)==true then
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
endif
set CS=null
set Iv=null
endfunction
function ex takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer TZ=1
local unit UV
call SaveReal(Ia,Ix,$30306A6C,LoadReal(Ia,Ix,$30306A6C)-35)
loop
exitwhen TZ>3
set UV=LoadUnitHandle(Ia,Ix,TZ)
call bR(UV,GetUnitFacing(UV),35)
call bs(Iv,GetUnitX(UV),GetUnitY(UV),220.,LoadReal(Ia,Ix,$3064616D),1,0)
set TZ=TZ+1
endloop
if LoadReal(Ia,Ix,$30306A6C)<=0 then
set TZ=1
loop
exitwhen TZ>3
set UV=LoadUnitHandle(Ia,Ix,TZ)
call RemoveUnit(UV)
set TZ=TZ+1
endloop
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
set UV=null
endfunction
function ey takes unit Iv,integer JZ returns nothing
local timer CS
local integer Ix=0
local integer KX=GetPlayerId(GetOwningPlayer(Iv))
local real Im=0
local real It=0
local real Iu=0
local integer Ux=1
if JZ==$41595052 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595052,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595037,true)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595036,true)
call SetUnitState(Iv,ConvertUnitState(22),175.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,15.,false,function eu)
elseif JZ==$41595057 then
if LoadInteger(Ia,GetHandleId(Iv),$41595030)-$41595030<3 then
call SaveInteger(Ia,GetHandleId(Iv),$41595030,LoadInteger(Ia,GetHandleId(Iv),$41595030)+1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)-1,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)+0,true)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),360,bk(Iv,1,GetUnitAbilityLevel(Iv,$41595057)),5,0)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\RW_WY.mdx",Iv,"origin"))
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\RW_WTX.mdx",Iv,"overhead"))
elseif JZ==$41595045 then
set Iv=Iv
// 瑞文被动计数+1
if LoadInteger(Ia,GetHandleId(Iv),$41595030)-$41595030<3 then
call SaveInteger(Ia,GetHandleId(Iv),$41595030,LoadInteger(Ia,GetHandleId(Iv),$41595030)+1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)-1,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)+0,true)
else
endif
call DestroyEffect(AddSpecialEffect("war3mapImported\\RW_WTX.mdx",GetUnitX(Iv),GetUnitY(Iv)))
call SaveReal(FS,GetHandleId(Iv),$C5A7DF74,GetUnitFacing(Iv))
// 护盾值
call SaveReal(Ia,GetHandleId(Iv),$30304844,GetUnitState(Iv,ConvertUnitState(1))*I2R(GetUnitAbilityLevel(Iv,$41595045))*I2R(GetUnitAbilityLevel(Iv,$41595045))*.02)
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00获得护盾！" + R2S(GetUnitState(Iv,ConvertUnitState(1))*I2R(GetUnitAbilityLevel(Iv,$41595045))*I2R(GetUnitAbilityLevel(Iv,$41595045))*.02))
call UnitAddAbility(Iv,$41304844)
if HaveSavedInteger(FS,GetHandleId(Iv),$130B62EC)==true then
if LoadReal(FS,GetHandleId(Iv),$A9F08262)<=0. then
call SaveEffectHandle(FS,GetHandleId(Iv),$3706D225,AddSpecialEffectTarget("war3mapImported\\RW_E.mdx",Iv,"chest"))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.1,true,function ev)
else
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
endif
else
call SaveEffectHandle(FS,GetHandleId(Iv),$3706D225,AddSpecialEffectTarget("war3mapImported\\RW_E.mdx",Iv,"chest"))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.1,true,function ev)
endif
call SaveInteger(FS,GetHandleId(Iv),$8B0C9DD3,5)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveReal(Ia,Ix,0,GetUnitFacing(Iv))
call TimerStart(CS,.03,true,function ew)
elseif JZ==$41595037 then
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$30306A6C,700)
call SaveReal(Ia,Ix,$3064616D,GetUnitState(Iv,ConvertUnitState(21))*2+bk(Iv,0,2))
set Im=bQ(Iv,GetSpellTargetX(),GetSpellTargetY())-40
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595037,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595052,true)
loop
exitwhen Ux>3
set Im=Im+20
set It=GetUnitX(Iv)*1.+250*1.*Cos(Im*1.*bj_DEGTORAD)
set Iu=GetUnitY(Iv)*1.+250*1.*Sin(Im*1.*bj_DEGTORAD)
call SaveUnitHandle(Ia,Ix,Ux,CreateUnit(Player(KX),$65595030,It,Iu,Im))
set Ux=Ux+1
endloop
call TimerStart(CS,.03,true,function ex)
endif
set CS=null
endfunction
function ez takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local real Im=LoadReal(Ia,Ix,$30616E67)
local real It=GetUnitX(Iv)+20*Cos(Im*bj_DEGTORAD)
local real Iu=GetUnitY(Iv)+20*Sin(Im*bj_DEGTORAD)
local group I2
local unit CE
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
if LoadInteger(Ia,Ix,0)<=0 or GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or IsTerrainPathable(It,Iu,PATHING_TYPE_AMPHIBIOUSPATHING)==true then
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$51454646))
call DestroyEffect(AddSpecialEffect("war3mapImported\\RW_QZ.mdx",GetUnitX(Iv),GetUnitY(Iv)))
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),220.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)!=true and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\RW_QXY.mdx",CE,"origin"))
call bd(Iv,CE,10,20,0.,0.,LoadReal(Ia,Ix,$3064616D),2)
else
endif
endloop
call DestroyGroup(I2)
call SetUnitFlyHeight(Iv,0,0.)
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
else
call SaveReal(Ia,Ix,$30646973,LoadReal(Ia,Ix,$30646973)+20.)
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
call SetUnitFlyHeight(Iv,GetUnitFlyHeight(Iv)+150,1000.)
endif
set I2=null
set CE=null
set CS=null
set Iv=null
endfunction
function e0 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local real Im=LoadReal(Ia,Ix,$30616E67)
local real It=GetUnitX(Iv)+20*Cos(Im*bj_DEGTORAD)
local real Iu=GetUnitY(Iv)+20*Sin(Im*bj_DEGTORAD)
local group I2
local unit CE
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
if LoadInteger(Ia,Ix,0)<=0 or GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or IsTerrainPathable(It,Iu,PATHING_TYPE_AMPHIBIOUSPATHING)==true then
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$51454646))
call DestroyEffect(AddSpecialEffect("war3mapImported\\RW_Q.mdx",GetUnitX(Iv),GetUnitY(Iv)))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),220.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(Iv,UNIT_STATE_LIFE)>=.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)!=true and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\RW_QXY.mdx",CE,"origin"))
call UnitDamageTarget(Iv,CE,LoadReal(Ia,Ix,$3064616D)*.15,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_METAL_HEAVY_CHOP)
endif
endloop
call DestroyGroup(I2)
endif
set CS=null
set Iv=null
set I2=null
set CE=null
endfunction
function e1 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
if GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or LoadReal(Ia,Ix,$726A7371)<=0. or LoadBoolean(Ia,GetHandleId(Iv),$52575133)==false then
if LoadReal(Ia,Ix,$726A7371)<=0. and LoadBoolean(Ia,GetHandleId(Iv),$52575133) then
call SaveBoolean(Ia,GetHandleId(Iv),$52575133,false)
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$514A5351))
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595038,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595051,true)
endif
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
else
call SaveReal(Ia,Ix,$726A7371,LoadReal(Ia,Ix,$726A7371)-.1)
endif
set CS=null
set Iv=null
endfunction
function e2 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595039,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595038,true)
call SaveBoolean(Ia,GetHandleId(Iv),$52575133,true)
call SaveEffectHandle(Ia,GetHandleId(Iv),$514A5351,AddSpecialEffectTarget("war3mapImported\\RW_QJS.mdx",Iv,"overhead"))
call SaveReal(Ia,Ix,$726A7371,3.)
call TimerStart(CS,.1,true,function e1)
set CS=null
set Iv=null
endfunction
function e3 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local real Im=LoadReal(Ia,Ix,$30616E67)
local real It=GetUnitX(Iv)+20*Cos(Im*bj_DEGTORAD)
local real Iu=GetUnitY(Iv)+20*Sin(Im*bj_DEGTORAD)
local group I2
local unit CE
call SaveInteger(Ia,Ix,0,LoadInteger(Ia,Ix,0)-1)
if LoadInteger(Ia,Ix,0)<=0 or GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or IsTerrainPathable(It,Iu,PATHING_TYPE_AMPHIBIOUSPATHING)==true then
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$51454646))
call DestroyEffect(AddSpecialEffect("war3mapImported\\RW_Q.mdx",GetUnitX(Iv),GetUnitY(Iv)))
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),220.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(Iv,UNIT_STATE_LIFE)>=.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)!=true and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\RW_QXY.mdx",CE,"origin"))
call UnitDamageTarget(Iv,CE,LoadReal(Ia,Ix,$3064616D)*.15,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_METAL_HEAVY_CHOP)
endif
endloop
call DestroyGroup(I2)
endif
set CS=null
set Iv=null
set I2=null
set CE=null
endfunction
function e4 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
if GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or LoadReal(Ia,Ix,$726A7371)<=0. or LoadBoolean(Ia,GetHandleId(Iv),$52575132)==false then
if LoadReal(Ia,Ix,$726A7371)<=0. and LoadBoolean(Ia,GetHandleId(Iv),$52575132) then
call SaveBoolean(Ia,GetHandleId(Iv),$52575132,false)
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$514A5351))
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595039,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595051,true)
endif
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
else
call SaveReal(Ia,Ix,$726A7371,LoadReal(Ia,Ix,$726A7371)-.1)
endif
set CS=null
set Iv=null
endfunction
function e5 takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595051,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595039,true)
call SaveBoolean(Ia,GetHandleId(Iv),$52575132,true)
call SaveEffectHandle(Ia,GetHandleId(Iv),$514A5351,AddSpecialEffectTarget("war3mapImported\\RW_QJS.mdx",Iv,"overhead"))
call SaveReal(Ia,Ix,$726A7371,3.)
call TimerStart(CS,.1,true,function e4)
set CS=null
set Iv=null
endfunction
function e6 takes unit Iv,integer JZ returns nothing
local timer CS
local integer Ix
local real Ii=bk(Iv,1,GetUnitAbilityLevel(Iv,$41595051))+GetUnitState(Iv,ConvertUnitState(21))*2
local real Im=GetUnitFacing(Iv)
if JZ==$41595051 then
if LoadInteger(Ia,GetHandleId(Iv),$41595030)-$41595030<3 then
call SaveInteger(Ia,GetHandleId(Iv),$41595030,LoadInteger(Ia,GetHandleId(Iv),$41595030)+1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)-1,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)+0,true)
endif
call SetUnitAnimationByIndex(Iv,9)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.2,false,function e5)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveReal(Ia,Ix,$30616E67,Im)
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveEffectHandle(Ia,GetHandleId(Iv),$51454646,AddSpecialEffectTarget("war3mapImported\\RW_QS.mdx",Iv,"sprite first"))
call SaveInteger(Ia,Ix,0,10)
call TimerStart(CS,.03,true,function e3)
elseif JZ==$41595039 and LoadBoolean(Ia,GetHandleId(Iv),$52575132) then
if LoadInteger(Ia,GetHandleId(Iv),$41595030)-$41595030<3 then
call SaveInteger(Ia,GetHandleId(Iv),$41595030,LoadInteger(Ia,GetHandleId(Iv),$41595030)+1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)-1,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)+0,true)
endif
call SaveBoolean(Ia,GetHandleId(Iv),$52575132,false)
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$514A5351))
call SetUnitAnimationByIndex(Iv,10)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.2,false,function e2)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveReal(Ia,Ix,$30616E67,Im)
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveEffectHandle(Ia,GetHandleId(Iv),$51454646,AddSpecialEffectTarget("war3mapImported\\RW_QS.mdx",Iv,"sprite first"))
call SaveInteger(Ia,Ix,0,10)
call TimerStart(CS,.03,true,function e0)
elseif JZ==$41595038 and LoadBoolean(Ia,GetHandleId(Iv),$52575133) then
if LoadInteger(Ia,GetHandleId(Iv),$41595030)-$41595030<3 then
call SaveInteger(Ia,GetHandleId(Iv),$41595030,LoadInteger(Ia,GetHandleId(Iv),$41595030)+1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)-1,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),LoadInteger(Ia,GetHandleId(Iv),$41595030)+0,true)
endif
call aD(Iv)
call SaveBoolean(Ia,GetHandleId(Iv),$52575133,false)
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$514A5351))
call SetUnitAnimationByIndex(Iv,11)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595038,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41595051,true)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveReal(Ia,Ix,$30616E67,Im)
call SaveReal(Ia,Ix,$3064616D,Ii)
call SaveEffectHandle(Ia,GetHandleId(Iv),$51454646,AddSpecialEffectTarget("war3mapImported\\RW_QS.mdx",Iv,"sprite first"))
call SaveInteger(Ia,Ix,0,10)
call TimerStart(CS,.03,true,function ez)
endif
set CS=null
endfunction
function e7 takes integer PQ,group PR returns group
set bj_randomSubGroupGroup=CreateGroup()
set bj_randomSubGroupWant=PQ
set bj_randomSubGroupTotal=CountUnitsInGroup(PR)
if bj_randomSubGroupWant<=0 or bj_randomSubGroupTotal<=0 then
return bj_randomSubGroupGroup
endif
call ForGroup(PR,function am)
return bj_randomSubGroupGroup
endfunction
function fB takes unit I6,unit P8,real LO returns nothing
local location P9=GetUnitLoc(P8)
call az(I6,P9,LO)
call RemoveLocation(P9)
set P9=null
endfunction
function fC takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local integer TZ=LoadInteger(Ia,Ix,0)-1
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local unit UV=LoadUnitHandle(Ia,Ix,$30306D6A)
local real It=LoadReal(Ia,Ix,$30303078)
local real Iu=LoadReal(Ia,Ix,$30303079)
local real Ii=LoadReal(Ia,Ix,-1)
local unit CE
local group I2=CreateGroup()
call SaveInteger(Ia,Ix,0,TZ)
call GroupEnumUnitsInRange(I2,GetUnitX(UV),GetUnitY(UV),550,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and CE!=UV and GetWidgetLife(CE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Iv)) and GetUnitDefaultMoveSpeed(CE)>0. and GetUnitAbilityLevel(CE,$416C6F63)==0 and GetUnitAbilityLevel(CE,$4176756C)==0 then
call UnitDamageTarget(Iv,CE,Ii,false,false,L,N,WEAPON_TYPE_WHOKNOWS)
if GetWidgetLife(CE)>.405 then
call SetUnitPosition(CE,It,Iu)
endif
endif
endloop
call DestroyGroup(I2)
if TZ<=0 then
call RemoveUnit(UV)
call FlushChildHashtable(Ia,Ix)
call PauseTimer(CS)
call DestroyTimer(CS)
endif
set CS=null
set I2=null
set Iv=null
set CE=null
set UV=null
endfunction
function fD takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local real It=GetUnitX(LE)
local real Iu=GetUnitY(LE)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,R2S(bk(Iv,0,GetUnitAbilityLevel(Iv,$41594A35))))
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveUnitHandle(Ia,Ix,$30306D6A,CreateUnit(GetOwningPlayer(Iv),$65505430,It,Iu,0))
call SaveInteger(Ia,Ix,0,20)
call SaveReal(Ia,Ix,$30303078,It)
call SaveReal(Ia,Ix,$30303079,Iu)
call SaveReal(Ia,Ix,-1,bk(Iv,0,GetUnitAbilityLevel(Iv,$41594A35)))
call TimerStart(CS,.25,true,function fC)
set CS=null
endfunction
function fE takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
call SaveInteger(Ia,Ix,$30303069,LoadInteger(Ia,Ix,$30303069)-1)
if LoadInteger(Ia,Ix,$30303069)<=0 or GetUnitAbilityLevel(LoadUnitHandle(Ia,Ix,$6865726F),$41594A39)==1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(Ia,Ix,$6865726F)),$41594A39,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(Ia,Ix,$6865726F)),$41594A31,true)
call SetUnitAbilityLevel(LoadUnitHandle(Ia,Ix,$6865726F),$41594A39,1)
call PauseTimer(CS)
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
endfunction
function fF takes unit Iv,unit CE,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SetUnitPosition(LE,GetUnitX(CE),GetUnitY(CE))
call IssueTargetOrderById(LE,851983,CE)
call UnitDamageTarget(Iv,CE,GetUnitState(Iv,ConvertUnitState(21))*5,false,false,K,N,WEAPON_TYPE_WHOKNOWS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41594A31,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41594A39,true)
call SetUnitAbilityLevel(Iv,$41594A39,2)
call SaveInteger(Ia,Ix,$30303069,5)
call TimerStart(CS,1,true,function fE)
set CS=null
endfunction
function fH takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local unit Ij=MX[FN]
local unit CE=null
local group I2=CreateGroup()
local real Im=0
set Hi[FN]=Hi[FN]+1
call GroupEnumUnitsInRange(I2,Hj[FN],Hk[FN],500,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and GetUnitAbilityLevel(CE,$4176756C)<1 and (IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)) then
set Im=bj_RADTODEG*Atan2(Hk[FN]-GetUnitY(CE),Hj[FN]-GetUnitX(CE))
call SetUnitPosition(CE,GetUnitX(CE)+30.*CosBJ(Im),GetUnitY(CE)+30.*SinBJ(Im))
call UnitDamageTarget(Ij,CE,Gx[FN],false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
set CE=null
endloop
if Hi[FN]>=30 or GetUnitCurrentOrder(MX[FN])!=String2OrderIdBJ("rainoffire") then
set MX[FN]=null
call bh(FN)
endif
call DestroyGroup(I2)
set I2=null
set CE=null
set Ij=null
endfunction
function fI takes unit Iv,integer Pt,real It,real Iu returns nothing
local integer FN=bf()
set Hi[FN]=0
set Gx[FN]=bk(Iv,3,Pt)*.025
set MX[FN]=Iv
set Hj[FN]=It
set Hk[FN]=Iu
call TimerStart(Gt[FN],.1,true,function fH)
endfunction
function fJ takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer JV=Hi[FN]
local unit Ij=MX[FN]
local unit CE=null
local group I2=CreateGroup()
set JV=JV+1
set Hi[FN]=JV
call GroupEnumUnitsInRange(I2,GetUnitX(MX[FN]),GetUnitY(MX[FN]),550,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and GetUnitAbilityLevel(CE,$4176756C)<1 and (IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)) then
call UnitDamageTarget(Ij,CE,HO[FN],false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
set CE=null
endloop
if JV>=33 or GetUnitState(Ij,ConvertUnitState(0))<1 then
call bh(FN)
set MX[FN]=null
endif
call DestroyGroup(I2)
set I2=null
set CE=null
set Ij=null
endfunction
function fK takes unit Iv returns nothing
local integer FN=0
set FN=bf()
set Hi[FN]=0
set HO[FN]=bk(Iv,3,GetUnitAbilityLevel(Iv,$41304642))*.025
set MX[FN]=Iv
call TimerStart(Gt[FN],.1,true,function fJ)
endfunction
function fL takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer JV=Hi[FN]
local unit Ij=MX[FN]
local unit CE=null
local group I2=CreateGroup()
set JV=JV+1
set Hi[FN]=JV
call GroupEnumUnitsInRange(I2,Hj[FN],Hk[FN],1100,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and GetUnitAbilityLevel(CE,$4176756C)<1 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true then
call UnitDamageTarget(Ij,CE,HO[FN],false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
set CE=null
endloop
if JV>=40 then
call bh(FN)
set MX[FN]=null
endif
call DestroyGroup(I2)
set I2=null
set CE=null
set Ij=null
endfunction
function fM takes unit Iv,real It,real Iu returns nothing
local integer FN=0
set FN=bf()
set Hi[FN]=0
set HO[FN]=bk(Iv,3,GetUnitAbilityLevel(Iv,$41303435)*2+3)*.03
set MX[FN]=Iv
set Hj[FN]=It
set Hk[FN]=Iu
call TimerStart(Gt[FN],.15,true,function fL)
endfunction
function fN takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\0098.mdl",Iv,"chest"))
call bs(Iv,LoadReal(Ia,Ix,1),LoadReal(Ia,Ix,2),550.,999999,5,0)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
set CS=null
set Iv=null
endfunction
function fO takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local group I2=CreateGroup()
local unit CE
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),550.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and IsUnitVisible(CE,GetOwningPlayer(Iv))==true and IsUnitType(CE,UNIT_TYPE_ANCIENT)==false then
call SetUnitInvulnerable(CE,false)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,1,GetUnitX(Iv))
call SaveReal(Ia,Ix,2,GetUnitY(Iv))
call TimerStart(CS,3,false,function fN)
set CS=null
endfunction
function fP takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local integer FZ=9
local unit Iv=LoadUnitHandle(Ia,Ix,$68303030)
local real It=0.
local real Iu=0.
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
call bt(Iv,LoadReal(Ia,Ix,$78303030),LoadReal(Ia,Ix,$79303030),550.,LoadReal(Ia,Ix,$64616D30),.01,3,2)
loop
exitwhen FZ<=0
set It=I2R(GetRandomInt(-6,6))*100+LoadReal(Ia,Ix,$78303030)
set Iu=I2R(GetRandomInt(-6,6))*100+LoadReal(Ia,Ix,$79303030)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",It,Iu))
set FZ=FZ-1
endloop
if LoadInteger(Ia,Ix,1)<=0 then
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
endfunction
function fQ takes unit Iv,integer Pt,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveReal(Ia,Ix,$78303030,It)
call SaveReal(Ia,Ix,$79303030,Iu)
call SaveUnitHandle(Ia,Ix,$68303030,Iv)
call SaveReal(Ia,Ix,$64616D30,bk(Iv,3,Pt+3)*.2)
call SaveInteger(Ia,Ix,1,20)
call TimerStart(CS,.5,true,function fP)
set CS=null
endfunction
function fR takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local integer FZ=0
local unit Iv=LoadUnitHandle(Ia,Ix,$68303030)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
call bs(Iv,LoadReal(Ia,Ix,$78303030),LoadReal(Ia,Ix,$79303030),550.,LoadReal(Ia,Ix,$64616D30),3,2)
if LoadInteger(Ia,Ix,1)<=0 then
loop
exitwhen FZ>=60
call RemoveDestructable(LoadDestructableHandle(Ia,Ix,FZ))
set FZ=FZ+1
endloop
call RemoveUnit(LoadUnitHandle(Ia,Ix,$75303030))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
endfunction
function fS takes unit Iv,integer Pt,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer FZ=0
local real T7=0.
local real T8=0.
loop
exitwhen FZ>=60
set T7=It*1.+500*1.*Cos(I2R(FZ)*6.*1.*bj_DEGTORAD)
set T8=Iu*1.+500*1.*Sin(I2R(FZ)*6.*1.*bj_DEGTORAD)
call SaveDestructableHandle(Ia,Ix,FZ,CreateDestructableZ($59546662,T7,T8,0.,0.,1,0))
set FZ=FZ+1
endloop
call SaveUnitHandle(Ia,Ix,$75303030,CreateUnit(GetOwningPlayer(Iv),$654A5A30,It,Iu,0))
call SaveUnitHandle(Ia,Ix,$68303030,Iv)
call SaveReal(Ia,Ix,$64616D30,bk(Iv,3,Pt)*.25)
call SaveReal(Ia,Ix,$78303030,It)
call SaveReal(Ia,Ix,$79303030,Iu)
call SaveInteger(Ia,Ix,1,5)
call TimerStart(CS,1.,true,function fR)
set CS=null
endfunction
function fT takes unit Iv,integer Pt,real It,real Iu returns nothing
local unit CE=null
local group I2=CreateGroup()
local real Im=bQ(Iv,It,Iu)
local real T7=It*1.+100*1.*Cos(Im*1.*bj_DEGTORAD)
local real T8=Iu*1.+100*1.*Sin(Im*1.*bj_DEGTORAD)
local real Ii=bk(Iv,3,Pt)
if IsTerrainPathable(It,Iu,PATHING_TYPE_WALKABILITY)==false then
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
endif
call GroupEnumUnitsInRange(I2,It,Iu,380.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Iv and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true and GetWidgetLife(CE)>.405 and GetUnitAbilityLevel(CE,$416C6F63)==0 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call SetUnitPosition(CE,It,Iu)
call UnitDamageTarget(Iv,CE,Ii,false,false,I,M,WEAPON_TYPE_WHOKNOWS)
endif
endloop
call DestroyGroup(I2)
set I2=null
endfunction
function fU takes unit Iv,unit CE,real Ii returns real
call SaveInteger(Ia,GetHandleId(Iv),$415A5957,LoadInteger(Ia,GetHandleId(Iv),$415A5957)+1)
if LoadInteger(Ia,GetHandleId(Iv),$415A5957)>=3 and GetUnitState(CE,ConvertUnitState(0))>.405 then
call SaveInteger(Ia,GetHandleId(Iv),$415A5957,0)
call bd(Iv,CE,10,30,0,0,bk(Iv,0,GetUnitAbilityLevel(Iv,$415A5957))*.5,2)
endif
return I2R(GetHeroAgi(Iv,true))
endfunction
function fV takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
if LoadInteger(Ia,Ix,1)<=0 or GetUnitAbilityLevel(Iv,$415A5931)<2 then
call DestroyTimer(CS)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5931,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5951,true)
call FlushChildHashtable(Ia,Ix)
endif
set CS=null
set Iv=null
endfunction
function fW takes unit Iv returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveInteger(Ia,Ix,1,3)
call TimerStart(CS,1,true,function fV)
set CS=null
endfunction
function fX takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local unit CE=LoadUnitHandle(Ia,Ix,1)
local real Im=bN(Iv,CE)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(CE),GetUnitY(CE)))
if GetUnitState(CE,ConvertUnitState(0))<=.405 or GetUnitState(CE,ConvertUnitState(0))<=.405 or LoadInteger(Ia,Ix,1)<=0 then
call DestroyTimer(CS)
call bs(Iv,GetUnitX(CE),GetUnitY(CE),300,bk(Iv,0,GetUnitAbilityLevel(Iv,$415A5951)),1,0)
call FlushChildHashtable(Ia,Ix)
else
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",CE,"chest"))
call bR(CE,Im,50.)
endif
set CS=null
set Iv=null
set CE=null
endfunction
function fY takes unit Iv,unit CE,real Im returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveUnitHandle(Ia,Ix,1,CE)
call SaveInteger(Ia,Ix,1,7)
call SaveReal(Ia,Ix,$30616E67,Im)
call SaveUnitHandle(Ia,GetHandleId(Iv),$9BF1033F,CE)
call TimerStart(CS,.02,true,function fX)
set CS=null
endfunction
function fZ takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,0)
local unit CE=LoadUnitHandle(Ia,Ix,1)
local real It=LoadReal(Ia,Ix,$30303078)
local real Iu=LoadReal(Ia,Ix,$30303079)
local real In=bP(Iv,It,Iu)
local real Uy=bO(Iv,CE)
local real Im=bN(Iv,CE)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
if LoadInteger(Ia,Ix,1)<1 or GetUnitState(Iv,ConvertUnitState(0))<=.405 or GetUnitState(CE,ConvertUnitState(0))<=.405 or In>100 then
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
call SetUnitAbilityLevel(Iv,$415A5931,1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5931,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5951,true)
endif
if Uy<120 then
call DestroyTimer(CS)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),220,bk(Iv,0,GetUnitAbilityLevel(Iv,$415A5951))*.5,1,0)
if GetUnitState(CE,ConvertUnitState(0))>.405 then
call fY(Iv,CE,Im)
endif
call FlushChildHashtable(Ia,Ix)
else
set CE=CreateUnit(GetOwningPlayer(Iv),$655A5930,It,Iu,Im)
call UnitApplyTimedLife(CE,$42487765,.5)
call SetUnitTimeScale(CE,2.)
call SetUnitAnimation(CE,"attack")
call SetUnitColor(CE,Qe[GetRandomInt(1,8)])
call bV(Iv,GetUnitX(Iv),GetUnitY(Iv),Im,60)
call SaveReal(Ia,Ix,$30303078,GetUnitX(Iv))
call SaveReal(Ia,Ix,$30303079,GetUnitY(Iv))
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(Iv),GetUnitY(Iv)))
endif
set CS=null
set Iv=null
set CE=null
endfunction
function fa takes unit Iv,unit CE returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call SaveUnitHandle(Ia,Ix,1,CE)
call SaveReal(Ia,Ix,$30303078,GetUnitX(Iv))
call SaveReal(Ia,Ix,$30303079,GetUnitY(Iv))
call SaveInteger(Ia,Ix,1,R2I(bO(Iv,CE)/60)+5)
call SaveUnitHandle(Ia,GetHandleId(Iv),$9BF1033F,CE)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5951,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5931,true)
call SetUnitAbilityLevel(Iv,$415A5931,2)
call fW(Iv)
call TimerStart(CS,.015,true,function fZ)
endfunction
function fb takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local integer FZ=LoadInteger(Ia,Ix,1)-1
local real It=LoadReal(Ia,Ix,1)
local real Iu=LoadReal(Ia,Ix,2)
call SaveInteger(Ia,Ix,1,FZ)
if FZ<=0 or GetUnitCurrentOrder(Iv)!=852652 then
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call bs(Iv,It,Iu,550.,LoadReal(Ia,Ix,$64616D30),4,0)
endif
set CS=null
set Iv=null
endfunction
function fc takes unit Iv,real Ii,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveReal(Ia,Ix,$64616D30,Ii)
call SaveReal(Ia,Ix,1,It)
call SaveReal(Ia,Ix,2,Iu)
call SaveInteger(Ia,Ix,1,50)
call TimerStart(CS,.1,true,function fb)
set CS=null
endfunction
function fd takes unit CE,integer MQ,real KT returns nothing
if MQ>0 then
if KT==1. then
set Hf[GetPlayerId(GetOwningPlayer(CE))+1]=MQ
call UnitAddAbility(CE,KU[MQ])
call UnitMakeAbilityPermanent(CE,true,KU[MQ])
elseif KT==-1. then
call UnitRemoveAbility(CE,KU[MQ])
set Hf[GetPlayerId(GetOwningPlayer(CE))+1]=0
endif
if MQ==1 then
call SetUnitState(CE,UNIT_STATE_MAX_LIFE,GetUnitState(CE,UNIT_STATE_MAX_LIFE)+100.*KT)
call SetUnitState(CE,UNIT_STATE_MAX_MANA,GetUnitState(CE,UNIT_STATE_MAX_MANA)+100.*KT)
call SetUnitState(CE,ConvertUnitState(37),GetUnitState(CE,ConvertUnitState(37))-.05*KT)
elseif MQ==2 then
call SetUnitState(CE,UNIT_STATE_MAX_LIFE,GetUnitState(CE,UNIT_STATE_MAX_LIFE)+150.*KT)
call SetUnitState(CE,UNIT_STATE_MAX_MANA,GetUnitState(CE,UNIT_STATE_MAX_MANA)+150.*KT)
call SetUnitState(CE,ConvertUnitState(37),GetUnitState(CE,ConvertUnitState(37))-.05*KT)
elseif MQ<=8 and MQ>2 then
call SetUnitState(CE,UNIT_STATE_MAX_LIFE,GetUnitState(CE,UNIT_STATE_MAX_LIFE)+200.*KT)
call SetUnitState(CE,UNIT_STATE_MAX_MANA,GetUnitState(CE,UNIT_STATE_MAX_MANA)+200.*KT)
call SetUnitState(CE,ConvertUnitState(37),GetUnitState(CE,ConvertUnitState(37))-.1*KT)
endif
endif
endfunction
function fe takes unit CE,integer MO,integer KT returns nothing
local integer MP=GetPlayerId(GetOwningPlayer(CE))+1
if KT==1 then
set Hf[GetPlayerId(GetOwningPlayer(CE))+1]=MO
call fd(CE,MO,1.)
elseif KT==-1 then
if MO>0 then
call fd(CE,MO,-1.)
endif
elseif KT==7 then
if MO==1 then
if Gp[MP]>=300 and ModuloInteger(He[MP],2)!=1 then
set KT=300
set He[MP]=He[MP]+1
else
call DisplayTextToPlayer(GetOwningPlayer(CE),0,0,"|cffff0000积分不足300,当前游戏积分为: |r"+I2S(Gp[MP]))
endif
elseif MO==2 then
if Gp[MP]>=600 and ModuloInteger(He[MP],4)<2 then
set KT=600
set He[MP]=He[MP]+2
else
call DisplayTextToPlayer(GetOwningPlayer(CE),0,0,"|cffff0000积分不足600,当前游戏积分为: |r"+I2S(Gp[MP]))
endif
endif
if KT>9 then
if Hf[MP]>0 then
call fd(CE,Hf[MP],-1.)
endif
set Gp[MP]=Gp[MP]-KT
call cX(GetTriggerPlayer(),$B3B2543A,"游戏积分",I2S(Gp[MP]),1)
call cX(GetTriggerPlayer(),$B3B2543A,"NEW",I2S(Gp[MP]),1)
call cX(GetTriggerPlayer(),$B3B2543A,"拥有翅膀",I2S(He[MP]),1)
call DisplayTextToPlayer(GetOwningPlayer(CE),0,0,"|cffff0000兑换后游戏积分为: |r"+I2S(Gp[MP]))
call DisplayTextToPlayer(GetOwningPlayer(CE),0,0,"|cffff0000有翅膀: |r"+I2S(He[MP]))
call fd(CE,MO,1.)
endif
elseif KT==8 then
call UnitRemoveAbility(CE,KU[Hf[MP]])
endif
endfunction
function ff takes nothing returns nothing
set IV=DzAPI_Map_GetMapConfig("Hex")
set IW=IMaxBJ(3843,S2I(DzAPI_Map_GetMapConfig("Nkey")))
set IX=IMaxBJ(1237,S2I(DzAPI_Map_GetMapConfig("Xkey")))
set IY=S2I(DzAPI_Map_GetMapConfig("Abin"))
set IZ[0]="234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1"
set IZ[1]="34567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12"
set IZ[2]="4567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123"
set IZ[3]="567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234"
set IZ[4]="67890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12345"
set IZ[5]="7890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456"
set IZ[6]="890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567"
set IZ[7]="90abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12345678"
set IZ[8]="0abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789"
set IZ[9]="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"
set IZ[10]="bcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890a"
set IZ[11]="cdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890ab"
set IZ[12]="defghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abc"
set IZ[13]="efghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcd"
set IZ[14]="fghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcde"
set IZ[15]="ghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdef"
set IZ[16]="hijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefg"
set IZ[17]="ijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefgh"
set IZ[18]="jklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghi"
set IZ[19]="klmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghij"
set IZ[20]="lmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijk"
set IZ[21]="mnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijkl"
set IZ[22]="nopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklm"
set IZ[23]="opqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmn"
set IZ[24]="pqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmno"
set IZ[25]="qrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnop"
set IZ[26]="rstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopq"
set IZ[27]="stuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqr"
set IZ[28]="tuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrs"
set IZ[29]="uvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrst"
set IZ[30]="vwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstu"
set IZ[31]="wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuv"
set IZ[32]="xyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvw"
set IZ[33]="yzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwx"
set IZ[34]="zABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxy"
set IZ[35]="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyz"
set IZ[36]="BCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzA"
set IZ[37]="CDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzAB"
set IZ[38]="DEFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABC"
set IZ[39]="EFGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCD"
set IZ[40]="FGHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDE"
set IZ[41]="GHIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEF"
set IZ[42]="HIJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFG"
set IZ[43]="IJKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGH"
set IZ[44]="JKLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHI"
set IZ[45]="KLMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJ"
set IZ[46]="LMNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJK"
set IZ[47]="MNOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKL"
set IZ[48]="NOPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLM"
set IZ[49]="OPQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN"
set IZ[50]="PQRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNO"
set IZ[51]="QRSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP"
set IZ[52]="RSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQ"
set IZ[53]="STUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQR"
set IZ[54]="TUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRS"
set IZ[55]="UVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRST"
set IZ[56]="VWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTU"
set IZ[57]="WXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUV"
set IZ[58]="XYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVW"
set IZ[59]="YZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX"
set IZ[60]="Z1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXY"
set IZ[61]="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
if IV=="" then
set IV="RSTUVWXYZ1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQ"
endif
endfunction
function fg takes string Kf returns integer
local integer Kg=0
local integer FZ=0
local integer Kh
if StringLength(Kf)>5 then
return Kg
endif
loop
exitwhen FZ==StringLength(Kf)
set Kh=0
loop
exitwhen SubString(Kf,FZ,FZ+1)==SubString(IV,Kh,Kh+1)
set Kh=Kh+1
endloop
set Kg=Kg+Kh*R2I(Pow(62.,I2R(StringLength(Kf)-1-FZ)))
set FZ=FZ+1
endloop
return Kg
endfunction
function fh takes integer FZ returns string
local string Kg=""
local integer Kj=StringLength(IV)
local integer Kh
if FZ>$369B13DF then
return Kg
endif
loop
exitwhen FZ<Kj
set Kh=ModuloInteger(FZ,Kj)
set Kg=SubString(IV,Kh,Kh+1)+Kg
set FZ=FZ/Kj
endloop
set Kg=SubString(IV,FZ,FZ+1)+Kg
return Kg
endfunction
function fi takes string ML,string Kc returns string
local string Ks=""
local string Kl=""
local string Kq=""
local string Kr=""
local string Ku=""
local string Kd=""
local integer array Ke
local string Kn=""
local integer array Ko
local integer array Kp
local integer Kk=0
local integer Ki=0
local integer Kj=0
local string Kt=""
loop
exitwhen StringLength(Kd)>=28
set Kd=Kd+I2S(IAbsBJ(StringHash(Kc)))
endloop
set Kd=SubString(Kd,0,28)
set Ke[0]=ModuloInteger(fg(SubString(Kd,0,4)),62)
set Ke[1]=ModuloInteger(fg(SubString(Kd,4,8)),62)
set Ke[2]=ModuloInteger(fg(SubString(Kd,8,12)),62)
set Ke[3]=ModuloInteger(fg(SubString(Kd,12,16)),62)
set Ke[4]=ModuloInteger(fg(SubString(Kd,16,20)),62)
set Ke[5]=ModuloInteger(fg(SubString(Kd,20,24)),62)
set Ke[6]=ModuloInteger(fg(SubString(Kd,24,28)),62)
loop
exitwhen StringLength(Kn)==5
set Ki=GetRandomInt(0,61)
set Kn=Kn+SubString(Km,Ki,Ki+1)
endloop
set Ko[0]=fg(SubString(Kn,0,1))
set Ko[1]=fg(SubString(Kn,1,2))
set Ko[2]=fg(SubString(Kn,2,3))
set Ko[3]=fg(SubString(Kn,3,4))
set Ko[4]=fg(SubString(Kn,4,5))
set Kp[0]=ModuloInteger(fg(SubString(Kn,0,2)),62)
set Kp[1]=ModuloInteger(fg(SubString(Kn,1,3)),62)
set Kp[2]=ModuloInteger(fg(SubString(Kn,2,4)),62)
set Kp[3]=ModuloInteger(fg(SubString(Kn,3,5)),62)
loop
exitwhen StringLength(Kt)>=5
set Kt=Kt+fh(ModuloInteger(IAbsBJ(StringHash(ML)),238328))
endloop
set Kt=SubString(Kt,0,5)
set Kr=SubString(Kd,0,5)+Kt+Kn
set Ki=0
loop
exitwhen Ki==15
set Kk=0
loop
exitwhen Kk>61
if SubString(Kr,Ki,Ki+1)==SubString(Km,Kk,Kk+1) then
set Ku=Ku+SubString(IZ[Kp[ModuloInteger(Ki,4)]],Kk,Kk+1)
set Kk=61
endif
set Kk=Kk+1
endloop
set Ki=Ki+1
endloop
set Kl=ML+Ku
set Ki=0
set Kj=StringLength(Kl)
loop
exitwhen Ki==Kj
set Kk=0
loop
exitwhen Kk>61
if SubString(Kl,Ki,Ki+1)==SubString(Km,Kk,Kk+1) then
set Kq=Kq+SubString(IZ[Ko[ModuloInteger(Ki,5)]],Kk,Kk+1)
set Kk=61
endif
set Kk=Kk+1
endloop
set Ki=Ki+1
endloop
set Kq=Kn+Kq
set Ki=0
set Kj=StringLength(Kq)
loop
exitwhen Ki==Kj
set Kk=0
loop
exitwhen Kk>61
if SubString(Kq,Ki,Ki+1)==SubString(Km,Kk,Kk+1) then
set Ks=Ks+SubString(IZ[Ke[ModuloInteger(Ki,7)]],Kk,Kk+1)
set Kk=61
endif
set Kk=Kk+1
endloop
set Ki=Ki+1
endloop
return Ks
endfunction
function fj takes string Kb,string Kc returns string
local string Ks=""
local string Kl=""
local string Kq=""
local string Kr=""
local string Ku=""
local string Kd=""
local integer array Ke
local string Kn=""
local integer array Ko
local integer array Kp
local integer Kk=0
local integer Ki=0
local integer Kj=0
local string Kt=""
loop
exitwhen StringLength(Kd)>=28
set Kd=Kd+I2S(IAbsBJ(StringHash(Kc)))
endloop
set Kd=SubString(Kd,0,28)
set Ke[0]=ModuloInteger(fg(SubString(Kd,0,4)),62)
set Ke[1]=ModuloInteger(fg(SubString(Kd,4,8)),62)
set Ke[2]=ModuloInteger(fg(SubString(Kd,8,12)),62)
set Ke[3]=ModuloInteger(fg(SubString(Kd,12,16)),62)
set Ke[4]=ModuloInteger(fg(SubString(Kd,16,20)),62)
set Ke[5]=ModuloInteger(fg(SubString(Kd,20,24)),62)
set Ke[6]=ModuloInteger(fg(SubString(Kd,24,28)),62)
set Ki=0
set Kj=StringLength(Kb)
loop
exitwhen Ki==Kj
set Kk=0
loop
exitwhen Kk>61
if SubString(Kb,Ki,Ki+1)==SubString(IZ[Ke[ModuloInteger(Ki,7)]],Kk,Kk+1) then
set Kl=Kl+SubString(Km,Kk,Kk+1)
set Kk=61
endif
set Kk=Kk+1
endloop
set Ki=Ki+1
endloop
set Kn=SubString(Kl,0,5)
set Kl=SubString(Kl,5,Kj)
set Ko[0]=fg(SubString(Kn,0,1))
set Ko[1]=fg(SubString(Kn,1,2))
set Ko[2]=fg(SubString(Kn,2,3))
set Ko[3]=fg(SubString(Kn,3,4))
set Ko[4]=fg(SubString(Kn,4,5))
set Kp[0]=ModuloInteger(fg(SubString(Kn,0,2)),62)
set Kp[1]=ModuloInteger(fg(SubString(Kn,1,3)),62)
set Kp[2]=ModuloInteger(fg(SubString(Kn,2,4)),62)
set Kp[3]=ModuloInteger(fg(SubString(Kn,3,5)),62)
set Ki=0
set Kj=StringLength(Kl)
loop
exitwhen Ki==Kj
set Kk=0
loop
exitwhen Kk>61
if SubString(Kl,Ki,Ki+1)==SubString(IZ[Ko[ModuloInteger(Ki,5)]],Kk,Kk+1) then
set Kq=Kq+SubString(Km,Kk,Kk+1)
set Kk=61
endif
set Kk=Kk+1
endloop
set Ki=Ki+1
endloop
set Kr=SubString(Kq,Kj-15,Kj)
set Ks=SubString(Kq,0,Kj-15)
loop
exitwhen StringLength(Kt)>=5
set Kt=Kt+fh(ModuloInteger(IAbsBJ(StringHash(Ks)),238328))
endloop
set Kt=SubString(Kt,0,5)
set Kq=SubString(Kd,0,5)+Kt+Kn
set Ki=0
loop
exitwhen Ki==15
set Kk=0
loop
exitwhen Kk>61
if SubString(Kr,Ki,Ki+1)==SubString(IZ[Kp[ModuloInteger(Ki,4)]],Kk,Kk+1) then
set Ku=Ku+SubString(Km,Kk,Kk+1)
set Kk=61
endif
set Kk=Kk+1
endloop
set Ki=Ki+1
endloop
if Ku==Kq then
return Ks
else
return "No way"
endif
endfunction
function fk takes player CC returns integer
local integer Iw=0
local integer Kw=0
local integer KX=GetPlayerId(CC)+1
local string I5=cX(CC,$86D499F9,"WHJ29",null,0)
local string Kv=Hg[KX]
local string Ka
local integer KZ=0
set KZ=S2I(cX(CC,$1FAC80C2,"SCORE",null,0))
if I5!="" then
set Ka=fj(I5,Kv)
if Ka!="No way" then
set Iw=fg(SubString(Ka,0,3))
set Kw=fg(SubString(Ka,3,9))
if ModuloInteger(Iw,IW)!=Kw or KZ!=Iw then
set Iw=0
endif
endif
endif
set I5=""
set Kv=""
set Ka=""
set I5=null
set Kv=null
set Ka=null
return Iw
endfunction
function fl takes player J1,real It,real Iu,real LO returns nothing
if GetLocalPlayer()==J1 then
call PanCameraToTimed(It,Iu,LO)
endif
endfunction
function fm takes player J1,rect JT returns nothing
local real LK=GetRectMinX(JT)
local real LL=GetRectMinY(JT)
local real LM=GetRectMaxX(JT)
local real LN=GetRectMaxY(JT)
if GetLocalPlayer()==J1 then
call SetCameraBounds(LK,LL,LK,LN,LM,LN,LM,LL)
endif
endfunction
// 地图传送
function fn takes unit Iv,integer Ix returns nothing
if Ix==0 then
call fm(GetOwningPlayer(Iv),Bj)
call SetUnitPosition(Iv,-1200.,-5400.)
call fl(GetOwningPlayer(Iv),-1200.,-5400.,0.)
elseif Ix==1 then
call fm(GetOwningPlayer(Iv),Bj)
call SetUnitPosition(Iv,1200.,-5150.)
call fl(GetOwningPlayer(Iv),1200.,-5150.,0.)
elseif Ix==2 then
call fm(GetOwningPlayer(Iv),Bj)
call SetUnitPosition(Iv,-1666.,-7777.)
call fl(GetOwningPlayer(Iv),-1666.,-7777.,0.)
elseif Ix==$926BED59 then
call fm(GetOwningPlayer(Iv),bj_mapInitialPlayableArea)
call fl(GetOwningPlayer(Iv),-11900.,15240.,0.)
call SetUnitPosition(Iv,-11900.,15240.)
elseif Ix==$829190C then
call fm(GetOwningPlayer(Iv),Bm)
call fl(GetOwningPlayer(Iv),-12299.,-6333.,0.)
call SetUnitPosition(Iv,-12299.,-6333.)
elseif Ix==$D7C1D3B9 then
call fm(GetOwningPlayer(Iv),B7)
call fl(GetOwningPlayer(Iv),-13000.,1800.,0.)
call SetUnitPosition(Iv,-13000.,1800.)
elseif Ix==$21C1F451 then
call fm(GetOwningPlayer(Iv),Bo)
call fl(GetOwningPlayer(Iv),12300.,12400.,0.)
call SetUnitPosition(Iv,12300.,12400.)
elseif Ix==$324C3C80 then
call fm(GetOwningPlayer(Iv),Bq)
call fl(GetOwningPlayer(Iv),-13530.,-2150.,0.)
call SetUnitPosition(Iv,-13530.,-2150.)
elseif Ix==$17770F99 then
call fm(GetOwningPlayer(Iv),Bx)
call fl(GetOwningPlayer(Iv),-13372.,5823.,0.)
call SetUnitPosition(Iv,-13372.,5823.)
elseif Ix==$AF4698E1 then
call fm(GetOwningPlayer(Iv),Bj)
call fl(GetOwningPlayer(Iv),-7150.,9800.,0.)
call SetUnitPosition(Iv,-7150.,9800.)
elseif Ix==$E87EF9F then
call fm(GetOwningPlayer(Iv),By)
call fl(GetOwningPlayer(Iv),-9990.,950.,0.)
call SetUnitPosition(Iv,-9990.,950.)
elseif Ix==$F8DC6245 then
call fl(GetOwningPlayer(Iv),9792.,-4413.,0.)
call SetUnitPosition(Iv,9792.,-4413.)
elseif Ix==$CDE5E70A then
call fm(GetOwningPlayer(Iv),Bj)
call fl(GetOwningPlayer(Iv),1332.,-5179.,0.)
call SetUnitPosition(Iv,1332.,-5179.)
endif
endfunction
function fo takes player CC,integer Ix returns integer
local integer Iw=0
local integer Kw=0
local integer KX=GetPlayerId(CC)+1
local string I5=cX(CC,$86D499F9,"WHJ29",null,0)
local string Kv=Hg[KX]
local string Ka
local string MK
local integer KZ=0
set KZ=S2I(cX(CC,$1FAC80C2,"SCORE",null,0))
if I5!="" then
set Ka=fj(I5,Kv)
if Ka!="No way" then
set Iw=fg(SubString(Ka,0,3))
set Kw=fg(SubString(Ka,3,9))
if ModuloInteger(Iw,IW)==Kw and Iw==KZ then
set Iw=IMinBJ(Iw+Ix,IX)
set Ka=fh(Iw)
set Ka=SubStringBJ("0000000000",1,3-StringLength(Ka))+Ka
set MK=Ka
set Iw=ModuloInteger(Iw,IW)
set Ka=fh(Iw)
set Ka=SubStringBJ("0000000000",1,3-StringLength(Ka))+Ka
set MK=MK+Ka
set MK=fi(MK,Kv)
set KZ=KZ+Ix
call cX(CC,$64078743,"WHJ29",MK,1)
call cX(CC,$B3B2543A,"SCORE",I2S(KZ),1)
else
call DisplayTextToPlayer(Player(0),0,0,"Error")
set KZ=0
call cX(CC,$64078743,"WHJ29","",1)
call cX(CC,$B3B2543A,"SCORE","0",1)
endif
else
call DisplayTextToPlayer(Player(0),0,0,"No way")
set KZ=0
call cX(CC,$64078743,"WHJ29","",1)
call cX(CC,$B3B2543A,"SCORE","0",1)
endif
else
set Iw=IMinBJ(Iw+Ix,IX)
set Ka=fh(Iw)
set Ka=SubStringBJ("0000000000",1,3-StringLength(Ka))+Ka
set MK=Ka
set Iw=ModuloInteger(Iw,IW)
set Ka=fh(Iw)
set Ka=SubStringBJ("0000000000",1,3-StringLength(Ka))+Ka
set MK=MK+Ka
set MK=fi(MK,Kv)
set KZ=KZ+Ix
call cX(CC,$64078743,"WHJ29",MK,1)
call cX(CC,$B3B2543A,"SCORE",I2S(KZ),1)
endif
set I5=""
set Kv=""
set Ka=""
set MK=""
set I5=null
set Kv=null
set Ka=null
set MK=null
return KZ
endfunction
function fp takes nothing returns nothing
local integer FZ=0
set FZ=0
loop
exitwhen FZ>12
set Fa[FZ]=1
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>11
set Fb[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>11
set Fc[FZ]=0
set FZ=FZ+1
endloop
set Fd=0
set FZ=0
loop
exitwhen FZ>8
set Fe[FZ]=false
set FZ=FZ+1
endloop
set Ff=0
set Fg=DialogCreate()
set Fh=0
set FZ=0
loop
exitwhen FZ>9
set Fi[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Fj[FZ]=0
set FZ=FZ+1
endloop
set Fk=CreateTimer()
set Fl=0
set Fm=0
set FZ=0
loop
exitwhen FZ>1
set Fn[FZ]=0
set FZ=FZ+1
endloop
set Fo=1
set Fp=0
set Fq=CreateGroup()
set Fr=0
set FZ=0
loop
exitwhen FZ>4
set Fs[FZ]=CreateGroup()
set FZ=FZ+1
endloop
set Ft=CreateGroup()
set Fu=CreateGroup()
set Fv=CreateTimer()
set Fw=0
set Fx=0
set Fy=0
set Fz=0
set F0=0
set F1=0
set F2=CreateTimer()
set F3=0
set F4=0
set F5=0
set F6=0
set F7=0
set F8=0
set F9=0
set FZ=0
loop
exitwhen FZ>1
set GB[FZ]=0
set FZ=FZ+1
endloop
set GC=0
set GD=0
set GE=CreateGroup()
set FZ=0
loop
exitwhen FZ>1
set GF[FZ]=""
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set GG[FZ]=0
set FZ=FZ+1
endloop
set GH=0
set FZ=0
loop
exitwhen FZ>1
set GI[FZ]=0
set FZ=FZ+1
endloop
set GJ=CreateGroup()
set FZ=0
loop
exitwhen FZ>1
set GK[FZ]=0
set FZ=FZ+1
endloop
set GL=0
set GM=0
set GN=0
set GO=0
set GP=0
set GQ=0
set GR=0
set GS=0
set GT=CreateTimer()
set GU=CreateTimer()
set GV=0
set GW=CreateTimer()
set GX=CreateTimer()
set GY=0
set GZ=CreateTimer()
set Ga=CreateTimer()
set Gb=DialogCreate()
set Gc=0
set FZ=0
loop
exitwhen FZ>1
set Gd[FZ]=false
set FZ=FZ+1
endloop
set Ge=0
set Gf=CreateTimer()
set Gg=0
set Gh=CreateTimer()
set Gi=CreateTimer()
set Gj=0
set FZ=0
loop
exitwhen FZ>1
set Gk[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gl[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gm[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gn[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Go[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
// 修改游戏积分
set Gp[FZ]=80
set FZ=FZ+1
endloop
set Gq=0
set FZ=0
loop
exitwhen FZ>1
set Gr[FZ]=""
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gs[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gt[FZ]=CreateTimer()
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gu[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gv[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gw[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gx[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gy[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Gz[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set G0[FZ]=0
set FZ=FZ+1
endloop
set G1=false
set G2=CreateGroup()
set G3=CreateGroup()
set G4=CreateGroup()
set G5=0
set G6=CreateGroup()
set G7=CreateTimer()
set G8=CreateTimer()
set FZ=0
loop
exitwhen FZ>1
set G9[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HB[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HC[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HD[FZ]=0
set FZ=FZ+1
endloop
set HE=0
set HF=0
set FZ=0
loop
exitwhen FZ>1
set HG[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HH[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HI[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HJ[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>9
set HK[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HL[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HM[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HN[FZ]=CreateGroup()
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HO[FZ]=0
set FZ=FZ+1
endloop
set HP=0
set HQ=CreateForce()
set FZ=0
loop
exitwhen FZ>1
set HR[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set HS[FZ]=false
set FZ=FZ+1
endloop
set HT=CreateForce()
set HU=0
set HV=0
set HW=0
set HX=0
set HY=0
set HZ=0
set Ha=0
set FZ=0
loop
exitwhen FZ>1
set Hb[FZ]=0
set FZ=FZ+1
endloop
set Hc=DialogCreate()
set Hd=CreateTimer()
set FZ=0
loop
exitwhen FZ>1
set He[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hf[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hg[FZ]=""
set FZ=FZ+1
endloop
set Hh=CreateGroup()
set FZ=0
loop
exitwhen FZ>1
set Hi[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hj[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hk[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hl[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hm[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hn[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Ho[FZ]=false
set FZ=FZ+1
endloop
set Hp=0
set FZ=0
loop
exitwhen FZ>1
set Hq[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hr[FZ]=""
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hs[FZ]=false
set FZ=FZ+1
endloop
set Ht=CreateGroup()
set FZ=0
loop
exitwhen FZ>8
set Hu[FZ]=false
set FZ=FZ+1
endloop
set Hv=0
set FZ=0
loop
exitwhen FZ>8
set Hw[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set Hx[FZ]=CreateGroup()
set FZ=FZ+1
endloop
set Hy=CreateTimer()
set Hz=0
set H0=0
set H1=true
set H2=DialogCreate()
set H3=true
set H4=CreateTimer()
set FZ=0
loop
exitwhen FZ>1
set H5[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set H6[FZ]=""
set FZ=FZ+1
endloop
set H7=0
set FZ=0
loop
exitwhen FZ>1
set H8[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set H9[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set IB[FZ]=""
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set IC[FZ]=""
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set ID[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set IE[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>8
set IF[FZ]=true
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set IG[FZ]=false
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set IH[FZ]=0
set FZ=FZ+1
endloop
set FZ=0
loop
exitwhen FZ>1
set II[FZ]=0
set FZ=FZ+1
endloop
set IJ=CreateGroup()
set FZ=0
loop
exitwhen FZ>9
set IK[FZ]=false
set FZ=FZ+1
endloop
set IL=0
set FZ=0
loop
exitwhen FZ>9
set IM[FZ]=DialogCreate()
set FZ=FZ+1
endloop
set IN=false
set IO=false
set IP=DialogCreate()
set IQ=0
set IR=0
set IS=0
endfunction
function fq takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($636B6E67,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
call RandomDistReset()
call RandomDistAddItem($63686573,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function fr takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($776F6C67,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function fs takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($6B796D6E,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function ft takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($676D6672,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function fu takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($736F7235,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
call RandomDistReset()
call RandomDistAddItem($6B79736E,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function fv takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($617A6872,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function fw takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($7067696E,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function fx takes nothing returns nothing
local widget CT=null
local unit CU=null
local integer CW=0
local boolean CV=true
set CT=bj_lastDyingWidget
if CT==null then
set CU=GetTriggerUnit()
endif
if CU!=null then
set CV=not IsUnitHidden(CU)
if CV and GetChangingUnit()!=null then
set CV=GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endif
endif
if CV then
call RandomDistReset()
call RandomDistAddItem($73666F67,100)
set CW=RandomDistChoose()
if CU!=null then
call UnitDropItem(CU,CW)
else
call WidgetDropItem(CT,CW)
endif
endif
set bj_lastDyingWidget=null
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function fy takes nothing returns nothing
// 音效注册
set gang=CreateSound("war3mapImported\\gangAttack.mp3",false,false,false,10,10,"")
call SetSoundDuration(Q,5250)
call SetSoundChannel(Q,0)
call SetSoundVolume(Q,127)
call SetSoundPitch(Q,1.)
set O=CreateSound("Sound\\Music\\mp3Music\\IllidansTheme.mp3",false,false,false,10,10,"")
call SetSoundDuration(O,108006)
call SetSoundChannel(O,0)
call SetSoundVolume(O,127)
call SetSoundPitch(O,1.)
set P="war3mapImported\\yxdlm.mp3"
set Q=CreateSound("war3mapImported\\Yasuo.mp3",false,false,false,10,10,"")
call SetSoundDuration(Q,5250)
call SetSoundChannel(Q,0)
call SetSoundVolume(Q,127)
call SetSoundPitch(Q,1.)
set R=CreateSound("war3mapImported\\R.mp3",false,false,false,10,10,"")
call SetSoundDuration(R,1920)
call SetSoundChannel(R,0)
call SetSoundVolume(R,127)
call SetSoundPitch(R,1.)
set S=CreateSound("war3mapImported\\Q2.mp3",false,false,false,10,10,"")
call SetSoundDuration(S,2976)
call SetSoundChannel(S,0)
call SetSoundVolume(S,127)
call SetSoundPitch(S,1.)
set T=CreateSound("war3mapImported\\Q1.mp3",false,false,false,10,10,"")
call SetSoundDuration(T,1248)
call SetSoundChannel(T,0)
call SetSoundVolume(T,127)
call SetSoundPitch(T,1.)
set U=CreateSound("war3mapImported\\EQ.mp3",false,false,false,10,10,"")
call SetSoundDuration(U,1080)
call SetSoundChannel(U,0)
call SetSoundVolume(U,127)
call SetSoundPitch(U,1.)
set V=CreateSound("war3mapImported\\E1.mp3",false,false,false,10,10,"")
call SetSoundDuration(V,1056)
call SetSoundChannel(V,0)
call SetSoundVolume(V,127)
call SetSoundPitch(V,1.)
endfunction
function fz takes nothing returns nothing
local player CC=Player(8)
local unit CE
set CE=CreateUnit(CC,$6E627365,-5920.,7392.,270.)
set CE=CreateUnit(CC,$6E627365,6560.,4064.,270.)
endfunction
function f0 takes nothing returns nothing
local player CC=Player(8)
set Dz=CreateUnit(CC,$48616E74,-1175.3,-5053.7,95.11)
call SetUnitState(Dz,UNIT_STATE_MANA,190)
call UnitAddItemToSlotById(Dz,$7374656C,0)
call UnitAddItemToSlotById(Dz,$73707368,1)
call UnitAddItemToSlotById(Dz,$62656C76,2)
set D0=CreateUnit(CC,$6E656D69,-6184.2,-2717.3,30.)
call IssueImmediateOrder(D0,"")
call IssueImmediateOrder(D0,"")
call IssueImmediateOrder(D0,"faeriefireon")
set D1=CreateUnit(CC,$6E666272,-1914.8,-7728.9,0.)
endfunction
function f1 takes nothing returns nothing
local player CC=Player(9)
local unit CE
set CE=CreateUnit(CC,$6E667432,-352.,7968.,270.)
set CE=CreateUnit(CC,$6E627432,32.,8032.,270.)
set CE=CreateUnit(CC,$68617477,-1568.,8096.,270.)
set CE=CreateUnit(CC,$757A6732,-928.,8032.,270.)
set CL=CreateUnit(CC,$68627368,9783.1,-629.2,124.248)
set CM=CreateUnit(CC,$68627368,6317.4,-1899.1,124.248)
endfunction
function f2 takes nothing returns nothing
local player CC=Player(9)
set D2=CreateUnit(CC,$4F636268,12035.2,-9327.9,272.182)
call SetHeroLevel(D2,8,false)
call SetUnitState(D2,UNIT_STATE_MANA,420)
call SelectHeroSkill(D2,$414F6165)
call SelectHeroSkill(D2,$414F6165)
call SelectHeroSkill(D2,$414F6165)
call SelectHeroSkill(D2,$41456576)
call SelectHeroSkill(D2,$414F6372)
call SelectHeroSkill(D2,$414F6372)
call SelectHeroSkill(D2,$41487462)
call SelectHeroSkill(D2,$414F6D69)
call UnitAddItemToSlotById(D2,$6876616C,0)
set D3=CreateUnit(CC,$486D6272,11886.1,-9715.2,263.568)
call SetHeroLevel(D3,135,false)
call SetUnitState(D3,UNIT_STATE_MANA,1150)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6874)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E6361)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414E7362)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call SelectHeroSkill(D3,$414F7773)
call UnitAddItemToSlotById(D3,$49303041,0)
call UnitAddItemToSlotById(D3,$6F666C67,1)
call UnitAddItemToSlotById(D3,$7368656E,2)
call UnitAddItemToSlotById(D3,$49303037,4)
set D4=CreateUnit(CC,$4F746872,12441.6,-9462.3,260.61)
call SetHeroLevel(D4,50,false)
call SetUnitState(D4,UNIT_STATE_MANA,1300)
call SelectHeroSkill(D4,$41486473)
call IssueImmediateOrder(D4,"divineshield")
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$4173736B)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$414F6165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call SelectHeroSkill(D4,$41666165)
call IssueImmediateOrder(D4,"faeriefireon")
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call SelectHeroSkill(D4,$41436966)
call IssueImmediateOrder(D4,"innerfireon")
call SelectHeroSkill(D4,$41636462)
call SelectHeroSkill(D4,$41636462)
call SelectHeroSkill(D4,$41636462)
call SelectHeroSkill(D4,$41636462)
call SelectHeroSkill(D4,$41636462)
call SelectHeroSkill(D4,$41636462)
call SelectHeroSkill(D4,$41636462)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call SelectHeroSkill(D4,$41475934)
call IssueImmediateOrder(D4,"")
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call SelectHeroSkill(D4,$41304835)
call IssueImmediateOrder(D4,"")
call UnitAddItemToSlotById(D4,$67736F75,0)
call UnitAddItemToSlotById(D4,$49303145,1)
call UnitAddItemToSlotById(D4,$7368686E,2)
call UnitAddItemToSlotById(D4,$74656C73,3)
set D5=CreateUnit(CC,$48686B6C,11911.1,-9324.,275.671)
call SetHeroLevel(D5,6,false)
call SetUnitState(D5,UNIT_STATE_MANA,360)
call SelectHeroSkill(D5,$41486862)
call SelectHeroSkill(D5,$41486862)
call SelectHeroSkill(D5,$41486164)
call SelectHeroSkill(D5,$414F6372)
call SelectHeroSkill(D5,$41486473)
call UnitAddItemToSlotById(D5,$616A656E,0)
call UnitAddItemToSlotById(D5,$72646533,1)
set D6=CreateUnit(CC,$55766172,12016.8,-9605.1,274.28)
call SetHeroLevel(D6,125,false)
call SetUnitState(D6,UNIT_STATE_MANA,4425)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41456572)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41556176)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$41486268)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$4155696D)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call SelectHeroSkill(D6,$41636462)
call UnitAddItemToSlotById(D6,$72756774,0)
call UnitAddItemToSlotById(D6,$736F7237,1)
call UnitAddItemToSlotById(D6,$49303039,2)
call UnitAddItemToSlotById(D6,$736F7238,3)
call UnitAddItemToSlotById(D6,$73666F67,4)
set D7=CreateUnit(CC,$4564656D,12177.7,-9665.1,266.99)
call SetHeroLevel(D7,90,false)
call SetUnitState(D7,UNIT_STATE_MANA,2380)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$41456576)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414F6372)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$414E6361)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$41487463)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call SelectHeroSkill(D7,$4130334B)
call IssueImmediateOrder(D7,"frostarmoron")
call UnitAddItemToSlotById(D7,$6F636F72,0)
call UnitAddItemToSlotById(D7,$70737064,1)
call UnitAddItemToSlotById(D7,$68627468,2)
call UnitAddItemToSlotById(D7,$66677267,3)
call UnitAddItemToSlotById(D7,$72616D32,4)
set D8=CreateUnit(CC,$55776172,12522.9,-9656.6,269.56)
call SetHeroLevel(D8,115,false)
call SetUnitState(D8,UNIT_STATE_MANA,3150)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$41456572)
call SelectHeroSkill(D8,$414E7263)
call SelectHeroSkill(D8,$414E7263)
call SelectHeroSkill(D8,$414E7263)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41556175)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$41616B62)
call SelectHeroSkill(D8,$4148626E)
call SelectHeroSkill(D8,$4148626E)
call SelectHeroSkill(D8,$4148626E)
call SelectHeroSkill(D8,$4145666B)
call SelectHeroSkill(D8,$4145666B)
call SelectHeroSkill(D8,$4145666B)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call SelectHeroSkill(D8,$41303359)
call IssueImmediateOrder(D8,"")
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$41486162)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call SelectHeroSkill(D8,$416D6466)
call UnitAddItemToSlotById(D8,$72616D34,0)
call UnitAddItemToSlotById(D8,$72646530,1)
call UnitAddItemToSlotById(D8,$7370726E,2)
call UnitAddItemToSlotById(D8,$4930304C,3)
call UnitAddItemToSlotById(D8,$49303049,4)
set D9=CreateUnit(CC,$55746963,11888.2,-9582.1,266.99)
call SetHeroLevel(D9,110,false)
call SetUnitState(D9,UNIT_STATE_MANA,2380)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$41556373)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4173706F)
call SelectHeroSkill(D9,$4155736C)
call SelectHeroSkill(D9,$4155736C)
call SelectHeroSkill(D9,$4155736C)
call SelectHeroSkill(D9,$4155736C)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414E736F)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$414F7368)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call SelectHeroSkill(D9,$41666165)
call IssueImmediateOrder(D9,"faeriefireoff")
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call SelectHeroSkill(D9,$414E6963)
call IssueImmediateOrder(D9,"slowon")
call UnitAddItemToSlotById(D9,$73687273,0)
call UnitAddItemToSlotById(D9,$68627468,1)
call UnitAddItemToSlotById(D9,$72646530,2)
call UnitAddItemToSlotById(D9,$74656C73,3)
call UnitAddItemToSlotById(D9,$49303043,4)
call UnitAddItemToSlotById(D9,$626C6261,5)
set EB=CreateUnit(CC,$4E6D616E,12544.7,-9474.6,267.544)
call SetHeroLevel(EB,90,false)
call SetUnitState(EB,UNIT_STATE_MANA,1290)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$41456572)
call SelectHeroSkill(EB,$414E6874)
call SelectHeroSkill(EB,$414E6874)
call SelectHeroSkill(EB,$414E6874)
call SelectHeroSkill(EB,$414E6874)
call SelectHeroSkill(EB,$414E6874)
call SelectHeroSkill(EB,$414E6361)
call SelectHeroSkill(EB,$414E6361)
call SelectHeroSkill(EB,$414E6361)
call SelectHeroSkill(EB,$414E6361)
call SelectHeroSkill(EB,$414E6361)
call SelectHeroSkill(EB,$414E6361)
call SelectHeroSkill(EB,$414E6361)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$414F6372)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$41487463)
call SelectHeroSkill(EB,$4130305A)
call IssueImmediateOrder(EB,"")
call SelectHeroSkill(EB,$41486176)
call SelectHeroSkill(EB,$4130324A)
call SelectHeroSkill(EB,$4130324A)
call SelectHeroSkill(EB,$4130324A)
call SelectHeroSkill(EB,$4130324A)
call SelectHeroSkill(EB,$4130324A)
call SelectHeroSkill(EB,$4130324A)
call SelectHeroSkill(EB,$4130324A)
call SelectHeroSkill(EB,$4130324A)
call IssueImmediateOrder(EB,"")
call IssueImmediateOrder(EB,"frenzyon")
call UnitAddItemToSlotById(EB,$61786173,0)
call UnitAddItemToSlotById(EB,$74656C73,1)
call UnitAddItemToSlotById(EB,$7368656E,2)
call UnitAddItemToSlotById(EB,$49303037,3)
set EC=CreateUnit(CC,$45667572,12063.6,-9445.,256.51)
call SetHeroLevel(EC,30,false)
call SetUnitState(EC,UNIT_STATE_MANA,930)
call SelectHeroSkill(EC,$414E7371)
call SelectHeroSkill(EC,$414E7371)
call SelectHeroSkill(EC,$414E7371)
call SelectHeroSkill(EC,$414E7371)
call SelectHeroSkill(EC,$414E7371)
call SelectHeroSkill(EC,$4130314A)
call SelectHeroSkill(EC,$4130314A)
call SelectHeroSkill(EC,$4130314A)
call SelectHeroSkill(EC,$4130314A)
call SelectHeroSkill(EC,$4130314A)
call IssueImmediateOrder(EC,"")
call SelectHeroSkill(EC,$41457471)
call SelectHeroSkill(EC,$41457471)
call SelectHeroSkill(EC,$41457471)
call SelectHeroSkill(EC,$414E736F)
call SelectHeroSkill(EC,$414E736F)
call SelectHeroSkill(EC,$414E736F)
call SelectHeroSkill(EC,$414E736F)
call SelectHeroSkill(EC,$414E736F)
call SelectHeroSkill(EC,$41456168)
call SelectHeroSkill(EC,$41456168)
call SelectHeroSkill(EC,$41456168)
call SelectHeroSkill(EC,$41456168)
call SelectHeroSkill(EC,$41456168)
call SelectHeroSkill(EC,$41456168)
call SelectHeroSkill(EC,$41666165)
call SelectHeroSkill(EC,$41666165)
call SelectHeroSkill(EC,$41666165)
call SelectHeroSkill(EC,$41666165)
call SelectHeroSkill(EC,$41666165)
call IssueImmediateOrder(EC,"faeriefireoff")
call SelectHeroSkill(EC,$41727371)
call SelectHeroSkill(EC,$41727371)
call SelectHeroSkill(EC,$41727371)
call SelectHeroSkill(EC,$41727371)
call SelectHeroSkill(EC,$41727371)
call SelectHeroSkill(EC,$41727371)
call SelectHeroSkill(EC,$414E7377)
call SelectHeroSkill(EC,$414E7377)
call SelectHeroSkill(EC,$414E7377)
call SelectHeroSkill(EC,$414E7377)
call SelectHeroSkill(EC,$414E7377)
call SelectHeroSkill(EC,$414E7377)
call UnitAddItemToSlotById(EC,$74656C73,0)
call UnitAddItemToSlotById(EC,$64727068,1)
set ED=CreateUnit(CC,$5562616C,11940.,-9456.3,262.687)
call SetHeroLevel(ED,23,false)
call SetUnitState(ED,UNIT_STATE_MANA,930)
call SelectHeroSkill(ED,$414F6372)
call SelectHeroSkill(ED,$414F6372)
call SelectHeroSkill(ED,$414F6372)
call SelectHeroSkill(ED,$4155736C)
call SelectHeroSkill(ED,$414E6361)
call SelectHeroSkill(ED,$414E6361)
call SelectHeroSkill(ED,$414E6361)
call SelectHeroSkill(ED,$414E6361)
call SelectHeroSkill(ED,$414E6361)
call SelectHeroSkill(ED,$414E6361)
call SelectHeroSkill(ED,$41556176)
call SelectHeroSkill(ED,$41556176)
call SelectHeroSkill(ED,$41556176)
call SelectHeroSkill(ED,$41556176)
call SelectHeroSkill(ED,$41556176)
call SelectHeroSkill(ED,$41487265)
call SelectHeroSkill(ED,$414F7773)
call SelectHeroSkill(ED,$414F7773)
call SelectHeroSkill(ED,$414F7773)
call SelectHeroSkill(ED,$414F7773)
call SelectHeroSkill(ED,$414F7773)
call SelectHeroSkill(ED,$41727371)
call SelectHeroSkill(ED,$41727371)
call SelectHeroSkill(ED,$41727371)
call SelectHeroSkill(ED,$41727371)
call SelectHeroSkill(ED,$41727371)
call SelectHeroSkill(ED,$41727371)
call SelectHeroSkill(ED,$414F6165)
call SelectHeroSkill(ED,$414F6165)
call SelectHeroSkill(ED,$414F6165)
call SelectHeroSkill(ED,$414F6165)
call SelectHeroSkill(ED,$414F6165)
call SelectHeroSkill(ED,$41616B62)
call SelectHeroSkill(ED,$41616B62)
call SelectHeroSkill(ED,$41616B62)
call SelectHeroSkill(ED,$41616B62)
call SelectHeroSkill(ED,$41616B62)
call SelectHeroSkill(ED,$41616B62)
call SelectHeroSkill(ED,$414E6874)
call SelectHeroSkill(ED,$414E6874)
call SelectHeroSkill(ED,$414E6874)
call SelectHeroSkill(ED,$414E6874)
call SelectHeroSkill(ED,$4162736B)
call SelectHeroSkill(ED,$4162736B)
call SelectHeroSkill(ED,$4162736B)
call SelectHeroSkill(ED,$4162736B)
call SelectHeroSkill(ED,$4162736B)
call SelectHeroSkill(ED,$4162736B)
call UnitAddItemToSlotById(ED,$61786173,0)
call UnitAddItemToSlotById(ED,$72646533,1)
set EE=CreateUnit(CC,$45657669,12464.1,-9807.6,282.98)
call SetHeroLevel(EE,146,false)
call SetUnitState(EE,UNIT_STATE_MANA,2380)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41456572)
call SelectHeroSkill(EE,$41486473)
call SelectHeroSkill(EE,$41486473)
call SelectHeroSkill(EE,$41486473)
call SelectHeroSkill(EE,$41486473)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$414F6372)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call SelectHeroSkill(EE,$41303350)
call IssueImmediateOrder(EE,"")
call UnitAddItemToSlotById(EE,$6D6E7366,0)
call UnitAddItemToSlotById(EE,$72756D70,1)
call UnitAddItemToSlotById(EE,$49303145,2)
call UnitAddItemToSlotById(EE,$6F736C6F,3)
call UnitAddItemToSlotById(EE,$4930304A,4)
call UnitAddItemToSlotById(EE,$49303043,5)
set EF=CreateUnit(CC,$55646561,11891.3,-10243.7,278.53)
call SetHeroLevel(EF,141,false)
call SetUnitState(EF,UNIT_STATE_MANA,6240)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call SelectHeroSkill(EF,$41666165)
call IssueImmediateOrder(EF,"faeriefireon")
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414E6361)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F6372)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$414F636C)
call SelectHeroSkill(EF,$4130304F)
call SelectHeroSkill(EF,$4130304F)
call SelectHeroSkill(EF,$4130304F)
call IssueImmediateOrder(EF,"")
call UnitAddItemToSlotById(EF,$73686377,0)
call UnitAddItemToSlotById(EF,$736F7234,1)
call UnitAddItemToSlotById(EF,$736F7232,2)
call UnitAddItemToSlotById(EF,$736F756C,3)
call UnitAddItemToSlotById(EF,$72756D70,4)
call UnitAddItemToSlotById(EF,$49303145,5)
set EG=CreateUnit(CC,$4E706C64,12178.9,-9458.6,267.269)
call SetHeroLevel(EG,30,false)
call SetUnitState(EG,UNIT_STATE_MANA,1170)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414F7773)
call SelectHeroSkill(EG,$414E6361)
call SelectHeroSkill(EG,$414E6361)
call SelectHeroSkill(EG,$414E6361)
call SelectHeroSkill(EG,$414E6361)
call SelectHeroSkill(EG,$414E6361)
call SelectHeroSkill(EG,$414E6361)
call SelectHeroSkill(EG,$414E6361)
call SelectHeroSkill(EG,$414E726E)
call SelectHeroSkill(EG,$41303131)
call IssueImmediateOrder(EG,"")
call SelectHeroSkill(EG,$414E6874)
call SelectHeroSkill(EG,$414E6874)
call SelectHeroSkill(EG,$414E6874)
call SelectHeroSkill(EG,$414E6874)
call SelectHeroSkill(EG,$414E6874)
call SelectHeroSkill(EG,$414E6874)
call SelectHeroSkill(EG,$414E6874)
call SelectHeroSkill(EG,$41303345)
call SelectHeroSkill(EG,$41303345)
call SelectHeroSkill(EG,$41303345)
call SelectHeroSkill(EG,$41303345)
call SelectHeroSkill(EG,$41303345)
call SelectHeroSkill(EG,$41303345)
call IssueImmediateOrder(EG,"")
call UnitAddItemToSlotById(EG,$6E737069,0)
set EH=CreateUnit(CC,$55647468,12844.9,-9655.2,268.47)
call SetHeroLevel(EH,120,false)
call SetUnitState(EH,UNIT_STATE_MANA,2560)
call SelectHeroSkill(EH,$414F6D69)
call SelectHeroSkill(EH,$414F6D69)
call SelectHeroSkill(EH,$414F6D69)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414F6372)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414E6361)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call SelectHeroSkill(EH,$414F7777)
call IssueImmediateOrder(EH,"slowon")
call SelectHeroSkill(EH,$414E6266)
call SelectHeroSkill(EH,$414E6266)
call SelectHeroSkill(EH,$414E6266)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call SelectHeroSkill(EH,$414E6366)
call UnitAddItemToSlotById(EH,$49303041,0)
call UnitAddItemToSlotById(EH,$72646530,1)
call UnitAddItemToSlotById(EH,$68627468,2)
call UnitAddItemToSlotById(EH,$49303037,3)
call UnitAddItemToSlotById(EH,$72616D32,4)
set EI=CreateUnit(CC,$55616E62,12600.5,-9313.6,262.675)
call SetHeroLevel(EI,20,false)
call SetUnitState(EI,UNIT_STATE_MANA,940)
call SelectHeroSkill(EI,$414E6877)
call SelectHeroSkill(EI,$414E6877)
call SelectHeroSkill(EI,$414E6877)
call SelectHeroSkill(EI,$4130314A)
call SelectHeroSkill(EI,$4130314A)
call SelectHeroSkill(EI,$4130314A)
call SelectHeroSkill(EI,$4130314A)
call IssueImmediateOrder(EI,"")
call SelectHeroSkill(EI,$41557473)
call SelectHeroSkill(EI,$41557473)
call SelectHeroSkill(EI,$41557473)
call SelectHeroSkill(EI,$41557473)
call SelectHeroSkill(EI,$41436262)
call SelectHeroSkill(EI,$41436262)
call SelectHeroSkill(EI,$41436262)
call SelectHeroSkill(EI,$41436262)
call SelectHeroSkill(EI,$41436262)
call IssueImmediateOrder(EI,"bloodlustoff")
call SelectHeroSkill(EI,$414E7367)
call SelectHeroSkill(EI,$414E7367)
call SelectHeroSkill(EI,$414E7367)
call SelectHeroSkill(EI,$414E7367)
call UnitAddItemToSlotById(EI,$49303035,0)
set EJ=CreateUnit(CC,$45777264,11900.8,-9937.2,274.428)
call SetHeroLevel(EJ,145,false)
call SetUnitState(EJ,UNIT_STATE_MANA,3600)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$41457368)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414F6372)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E736F)
call SelectHeroSkill(EJ,$414E7369)
call SelectHeroSkill(EJ,$414E7369)
call SelectHeroSkill(EJ,$414E7369)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$414E6331)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call SelectHeroSkill(EJ,$41303345)
call IssueImmediateOrder(EJ,"")
call UnitAddItemToSlotById(EJ,$73687273,0)
call UnitAddItemToSlotById(EJ,$72756D70,1)
call UnitAddItemToSlotById(EJ,$72756774,2)
call UnitAddItemToSlotById(EJ,$74656C73,3)
call UnitAddItemToSlotById(EJ,$736F7232,4)
set EK=CreateUnit(CC,$48616D67,12240.5,-9300.5,265.339)
call SetHeroLevel(EK,14,false)
call SetUnitState(EK,UNIT_STATE_MANA,2100)
call SelectHeroSkill(EK,$414F6877)
call SelectHeroSkill(EK,$414F6877)
call SelectHeroSkill(EK,$414F6877)
call IssueImmediateOrder(EK,"")
call SelectHeroSkill(EK,$41556675)
call SelectHeroSkill(EK,$41556675)
call SelectHeroSkill(EK,$41556675)
call SelectHeroSkill(EK,$41556675)
call IssueImmediateOrder(EK,"frostarmoron")
call SelectHeroSkill(EK,$41486162)
call SelectHeroSkill(EK,$41486162)
call SelectHeroSkill(EK,$41486162)
call SelectHeroSkill(EK,$41486162)
call SelectHeroSkill(EK,$41486162)
call SelectHeroSkill(EK,$41486862)
call SelectHeroSkill(EK,$41486862)
call SelectHeroSkill(EK,$41556175)
call SelectHeroSkill(EK,$41556175)
call SelectHeroSkill(EK,$414F7377)
call SelectHeroSkill(EK,$414F7377)
call SelectHeroSkill(EK,$414F7377)
call SelectHeroSkill(EK,$414F7377)
call SelectHeroSkill(EK,$414E7369)
call SelectHeroSkill(EK,$4155666E)
call SelectHeroSkill(EK,$4155666E)
call SelectHeroSkill(EK,$4155666E)
call UnitAddItemToSlotById(EK,$6D636F75,0)
set EL=CreateUnit(CC,$4864676F,12341.8,-9297.8,271.847)
call SetHeroLevel(EL,17,false)
call SetUnitState(EL,UNIT_STATE_MANA,450)
call SelectHeroSkill(EL,$41666165)
call SelectHeroSkill(EL,$41666165)
call SelectHeroSkill(EL,$41666165)
call IssueImmediateOrder(EL,"faeriefireon")
call SelectHeroSkill(EL,$41486862)
call SelectHeroSkill(EL,$41486862)
call SelectHeroSkill(EL,$41486862)
call SelectHeroSkill(EL,$41486164)
call SelectHeroSkill(EL,$41486164)
call SelectHeroSkill(EL,$41486164)
call SelectHeroSkill(EL,$41486164)
call SelectHeroSkill(EL,$41487265)
call SelectHeroSkill(EL,$414E6873)
call SelectHeroSkill(EL,$414E6873)
call SelectHeroSkill(EL,$414E6873)
call SelectHeroSkill(EL,$414E6873)
call SelectHeroSkill(EL,$414E6873)
call SelectHeroSkill(EL,$414E6873)
call SelectHeroSkill(EL,$41456572)
call SelectHeroSkill(EL,$41456572)
call SelectHeroSkill(EL,$41456572)
call SelectHeroSkill(EL,$41616B62)
call SelectHeroSkill(EL,$41616B62)
call SelectHeroSkill(EL,$41616B62)
call SelectHeroSkill(EL,$41616B62)
call UnitAddItemToSlotById(EL,$7370726E,0)
set EM=CreateUnit(CC,$556B746C,12021.5,-9745.3,299.102)
call SetHeroLevel(EM,142,false)
call SetUnitState(EM,UNIT_STATE_MANA,4300)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$414E736F)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$4155666E)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call SelectHeroSkill(EM,$41556675)
call IssueImmediateOrder(EM,"frostarmoron")
call SelectHeroSkill(EM,$41303250)
call IssueImmediateOrder(EM,"")
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call SelectHeroSkill(EM,$414F6D69)
call UnitAddItemToSlotById(EM,$49303031,0)
call UnitAddItemToSlotById(EM,$49303049,1)
call UnitAddItemToSlotById(EM,$49303145,3)
call UnitAddItemToSlotById(EM,$4930304A,4)
call UnitAddItemToSlotById(EM,$74656C73,5)
set EN=CreateUnit(CC,$4E706C68,12144.8,-9321.2,264.104)
call SetHeroLevel(EN,11,false)
call SetUnitState(EN,UNIT_STATE_MANA,735)
call SelectHeroSkill(EN,$41456572)
call SelectHeroSkill(EN,$41456572)
call SelectHeroSkill(EN,$41487463)
call SelectHeroSkill(EN,$41487463)
call SelectHeroSkill(EN,$41487463)
call SelectHeroSkill(EN,$4155696D)
call SelectHeroSkill(EN,$4155696D)
call SelectHeroSkill(EN,$41556176)
call SelectHeroSkill(EN,$41556176)
call SelectHeroSkill(EN,$41556176)
call UnitAddItemToSlotById(EN,$61786173,0)
call UnitAddItemToSlotById(EN,$72646533,1)
set EO=CreateUnit(CC,$4E70626D,12643.3,-9478.6,275.49)
call SetHeroLevel(EO,70,false)
call SetUnitState(EO,UNIT_STATE_MANA,1140)
call SelectHeroSkill(EO,$414E776B)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$4155696D)
call SelectHeroSkill(EO,$414F6D69)
call SelectHeroSkill(EO,$414F6D69)
call SelectHeroSkill(EO,$414F6D69)
call SelectHeroSkill(EO,$414F6D69)
call SelectHeroSkill(EO,$414F6D69)
call SelectHeroSkill(EO,$414F6D69)
call SelectHeroSkill(EO,$414F6D69)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F6372)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call SelectHeroSkill(EO,$414F7777)
call UnitAddItemToSlotById(EO,$74656C73,0)
call UnitAddItemToSlotById(EO,$49303055,1)
call UnitAddItemToSlotById(EO,$66677267,2)
call UnitAddItemToSlotById(EO,$68627468,3)
call UnitAddItemToSlotById(EO,$72646530,4)
set EP=CreateUnit(CC,$5563726C,12778.2,-9779.2,276.38)
call SetHeroLevel(EP,100,false)
call SetUnitState(EP,UNIT_STATE_MANA,2445)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call SelectHeroSkill(EP,$41303247)
call IssueImmediateOrder(EP,"")
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$414F7332)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$4155696D)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$41616B62)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$414F6372)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41556373)
call SelectHeroSkill(EP,$41666165)
call SelectHeroSkill(EP,$41666165)
call SelectHeroSkill(EP,$41666165)
call SelectHeroSkill(EP,$41666165)
call SelectHeroSkill(EP,$41666165)
call SelectHeroSkill(EP,$41666165)
call SelectHeroSkill(EP,$41666165)
call SelectHeroSkill(EP,$41666165)
call IssueImmediateOrder(EP,"faeriefireoff")
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41486164)
call SelectHeroSkill(EP,$41303130)
call IssueImmediateOrder(EP,"")
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call SelectHeroSkill(EP,$41303342)
call IssueImmediateOrder(EP,"")
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call SelectHeroSkill(EP,$41436966)
call IssueImmediateOrder(EP,"innerfireoff")
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41556176)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call SelectHeroSkill(EP,$41303345)
call IssueImmediateOrder(EP,"")
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$4162736B)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call SelectHeroSkill(EP,$414E7377)
call UnitAddItemToSlotById(EP,$6F6C6932,0)
call UnitAddItemToSlotById(EP,$49303145,1)
call UnitAddItemToSlotById(EP,$49303039,2)
call UnitAddItemToSlotById(EP,$49303034,3)
call UnitAddItemToSlotById(EP,$74656C73,4)
set EQ=CreateUnit(CC,$68646573,6127.,-1530.,53.11)
set ER=CreateUnit(CC,$68646573,6084.7,-1789.6,118.843)
set ES=CreateUnit(CC,$68646573,5953.,-2040.,108.691)
set ET=CreateUnit(CC,$4F303034,12325.6,-9465.8,269.602)
call SetHeroLevel(ET,50,false)
call SetUnitState(ET,UNIT_STATE_MANA,230)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41616D6B)
call SelectHeroSkill(ET,$41487462)
call SelectHeroSkill(ET,$41487462)
call SelectHeroSkill(ET,$41487462)
call SelectHeroSkill(ET,$41487462)
call SelectHeroSkill(ET,$41487462)
call SelectHeroSkill(ET,$41487462)
call SelectHeroSkill(ET,$41487462)
call SelectHeroSkill(ET,$41616B62)
call SelectHeroSkill(ET,$41616B62)
call SelectHeroSkill(ET,$41616B62)
call SelectHeroSkill(ET,$41616B62)
call SelectHeroSkill(ET,$41616B62)
call SelectHeroSkill(ET,$41616B62)
call SelectHeroSkill(ET,$414E6361)
call SelectHeroSkill(ET,$414E6361)
call SelectHeroSkill(ET,$414E6361)
call SelectHeroSkill(ET,$414E6361)
call SelectHeroSkill(ET,$414E6361)
call SelectHeroSkill(ET,$414E6361)
call SelectHeroSkill(ET,$41486268)
call SelectHeroSkill(ET,$41486268)
call SelectHeroSkill(ET,$41486268)
call SelectHeroSkill(ET,$41486268)
call SelectHeroSkill(ET,$41486268)
call SelectHeroSkill(ET,$41486268)
call UnitAddItemToSlotById(ET,$66777373,0)
call UnitAddItemToSlotById(ET,$7368656E,1)
call UnitAddItemToSlotById(ET,$6F666C67,2)
set EU=CreateUnit(CC,$4542435A,12644.8,-9624.5,263.9)
call SetHeroLevel(EU,150,false)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call SelectHeroSkill(EU,$4130314E)
call IssueImmediateOrder(EU,"")
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$41456572)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call SelectHeroSkill(EU,$4130334F)
call IssueImmediateOrder(EU,"")
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call SelectHeroSkill(EU,$41303059)
call IssueImmediateOrder(EU,"")
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call SelectHeroSkill(EU,$4173736B)
call UnitAddItemToSlotById(EU,$49303034,0)
call UnitAddItemToSlotById(EU,$49303145,1)
call UnitAddItemToSlotById(EU,$7368656E,2)
call UnitAddItemToSlotById(EU,$636F736C,3)
call UnitAddItemToSlotById(EU,$49303037,4)
call UnitAddItemToSlotById(EU,$49303043,5)
set EV=CreateUnit(CC,$4E304352,12311.2,-9990.8,278.79)
call SetHeroLevel(EV,120,false)
call SetUnitState(EV,UNIT_STATE_MANA,240)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41487462)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call SelectHeroSkill(EV,$41303436)
call IssueImmediateOrder(EV,"")
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41556176)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call SelectHeroSkill(EV,$41303357)
call IssueImmediateOrder(EV,"")
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call SelectHeroSkill(EV,$41303345)
call IssueImmediateOrder(EV,"")
call UnitAddItemToSlotById(EV,$49303041,0)
call UnitAddItemToSlotById(EV,$49303145,1)
call UnitAddItemToSlotById(EV,$49303037,2)
call UnitAddItemToSlotById(EV,$736F756C,3)
call UnitAddItemToSlotById(EV,$70737064,4)
endfunction
function f3 takes nothing returns nothing
local player CC=Player(10)
local trigger CS
set EW=CreateUnit(CC,$55656172,12314.8,-9666.4,269.73)
call SetHeroLevel(EW,148,false)
call SetUnitState(EW,UNIT_STATE_MANA,4720)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$41556175)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$414F6372)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$4155666E)
call SelectHeroSkill(EW,$414E7369)
call SelectHeroSkill(EW,$414E7369)
call SelectHeroSkill(EW,$414E7369)
call SelectHeroSkill(EW,$41556C73)
call SelectHeroSkill(EW,$41556C73)
call SelectHeroSkill(EW,$41556C73)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$41486164)
call SelectHeroSkill(EW,$4130305A)
call SelectHeroSkill(EW,$4130305A)
call SelectHeroSkill(EW,$4130305A)
call SelectHeroSkill(EW,$4130305A)
call IssueImmediateOrder(EW,"")
call IssueImmediateOrder(EW,"slowon")
call IssueImmediateOrder(EW,"autodispelon")
call SelectHeroSkill(EW,$41303750)
call SelectHeroSkill(EW,$41303750)
call SelectHeroSkill(EW,$41303750)
call SelectHeroSkill(EW,$41303750)
call IssueImmediateOrder(EW,"")
call UnitAddItemToSlotById(EW,$72756D70,0)
call UnitAddItemToSlotById(EW,$73686377,1)
call UnitAddItemToSlotById(EW,$49303033,2)
call UnitAddItemToSlotById(EW,$726F7473,3)
call UnitAddItemToSlotById(EW,$49303043,4)
call UnitAddItemToSlotById(EW,$49303039,5)
set EX=CreateUnit(CC,$4F676C64,12844.,-9825.1,265.82)
call SetHeroLevel(EX,149,false)
call SetUnitState(EX,UNIT_STATE_MANA,7020)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414E736F)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$414F7377)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call SelectHeroSkill(EX,$41666165)
call IssueImmediateOrder(EX,"faeriefireon")
call IssueImmediateOrder(EX,"")
call IssueImmediateOrder(EX,"")
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call SelectHeroSkill(EX,$4130314A)
call IssueImmediateOrder(EX,"")
call SelectHeroSkill(EX,$414E7374)
call SelectHeroSkill(EX,$414E7374)
call SelectHeroSkill(EX,$414E7374)
call SelectHeroSkill(EX,$414E7374)
call SelectHeroSkill(EX,$41303130)
call SelectHeroSkill(EX,$41303130)
call SelectHeroSkill(EX,$41303130)
call IssueImmediateOrder(EX,"")
call UnitAddItemToSlotById(EX,$49303252,0)
call UnitAddItemToSlotById(EX,$49303145,1)
call UnitAddItemToSlotById(EX,$72756D70,2)
call UnitAddItemToSlotById(EX,$49303146,3)
call UnitAddItemToSlotById(EX,$6C656467,4)
call UnitAddItemToSlotById(EX,$49303049,5)
set EY=CreateUnit(CC,$55766E67,12740.,-9620.2,260.37)
call SetHeroLevel(EY,120,false)
call SetUnitState(EY,UNIT_STATE_MANA,3060)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6D69)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F6372)
call SelectHeroSkill(EY,$414F7777)
call IssueImmediateOrder(EY,"")
call IssueImmediateOrder(EY,"")
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$41616B62)
call SelectHeroSkill(EY,$4155696D)
call SelectHeroSkill(EY,$4155696D)
call SelectHeroSkill(EY,$4155696D)
call SelectHeroSkill(EY,$4155696D)
call SelectHeroSkill(EY,$4155696D)
call SelectHeroSkill(EY,$4155696D)
call UnitAddItemToSlotById(EY,$73747265,0)
call UnitAddItemToSlotById(EY,$72646530,1)
call UnitAddItemToSlotById(EY,$72616D32,2)
call UnitAddItemToSlotById(EY,$736F7232,5)
set EZ=CreateUnit(CC,$5573796C,12455.5,-9296.8,263.876)
call SetHeroLevel(EZ,18,false)
call SetUnitState(EZ,UNIT_STATE_MANA,1330)
call SelectHeroSkill(EZ,$414E6877)
call SelectHeroSkill(EZ,$414E6877)
call SelectHeroSkill(EZ,$414E6877)
call SelectHeroSkill(EZ,$414E6877)
call SelectHeroSkill(EZ,$414E7369)
call SelectHeroSkill(EZ,$414E7369)
call SelectHeroSkill(EZ,$414E7369)
call SelectHeroSkill(EZ,$414E6472)
call SelectHeroSkill(EZ,$414E6472)
call SelectHeroSkill(EZ,$414E6472)
call SelectHeroSkill(EZ,$414E6472)
call SelectHeroSkill(EZ,$414E6472)
call SelectHeroSkill(EZ,$41707866)
call SelectHeroSkill(EZ,$41707866)
call SelectHeroSkill(EZ,$41707866)
call SelectHeroSkill(EZ,$4155736C)
call SelectHeroSkill(EZ,$4155736C)
call SelectHeroSkill(EZ,$4155736C)
call IssueImmediateOrder(EZ,"")
call IssueImmediateOrder(EZ,"slowon")
set Ea=CreateUnit(CC,$556D616C,12750.3,-9294.7,276.971)
call SetHeroLevel(Ea,18,false)
call SetUnitState(Ea,UNIT_STATE_MANA,1360)
call SelectHeroSkill(Ea,$41556373)
call SelectHeroSkill(Ea,$41556373)
call SelectHeroSkill(Ea,$41556373)
call SelectHeroSkill(Ea,$4145696D)
call SelectHeroSkill(Ea,$4145696D)
call SelectHeroSkill(Ea,$4145696D)
call IssueImmediateOrder(Ea,"immolation")
call SelectHeroSkill(Ea,$41436966)
call SelectHeroSkill(Ea,$41436966)
call SelectHeroSkill(Ea,$41436966)
call SelectHeroSkill(Ea,$41436966)
call SelectHeroSkill(Ea,$41436966)
call IssueImmediateOrder(Ea,"innerfireon")
call SelectHeroSkill(Ea,$414E7362)
call SelectHeroSkill(Ea,$414E7362)
call SelectHeroSkill(Ea,$414E7362)
call SelectHeroSkill(Ea,$414E7362)
call SelectHeroSkill(Ea,$414E7362)
call SelectHeroSkill(Ea,$414E6366)
call SelectHeroSkill(Ea,$414E6366)
call SelectHeroSkill(Ea,$414E6366)
call SelectHeroSkill(Ea,$414E6366)
call SelectHeroSkill(Ea,$414E6366)
call SelectHeroSkill(Ea,$414E7367)
call SelectHeroSkill(Ea,$414E7367)
call SelectHeroSkill(Ea,$414E7367)
call SelectHeroSkill(Ea,$414F6372)
call SelectHeroSkill(Ea,$414F6372)
call SelectHeroSkill(Ea,$414F6372)
set Eb=CreateUnit(CC,$4E736A73,12053.2,-9907.,266.54)
call SetHeroLevel(Eb,144,false)
call SetUnitState(Eb,UNIT_STATE_MANA,4050)
call SelectHeroSkill(Eb,$41636468)
call SelectHeroSkill(Eb,$41636468)
call SelectHeroSkill(Eb,$41636468)
call SelectHeroSkill(Eb,$41636468)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41636462)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call SelectHeroSkill(Eb,$41436966)
call IssueImmediateOrder(Eb,"innerfireon")
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$414F6372)
call SelectHeroSkill(Eb,$41486176)
call SelectHeroSkill(Eb,$41486176)
call SelectHeroSkill(Eb,$41486176)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$41707267)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414E6873)
call SelectHeroSkill(Eb,$414F6C73)
call SelectHeroSkill(Eb,$414F6C73)
call SelectHeroSkill(Eb,$414F6C73)
call UnitAddItemToSlotById(Eb,$7368656E,0)
call UnitAddItemToSlotById(Eb,$49303034,1)
call UnitAddItemToSlotById(Eb,$49303145,2)
call UnitAddItemToSlotById(Eb,$6667756E,3)
call UnitAddItemToSlotById(Eb,$49303037,4)
call UnitAddItemToSlotById(Eb,$736F756C,5)
set Ec=CreateUnit(CC,$4F636232,12207.8,-9930.,271.33)
call SetHeroLevel(Ec,143,false)
call SetUnitState(Ec,UNIT_STATE_MANA,1650)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41726F61)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$41487462)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414F7332)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414E6874)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$414F6372)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41487463)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call SelectHeroSkill(Ec,$41486268)
call IssueImmediateOrder(Ec,"")
call SelectHeroSkill(Ec,$41303131)
call SelectHeroSkill(Ec,$41303131)
call SelectHeroSkill(Ec,$41303131)
call SelectHeroSkill(Ec,$41303131)
call IssueImmediateOrder(Ec,"")
call UnitAddItemToSlotById(Ec,$72756D70,0)
call UnitAddItemToSlotById(Ec,$73687273,1)
call UnitAddItemToSlotById(Ec,$736F756C,2)
call UnitAddItemToSlotById(Ec,$74656C73,3)
call UnitAddItemToSlotById(Ec,$49303037,4)
call UnitAddItemToSlotById(Ec,$49303145,5)
set Ed=CreateUnit(CC,$4E6D6167,12279.9,-10161.9,268.567)
call SetHeroLevel(Ed,36,false)
call SetUnitState(Ed,UNIT_STATE_MANA,2185)
call SelectHeroSkill(Ed,$4145666B)
call SelectHeroSkill(Ed,$4145666B)
call SelectHeroSkill(Ed,$4145666B)
call SelectHeroSkill(Ed,$414E7266)
call SelectHeroSkill(Ed,$414E7266)
call SelectHeroSkill(Ed,$414E7266)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$41616B62)
call SelectHeroSkill(Ed,$414E6874)
call SelectHeroSkill(Ed,$414E6874)
call SelectHeroSkill(Ed,$414E6874)
call SelectHeroSkill(Ed,$414E6874)
call SelectHeroSkill(Ed,$414E6874)
call SelectHeroSkill(Ed,$414E6874)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call SelectHeroSkill(Ed,$414E6361)
call UnitAddItemToSlotById(Ed,$66777373,0)
call UnitAddItemToSlotById(Ed,$7368686E,1)
set Ee=CreateUnit(CC,$48303030,12670.8,-10124.9,307.01)
call SetHeroLevel(Ee,100,false)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487462)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41487463)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$41486268)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$414E7362)
call SelectHeroSkill(Ee,$41486176)
call SelectHeroSkill(Ee,$41486176)
call SelectHeroSkill(Ee,$41486176)
call IssueImmediateOrder(Ee,"autodispelon")
call UnitAddItemToSlotById(Ee,$49303037,0)
call UnitAddItemToSlotById(Ee,$67736F75,1)
call UnitAddItemToSlotById(Ee,$7368656E,3)
call UnitAddItemToSlotById(Ee,$6F666C67,4)
set Ef=CreateUnit(CC,$45303031,12781.2,-10182.,264.3)
call SetHeroLevel(Ef,150,false)
call SetUnitState(Ef,UNIT_STATE_MANA,180)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41487462)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$41556176)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$4155696D)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$41487463)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$414E7362)
call SelectHeroSkill(Ef,$4130304B)
call SelectHeroSkill(Ef,$4130304B)
call SelectHeroSkill(Ef,$4130304B)
call IssueImmediateOrder(Ef,"")
call SelectHeroSkill(Ef,$41303130)
call SelectHeroSkill(Ef,$41303130)
call SelectHeroSkill(Ef,$41303130)
call IssueImmediateOrder(Ef,"")
call UnitAddItemToSlotById(Ef,$49303233,0)
call UnitAddItemToSlotById(Ef,$49303145,1)
call UnitAddItemToSlotById(Ef,$49303235,2)
call UnitAddItemToSlotById(Ef,$49303146,3)
call UnitAddItemToSlotById(Ef,$49303043,4)
call UnitAddItemToSlotById(Ef,$49303245,5)
set Eg=CreateUnit(CC,$4E303031,12424.2,-9657.2,261.51)
call SetHeroLevel(Eg,145,false)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41557473)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$41487463)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$414E7362)
call SelectHeroSkill(Eg,$41486176)
call SelectHeroSkill(Eg,$41486176)
call SelectHeroSkill(Eg,$41486176)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41486268)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call SelectHeroSkill(Eg,$41303632)
call IssueImmediateOrder(Eg,"")
call UnitAddItemToSlotById(Eg,$6F636F72,0)
call UnitAddItemToSlotById(Eg,$6F666C67,1)
call UnitAddItemToSlotById(Eg,$7368656E,2)
call UnitAddItemToSlotById(Eg,$49303037,4)
set Eh=CreateUnit(CC,$4E627374,12760.,-9469.4,266.02)
call SetHeroLevel(Eh,60,false)
call SetUnitState(Eh,UNIT_STATE_MANA,1170)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$4145666B)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41487463)
call SelectHeroSkill(Eh,$41557473)
call SelectHeroSkill(Eh,$41557473)
call SelectHeroSkill(Eh,$41557473)
call SelectHeroSkill(Eh,$41557473)
call SelectHeroSkill(Eh,$41557473)
call SelectHeroSkill(Eh,$41557473)
call SelectHeroSkill(Eh,$41557473)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$414E7362)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$41616B62)
call SelectHeroSkill(Eh,$534E6571)
call UnitAddItemToSlotById(Eh,$61786173,0)
call UnitAddItemToSlotById(Eh,$7368686E,1)
call UnitAddItemToSlotById(Eh,$7370726E,2)
call UnitAddItemToSlotById(Eh,$74656C73,3)
call UnitAddItemToSlotById(Eh,$66677267,4)
set Ei=CreateUnit(CC,$55776172,12579.6,-9815.7,272.26)
call SetHeroLevel(Ei,147,false)
call SetUnitState(Ei,UNIT_STATE_MANA,4900)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$41456572)
call SelectHeroSkill(Ei,$414E7263)
call SelectHeroSkill(Ei,$414E7263)
call SelectHeroSkill(Ei,$414E7263)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41556175)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$41616B62)
call SelectHeroSkill(Ei,$4148626E)
call SelectHeroSkill(Ei,$4148626E)
call SelectHeroSkill(Ei,$4148626E)
call SelectHeroSkill(Ei,$4145666B)
call SelectHeroSkill(Ei,$4145666B)
call SelectHeroSkill(Ei,$4145666B)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$416D6466)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call SelectHeroSkill(Ei,$41303359)
call IssueImmediateOrder(Ei,"")
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call SelectHeroSkill(Ei,$41486162)
call UnitAddItemToSlotById(Ei,$49303034,0)
call UnitAddItemToSlotById(Ei,$72756774,1)
call UnitAddItemToSlotById(Ei,$72756D70,2)
call UnitAddItemToSlotById(Ei,$49303049,3)
call UnitAddItemToSlotById(Ei,$49303056,4)
call UnitAddItemToSlotById(Ei,$4930304C,5)
set Ej=CreateUnit(CC,$55303033,12466.5,-10247.9,268.35)
call SetHeroLevel(Ej,140,false)
call SetUnitState(Ej,UNIT_STATE_MANA,180)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$414F7368)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41556373)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call SelectHeroSkill(Ej,$41666165)
call IssueImmediateOrder(Ej,"faeriefireon")
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$414E736F)
call SelectHeroSkill(Ej,$4155736C)
call IssueImmediateOrder(Ej,"slowon")
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41436662)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call SelectHeroSkill(Ej,$41505432)
call IssueImmediateOrder(Ej,"")
call UnitAddItemToSlotById(Ej,$6F666972,0)
call UnitAddItemToSlotById(Ej,$62726167,1)
call UnitAddItemToSlotById(Ej,$63726474,2)
call UnitAddItemToSlotById(Ej,$49303056,3)
call UnitAddItemToSlotById(Ej,$74656C73,4)
call UnitAddItemToSlotById(Ej,$49303049,5)
set Ek=CreateUnit(CC,$456B6767,12623.9,-10239.3,267.984)
call SetHeroLevel(Ek,105,false)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41456572)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$41486473)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call SelectHeroSkill(Ek,$4130334F)
call IssueImmediateOrder(Ek,"")
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$4173736B)
call SelectHeroSkill(Ek,$414E6176)
call UnitAddItemToSlotById(Ek,$49303041,0)
call UnitAddItemToSlotById(Ek,$7368656E,1)
call UnitAddItemToSlotById(Ek,$6F666C67,2)
call UnitAddItemToSlotById(Ek,$736F7232,3)
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,Ek,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,Ek,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function fx)
set El=CreateUnit(CC,$4F303031,12543.4,-10025.,265.5)
call SetHeroLevel(El,60,false)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$414F7773)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$41557473)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$414F6165)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$4173736B)
call SelectHeroSkill(El,$41486176)
call SelectHeroSkill(El,$41486176)
call SelectHeroSkill(El,$41486176)
call SelectHeroSkill(El,$41486176)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call SelectHeroSkill(El,$4130414F)
call IssueImmediateOrder(El,"")
call UnitAddItemToSlotById(El,$6667756E,0)
call UnitAddItemToSlotById(El,$6F666C67,1)
call UnitAddItemToSlotById(El,$7368656E,2)
call UnitAddItemToSlotById(El,$49303037,3)
call UnitAddItemToSlotById(El,$676C646F,4)
set Em=CreateUnit(CC,$4E305A4D,12956.3,-9297.6,222.34)
call SetHeroLevel(Em,100,false)
call SelectHeroSkill(Em,$41486176)
call SelectHeroSkill(Em,$41486176)
call SelectHeroSkill(Em,$41486176)
call SelectHeroSkill(Em,$41486176)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414E6874)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$414F7773)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41656E73)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41486473)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call SelectHeroSkill(Em,$41556175)
call UnitAddItemToSlotById(Em,$726E7370,0)
call UnitAddItemToSlotById(Em,$6F666C67,1)
call UnitAddItemToSlotById(Em,$7368656E,2)
call UnitAddItemToSlotById(Em,$6667756E,3)
call UnitAddItemToSlotById(Em,$6F736C6F,4)
set En=CreateUnit(CC,$4E304350,12958.4,-9448.6,340.85)
call SetHeroLevel(En,120,false)
call SelectHeroSkill(En,$41486176)
call SelectHeroSkill(En,$41486176)
call SelectHeroSkill(En,$41486176)
call SelectHeroSkill(En,$41486176)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414E6874)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$414F7773)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41656E73)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$41486473)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call SelectHeroSkill(En,$414E7362)
call UnitAddItemToSlotById(En,$6F636F72,0)
call UnitAddItemToSlotById(En,$49303033,1)
call UnitAddItemToSlotById(En,$6F736C6F,2)
set Eo=CreateUnit(CC,$456D6672,12012.5,-10209.1,270.07)
call SetHeroLevel(Eo,130,false)
call SetUnitState(Eo,UNIT_STATE_MANA,180)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call SelectHeroSkill(Eo,$41303453)
call IssueImmediateOrder(Eo,"frenzyon")
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call SelectHeroSkill(Eo,$41486473)
call IssueImmediateOrder(Eo,"divineshield")
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call SelectHeroSkill(Eo,$4145696D)
call IssueImmediateOrder(Eo,"immolation")
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$41456576)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call SelectHeroSkill(Eo,$414F6372)
call UnitAddItemToSlotById(Eo,$49303042,0)
call UnitAddItemToSlotById(Eo,$68627468,1)
call UnitAddItemToSlotById(Eo,$72646530,2)
call UnitAddItemToSlotById(Eo,$49303039,3)
set Ep=CreateUnit(CC,$4563656E,12385.4,-10196.,288.2)
call SetHeroLevel(Ep,150,false)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$41487462)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6D69)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$414F6165)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$41456576)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$414F6372)
call SelectHeroSkill(Ep,$41303131)
call SelectHeroSkill(Ep,$41303131)
call SelectHeroSkill(Ep,$41303131)
call SelectHeroSkill(Ep,$41303131)
call IssueImmediateOrder(Ep,"")
call UnitAddItemToSlotById(Ep,$73687273,0)
call UnitAddItemToSlotById(Ep,$49303145,1)
call UnitAddItemToSlotById(Ep,$49303036,2)
call UnitAddItemToSlotById(Ep,$72646530,3)
call UnitAddItemToSlotById(Ep,$74656C73,4)
set Eq=CreateUnit(CC,$4E666972,12229.1,-10252.4,279.68)
call SetHeroLevel(Eq,200,false)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$414E736F)
call SelectHeroSkill(Eq,$41303435)
call SelectHeroSkill(Eq,$41303435)
call SelectHeroSkill(Eq,$41303435)
call SelectHeroSkill(Eq,$41303435)
call IssueImmediateOrder(Eq,"")
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call SelectHeroSkill(Eq,$41303550)
call IssueImmediateOrder(Eq,"")
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call SelectHeroSkill(Eq,$414E6963)
call IssueImmediateOrder(Eq,"")
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call SelectHeroSkill(Eq,$41303345)
call IssueImmediateOrder(Eq,"")
call UnitAddItemToSlotById(Eq,$6D6C7374,0)
call UnitAddItemToSlotById(Eq,$626C6261,1)
call UnitAddItemToSlotById(Eq,$726F7473,2)
call UnitAddItemToSlotById(Eq,$72756D70,3)
call UnitAddItemToSlotById(Eq,$74656C73,4)
call UnitAddItemToSlotById(Eq,$49303033,5)
set Er=CreateUnit(CC,$4E304C54,12978.6,-9605.4,273.05)
call SetHeroLevel(Er,135,false)
call SetUnitState(Er,UNIT_STATE_MANA,300)
call SelectHeroSkill(Er,$41303046)
call SelectHeroSkill(Er,$41303046)
call SelectHeroSkill(Er,$41303046)
call SelectHeroSkill(Er,$41303046)
call IssueImmediateOrder(Er,"")
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$414E6662)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call SelectHeroSkill(Er,$41304158)
call IssueImmediateOrder(Er,"")
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call SelectHeroSkill(Er,$41303656)
call IssueImmediateOrder(Er,"")
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call SelectHeroSkill(Er,$41304157)
call IssueImmediateOrder(Er,"")
call UnitAddItemToSlotById(Er,$49303250,0)
call UnitAddItemToSlotById(Er,$49303145,1)
call UnitAddItemToSlotById(Er,$72756D70,2)
call UnitAddItemToSlotById(Er,$626C6261,3)
set Es=CreateUnit(CC,$4E305453,12984.,-9727.8,284.57)
call SetHeroLevel(Es,150,false)
call SelectHeroSkill(Es,$4130305A)
call SelectHeroSkill(Es,$4130305A)
call SelectHeroSkill(Es,$4130305A)
call SelectHeroSkill(Es,$4130305A)
call IssueImmediateOrder(Es,"")
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41456572)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$41487463)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$414F6372)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call SelectHeroSkill(Es,$4130334F)
call IssueImmediateOrder(Es,"")
call UnitAddItemToSlotById(Es,$73686377,0)
call UnitAddItemToSlotById(Es,$49303145,1)
call UnitAddItemToSlotById(Es,$70737064,2)
call UnitAddItemToSlotById(Es,$49303045,3)
call UnitAddItemToSlotById(Es,$49303146,4)
set Et=CreateUnit(CC,$4E304844,12996.1,-9835.1,40.6)
call SetHeroLevel(Et,150,false)
call SelectHeroSkill(Et,$41486176)
call SelectHeroSkill(Et,$41486176)
call SelectHeroSkill(Et,$41486176)
call SelectHeroSkill(Et,$41486176)
call SelectHeroSkill(Et,$41303131)
call SelectHeroSkill(Et,$41303131)
call SelectHeroSkill(Et,$41303131)
call SelectHeroSkill(Et,$41303131)
call IssueImmediateOrder(Et,"")
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414E6874)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$414F7773)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41656E73)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$41486473)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call SelectHeroSkill(Et,$414F6165)
call UnitAddItemToSlotById(Et,$6F636F72,0)
call UnitAddItemToSlotById(Et,$72756D70,1)
call UnitAddItemToSlotById(Et,$49303145,2)
call UnitAddItemToSlotById(Et,$49303146,3)
set Eu=CreateUnit(CC,$4E305A54,13014.9,-9949.5,190.39)
call SetHeroLevel(Eu,150,false)
call SelectHeroSkill(Eu,$41303046)
call SelectHeroSkill(Eu,$41303046)
call SelectHeroSkill(Eu,$41303046)
call SelectHeroSkill(Eu,$41303046)
call IssueImmediateOrder(Eu,"")
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$41616B62)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$414E6361)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call SelectHeroSkill(Eu,$41304C4E)
call IssueImmediateOrder(Eu,"")
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41486268)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call SelectHeroSkill(Eu,$41303345)
call IssueImmediateOrder(Eu,"")
call UnitAddItemToSlotById(Eu,$6F636F72,0)
call UnitAddItemToSlotById(Eu,$6F6C6932,1)
call UnitAddItemToSlotById(Eu,$49303145,2)
call UnitAddItemToSlotById(Eu,$6F736C6F,3)
call UnitAddItemToSlotById(Eu,$49303043,4)
set Ev=CreateUnit(CC,$4E305343,12803.5,-10420.6,57.33)
call SetHeroLevel(Ev,180,false)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call SelectHeroSkill(Ev,$41303830)
call IssueImmediateOrder(Ev,"")
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call SelectHeroSkill(Ev,$41303758)
call IssueImmediateOrder(Ev,"slowoff")
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call SelectHeroSkill(Ev,$41303831)
call IssueImmediateOrder(Ev,"")
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call SelectHeroSkill(Ev,$4130324A)
call IssueImmediateOrder(Ev,"")
call SelectHeroSkill(Ev,$4130305A)
call SelectHeroSkill(Ev,$4130305A)
call SelectHeroSkill(Ev,$4130305A)
call SelectHeroSkill(Ev,$4130305A)
call IssueImmediateOrder(Ev,"")
call SelectHeroSkill(Ev,$41303046)
call SelectHeroSkill(Ev,$41303046)
call SelectHeroSkill(Ev,$41303046)
call SelectHeroSkill(Ev,$41303046)
call IssueImmediateOrder(Ev,"")
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$414F7773)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call SelectHeroSkill(Ev,$41303755)
call IssueImmediateOrder(Ev,"")
call UnitAddItemToSlotById(Ev,$49303147,0)
call UnitAddItemToSlotById(Ev,$72756D70,1)
call UnitAddItemToSlotById(Ev,$49303145,2)
call UnitAddItemToSlotById(Ev,$49303146,3)
call UnitAddItemToSlotById(Ev,$49303043,4)
set Ew=CreateUnit(CC,$4E30534A,12897.,-10452.1,54.56)
call SetHeroLevel(Ew,180,false)
call SelectHeroSkill(Ew,$41303130)
call SelectHeroSkill(Ew,$41303130)
call SelectHeroSkill(Ew,$41303130)
call SelectHeroSkill(Ew,$41303130)
call IssueImmediateOrder(Ew,"")
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call SelectHeroSkill(Ew,$41303342)
call IssueImmediateOrder(Ew,"")
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$4162736B)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41556176)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call SelectHeroSkill(Ew,$41304432)
call IssueImmediateOrder(Ew,"")
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call SelectHeroSkill(Ew,$41303345)
call IssueImmediateOrder(Ew,"")
call UnitAddItemToSlotById(Ew,$49303251,0)
call UnitAddItemToSlotById(Ew,$49303145,1)
call UnitAddItemToSlotById(Ew,$72756D70,2)
call UnitAddItemToSlotById(Ew,$49303146,3)
call UnitAddItemToSlotById(Ew,$49303043,4)
set Ex=CreateUnit(CC,$4E304C58,12113.7,-10318.9,252.94)
call SetHeroLevel(Ex,200,false)
call SetUnitState(Ex,UNIT_STATE_MANA,300)
call SelectHeroSkill(Ex,$41303435)
call SelectHeroSkill(Ex,$41303435)
call SelectHeroSkill(Ex,$41303435)
call SelectHeroSkill(Ex,$41303435)
call IssueImmediateOrder(Ex,"")
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call SelectHeroSkill(Ex,$41303747)
call IssueImmediateOrder(Ex,"")
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$41436662)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$414F6878)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call SelectHeroSkill(Ex,$41304642)
call IssueImmediateOrder(Ex,"")
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call SelectHeroSkill(Ex,$41303345)
call IssueImmediateOrder(Ex,"")
call UnitAddItemToSlotById(Ex,$49303049,0)
call UnitAddItemToSlotById(Ex,$72756D70,1)
call UnitAddItemToSlotById(Ex,$49303145,2)
call UnitAddItemToSlotById(Ex,$49303056,3)
call UnitAddItemToSlotById(Ex,$4930304A,4)
set Ey=CreateUnit(CC,$4E305351,12010.1,-10326.3,274.56)
call SetHeroLevel(Ey,200,false)
call SelectHeroSkill(Ey,$41303439)
call SelectHeroSkill(Ey,$41303439)
call SelectHeroSkill(Ey,$41303439)
call SelectHeroSkill(Ey,$41303439)
call IssueImmediateOrder(Ey,"")
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41436662)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call SelectHeroSkill(Ey,$41303233)
call IssueImmediateOrder(Ey,"faeriefireoff")
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$414E6361)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call SelectHeroSkill(Ey,$41303345)
call IssueImmediateOrder(Ey,"")
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call SelectHeroSkill(Ey,$41303752)
call IssueImmediateOrder(Ey,"")
call UnitAddItemToSlotById(Ey,$49303251,0)
call UnitAddItemToSlotById(Ey,$49303234,1)
call UnitAddItemToSlotById(Ey,$49303235,2)
call UnitAddItemToSlotById(Ey,$49303245,3)
call UnitAddItemToSlotById(Ey,$49303236,4)
call UnitAddItemToSlotById(Ey,$4930304C,5)
set Ez=CreateUnit(CC,$4E304457,11917.3,-10048.7,257.091)
call SetHeroLevel(Ez,140,false)
call SetUnitState(Ez,UNIT_STATE_MANA,170)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41616D6B)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call SelectHeroSkill(Ez,$41303247)
call IssueImmediateOrder(Ez,"")
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$414E6874)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call SelectHeroSkill(Ez,$41303059)
call IssueImmediateOrder(Ez,"")
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call SelectHeroSkill(Ez,$41636462)
call UnitAddItemToSlotById(Ez,$67736F75,0)
call UnitAddItemToSlotById(Ez,$636F736C,1)
call UnitAddItemToSlotById(Ez,$49303145,2)
call UnitAddItemToSlotById(Ez,$70737064,3)
set E0=CreateUnit(CC,$4E305859,12791.5,-9977.6,272.82)
call SetHeroLevel(E0,150,false)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call SelectHeroSkill(E0,$41534A33)
call IssueImmediateOrder(E0,"")
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$414E7362)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call SelectHeroSkill(E0,$41304436)
call IssueImmediateOrder(E0,"")
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41487463)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call SelectHeroSkill(E0,$41486268)
call UnitAddItemToSlotById(E0,$6F636F72,0)
call UnitAddItemToSlotById(E0,$6B67616C,1)
call UnitAddItemToSlotById(E0,$49303145,2)
set E1=CreateUnit(CC,$4E304351,12383.6,-10076.9,273.73)
call SetHeroLevel(E1,120,false)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41436662)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call SelectHeroSkill(E1,$41666165)
call IssueImmediateOrder(E1,"faeriefireoff")
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call SelectHeroSkill(E1,$4130344E)
call IssueImmediateOrder(E1,"")
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call SelectHeroSkill(E1,$41505432)
call IssueImmediateOrder(E1,"")
call UnitAddItemToSlotById(E1,$49303031,0)
call UnitAddItemToSlotById(E1,$49303049,1)
call UnitAddItemToSlotById(E1,$49303142,2)
call UnitAddItemToSlotById(E1,$49303032,3)
call UnitAddItemToSlotById(E1,$4930304A,4)
call UnitAddItemToSlotById(E1,$49303056,5)
set E2=CreateUnit(CC,$4E304348,12451.4,-10149.4,264.07)
call SetHeroLevel(E2,120,false)
call SetUnitState(E2,UNIT_STATE_MANA,1360)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$41616B62)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$414F6D69)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$4155696D)
call SelectHeroSkill(E2,$41303345)
call SelectHeroSkill(E2,$41303345)
call SelectHeroSkill(E2,$41303345)
call SelectHeroSkill(E2,$41303345)
call SelectHeroSkill(E2,$41303345)
call SelectHeroSkill(E2,$41303345)
call SelectHeroSkill(E2,$41303345)
call SelectHeroSkill(E2,$41303345)
call IssueImmediateOrder(E2,"")
call UnitAddItemToSlotById(E2,$6F636F72,0)
call UnitAddItemToSlotById(E2,$49303145,1)
call UnitAddItemToSlotById(E2,$49303037,2)
call UnitAddItemToSlotById(E2,$49303142,3)
set E3=CreateUnit(CC,$4E30435A,12693.6,-9830.1,359.26)
call SetHeroLevel(E3,150,false)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$41456572)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call SelectHeroSkill(E3,$4130334F)
call IssueImmediateOrder(E3,"")
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41486473)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call SelectHeroSkill(E3,$41303059)
call IssueImmediateOrder(E3,"")
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call SelectHeroSkill(E3,$4173736B)
call UnitAddItemToSlotById(E3,$73687273,0)
call UnitAddItemToSlotById(E3,$49303145,1)
call UnitAddItemToSlotById(E3,$72646530,2)
call UnitAddItemToSlotById(E3,$726F7473,3)
call UnitAddItemToSlotById(E3,$49303043,4)
call UnitAddItemToSlotById(E3,$49303037,5)
set E4=CreateUnit(CC,$4E435A30,12205.1,-10068.2,264.93)
call SetHeroLevel(E4,150,false)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41436662)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41556373)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call SelectHeroSkill(E4,$41666165)
call IssueImmediateOrder(E4,"faeriefireoff")
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$414E736F)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call SelectHeroSkill(E4,$41505432)
call IssueImmediateOrder(E4,"")
call UnitAddItemToSlotById(E4,$49303049,0)
call UnitAddItemToSlotById(E4,$49303142,1)
call UnitAddItemToSlotById(E4,$49303056,2)
call UnitAddItemToSlotById(E4,$49303032,3)
call UnitAddItemToSlotById(E4,$6C656467,4)
call UnitAddItemToSlotById(E4,$736F7234,5)
set E5=CreateUnit(CC,$4E304443,12131.1,-10179.7,41.9)
call SetHeroLevel(E5,140,false)
call SetUnitState(E5,UNIT_STATE_MANA,100)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call SelectHeroSkill(E5,$41594D31)
call IssueImmediateOrder(E5,"")
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call SelectHeroSkill(E5,$41594D32)
call IssueImmediateOrder(E5,"")
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call SelectHeroSkill(E5,$41594D33)
call IssueImmediateOrder(E5,"")
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call SelectHeroSkill(E5,$41594D34)
call IssueImmediateOrder(E5,"")
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call SelectHeroSkill(E5,$41303357)
call IssueImmediateOrder(E5,"")
call UnitAddItemToSlotById(E5,$666C6167,0)
call UnitAddItemToSlotById(E5,$49303145,1)
call UnitAddItemToSlotById(E5,$49303036,2)
call UnitAddItemToSlotById(E5,$70737064,3)
call UnitAddItemToSlotById(E5,$49303146,4)
call UnitAddItemToSlotById(E5,$4930304C,5)
set E6=CreateUnit(CC,$4E30594A,12377.5,-9814.6,221.72)
call SetHeroLevel(E6,90,false)
call SetUnitState(E6,UNIT_STATE_MANA,1280)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$41487462)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6D69)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$414F6165)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call SelectHeroSkill(E6,$4130334F)
call IssueImmediateOrder(E6,"")
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call SelectHeroSkill(E6,$41303345)
call IssueImmediateOrder(E6,"")
call UnitAddItemToSlotById(E6,$73686377,0)
call UnitAddItemToSlotById(E6,$72756D70,1)
call UnitAddItemToSlotById(E6,$68627468,2)
call UnitAddItemToSlotById(E6,$72616D32,4)
call UnitAddItemToSlotById(E6,$49303037,5)
set E7=CreateUnit(CC,$4E594A30,12407.1,-9972.,44.96)
call SetHeroLevel(E7,120,false)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$414F7773)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call SelectHeroSkill(E7,$41594A34)
call IssueImmediateOrder(E7,"")
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call SelectHeroSkill(E7,$41303350)
call IssueImmediateOrder(E7,"")
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call SelectHeroSkill(E7,$41475934)
call IssueImmediateOrder(E7,"")
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call SelectHeroSkill(E7,$414C4234)
call IssueImmediateOrder(E7,"")
call UnitAddItemToSlotById(E7,$676F626D,0)
call UnitAddItemToSlotById(E7,$49303145,1)
call UnitAddItemToSlotById(E7,$72756D70,2)
call UnitAddItemToSlotById(E7,$4930304A,3)
call UnitAddItemToSlotById(E7,$62666872,4)
call UnitAddItemToSlotById(E7,$736F756C,5)
set E8=CreateUnit(CC,$4E434C4A,11891.1,-9843.,1.59)
call SetHeroLevel(E8,35,false)
call SetUnitState(E8,UNIT_STATE_MANA,1360)
call SelectHeroSkill(E8,$4162736B)
call SelectHeroSkill(E8,$4162736B)
call SelectHeroSkill(E8,$4162736B)
call SelectHeroSkill(E8,$4162736B)
call SelectHeroSkill(E8,$4162736B)
call SelectHeroSkill(E8,$414F6165)
call SelectHeroSkill(E8,$414F6165)
call SelectHeroSkill(E8,$414F6165)
call SelectHeroSkill(E8,$414F6165)
call SelectHeroSkill(E8,$414F6165)
call SelectHeroSkill(E8,$41304259)
call SelectHeroSkill(E8,$41304259)
call SelectHeroSkill(E8,$41304259)
call SelectHeroSkill(E8,$41304259)
call SelectHeroSkill(E8,$41304259)
call IssueImmediateOrder(E8,"")
call SelectHeroSkill(E8,$414E6963)
call SelectHeroSkill(E8,$414E6963)
call SelectHeroSkill(E8,$414E6963)
call SelectHeroSkill(E8,$414E6963)
call SelectHeroSkill(E8,$414E6963)
call UnitAddItemToSlotById(E8,$61786173,0)
call UnitAddItemToSlotById(E8,$7368686E,1)
call UnitAddItemToSlotById(E8,$49303037,2)
set E9=CreateUnit(CC,$4E304C43,12040.6,-10132.3,154.09)
call SetHeroLevel(E9,30,false)
call SetUnitState(E9,UNIT_STATE_MANA,1280)
call SelectHeroSkill(E9,$41487462)
call SelectHeroSkill(E9,$41487462)
call SelectHeroSkill(E9,$41487462)
call SelectHeroSkill(E9,$41487462)
call SelectHeroSkill(E9,$41487462)
call SelectHeroSkill(E9,$414F6D69)
call SelectHeroSkill(E9,$414F6D69)
call SelectHeroSkill(E9,$414F6D69)
call SelectHeroSkill(E9,$414F6D69)
call SelectHeroSkill(E9,$414F6D69)
call SelectHeroSkill(E9,$414F6165)
call SelectHeroSkill(E9,$414F6165)
call SelectHeroSkill(E9,$414F6165)
call SelectHeroSkill(E9,$414F6165)
call SelectHeroSkill(E9,$414F6165)
call SelectHeroSkill(E9,$4130334F)
call SelectHeroSkill(E9,$4130334F)
call SelectHeroSkill(E9,$4130334F)
call SelectHeroSkill(E9,$4130334F)
call SelectHeroSkill(E9,$4130334F)
call IssueImmediateOrder(E9,"")
call SelectHeroSkill(E9,$41303345)
call SelectHeroSkill(E9,$41303345)
call SelectHeroSkill(E9,$41303345)
call SelectHeroSkill(E9,$41303345)
call SelectHeroSkill(E9,$41303345)
call IssueImmediateOrder(E9,"")
call UnitAddItemToSlotById(E9,$61786173,0)
call UnitAddItemToSlotById(E9,$49303037,1)
call UnitAddItemToSlotById(E9,$7368686E,2)
set FB=CreateUnit(CC,$4E304753,12024.6,-10005.5,177.61)
call SetHeroLevel(FB,30,false)
call SetUnitState(FB,UNIT_STATE_MANA,1320)
call SelectHeroSkill(FB,$414E6874)
call SelectHeroSkill(FB,$414E6874)
call SelectHeroSkill(FB,$414E6874)
call SelectHeroSkill(FB,$414E6874)
call SelectHeroSkill(FB,$414E6874)
call SelectHeroSkill(FB,$41616B62)
call SelectHeroSkill(FB,$41616B62)
call SelectHeroSkill(FB,$41616B62)
call SelectHeroSkill(FB,$41616B62)
call SelectHeroSkill(FB,$41616B62)
call SelectHeroSkill(FB,$41557473)
call SelectHeroSkill(FB,$41557473)
call SelectHeroSkill(FB,$41557473)
call SelectHeroSkill(FB,$41557473)
call SelectHeroSkill(FB,$41557473)
call SelectHeroSkill(FB,$41303632)
call SelectHeroSkill(FB,$41303632)
call SelectHeroSkill(FB,$41303632)
call SelectHeroSkill(FB,$41303632)
call SelectHeroSkill(FB,$41303632)
call IssueImmediateOrder(FB,"")
call SelectHeroSkill(FB,$414E6361)
call SelectHeroSkill(FB,$414E6361)
call SelectHeroSkill(FB,$414E6361)
call SelectHeroSkill(FB,$414E6361)
call SelectHeroSkill(FB,$414E6361)
call UnitAddItemToSlotById(FB,$49303044,0)
call UnitAddItemToSlotById(FB,$7368686E,1)
call UnitAddItemToSlotById(FB,$7363686C,2)
set FC=CreateUnit(CC,$4E30485A,12237.9,-9754.2,280.39)
call SetHeroLevel(FC,45,false)
call SetUnitState(FC,UNIT_STATE_MANA,320)
call SelectHeroSkill(FC,$41456572)
call SelectHeroSkill(FC,$41456572)
call SelectHeroSkill(FC,$41456572)
call SelectHeroSkill(FC,$41456572)
call SelectHeroSkill(FC,$41456572)
call SelectHeroSkill(FC,$41486473)
call SelectHeroSkill(FC,$41486473)
call SelectHeroSkill(FC,$41486473)
call SelectHeroSkill(FC,$41486473)
call SelectHeroSkill(FC,$41486473)
call SelectHeroSkill(FC,$41303345)
call SelectHeroSkill(FC,$41303345)
call SelectHeroSkill(FC,$41303345)
call SelectHeroSkill(FC,$41303345)
call SelectHeroSkill(FC,$41303345)
call IssueImmediateOrder(FC,"")
call SelectHeroSkill(FC,$41303350)
call SelectHeroSkill(FC,$41303350)
call SelectHeroSkill(FC,$41303350)
call SelectHeroSkill(FC,$41303350)
call SelectHeroSkill(FC,$41303350)
call IssueImmediateOrder(FC,"")
call UnitAddItemToSlotById(FC,$61786173,0)
call UnitAddItemToSlotById(FC,$6F666C67,1)
call UnitAddItemToSlotById(FC,$7368656E,2)
call UnitAddItemToSlotById(FC,$6667756E,3)
set FD=CreateUnit(CC,$4E423036,12299.3,-10386.2,282.05)
call SetHeroLevel(FD,10,false)
call SelectHeroSkill(FD,$414F6D69)
call SelectHeroSkill(FD,$414F6D69)
call SelectHeroSkill(FD,$41557473)
call SelectHeroSkill(FD,$41557473)
call SelectHeroSkill(FD,$41656E73)
call SelectHeroSkill(FD,$41656E73)
call SelectHeroSkill(FD,$414F6165)
call SelectHeroSkill(FD,$414F6165)
call SelectHeroSkill(FD,$4173736B)
call SelectHeroSkill(FD,$4173736B)
call UnitAddItemToSlotById(FD,$72617463,0)
call UnitAddItemToSlotById(FD,$72646533,1)
set FE=CreateUnit(CC,$4E423037,12415.,-10443.4,269.65)
call SetHeroLevel(FE,148,false)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$414E736F)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$41436662)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$4155666E)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41707267)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call SelectHeroSkill(FE,$41303651)
call IssueImmediateOrder(FE,"")
call UnitAddItemToSlotById(FE,$49303049,0)
call UnitAddItemToSlotById(FE,$49303145,1)
call UnitAddItemToSlotById(FE,$72756D70,2)
call UnitAddItemToSlotById(FE,$6F736C6F,3)
call UnitAddItemToSlotById(FE,$4930304A,4)
call UnitAddItemToSlotById(FE,$49303043,5)
set FF=CreateUnit(CC,$4E423038,12489.7,-10431.9,281.54)
call SetHeroLevel(FF,140,false)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call SelectHeroSkill(FF,$41534A33)
call IssueImmediateOrder(FF,"")
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$41436662)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$4155666E)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call SelectHeroSkill(FF,$41303752)
call IssueImmediateOrder(FF,"")
call SelectHeroSkill(FF,$534E696E)
call SelectHeroSkill(FF,$534E696E)
call SelectHeroSkill(FF,$534E696E)
call SelectHeroSkill(FF,$534E696E)
call UnitAddItemToSlotById(FF,$6C656467,0)
call UnitAddItemToSlotById(FF,$7368746D,1)
call UnitAddItemToSlotById(FF,$72756D70,2)
call UnitAddItemToSlotById(FF,$7664646C,3)
call UnitAddItemToSlotById(FF,$49303145,4)
call UnitAddItemToSlotById(FF,$49303056,5)
set FG=CreateUnit(CC,$4E30304E,11888.2,-10438.3,275.95)
call SetHeroLevel(FG,90,false)
call UnitAddItemToSlotById(FG,$61786173,0)
call UnitAddItemToSlotById(FG,$6F666C67,1)
call UnitAddItemToSlotById(FG,$7368656E,2)
call UnitAddItemToSlotById(FG,$626C6261,3)
set FH=CreateUnit(CC,$4E304847,12113.7,-10448.8,249.99)
call SetHeroLevel(FH,100,false)
call UnitAddItemToSlotById(FH,$49303055,0)
call UnitAddItemToSlotById(FH,$6F666C67,1)
call UnitAddItemToSlotById(FH,$7368656E,2)
call UnitAddItemToSlotById(FH,$6667756E,3)
call UnitAddItemToSlotById(FH,$49303037,4)
set FI=CreateUnit(CC,$4E423039,12610.,-10400.,254.79)
call SetHeroLevel(FI,120,false)
call SetUnitState(FI,UNIT_STATE_MANA,300)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41616D6B)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$41436362)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414F6D69)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call SelectHeroSkill(FI,$414E6661)
call IssueImmediateOrder(FI,"innerfireoff")
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call SelectHeroSkill(FI,$41456172)
call UnitAddItemToSlotById(FI,$49303250,0)
call UnitAddItemToSlotById(FI,$49303145,1)
call UnitAddItemToSlotById(FI,$72756D70,2)
call UnitAddItemToSlotById(FI,$49303037,3)
call UnitAddItemToSlotById(FI,$4930304C,4)
set FJ=CreateUnit(CC,$4E423041,12701.9,-10420.9,266.88)
call SetHeroLevel(FJ,125,false)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$41456572)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call SelectHeroSkill(FJ,$4130334F)
call IssueImmediateOrder(FJ,"")
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41486473)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call SelectHeroSkill(FJ,$41303059)
call IssueImmediateOrder(FJ,"")
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call SelectHeroSkill(FJ,$4173736B)
call UnitAddItemToSlotById(FJ,$49303041,0)
call UnitAddItemToSlotById(FJ,$49303145,1)
call UnitAddItemToSlotById(FJ,$6F6C6932,2)
call UnitAddItemToSlotById(FJ,$66677267,3)
set FK=CreateUnit(CC,$4E423042,12511.,-10314.7,224.9)
call SetHeroLevel(FK,99,false)
call SetUnitState(FK,UNIT_STATE_MANA,300)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$41487463)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call SelectHeroSkill(FK,$415A5957)
call IssueImmediateOrder(FK,"")
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call SelectHeroSkill(FK,$41594C33)
call IssueImmediateOrder(FK,"")
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$4155696D)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call SelectHeroSkill(FK,$41303755)
call IssueImmediateOrder(FK,"")
call UnitAddItemToSlotById(FK,$49303055,0)
call UnitAddItemToSlotById(FK,$6F6C6932,1)
call UnitAddItemToSlotById(FK,$66677267,2)
set FL=CreateUnit(CC,$4E423043,12818.,-10297.4,277.79)
call SetHeroLevel(FL,125,false)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$414F7773)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call SelectHeroSkill(FL,$41303247)
call IssueImmediateOrder(FL,"")
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41557473)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call SelectHeroSkill(FL,$41303632)
call IssueImmediateOrder(FL,"")
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call SelectHeroSkill(FL,$4173736B)
call UnitAddItemToSlotById(FL,$6F636F72,0)
call UnitAddItemToSlotById(FL,$49303145,1)
call UnitAddItemToSlotById(FL,$6F6C6932,2)
call UnitAddItemToSlotById(FL,$49303146,3)
endfunction
function f4 takes nothing returns nothing
local player CC=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit CE
local trigger CS
set CN=CreateUnit(CC,$4E6B6C6A,-4024.5,7205.6,200.02)
call SetHeroLevel(CN,150,false)
call SetUnitState(CN,UNIT_STATE_MANA,4810)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$41456572)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$414E6874)
call SelectHeroSkill(CN,$41486473)
call SelectHeroSkill(CN,$41486473)
call IssueImmediateOrder(CN,"divineshield")
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$414E6361)
call SelectHeroSkill(CN,$41486268)
call SelectHeroSkill(CN,$41486268)
call SelectHeroSkill(CN,$41486268)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41487463)
call SelectHeroSkill(CN,$41486176)
call SelectHeroSkill(CN,$41486176)
call SelectHeroSkill(CN,$41486176)
call SelectHeroSkill(CN,$41303131)
call SelectHeroSkill(CN,$41303131)
call IssueImmediateOrder(CN,"")
// 红牛
set CO=CreateUnit(CC,$4E30304A,9864.2,13220.1,274.67)
call SetHeroLevel(CO,150,false)
call SetUnitState(CO,UNIT_STATE_MANA,710)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call SelectHeroSkill(CO,$41666165)
call IssueImmediateOrder(CO,"faeriefireoff")
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call SelectHeroSkill(CO,$41303452)
call IssueImmediateOrder(CO,"")
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$41486268)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414F6372)
call SelectHeroSkill(CO,$414E7374)
call SelectHeroSkill(CO,$414E7374)
call SelectHeroSkill(CO,$414E7374)
call SelectHeroSkill(CO,$414E7374)
call IssueImmediateOrder(CO,"bloodluston")
call SelectHeroSkill(CO,$414E6465)
// 八岐大蛇
set she=CreateUnit(CC,$4E303030,1878.7,7866.2,79.62)
call SetHeroLevel(she,200,false)
call SetUnitState(she,UNIT_STATE_MANA,1000)
// 学习抗拒火环
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
call SelectHeroSkill(she,$41304642)
// 学习燃灰
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
call SelectHeroSkill(she,$41623064)
// 学习地裂 
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
call SelectHeroSkill(she,$414F7773)
// 学习擒龙手
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
call SelectHeroSkill(she,$41303452)
// 学习避实就虚 41304143
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
call SelectHeroSkill(she,$41304143)
// 蜘蛛boss
set spider=CreateUnit(CC,$4E303032,-7535.7,-7173.,271.)
call SetHeroLevel(spider,200,false)
call SetUnitState(spider,UNIT_STATE_MANA,3000)
// 学习铜墙铁壁
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SelectHeroSkill(spider,$4173736B)
call SetUnitAbilityLevel(spider,$4173736B,9)
// 学习招架
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
call SelectHeroSkill(spider,$41594C33)
// 学习无敌
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
call SelectHeroSkill(spider,$41486473)
// 学习万夫莫敌
call SelectHeroSkill(spider,$415A4635)
call SelectHeroSkill(spider,$415A4635)
call SelectHeroSkill(spider,$415A4635)
call SelectHeroSkill(spider,$415A4635)


set CP=CreateUnit(CC,$4E30304B,9347.9,13216.4,270.532)
call SetHeroLevel(CP,150,false)
call SetUnitState(CP,UNIT_STATE_MANA,1000)
call SelectHeroSkill(CP,$41303435)
call SelectHeroSkill(CP,$41303435)
call SelectHeroSkill(CP,$41303435)
call SelectHeroSkill(CP,$41303435)
call IssueImmediateOrder(CP,"")
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call SelectHeroSkill(CP,$41303455)
call IssueImmediateOrder(CP,"")
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$41636468)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call SelectHeroSkill(CP,$4130314A)
call IssueImmediateOrder(CP,"")
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call SelectHeroSkill(CP,$4145696D)
call IssueImmediateOrder(CP,"immolation")
call IssueImmediateOrder(CP,"")
call IssueImmediateOrder(CP,"bloodluston")
set CE=CreateUnit(CC,$65303032,4915.4,5358.3,103.04)
set CE=CreateUnit(CC,$65303032,6003.3,3745.2,103.04)
set CE=CreateUnit(CC,$65303032,4351.2,3724.6,103.04)
set CE=CreateUnit(CC,$65303032,6375.8,1877.,103.04)
set CE=CreateUnit(CC,$65303032,5566.5,2901.,103.04)
set CE=CreateUnit(CC,$65303032,5138.4,2414.4,103.04)
set CE=CreateUnit(CC,$65303032,4525.1,6319.4,103.04)
set CQ=CreateUnit(CC,$4E616B61,6106.5,2777.5,270.)
call SetHeroLevel(CQ,150,false)
call SetUnitState(CQ,UNIT_STATE_MANA,3450)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$41707866)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$414F6372)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call SelectHeroSkill(CQ,$41666165)
call IssueImmediateOrder(CQ,"faeriefireon")
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$4155696D)
call SelectHeroSkill(CQ,$414E7374)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call SelectHeroSkill(CQ,$41486268)
call IssueImmediateOrder(CQ,"bloodluston")
set CE=CreateUnit(CC,$65303033,451.,11636.9,127.48)
set CR=CreateUnit(CC,$6E636E6B,643.3,11221.7,31.95)
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,CR,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,CR,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function fs)
set CX=CreateUnit(CC,$4E6E6773,-7041.6,6779.,270.)
call SetHeroLevel(CX,150,false)
call SetUnitState(CX,UNIT_STATE_MANA,6000)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414E6D6F)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$414F7368)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$41456D62)
call SelectHeroSkill(CX,$414E7374)
call SelectHeroSkill(CX,$414E7374)
call SelectHeroSkill(CX,$414E7374)
call SelectHeroSkill(CX,$414E7374)
call SelectHeroSkill(CX,$414E7374)
call IssueImmediateOrder(CX,"")
call IssueImmediateOrder(CX,"")
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,CX,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,CX,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function fw)
set CY=CreateUnit(CC,$68706878,2902.6,-5567.9,21.74)
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,CY,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,CY,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function fu)
set CZ=CreateUnit(CC,$6E677264,6224.6,14120.5,270.)
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,CZ,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,CZ,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function ft)
// 玄武
set Ca=CreateUnit(CC,$6E747264,1878.7,7866.2,79.62)
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,Ca,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,Ca,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function fq)
set Cb=CreateUnit(CC,$6E777764,-5483.8,3466.2,259.63)
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,Cb,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,Cb,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function fv)
set CE=CreateUnit(CC,$65303032,3093.5,6155.8,103.04)
set CE=CreateUnit(CC,$65303032,-4535.6,7730.9,317.82)
set CE=CreateUnit(CC,$65303032,-4542.3,6616.9,317.82)
set CE=CreateUnit(CC,$6E777766,2678.8,-7531.5,0.)
set CE=CreateUnit(CC,$65303032,-6804.6,5051.,317.82)
set Cc=CreateUnit(CC,$65647279,-7535.7,-7173.,271.)
call IssueImmediateOrder(Cc,"curseon")
call IssueImmediateOrder(Cc,"autodispelon")
set CS=CreateTrigger()
call TriggerRegisterUnitEvent(CS,Cc,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(CS,Cc,EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(CS,function fr)
set CE=CreateUnit(CC,$65303038,-6403.2,-7314.4,248.45)
set CE=CreateUnit(CC,$65303033,2459.2,11328.,127.48)
set CE=CreateUnit(CC,$65303033,3400.3,12336.4,127.48)
set CE=CreateUnit(CC,$65303034,-7302.2,494.,140.54)
set CE=CreateUnit(CC,$65303034,-7342.1,2758.3,140.54)
set CE=CreateUnit(CC,$65303034,-7369.6,6040.7,140.54)
set CE=CreateUnit(CC,$65303034,-5673.1,7222.,140.54)
set CE=CreateUnit(CC,$65303034,-5023.6,5048.7,140.54)
set CE=CreateUnit(CC,$65303030,3515.6,-5861.8,57.87)
set CE=CreateUnit(CC,$65303138,-691.5,-8062.,259.222)
call SetUnitState(CE,UNIT_STATE_MANA,99999)
set CE=CreateUnit(CC,$65777370,3553.6,-7132.1,125.64)
set CE=CreateUnit(CC,$65777370,4615.3,-6129.8,125.64)
set CE=CreateUnit(CC,$65777370,5371.2,-5500.1,125.64)
set CE=CreateUnit(CC,$65303032,3069.1,4293.9,103.04)
set CE=CreateUnit(CC,$65303032,5796.9,6981.,103.04)
set CE=CreateUnit(CC,$65303032,6388.,5807.5,103.04)
set CE=CreateUnit(CC,$65303038,-6604.8,-7968.8,276.47)
set CE=CreateUnit(CC,$65303033,5395.8,12682.,127.48)
set CE=CreateUnit(CC,$6E676832,-7309.9,6550.3,356.056)
set CE=CreateUnit(CC,$6E676832,-6852.3,5777.3,132.137)
set CE=CreateUnit(CC,$6E676832,-6651.2,5761.3,65.887)
set CE=CreateUnit(CC,$6E676832,-6780.1,6607.2,279.347)
set CE=CreateUnit(CC,$6E676832,-7316.1,6725.7,303.342)
set CE=CreateUnit(CC,$6E676832,-6775.2,6750.2,235.389)
set CE=CreateUnit(CC,$6E676832,-6651.5,6230.8,17.084)
set CE=CreateUnit(CC,$6E676832,-6886.7,6250.4,2.461)
set CE=CreateUnit(CC,$6E676831,-6718.4,7246.1,63.898)
set CE=CreateUnit(CC,$6E676831,-7386.5,6981.9,144.563)
set CE=CreateUnit(CC,$6E676831,-7420.5,7213.8,200.144)
set CE=CreateUnit(CC,$6E676831,-6719.5,6988.7,318.811)
set CE=CreateUnit(CC,$6E676831,-7056.3,5680.,84.103)
set CE=CreateUnit(CC,$6E676831,-7084.4,6190.1,264.493)
set CE=CreateUnit(CC,$6E676831,-7060.1,5924.8,257.945)
set CE=CreateUnit(CC,$6E676831,-7082.3,6414.2,105.373)
set Cd=CreateUnit(CC,$6E656372,-6377.5,-6780.7,90.)
call SetUnitState(Cd,UNIT_STATE_MANA,100)
set CE=CreateUnit(CC,$65303038,-7454.8,-7658.3,72.9)
call IssueImmediateOrder(CE,"")
call IssueImmediateOrder(CE,"")
set CE=CreateUnit(CC,$65303032,2863.1,2907.1,103.04)
set Ce=CreateUnit(CC,$4E305A52,-10030.6,2265.9,268.62)
call SetHeroLevel(Ce,200,false)
call SelectHeroSkill(Ce,$41486176)
call SelectHeroSkill(Ce,$41486176)
call SelectHeroSkill(Ce,$41486176)
call SelectHeroSkill(Ce,$41486176)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$41656E73)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call SelectHeroSkill(Ce,$4130334F)
call IssueImmediateOrder(Ce,"")
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$414E6963)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call SelectHeroSkill(Ce,$41486473)
call UnitAddItemToSlotById(Ce,$49303150,0)
call UnitAddItemToSlotById(Ce,$49303234,1)
call UnitAddItemToSlotById(Ce,$49303235,2)
call UnitAddItemToSlotById(Ce,$49303236,3)
call UnitAddItemToSlotById(Ce,$49303237,4)
call UnitAddItemToSlotById(Ce,$49303049,5)
set CE=CreateUnit(CC,$65303032,4251.7,1858.7,103.04)
set CE=CreateUnit(CC,$65303032,4439.5,1906.6,103.04)
set CE=CreateUnit(CC,$65303032,5664.1,473.4,103.04)
set CE=CreateUnit(CC,$65303032,4224.3,693.8,103.04)
set CE=CreateUnit(CC,$65303030,6230.7,14115.,57.87)
set CE=CreateUnit(CC,$65303030,6574.2,13202.,57.87)
set Cf=CreateUnit(CC,$4E444E52,-12121.5,-7843.5,267.34)
call SetHeroLevel(Cf,200,false)
call SelectHeroSkill(Cf,$41304234)
call IssueImmediateOrder(Cf,"")
call SelectHeroSkill(Cf,$4130305A)
call SelectHeroSkill(Cf,$4130305A)
call SelectHeroSkill(Cf,$4130305A)
call SelectHeroSkill(Cf,$4130305A)
call IssueImmediateOrder(Cf,"")
call IssueImmediateOrder(Cf,"")
call IssueImmediateOrder(Cf,"")
call IssueImmediateOrder(Cf,"")
call IssueImmediateOrder(Cf,"")
call UnitAddItemToSlotById(Cf,$49303041,0)
call UnitAddItemToSlotById(Cf,$6F666C67,1)
call UnitAddItemToSlotById(Cf,$7368656E,2)
call UnitAddItemToSlotById(Cf,$6667756E,3)
call UnitAddItemToSlotById(Cf,$736F7235,4)
call UnitAddItemToSlotById(Cf,$736F7232,5)
set Cg=CreateUnit(CC,$4E423031,12314.4,11569.4,91.56)
call SetHeroLevel(Cg,200,false)
call SetUnitState(Cg,UNIT_STATE_MANA,260)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$41616D6B)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414E6874)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$414F7773)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41656E73)
call SelectHeroSkill(Cg,$41486473)
call UnitAddItemToSlotById(Cg,$726E7370,0)
call UnitAddItemToSlotById(Cg,$6F666C67,1)
call UnitAddItemToSlotById(Cg,$7368656E,2)
call UnitAddItemToSlotById(Cg,$6667756E,3)
call UnitAddItemToSlotById(Cg,$49303037,4)
call UnitAddItemToSlotById(Cg,$6C656467,5)
set Ch=CreateUnit(CC,$4E423032,12716.6,9732.8,126.48)
call SetHeroLevel(Ch,200,false)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$41616D6B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call SelectHeroSkill(Ch,$4130414B)
call IssueImmediateOrder(Ch,"")
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41487462)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call SelectHeroSkill(Ch,$41304433)
call IssueImmediateOrder(Ch,"")
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call SelectHeroSkill(Ch,$414F7777)
call UnitAddItemToSlotById(Ch,$73686377,0)
call UnitAddItemToSlotById(Ch,$68627468,1)
call UnitAddItemToSlotById(Ch,$72646530,2)
call UnitAddItemToSlotById(Ch,$72616D32,3)
call UnitAddItemToSlotById(Ch,$6F736C6F,4)
call UnitAddItemToSlotById(Ch,$6C656467,5)
set Ci=CreateUnit(CC,$4E423033,12623.7,7429.2,75.54)
call SetHeroLevel(Ci,200,false)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41616D6B)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$41436662)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call SelectHeroSkill(Ci,$4130355A)
call IssueImmediateOrder(Ci,"")
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41707267)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call SelectHeroSkill(Ci,$41436C73)
call UnitAddItemToSlotById(Ci,$49303031,0)
call UnitAddItemToSlotById(Ci,$49303032,1)
call UnitAddItemToSlotById(Ci,$49303142,2)
call UnitAddItemToSlotById(Ci,$49303049,3)
call UnitAddItemToSlotById(Ci,$49303056,4)
call UnitAddItemToSlotById(Ci,$6C656467,5)
set Cj=CreateUnit(CC,$4E423034,12639.6,5776.6,99.49)
call SetHeroLevel(Cj,200,false)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41616D6B)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call SelectHeroSkill(Cj,$41303831)
call IssueImmediateOrder(Cj,"")
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call SelectHeroSkill(Cj,$41303830)
call IssueImmediateOrder(Cj,"")
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call SelectHeroSkill(Cj,$41303758)
call IssueImmediateOrder(Cj,"slowon")
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call SelectHeroSkill(Cj,$4130324A)
call IssueImmediateOrder(Cj,"")
call UnitAddItemToSlotById(Cj,$49303147,0)
call UnitAddItemToSlotById(Cj,$49303145,1)
call UnitAddItemToSlotById(Cj,$736F7237,2)
call UnitAddItemToSlotById(Cj,$736F7238,3)
call UnitAddItemToSlotById(Cj,$49303146,4)
call UnitAddItemToSlotById(Cj,$49303150,5)
set Ck=CreateUnit(CC,$4E423030,-12352.9,-1605.,300.01)
call SetHeroLevel(Ck,200,false)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call SelectHeroSkill(Ck,$41444432)
call IssueImmediateOrder(Ck,"")
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41456572)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call SelectHeroSkill(Ck,$41303452)
call IssueImmediateOrder(Ck,"")
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call SelectHeroSkill(Ck,$41304259)
call IssueImmediateOrder(Ck,"")
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41486473)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call SelectHeroSkill(Ck,$41415357)
call IssueImmediateOrder(Ck,"")
call UnitAddItemToSlotById(Ck,$49303233,0)
call UnitAddItemToSlotById(Ck,$49303248,1)
call UnitAddItemToSlotById(Ck,$49303235,2)
call UnitAddItemToSlotById(Ck,$49303237,3)
call UnitAddItemToSlotById(Ck,$49303236,4)
call UnitAddItemToSlotById(Ck,$49303238,5)
set Cl=CreateUnit(CC,$4E423035,-11608.1,5817.1,196.92)
call SetHeroLevel(Cl,150,false)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call SelectHeroSkill(Cl,$41413037)
call IssueImmediateOrder(Cl,"")
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call SelectHeroSkill(Cl,$41474733)
call IssueImmediateOrder(Cl,"")
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call SelectHeroSkill(Cl,$41413051)
call IssueImmediateOrder(Cl,"")
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call SelectHeroSkill(Cl,$41475934)
call IssueImmediateOrder(Cl,"")
call UnitAddItemToSlotById(Cl,$49303233,0)
call UnitAddItemToSlotById(Cl,$49303248,1)
call UnitAddItemToSlotById(Cl,$49303235,2)
call UnitAddItemToSlotById(Cl,$49303237,3)
call UnitAddItemToSlotById(Cl,$49303236,4)
call UnitAddItemToSlotById(Cl,$49303238,5)
set Cm=CreateUnit(CC,$4E423044,12963.4,-10168.1,114.777)
call SetHeroLevel(Cm,200,false)
call SetUnitState(Cm,UNIT_STATE_MANA,100)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call SelectHeroSkill(Cm,$414A5331)
call IssueImmediateOrder(Cm,"")
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call SelectHeroSkill(Cm,$414A5333)
call IssueImmediateOrder(Cm,"")
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call SelectHeroSkill(Cm,$41534A32)
call IssueImmediateOrder(Cm,"")
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call SelectHeroSkill(Cm,$41303355)
call IssueImmediateOrder(Cm,"")
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call SelectHeroSkill(Cm,$41534A34)
call IssueImmediateOrder(Cm,"")
call UnitAddItemToSlotById(Cm,$49303252,0)
call UnitAddItemToSlotById(Cm,$49303248,1)
call UnitAddItemToSlotById(Cm,$49303235,2)
call UnitAddItemToSlotById(Cm,$49303237,3)
call UnitAddItemToSlotById(Cm,$49303236,4)
call UnitAddItemToSlotById(Cm,$49303245,5)
endfunction
function f5 takes nothing returns nothing
local player CC=Player(PLAYER_NEUTRAL_PASSIVE)
local unit CE
set CD=CreateUnit(CC,$6F766C6E,0.,-4800.,270.)
set CE=CreateUnit(CC,$68626172,-2880.,-4800.,270.)
set CE=CreateUnit(CC,$6E636F70,-7040.,-5760.,270.)
set CE=CreateUnit(CC,$6E636F70,-7040.,-5568.,270.)
set CE=CreateUnit(CC,$6E636F70,-7040.,-5376.,270.)
set CE=CreateUnit(CC,$68617273,-6208.,13888.,270.)
set CE=CreateUnit(CC,$6E667431,-5536.,13408.,270.)
set CE=CreateUnit(CC,$6E676D65,-2112.,-4800.,270.)
set CE=CreateUnit(CC,$68626C61,384.,-4800.,270.)
set CE=CreateUnit(CC,$686C756D,-2496.,-4800.,270.)
set CF=CreateUnit(CC,$68766C74,-384.,-4800.,270.)
set CE=CreateUnit(CC,$6E667431,-3744.,13344.,270.)
set CE=CreateUnit(CC,$6E667431,-3808.,12192.,270.)
set CE=CreateUnit(CC,$6E676D65,-7232.,13248.,270.)
set CE=CreateUnit(CC,$686C756D,-5760.,13952.,270.)
set CG=CreateUnit(CC,$68677261,4032.,9152.,270.)
set CE=CreateUnit(CC,$6E667431,-5536.,12704.,270.)
set CH=CreateUnit(CC,$656D6F77,4384.,9504.,270.)
set CI=CreateUnit(CC,$6E7A6C63,-7098.1,7107.4,270.)
set CE=CreateUnit(CC,$6830304B,-1859.4,-6966.1,357.53)
set CE=CreateUnit(CC,$6E666E70,-704.,-7616.,270.)
set CJ=CreateUnit(CC,$6861726D,-6848.,13248.,270.)
set CK=CreateUnit(CC,$68303031,-1856.,-6592.,270.)
set CE=CreateUnit(CC,$68303052,-1894.,-7293.7,357.27)
endfunction
function f6 takes nothing returns nothing
local player CC=Player(PLAYER_NEUTRAL_PASSIVE)
local unit CE
// 貂蝉
set Cn=CreateUnit(CC,$48594D30,-3724.3,-7148.3,275.47)
call SetUnitState(Cn,UNIT_STATE_MANA,100)
call UnitAddItemToSlotById(Cn,$6C676468,1)
call UnitAddItemToSlotById(Cn,$72616731,2)
call ShowUnitHide(Cn)
set Co=CreateUnit(CC,$45747972,-2736.9,-7094.8,271.62)
call SetUnitState(Co,UNIT_STATE_MANA,150)
call UnitAddItemToSlotById(Co,$62726163,0)
call UnitAddItemToSlotById(Co,$636C666D,1)
call UnitAddItemToSlotById(Co,$70656E72,2)
// 黄月英
set Cp=CreateUnit(CC,$486A6169,-2739.1,-7704.9,281.23)
call SetUnitState(Cp,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(Cp,$7374656C,0)
call UnitAddItemToSlotById(Cp,$73707368,1)
call UnitAddItemToSlotById(Cp,$62656C76,2)
set Cq=CreateUnit(CC,$486B616C,-2753.5,-7309.8,272.8)
call SetUnitState(Cq,UNIT_STATE_MANA,210)
call UnitAddItemToSlotById(Cq,$62726163,0)
call UnitAddItemToSlotById(Cq,$636C666D,1)
call UnitAddItemToSlotById(Cq,$70656E72,2)
// 夏侯霸
set Cr=CreateUnit(CC,$48706232,-3179.2,-7328.4,269.35)
call SetUnitState(Cr,UNIT_STATE_MANA,170)
call UnitAddItemToSlotById(Cr,$62726163,0)
call UnitAddItemToSlotById(Cr,$636C666D,1)
call UnitAddItemToSlotById(Cr,$70656E72,2)
// call UnitAddItemToSlotById(Cr,$69743061,3)
set Cs=CreateUnit(CC,$4F726578,-3402.9,-7527.6,250.55)
call SetUnitState(Cs,UNIT_STATE_MANA,130)
call UnitAddItemToSlotById(Cs,$636C7364,0)
call UnitAddItemToSlotById(Cs,$636C666D,1)
call UnitAddItemToSlotById(Cs,$70656E72,2)
set Ct=CreateUnit(CC,$45696C6C,-2335.2,-7284.2,273.97)
call SetUnitState(Ct,UNIT_STATE_MANA,120)
call UnitAddItemToSlotById(Ct,$62726163,0)
call UnitAddItemToSlotById(Ct,$636C666D,1)
call UnitAddItemToSlotById(Ct,$70656E72,2)
set Cu=CreateUnit(CC,$486C6772,-2348.7,-7536.4,274.12)
call SetUnitState(Cu,UNIT_STATE_MANA,130)
call UnitAddItemToSlotById(Cu,$72617436,0)
call UnitAddItemToSlotById(Cu,$636C666D,1)
call UnitAddItemToSlotById(Cu,$70656E72,2)
// 关凤
set Cv=CreateUnit(CC,$4F677268,-3722.2,-7867.1,277.77)
call ShowUnitHide(Cv)
call SetUnitState(Cv,UNIT_STATE_MANA,160)
call UnitAddItemToSlotById(Cv,$72646531,0)
call UnitAddItemToSlotById(Cv,$636C666D,1)
call UnitAddItemToSlotById(Cv,$70656E72,2)
// 刘璿
set liurui=CreateUnit(CC,'HA04',-3622.2,-7867.1,277.77)
call UnitAddItemToSlotById(liurui,'it0z',0)

// 张角
set zhangjiao=CreateUnit(CC,'HA07',-3722.2,-7867.1,277.77)
call UnitAddItemToSlotById(zhangjiao,'sbch',0)
// call UnitAddItemToSlotById(zhangjiao,'it0v',0)
call UnitAddItemToSlotById(zhangjiao,'it0z',1)
// call UnitAddItemToSlotById(zhangjiao,'it0t',2)
// call UnitAddItemToSlotById(zhangjiao,'mlst',3)
// 精卫
set jingwei=CreateUnit(CC,'HA01',-3763.4,-6827.6,273.26)
call SetUnitState(jingwei,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(jingwei,'sbch',0)
// 马良
set maliang=CreateUnit(CC,'H00A',-3763.4,-6927.6,273.26)
call SetUnitState(maliang,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(maliang,'sbch',0)
// 阎宇
set yanyu=CreateUnit(CC,'H009',-3763.4,-7127.6,273.26)
call SetUnitState(yanyu,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(yanyu,$72646531,0)
// call ShowUnitHide(yanyu)
// 宗预
set zongyu=CreateUnit(CC,$48303038,-3763.4,-7527.6,273.26)
call SetUnitState(zongyu,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(zongyu,$72646531,0)
// call UnitAddItemToSlotById(zongyu,'it0o',1)

// call UnitAddItemToSlotById(zongyu,$636C666D,1)
// call UnitAddItemToSlotById(zongyu,$70656E72,2)
// 陈到
set chendao = CreateUnit(CC, $48303033, -3763.4, -7327.1, 273.26)
call SetUnitState(chendao,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(chendao,$72646531,0)
call UnitAddItem(chendao,CreateItem($736F7231,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))

// call UnitAddItemToSlotById(chendao,$636C666D,1)
// call UnitAddItemToSlotById(chendao,$736F7231,2)
// 孙乾
set sunQian=CreateUnit(CC,$48303032,-3563.4,-7327.1,273.26)
call SetUnitState(sunQian,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(sunQian,$7374656C,0)
call UnitAddItemToSlotById(sunQian,$73707368,1)
call UnitAddItemToSlotById(sunQian,$62656C76,2)
// 句扶
set juFu=CreateUnit(CC,$48303035,-3563.4,-7527.6,273.26)
call SetUnitState(juFu,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(juFu,$72646531,0)
call UnitAddItemToSlotById(juFu,$636C666D,1)
call UnitAddItemToSlotById(juFu,$70656E72,2)
// 高翔
set gaoxiang=CreateUnit(CC,$48303037,-3563.4,-7119.5,273.26)
call SetUnitState(gaoxiang,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(gaoxiang,$6576746C,0)
// call UnitAddItemToSlotById(gaoxiang,$69743069,0)
call UnitAddItemToSlotById(gaoxiang,$6C676468,1)
// call UnitAddItemToSlotById(gaoxiang,$49303030,2)
// call UnitAddItemToSlotById(gaoxiang,$72616731,2)

// set gangmen = GetLastCreatedItem()
// call UnitAddItemToSlotById(juFu,$69743068,3)
// call ShowUnitHide(gaoxiang)
// 诸葛果
set zhuGeGuo=CreateUnit(CC,$485A4747,-3563.4,-7709.7,273.26)
call SetUnitState(zhuGeGuo,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(zhuGeGuo,$7374656C,0)
call UnitAddItemToSlotById(zhuGeGuo,$73707368,1)
call UnitAddItemToSlotById(zhuGeGuo,$62656C76,2)
// 法正
set Cw=CreateUnit(CC,$4F73616D,-3391.7,-7709.7,273.26)
call SetUnitState(Cw,UNIT_STATE_MANA,220)
call UnitAddItemToSlotById(Cw,$7374656C,0)
call UnitAddItemToSlotById(Cw,$73707368,1)
call UnitAddItemToSlotById(Cw,$62656C76,2)
// 木鹿
set Cx=CreateUnit(CC,$4F726B6E,-3401.9,-7327.1,274.81)
call SetUnitState(Cx,UNIT_STATE_MANA,160)
call UnitAddItemToSlotById(Cx,'it0p',0)
call UnitAddItemToSlotById(Cx,$636C666D,1)
call UnitAddItemToSlotById(Cx,$70656E72,2)
set Cy=CreateUnit(CC,$48767764,-2973.4,-7105.1,285.76)
call SetUnitState(Cy,UNIT_STATE_MANA,150)
call UnitAddItemToSlotById(Cy,$706D6E61,0)
call UnitAddItemToSlotById(Cy,$636C666D,1)
call UnitAddItemToSlotById(Cy,$70656E72,2)
set Cz=CreateUnit(CC,$48757468,-2535.6,-7287.1,265.8)
call SetUnitState(Cz,UNIT_STATE_MANA,170)
call UnitAddItemToSlotById(Cz,$636C7364,0)
call UnitAddItemToSlotById(Cz,$636C666D,1)
call UnitAddItemToSlotById(Cz,$70656E72,2)
// 刘湛
set C0=CreateUnit(CC,$4861706D,-3400.,-7119.5,273.25)
call SetUnitState(C0,UNIT_STATE_MANA,150)
call UnitAddItemToSlotById(C0,$72646531,0)
call UnitAddItemToSlotById(C0,$636C666D,1)
call UnitAddItemToSlotById(C0,$70656E72,2)
// 关索
set C1=CreateUnit(CC,$4F706768,-2532.9,-7508.3,282.44)
call SetUnitState(C1,UNIT_STATE_MANA,130)
call UnitAddItemToSlotById(C1,$636C7364,0)
call UnitAddItemToSlotById(C1,$636C666D,1)
call UnitAddItemToSlotById(C1,$70656E72,2)
set C2=CreateUnit(CC,$4F647274,-2363.2,-7724.6,257.14)
call SetUnitState(C2,UNIT_STATE_MANA,190)
call UnitAddItemToSlotById(C2,$62726163,0)
call UnitAddItemToSlotById(C2,$73707368,1)
call UnitAddItemToSlotById(C2,$62656C76,2)
set C3=CreateUnit(CC,$4867616D,-2549.3,-7721.8,255.3)
call SetUnitState(C3,UNIT_STATE_MANA,190)
call UnitAddItemToSlotById(C3,$7374656C,0)
call UnitAddItemToSlotById(C3,$73707368,1)
call UnitAddItemToSlotById(C3,$62656C76,2)
// 关兴
set C4=CreateUnit(CC,$4E626263,-2745.9,-7520.6,273.4)
call SetUnitState(C4,UNIT_STATE_MANA,160)
call UnitAddItemToSlotById(C4,$72646531,0)
call UnitAddItemToSlotById(C4,$636C666D,1)
call UnitAddItemToSlotById(C4,$70656E72,2)
set C5=CreateUnit(CC,$4870616C,1482.1,-5181.3,180.457)
// 蛮子
set C6=CreateUnit(CC,$4F303036,-2849.6,-6711.9,272.74)
call SetUnitState(C6,UNIT_STATE_MANA,230)
call UnitAddItemToSlotById(C6,$6576746C,0)
call UnitAddItemToSlotById(C6,$6C676468,1)
call UnitAddItemToSlotById(C6,$72616731,2)
set C7=CreateUnit(CC,$6E6A6762,4300.8,-760.3,206.15)
call SetUnitState(C7,UNIT_STATE_MANA,0)
call IssueImmediateOrder(C7,"")
set C8=CreateUnit(CC,$48617266,-2952.1,-7552.3,278.08)
call SetUnitState(C8,UNIT_STATE_MANA,130)
call UnitAddItemToSlotById(C8,$62726163,0)
call UnitAddItemToSlotById(C8,$636C666D,1)
call UnitAddItemToSlotById(C8,$70656E72,2)
set C9=CreateUnit(CC,$68303043,-7346.4,-5129.5,0.)
// 谜
set DB=CreateUnit(CC,$48575931,-3726.9,-7708.2,278.78)
call SetUnitState(DB,UNIT_STATE_MANA,100)
call UnitAddItemToSlotById(DB,$73626368,0)
call UnitAddItemToSlotById(DB,$72646532,1)
call UnitAddItemToSlotById(DB,$7373696C,2)
//  二郎神
set DC=CreateUnit(CC,$48594A30,-3222.5,-6688.6,272.01)
call SetUnitState(DC,UNIT_STATE_MANA,200)
call UnitAddItemToSlotById(DC,$72687468,0)
call UnitAddItemToSlotById(DC,$6C676468,1)
call UnitAddItemToSlotById(DC,$72616731,2)
set DD=CreateUnit(CC,$6E686577,3419.3,-2576.2,283.83)
set DE=CreateUnit(CC,$486D6764,-2967.,-7319.3,274.13)
call SetUnitState(DE,UNIT_STATE_MANA,160)
call UnitAddItemToSlotById(DE,$72646531,0)
call UnitAddItemToSlotById(DE,$636C666D,1)
call UnitAddItemToSlotById(DE,$70656E72,2)
set CE=CreateUnit(CC,$686D7072,-6839.6,12552.4,82.945)
set DF=CreateUnit(CC,$48706231,-6027.,13046.8,5.93)
call SetHeroLevel(DF,25,false)
call SelectHeroSkill(DF,$41486862)
call SelectHeroSkill(DF,$41486862)
call SelectHeroSkill(DF,$41486862)
call SelectHeroSkill(DF,$41486473)
call SelectHeroSkill(DF,$41486473)
call SelectHeroSkill(DF,$41486473)
call SelectHeroSkill(DF,$41486473)
call SelectHeroSkill(DF,$41486473)
call SelectHeroSkill(DF,$41486473)
call IssueImmediateOrder(DF,"divineshield")
call SelectHeroSkill(DF,$414F6372)
call SelectHeroSkill(DF,$414F6372)
call SelectHeroSkill(DF,$414F6372)
call SelectHeroSkill(DF,$414F6372)
call SelectHeroSkill(DF,$414F6372)
call SelectHeroSkill(DF,$414F6372)
call SelectHeroSkill(DF,$414F6372)
call SelectHeroSkill(DF,$41487265)
call SelectHeroSkill(DF,$41487463)
call SelectHeroSkill(DF,$41487463)
call SelectHeroSkill(DF,$41487463)
call SelectHeroSkill(DF,$41487463)
call SelectHeroSkill(DF,$41487463)
call SelectHeroSkill(DF,$41487463)
call SelectHeroSkill(DF,$41487463)
set CE=CreateUnit(CC,$68637468,-5287.9,13160.6,337.407)
set CE=CreateUnit(CC,$68637468,-5284.1,12854.3,1.738)
set DG=CreateUnit(CC,$6E6D6564,4740.3,9952.7,184.981)
set CE=CreateUnit(CC,$68637468,-5512.8,13164.7,345.1)
set CE=CreateUnit(CC,$68637468,-5509.,12858.4,1.048)
// 齐天大圣
set DH=CreateUnit(CC,$51544453,-3579.7,-6703.,272.15)
call SetUnitState(DH,UNIT_STATE_MANA,350)
call UnitAddItemToSlotById(DH,$72687468,0)
call UnitAddItemToSlotById(DH,$6C676468,1)
call UnitAddItemToSlotById(DH,$72616731,2)
set CE=CreateUnit(CC,$68637468,-5888.3,13155.6,211.482)
set CE=CreateUnit(CC,$68637468,-5916.4,12843.4,83.4)
set CE=CreateUnit(CC,$68637468,-5772.8,13145.2,358.693)
set CE=CreateUnit(CC,$68637468,-5761.,12855.6,334.654)
set DI=CreateUnit(CC,$48767368,-2327.5,-7086.1,260.)
call SetUnitState(DI,UNIT_STATE_MANA,150)
call UnitAddItemToSlotById(DI,$62726163,0)
call UnitAddItemToSlotById(DI,$636C666D,1)
call UnitAddItemToSlotById(DI,$70656E72,2)
// 马忠
set DJ=CreateUnit(CC,$4530305A,-3051.7,-6893.8,265.37)
call SetUnitState(DJ,UNIT_STATE_MANA,260)
call UnitAddItemToSlotById(DJ,$706D6E61,0)
call UnitAddItemToSlotById(DJ,$636C666D,1)
call UnitAddItemToSlotById(DJ,$70656E72,2)
// 黄忠
set DK=CreateUnit(CC,$48303036,-3173.,-7107.2,282.02)
// call SetUnitState(DK,UNIT_STATE_MANA,150)
call UnitAddItemToSlotById(DK,$706D6E61,0)
// call UnitAddItemToSlotById(DK,$72616D33,0)
call UnitAddItemToSlotById(DK,$636C666D,1)
call UnitAddItemToSlotById(DK,$70656E72,2)
set CE=CreateUnit(CC,$68637468,-3562.4,12895.,337.407)
set CE=CreateUnit(CC,$68637468,-3558.5,12588.7,1.738)
set CE=CreateUnit(CC,$68637468,-3787.3,12899.1,345.1)
// 蒋琬
set DL=CreateUnit(CC,$48303034,-2985.1,-7715.6,256.32)
call SetUnitState(DL,UNIT_STATE_MANA,230)
call UnitAddItemToSlotById(DL,$7374656C,0)
call UnitAddItemToSlotById(DL,$73707368,1)
call UnitAddItemToSlotById(DL,$62656C76,2)
set DM=CreateUnit(CC,$55647265,-2527.7,-7103.7,270.)
call UnitAddItemToSlotById(DM,$72646531,0)
call UnitAddItemToSlotById(DM,$636C666D,1)
call UnitAddItemToSlotById(DM,$70656E72,2)
set CE=CreateUnit(CC,$68637468,-3783.4,12592.8,1.048)
set DN=CreateUnit(CC,$68303032,12538.6,-7572.7,67.77)
call IssueImmediateOrder(DN,"")
// 瑞文
set DO=CreateUnit(CC,$48595030,-3221.1,-6906.7,279.89)
call UnitAddItemToSlotById(DO,$6576746C,0)
call UnitAddItemToSlotById(DO,$6C676468,1)
call UnitAddItemToSlotById(DO,$72616731,2)
// 凤姬
set DP=CreateUnit(CC,$4F303033,-2896.,-6888.,277.75)
call SetUnitState(DP,UNIT_STATE_MANA,260)
call UnitAddItemToSlotById(DP,$61666163,0)
call UnitAddItemToSlotById(DP,$6C676468,1)
call UnitAddItemToSlotById(DP,$72616731,2)
set DQ=CreateUnit(CC,$45776172,-3170.3,-7716.,270.)
call SetUnitState(DQ,UNIT_STATE_MANA,200)
call UnitAddItemToSlotById(DQ,$7374656C,0)
call UnitAddItemToSlotById(DQ,$73707368,1)
call UnitAddItemToSlotById(DQ,$62656C76,2)
set DR=CreateUnit(CC,$456B6565,-3164.7,-7532.9,286.72)
call SetUnitState(DR,UNIT_STATE_MANA,150)
call UnitAddItemToSlotById(DR,$72617436,0)
call UnitAddItemToSlotById(DR,$70656E72,1)
call UnitAddItemToSlotById(DR,$636C666D,2)
set CE=CreateUnit(CC,$68637468,-3741.3,11096.4,178.831)
set CE=CreateUnit(CC,$68637468,-3759.7,10491.,147.887)
set CE=CreateUnit(CC,$68637468,-3460.7,11085.4,350.165)
set CE=CreateUnit(CC,$68637468,-3523.4,10493.2,29.954)
set DS=CreateUnit(CC,$68303033,4045.9,9977.9,272.79)
set CE=CreateUnit(CC,$686D7072,-1234.3,-7461.9,210.657)
set DT=CreateUnit(CC,$456D6E73,-1183.2,-4891.2,98.47)
call SetHeroLevel(DT,45,false)
call SetUnitState(DT,UNIT_STATE_MANA,180)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41456572)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
call SelectHeroSkill(DT,$41457471)
set DU=CreateUnit(CC,$6E6A6762,4294.7,-1785.6,240.92)
call SetUnitState(DU,UNIT_STATE_MANA,0)
call IssueImmediateOrder(DU,"")
// 关羽
set DV=CreateUnit(CC,$48475930,-2469.9,-6674.2,273.37)
call SetUnitState(DV,UNIT_STATE_MANA,260)
call UnitAddItemToSlotById(DV,$6576746C,0)
call UnitAddItemToSlotById(DV,$6C676468,1)
call UnitAddItemToSlotById(DV,$72616731,2)
set DW=CreateUnit(CC,$6E6A6762,3726.7,-1291.7,270.59)
call SetUnitState(DW,UNIT_STATE_MANA,0)
call IssueImmediateOrder(DW,"")
// 臣妾做不到
set DX=CreateUnit(CC,$4E303050,12544.6,-8213.8,266.67)
call SetUnitState(DX,UNIT_STATE_MANA,420)
call UnitAddItemToSlotById(DX,$61666163,0)
set DY=CreateUnit(CC,$6F73686D,6511.5,9660.9,200.)
// 张星彩
set DZ=CreateUnit(CC,$48584330,-2733.3,-6902.4,268.16)
call SetUnitState(DZ,UNIT_STATE_MANA,540)
call UnitAddItemToSlotById(DZ,$61666163,0)
// call UnitAddItemToSlotById(DZ,$6974306B,1)
// call UnitAddItemToSlotById(DZ,'I003',0)
// call UnitAddItemToSlotById(DZ,'pspd',1)
// call UnitAddItemToSlotById(DZ,'I006',2)
// call UnitAddItemToSlotById(DZ,'gsou',3)
// call UnitAddItemToSlotById(DZ,'I00B',4)
// call UnitAddItemToSlotById(DZ,'cosl',5)

// 亚索
set Da=CreateUnit(CC,$48415330,13520.3,-7121.8,259.82)
call UnitAddItemToSlotById(Da,$6C676468,0)
call UnitAddItemToSlotById(Da,$72616731,1)
call UnitAddItemToSlotById(Da,$61666163,2)
set Db=CreateUnit(CC,$6F737077,1857.4,14559.2,270.)
set Dc=CreateUnit(CC,$6E6A6762,4851.9,-1270.3,291.98)
call SetUnitState(Dc,UNIT_STATE_MANA,0)
call IssueImmediateOrder(Dc,"")
set Dd=CreateUnit(CC,$6E6A6762,3896.9,-955.1,273.43)
call SetUnitState(Dd,UNIT_STATE_MANA,0)
call IssueImmediateOrder(Dd,"")
set De=CreateUnit(CC,$6E6A6762,4694.6,-943.1,351.8)
call SetUnitState(De,UNIT_STATE_MANA,0)
call IssueImmediateOrder(De,"")
set Df=CreateUnit(CC,$6E6A6762,3957.,-1654.6,121.68)
call SetUnitState(Df,UNIT_STATE_MANA,0)
call IssueImmediateOrder(Df,"")
set Dg=CreateUnit(CC,$6E6A6762,4696.2,-1634.7,88.48)
call SetUnitState(Dg,UNIT_STATE_MANA,0)
call IssueImmediateOrder(Dg,"")
set Dh=CreateUnit(CC,$65303039,4301.7,-1269.1,254.98)
set Di=CreateUnit(CC,$68303039,12546.8,-7572.,13.1)
// 霍戈
set Dj=CreateUnit(CC,$48575130,-2289.9,-6696.6,271.4)
call SetUnitState(Dj,UNIT_STATE_MANA,280)
call UnitAddItemToSlotById(Dj,$616A656E,0)
call UnitAddItemToSlotById(Dj,$6C676468,1)
// 友商
set Dk=CreateUnit(CC,$6F303037,11832.,-10327.8,279.3)
set Dl=CreateUnit(CC,$6830304E,-824.6,-6417.5,206.767)
call SetUnitState(Dl,UNIT_STATE_MANA,0)
// 吕布
set Dm=CreateUnit(CC,$4F4C5642,-2659.7,-6711.,265.09)
call SetUnitState(Dm,UNIT_STATE_MANA,140)
call UnitAddItemToSlotById(Dm,$6B6C6D6D,0)
call UnitAddItemToSlotById(Dm,$6C676468,1)
call UnitAddItemToSlotById(Dm,$746D6D74,2)
// call UnitAddItemToSlotById(Dm,$49303147,0)
// call UnitAddItemToSlotById(Dm,$49303146,1)
// call UnitAddItemToSlotById(Dm,$72756D70,2)
// 积分商店
set Dn=CreateUnit(CC,$68303053,-1084.7,-6819.3,202.11)
// 朵思大王
set Do=CreateUnit(CC,$48444430,-2301.1,-6898.8,270.55)
call SetUnitState(Do,UNIT_STATE_MANA,140)
call UnitAddItemToSlotById(Do,$70656E72,0)
call UnitAddItemToSlotById(Do,$636C666D,1)
call UnitAddItemToSlotById(Do,$616A656E,2)
// 黄舞蝶
set Dp=CreateUnit(CC,$48574430,-3027.8,-6679.,263.08)
call SetUnitState(Dp,UNIT_STATE_MANA,250)
call UnitAddItemToSlotById(Dp,$70656E72,0)
call UnitAddItemToSlotById(Dp,$636C666D,1)
call UnitAddItemToSlotById(Dp,$6B70696E,2)
// 鬼神吕布
set Dq=CreateUnit(CC,$48475330,-3375.3,-6706.,267.8)
call SetUnitState(Dq,UNIT_STATE_MANA,200)
call UnitAddItemToSlotById(Dq,$72687468,0)
call UnitAddItemToSlotById(Dq,$70656E72,1)
// call UnitAddItemToSlotById(Dq,$636C666D,2)
// 魏延
set Dr=CreateUnit(CC,$48575930,-3712.3,-6677.4,259.71)
call SetUnitState(Dr,UNIT_STATE_MANA,100)
call UnitAddItemToSlotById(Dr,$72687468,0)
call UnitAddItemToSlotById(Dr,$6C676468,1)
call UnitAddItemToSlotById(Dr,$72616731,2)
call ShowUnitHide(Dr)
// 庞统
set Ds=CreateUnit(CC,$48505430,-2480.1,-6896.7,269.071)
call SetUnitState(Ds,UNIT_STATE_MANA,400)
call UnitAddItemToSlotById(Ds,$73707368,0)
call UnitAddItemToSlotById(Ds,$7374656C,1)
call UnitAddItemToSlotById(Ds,$62656C76,2)
// 王越
set Dt=CreateUnit(CC,$484A5330,-3730.6,-7497.6,274.07)
call SetUnitState(Dt,UNIT_STATE_MANA,100)
call UnitAddItemToSlotById(Dt,$6C676468,1)
call UnitAddItemToSlotById(Dt,$72616731,2)
call ShowUnitHide(Dt)
// 马云禄
set Du=CreateUnit(CC,$48594C30,-2602.6,-6911.,236.35)
call SetUnitState(Du,UNIT_STATE_MANA,200)
call UnitAddItemToSlotById(Du,$72617436,0)
call UnitAddItemToSlotById(Du,$636C666D,1)
call UnitAddItemToSlotById(Du,$70656E72,2)
// 设置赵云初始装备
set Dv=CreateUnit(CC,$485A5930,-3399.9,-6921.6,274.418)
call SetUnitState(Dv,UNIT_STATE_MANA,200)
call UnitAddItem(Dv,CreateItem($72656A36,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call UnitAddItem(Dv,CreateItem($736F7231,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
// call UnitAddItemToSlotById(Dv,$72656A36,0)
// call UnitAddItemToSlotById(Dv,$736F7231,1)
// 神秘商店
set Dw=CreateUnit(CC,$75303054,-11195.1,15655.2,188.31)
// 吕绮玲
set Dx=CreateUnit(CC,$484C4C51,-3725.7,-7342.8,263.91)
call SetUnitState(Dx,UNIT_STATE_MANA,100)
call UnitAddItemToSlotById(Dx,$6C676468,1)
call UnitAddItemToSlotById(Dx,$72616731,2)
call ShowUnitHide(Dx)
// 张飞
set Dy=CreateUnit(CC,$485A4630,-3563.4,-6940.4,268.69)
call SetUnitState(Dy,UNIT_STATE_MANA,360)
call UnitAddItemToSlotById(Dy,$72687468,0)
call UnitAddItemToSlotById(Dy,$70656E72,1)
call UnitAddItemToSlotById(Dy,$636C666D,2)
endfunction
function f7 takes nothing returns nothing
call fz()
call f1()
endfunction
function f8 takes nothing returns nothing
call f0()
call f2()
call f3()
endfunction
function f9 takes nothing returns nothing
call f5()
call f7()
call f4()
call f6()
call f8()
endfunction
function gB takes nothing returns nothing
local weathereffect Y
set W=Rect(-1928.,-5964.,-504.,-4536.)
set X=Rect(-3648.,-7968.,-2176.,-6976.)
set Y=AddWeatherEffect(X,$4C526D61)
call EnableWeatherEffect(Y,true)
set Z=Rect(-3008.,6976.,-2368.,7680.)
set a=Rect(-256.,6592.,480.,7264.)
set b=Rect(-1888.,7456.,-192.,7936.)
set c=Rect(-1664.,-2592.,-768.,-2400.)
set d=Rect(9024.,-5056.,10528.,-3648.)
set e=Rect(9120.,-3968.,9344.,-3744.)
set f=Rect(1088.,-5280.,1312.,-5056.)
set g=Rect(-6592.,-5024.,-5792.,-4320.)
set h=Rect(1760.,-6816.,2016.,-6560.)
set i=Rect(608.,-7808.,2048.,-6528.)
set j=Rect(3168.,-2848.,3648.,-2400.)
set k=Rect(2752.,-512.,3072.,-224.)
set l=Rect(3392.,576.,3584.,768.)
set m=Rect(2720.,-1056.,3040.,-704.)
set n=Rect(2784.,736.,3040.,992.)
set o=Rect(-7744.,-1920.,-6912.,-1536.)
set p=Rect(-7520.,-448.,-7072.,-32.)
set q=Rect(-7584.,-1120.,-6976.,-768.)
set r=Rect(5472.,1696.,6528.,3872.)
set s=Rect(-4288.,6944.,-3872.,7392.)
set t=Rect(-6112.,-1472.,-5568.,-960.)
set u=Rect(-5568.,12800.,-5184.,13280.)
set v=Rect(-6208.,12096.,-3392.,13440.)
set w=Rect(1152.,13312.,1984.,14208.)
set x=Rect(-3552.,480.,-2944.,992.)
set y=Rect(-5440.,352.,-3680.,1312.)
set z=Rect(4064.,9632.,5120.,10752.)
set BB=Rect(3168.,7968.,4960.,9920.)
set BC=Rect(4000.,-3328.,4704.,-2624.)
set BD=Rect(11616.,-10592.,13152.,-9088.)
set BE=Rect(-1792.,-4384.,-512.,-3936.)
set BF=Rect(-3040.,-7296.,-2784.,-7040.)
set BG=Rect(5824.,13248.,6720.,14144.)
set BH=Rect(-5344.,-4480.,-4736.,-3968.)
set BI=Rect(-7712.,9440.,-6624.,10400.)
set BJ=Rect(-6912.,9536.,-6688.,9728.)
set BK=Rect(6304.,9472.,6624.,9824.)
set BL=Rect(-6400.,-2624.,-5632.,-2272.)
set BM=Rect(-7680.,10176.,-7488.,10368.)
set BN=Rect(-6656.,-6528.,-6016.,-6304.)
set BO=Rect(-7584.,-2496.,-7072.,-2080.)
set BP=Rect(3520.,-1920.,5056.,-608.)
set BQ=Rect(5856.,-2208.,6624.,-1312.)
set BR=Rect(5056.,-1760.,5664.,-1024.)
set BS=Rect(4096.,2880.,4576.,3552.)
set BT=Rect(6304.,5888.,6592.,7424.)
set BU=Rect(2624.,5504.,3296.,6176.)
set BV=Rect(2880.,3456.,3296.,4512.)
set BW=Rect(-7648.,-6016.,-6880.,-4960.)
set BX=Rect(-7104.,-5824.,-6976.,-5696.)
set BY=Rect(-7104.,-5632.,-6976.,-5504.)
set BZ=Rect(-7104.,-5440.,-6976.,-5312.)
set Ba=Rect(7328.,-8352.,11104.,14528.)
set Bb=Rect(-3808.,-6784.,-2144.,-6560.)
set Bc=Rect(-8096.,-8576.,7328.,14560.)
set Bd=Rect(7072.,11616.,7328.,11872.)
set Be=Rect(9056.,11424.,9312.,11712.)
set Bf=Rect(-3808.,-7008.,-2176.,-6784.)
set Bg=Rect(-3808.,-7936.,-2176.,-6496.)
set Bh=Rect(-12480.,14656.,-11328.,15808.)
set Bi=Rect(-12768.,15520.,-12480.,15808.)
set Bj=Rect(-8096.,-8576.,11008.,14720.)
set Bk=Rect(9408.,-928.,10080.,-256.)
set Bl=Rect(-13216.,-6272.,-12928.,-6016.)
set Bm=Rect(-14112.,-9760.,-10144.,-5760.)
set Bn=Rect(9472.,13728.,9952.,13920.)
set Bo=Rect(11488.,3840.,13504.,13184.)
set Bp=Rect(12352.,3968.,12928.,4256.)
set Bq=Rect(-14176.,-3584.,-10848.,-352.)
set Br=Rect(-14208.,-2016.,-13824.,-1632.)
set Bs=Rect(11968.,12832.,12576.,13120.)
set Bt=Rect(12320.,-8384.,12736.,-8000.)
set Bu=Rect(-3616.,12192.,-3072.,13248.)
set Bv=Rect(4640.,-8256.,4960.,-8000.)
set Bw=Rect(-14048.,5472.,-13632.,6112.)
set Bx=Rect(-13984.,4352.,-10496.,7296.)
set By=Rect(-11712.,480.,-8960.,3168.)
set Bz=Rect(-11616.,1472.,-11232.,2240.)
set B0=Rect(-4736.,5472.,-4576.,5664.)
set B1=Rect(-3648.,-6304.,2048.,14656.)
set B2=Rect(1408.,7168.,2528.,8128.)
set B3=Rect(-7744.,-2016.,10688.,14560.)
set B4=Rect(6432.,7936.,6720.,8192.)
set B5=Rect(6752.,8288.,7072.,8576.)
set B6=Rect(-12896.,1568.,-12736.,1952.)
set B7=Rect(-15040.,480.,-12448.,2976.)
set B8=Rect(9152.,6592.,9344.,6816.)
endfunction
function gC takes nothing returns nothing
set B9=CreateCameraSetup()
call CameraSetupSetField(B9,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(B9,CAMERA_FIELD_ROTATION,221.1,0.)
call CameraSetupSetField(B9,CAMERA_FIELD_ANGLE_OF_ATTACK,355.6,0.)
call CameraSetupSetField(B9,CAMERA_FIELD_TARGET_DISTANCE,3215.4,0.)
call CameraSetupSetField(B9,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(B9,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(B9,CAMERA_FIELD_FARZ,10000.,0.)
call CameraSetupSetDestPosition(B9,-952.7,-2106.1,0.)
set CB=CreateCameraSetup()
call CameraSetupSetField(CB,CAMERA_FIELD_ZOFFSET,0.,0.)
call CameraSetupSetField(CB,CAMERA_FIELD_ROTATION,96.,0.)
call CameraSetupSetField(CB,CAMERA_FIELD_ANGLE_OF_ATTACK,349.3,0.)
call CameraSetupSetField(CB,CAMERA_FIELD_TARGET_DISTANCE,2415.8,0.)
call CameraSetupSetField(CB,CAMERA_FIELD_ROLL,0.,0.)
call CameraSetupSetField(CB,CAMERA_FIELD_FIELD_OF_VIEW,70.,0.)
call CameraSetupSetField(CB,CAMERA_FIELD_FARZ,6655.,0.)
call CameraSetupSetDestPosition(CB,-1381.3,-1225.9,0.)
endfunction
function gF takes unit CE,real JT,boolean MC returns nothing
local string I5=I2S(R2I(JT))
local integer ME=0
local integer Ix=0
local integer MD=StringLength(I5)
if MC then
call DestroyEffect(AddSpecialEffect("war3mapImported\\Pow.mdx",GetUnitX(CE)+30.*(0-MD/2-1),GetUnitY(CE)))
endif
loop
exitwhen Ix==MD
set ME=S2I(SubString(I5,Ix,Ix+1))
call DestroyEffect(AddSpecialEffect("war3mapImported\\Num_"+SubString(I5,Ix,Ix+1)+".mdx",GetUnitX(CE)+30.*(Ix-MD/2),GetUnitY(CE)))
set Ix=Ix+1
endloop
set I5=""
set I5=null
endfunction
function gG takes nothing returns nothing
endfunction
function gH takes nothing returns nothing
endfunction
function gI takes nothing returns nothing
endfunction
function gJ takes nothing returns nothing
endfunction
function gK takes nothing returns nothing
endfunction
function gL takes nothing returns nothing
endfunction
function gM takes nothing returns nothing
call Wy()
call RemoveAllGuardPositions(Player(9))
call RemoveAllGuardPositions(Player(10))
endfunction
function gN takes nothing returns nothing
set IT=CreateTrigger()
call TriggerAddAction(IT,function gM)
endfunction
function gO takes nothing returns nothing
call TriggerRegisterUnitEvent(If,GetEnumUnit(),EVENT_UNIT_DAMAGED)
endfunction
function gP takes nothing returns nothing
call SetUnitInvulnerable(GetEnumUnit(),true)
endfunction
function gQ takes nothing returns nothing
set Hg[GetConvertedPlayerId(GetEnumPlayer())]=GetPlayerName(GetEnumPlayer())
set Gk[GetConvertedPlayerId(GetEnumPlayer())]=2000.
call SetPlayerAlliance(Player(PLAYER_NEUTRAL_AGGRESSIVE),GetEnumPlayer(),ALLIANCE_SHARED_VISION,true)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41303939,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$415A5931,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41304C54,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41505439,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41303451,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41304238,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$4130345A,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41303530,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41303458,false)
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41303450,false)
call SetPlayerAbilityAvailableBJ(false,$41595039,GetEnumPlayer())
call SetPlayerAbilityAvailableBJ(false,$41595038,GetEnumPlayer())
call SetPlayerAbilityAvailableBJ(false,$41595031,GetEnumPlayer())
call SetPlayerAbilityAvailableBJ(false,$41595032,GetEnumPlayer())
call SetPlayerAbilityAvailableBJ(false,$41595033,GetEnumPlayer())
call SetPlayerAbilityAvailableBJ(false,$41595037,GetEnumPlayer())
call SetPlayerAbilityAvailableBJ(false,$41595036,GetEnumPlayer())
call SetPlayerAbilityAvailable(GetEnumPlayer(),$41415351,false)
call CreateFogModifierRectBJ(true,GetEnumPlayer(),FOG_OF_WAR_VISIBLE,Bg)
call SetCameraBoundsToRectForPlayerBJ(GetEnumPlayer(),BF)
call TriggerRegisterPlayerKeyEventBJ(J4,GetEnumPlayer(),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(J5,GetEnumPlayer(),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_DOWN)
call TriggerRegisterPlayerChatEvent(J6,GetEnumPlayer(),"-s",true)
call TriggerRegisterPlayerChatEvent(J7,GetEnumPlayer(),"=+",false)
call SetPlayerTechMaxAllowedSwap($75544E54,1,GetEnumPlayer())
if GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(GetEnumPlayer())==MAP_CONTROL_USER then
set Ff=Ff+1
else
endif
endfunction
function gR takes nothing returns nothing
call ShowUnitHide(GetEnumUnit())
endfunction
function gS takes nothing returns nothing
call ShowUnitHide(GetEnumUnit())
endfunction
function gT takes nothing returns nothing
if GetPlayerSlotState(GetEnumPlayer())==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(GetEnumPlayer())==MAP_CONTROL_USER then
call ForceAddPlayer(HQ,GetEnumPlayer())
set Gn[GetConvertedPlayerId(GetEnumPlayer())]=DzAPI_Map_HasMallItem(GetEnumPlayer(),"QTDS")
set Go[GetConvertedPlayerId(GetEnumPlayer())]=DzAPI_Map_HasMallItem(GetEnumPlayer(),"LVBU")
set HS[GetConvertedPlayerId(GetEnumPlayer())]=DzAPI_Map_HasMallItem(GetEnumPlayer(),"HAHN")
if HJ[GetConvertedPlayerId(GetEnumPlayer())]>32 and Hg[GetConvertedPlayerId(GetEnumPlayer())]!=GetObjectName($65303130) then
set HJ[GetConvertedPlayerId(GetEnumPlayer())]=-1
else
endif
if GetPlayerName(GetEnumPlayer())=="痕迹丶恺撒" or Hg[GetConvertedPlayerId(GetEnumPlayer())]==GetObjectName($65303130) or GetPlayerName(GetEnumPlayer())=="ソ初秋丶" then
set Go[GetConvertedPlayerId(GetEnumPlayer())]=true
else
endif
if GetPlayerName(GetEnumPlayer())=="冷清拥挤" or GetPlayerName(GetEnumPlayer())=="ソ初秋丶" or Hg[GetConvertedPlayerId(GetEnumPlayer())]==GetObjectName($65303130) then
set Gn[GetConvertedPlayerId(GetEnumPlayer())]=true
else
endif
if Gn[GetConvertedPlayerId(GetEnumPlayer())]==true then
call ShowUnit(DH,true)
call DisplayTextToPlayer(GetEnumPlayer(),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(DH)+" |cffffcc00已拥有|r")
else
endif
if Go[GetConvertedPlayerId(GetEnumPlayer())]==true then
call ShowUnit(Dm,true)
call DisplayTextToPlayer(GetEnumPlayer(),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dm)+" |cffffcc00已拥有|r")
else
endif
if HS[GetConvertedPlayerId(GetEnumPlayer())]==true or Hg[GetConvertedPlayerId(GetEnumPlayer())]==GetObjectName($65303130) then
set HS[GetConvertedPlayerId(GetEnumPlayer())]=true
call ShowUnit(C6,true)
call DisplayTextToPlayer(GetEnumPlayer(),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(C6)+" |cffffcc00已拥有|r")
else
endif
if Hg[GetConvertedPlayerId(GetEnumPlayer())]==GetObjectName($65303130) then
set Ho[GetConvertedPlayerId(GetEnumPlayer())]=true
call ShowUnit(Da,true)
else
endif
if Hg[GetConvertedPlayerId(GetEnumPlayer())]==GetObjectName($65303130) or DzAPI_Map_HasMallItem(GetEnumPlayer(),"WHBM")==true or DzAPI_Map_IsBlueVIP(GetEnumPlayer())==true then
call ShowUnit(Da,true)
else
endif
if Ho[GetConvertedPlayerId(GetEnumPlayer())]==true or Hg[GetConvertedPlayerId(GetEnumPlayer())]==GetObjectName($65303130) then
set GG[GetConvertedPlayerId(GetEnumPlayer())]=StringHashBJ(GetPlayerName(GetEnumPlayer()))
call ShowUnit(Dp,true)
call DisplayTextToPlayer(GetEnumPlayer(),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dp)+" |cffffcc00已拥有|r")
else
endif
else
endif
endfunction
function gU takes nothing returns nothing
local group KB
local unit KC
call ff()
// 初始化YDWE哈希表
set YDHT=InitHashtable()
set YDLOC=InitHashtable()
	set yd_MapMinX=GetCameraBoundMinX() - GetCameraMargin(CAMERA_MARGIN_LEFT)
	set yd_MapMinY=GetCameraBoundMinY() - GetCameraMargin(CAMERA_MARGIN_BOTTOM)
	set yd_MapMaxX=GetCameraBoundMaxX() + GetCameraMargin(CAMERA_MARGIN_RIGHT)
	set yd_MapMaxY=GetCameraBoundMaxY() + GetCameraMargin(CAMERA_MARGIN_TOP)

set Ia=InitHashtable()
set bj_lastCreatedHashtable=Ia

set GF[8100]="游戏积分"
set GF[8101]="拥有英雄"
set Hz=GetUnitX(Dz)
set H0=GetUnitY(Dz)
set Ib[9]=Dz
call TriggerExecute(Ic)
call ConditionalTriggerExecute(Id)
call TriggerExecute(Ie)
set bj_wantDestroyGroup=true
call SetPlayerStateBJ(Player(8),PLAYER_STATE_GOLD_GATHERED,GetHandleId(Ia))
call ExecuteFunc("g5")
call ExecuteFunc("hL")
call SetPlayerAlliance(Player(PLAYER_NEUTRAL_AGGRESSIVE),Player(9),ALLIANCE_PASSIVE,true)
call SetPlayerAlliance(Player(PLAYER_NEUTRAL_AGGRESSIVE),Player(10),ALLIANCE_PASSIVE,true)
call SetPlayerAlliance(Player(9),Player(PLAYER_NEUTRAL_AGGRESSIVE),ALLIANCE_PASSIVE,true)
call SetPlayerAlliance(Player(10),Player(PLAYER_NEUTRAL_AGGRESSIVE),ALLIANCE_PASSIVE,true)
call RemoveAllGuardPositions(Player(9))
call RemoveAllGuardPositions(Player(10))
call ForGroupBJ(ao(GetPlayableMapRect(),null),function gO)
call SetCameraField(CAMERA_FIELD_TARGET_DISTANCE,2000.,0)
set Gk[0]=2000.
set bj_wantDestroyGroup=true
call ForGroupBJ(ap(Bg,Player(PLAYER_NEUTRAL_PASSIVE)),function gP)
call SetUnitInvulnerable(Ck,true)
call ShowUnit(Ck,false)
call ShowUnit(Dl,false)
call SetPlayerAbilityAvailableBJ(false,$41595036,Player(PLAYER_NEUTRAL_PASSIVE))
call ForForce(ak(Player(8)),function gQ)
call ShowUnitHide(DT)
call ShowUnitHide(DS)
call ShowUnitHide(CG)
call ShowUnitHide(Ca)
// 隐藏蛇
call ShowUnitHide(she)
call ShowUnitHide(spider)
call ShowUnitHide(Cb)
call ShowUnitHide(CY)
call SetUnitInvulnerable(CI,true)
call SetUnitInvulnerable(D0,true)
call ShowUnitHide(CZ)
call ShowUnitHide(Cc)
call ShowUnitHide(Cd)
call ShowUnitHide(CK)
call ShowUnitHide(CJ)
call ShowUnitHide(Db)
call ShowUnitHide(DY)
call ShowUnitHide(CX)
call ShowUnitHide(Dw)
call PauseUnitBJ(true,D0)
call SetUnitInvulnerable(DF,true)
call SetUnitInvulnerable(CX,true)
call SetItemVisible(CreateItem($66726764,12500.,-10000.),false)
call SetItemVisible(CreateItem($49303047,12500.,-10000.),false)
call SetItemVisible(CreateItem($73747761,12500.,-10000.),false)
call SetItemVisible(CreateItem($686F726C,12500.,-10000.),false)
call SetItemVisible(CreateItem($6B6C6D6D,12500.,-10000.),false)
call SetItemVisible(CreateItem($72616D31,12500.,-10000.),false)
call SetItemVisible(CreateItem($72656A36,12500.,-10000.),false)
call SetItemVisible(CreateItem($736F7231,12500.,-10000.),false)
call SetItemVisible(CreateItem($6573617A,12500.,-10000.),false)
call SetItemVisible(CreateItem($746D6D74,12500.,-10000.),false)
call SetItemVisible(CreateItem($49303152,12500.,-10000.),false)
call SetUnitVertexColorBJ(EP,50.,50.,50.,0)
call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN,6.,"ReplaceableTextures\\CameraMasks\\DiagonalSlash_mask.blp",100.,100.,100.,0.)
call FogModifierStop(GetLastCreatedFogModifier())
call SetPlayerName(Player(8),"蜀国")
call SetPlayerName(Player(9),"魏国")
call SetPlayerName(Player(10),"魏国")
call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY,true,Player(9))
call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY,true,Player(10))
call CinematicModeBJ(true,GetPlayersAll())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"三国后期，魏国大举进攻蜀国；剑阁是蜀国最后的屏障，一旦失守，蜀国就将灭亡！
在这生死存亡的关键时刻，蜀国的精英们都聚集在一起，准备对魏国发动最后的背水一战！",bj_TIMETYPE_ADD,0,true)
call CinematicModeBJ(false,GetPlayersAll())
call DisplayTimedTextToForce(GetPlayersAll(),60.,"|Cff00ff00赶快选择自己的英雄吧！魏国的军队马上就要到了！（单击查看人物属性，双击选择英雄，输入-SUIJI可以随机选择英雄，随机英雄将会获得奖励）")
set bj_wantDestroyGroup=true
call ForGroupBJ(ao(BP,null),function gR)
set bj_wantDestroyGroup=true
call ForGroupBJ(ao(BQ,null),function gS)
set J8=C4
set GN=100
call ForForce(ak(Player(8)),function gT)
call TriggerExecute(J9)
set KB=null
set KC=null
endfunction
function gV takes nothing returns nothing
set IU=CreateTrigger()
call TriggerRegisterTimerEventSingle(IU,0.)
call TriggerAddAction(IU,function gU)
endfunction
function gW takes nothing returns boolean
return GetAttacker()!=null and GetAttackedUnitBJ()!=null
endfunction
function gX takes nothing returns nothing
if IsUnitType(GetAttackedUnitBJ(),UNIT_TYPE_HERO)==true and GetOwningPlayer(GetAttacker())!=Player(11) and GetOwningPlayer(GetAttacker())!=Player(10) and GetOwningPlayer(GetAttacker())!=Player(9) and GetOwningPlayer(GetAttacker())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) then
call IssueImmediateOrder(GetAttacker(),"stop")
else
endif
endfunction
function gY takes nothing returns nothing
set VM=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(VM,Player(8),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(VM,Condition(function gW))
call TriggerAddAction(VM,function gX)
endfunction
function gZ takes nothing returns nothing
endfunction
function ga takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function gb takes nothing returns nothing
local unit Ij=GetTriggerUnit()
if IsTriggerEnabled(KD)==true and GetKillingUnitBJ()!=null and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true and GetUnitAbilityLevel(GetTriggerUnit(),$41303938)==0 then
set KE=GetTriggerUnit()
call TriggerExecute(KD)
else
endif
if IsUnitEnemy(GetKillingUnitBJ(),GetOwningPlayer(GetTriggerUnit()))==true and GetTriggerUnit()==Tm[0] or GetTriggerUnit()==Tm[1] or GetTriggerUnit()==Tm[2] then
if GetRandomInt(1,2)==2 then
set VN=GetUnitLoc(GetTriggerUnit())
call ReviveHeroLoc(GetTriggerUnit(),VN,true)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"在结义兄弟的鼓励之下,你又顽强的活了过来")
call RemoveLocation(VN)
set Ij=null
return
else
if GetTriggerUnit()==Tm[0] and GetRandomInt(1,10)==2 then
call KillUnit(Tm[1])
call KillUnit(Tm[2])
call DisplayTextToPlayer(GetOwningPlayer(Tm[1]),0,0,"不求同生,但求同死.你的结义兄弟"+(GetUnitName(Tm[0])+"死亡,大家一起同生死吧"))
call DisplayTextToPlayer(GetOwningPlayer(Tm[2]),0,0,"不求同生,但求同死.你的结义兄弟"+(GetUnitName(Tm[0])+"死亡,大家一起同生死吧"))
else
if GetTriggerUnit()==Tm[1] and GetRandomInt(1,10)==2 then
call KillUnit(Tm[0])
call KillUnit(Tm[2])
call DisplayTextToPlayer(GetOwningPlayer(Tm[0]),0,0,"不求同生,但求同死.你的结义兄弟"+(GetUnitName(Tm[1])+"死亡,大家一起同生死吧"))
call DisplayTextToPlayer(GetOwningPlayer(Tm[2]),0,0,"不求同生,但求同死.你的结义兄弟"+(GetUnitName(Tm[1])+"死亡,大家一起同生死吧"))
else
if GetRandomInt(1,10)==2 then
call KillUnit(Tm[0])
call KillUnit(Tm[1])
call DisplayTextToPlayer(GetOwningPlayer(Tm[0]),0,0,"不求同生,但求同死.你的结义兄弟"+(GetUnitName(Tm[2])+"死亡,大家一起同生死吧"))
call DisplayTextToPlayer(GetOwningPlayer(Tm[1]),0,0,"不求同生,但求同死.你的结义兄弟"+(GetUnitName(Tm[2])+"死亡,大家一起同生死吧"))
else
endif
endif
endif
endif
else
endif
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==true then
set HD[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=HD[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+1
else
endif
set Fl=5.+I2R(GetUnitLevel(C5))
call d6(Ij,Fl)
call ay(Fl)
call ReviveHero(Ij,-1666.,-7777.,true)
call fn(Ij,2)
call PauseUnit(Ij,true)
call PauseUnit(Ij,false)
if HD[GetConvertedPlayerId(GetOwningPlayer(Ij))]==50 and GetRandomInt(1,10)==7 then
call AddHeroXP(Ij,$989680,true)
call DisplayTextToPlayer(GetOwningPlayer(Ij),0,0,"实在是太菜了，看不下去了！")
else
endif
set Ij=null
endfunction
function gc takes nothing returns nothing
set K1=CreateTrigger()
call TriggerAddCondition(K1,Condition(function ga))
call TriggerAddAction(K1,function gb)
endfunction
function gd takes nothing returns nothing
endfunction
function ge takes nothing returns nothing
call SetPlayerStateBJ(GetOwningPlayer(KE),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetOwningPlayer(KE),PLAYER_STATE_RESOURCE_GOLD)-GetUnitLevel(KE)*100)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(KE)+("受到死亡惩罚，"+("金钱减少"+I2S(GetUnitLevel(KE)*100))))
if GetRandomInt(GetUnitLevel(KE),150)==150 and GetUnitLevel(KE)>=5 then
call ModifyHeroStat(bj_HEROSTAT_STR,KE,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,KE,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_INT,KE,bj_MODIFYMETHOD_SUB,10)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(KE)+"受到死亡惩罚，全属性减少10点。")
else
endif
if GetRandomInt(1,6)==1 and GetHeroStr(KE,false)>=30 then
call ModifyHeroStat(bj_HEROSTAT_STR,KE,bj_MODIFYMETHOD_SUB,5)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(KE)+"受到死亡惩罚，力量减少5点。")
else
if GetRandomInt(1,6)==2 and GetHeroAgi(KE,false)>=30 then
call ModifyHeroStat(bj_HEROSTAT_AGI,KE,bj_MODIFYMETHOD_SUB,5)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(KE)+"受到死亡惩罚，敏捷减少5点。")
else
if GetRandomInt(1,6)==3 and GetHeroInt(KE,false)>=30 then
call ModifyHeroStat(bj_HEROSTAT_INT,KE,bj_MODIFYMETHOD_SUB,5)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(KE)+"受到死亡惩罚，智力减少5点。")
else
endif
endif
endif
if GetHeroStr(KE,false)>=30 and GetUnitPointValue(KE)==4 then
call ModifyHeroStat(bj_HEROSTAT_STR,KE,bj_MODIFYMETHOD_SUB,5)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(KE)+"受到死亡惩罚，力量减少5点。")
else
endif
endfunction
function gf takes nothing returns nothing
set KD=CreateTrigger()
call DisableTrigger(KD)
call TriggerAddAction(KD,function ge)
endfunction
function gg takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"开启加强难度模式,敌人BOSS能力得到了提高.")
call DestroyTrigger(GetTriggeringTrigger())
call EnableTrigger(KG)
call EnableTrigger(KH)
endfunction
function gh takes nothing returns nothing
set KF=CreateTrigger()
call TriggerRegisterPlayerChatEvent(KF,Player(0),"加强难度",true)
call TriggerAddAction(KF,function gg)
endfunction
function gi takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开启死亡惩罚，所有英雄死亡将会随机减少各项属性及金钱！！！")
call EnableTrigger(KD)
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function gj takes nothing returns nothing
set KI=CreateTrigger()
call TriggerRegisterPlayerChatEvent(KI,Player(0),"死亡惩罚",true)
call TriggerAddAction(KI,function gi)
endfunction
function gk takes nothing returns nothing
if GetItemPlayer(GetEnumItem())==GetTriggerPlayer() then
call SetItemVisible(GetEnumItem(),true)
call SetItemPosition(GetEnumItem(),-1200.,-4500.)
else
endif
endfunction
function gl takes nothing returns boolean
local integer KK=0
local integer KL=0
local integer FN=GetPlayerId(GetTriggerPlayer())+1
local integer KO=3
local group I2=CreateGroup()
local unit CE
loop
exitwhen KK>2
loop
exitwhen KL>5
set KM[0]=UnitItemInSlot(KN[KK*10+FN],KL)
if GetItemTypeId(KM[0])!=$49303252 and GetItemTypeId(KM[0])!=$49303230 and GetItemTypeId(KM[0])!=$4930315A then
call SetItemPosition(KM[0],-1200.,-4500.)
call SetItemVisible(KM[0],true)
endif
set KL=KL+1
endloop
set KK=KK+1
endloop
call EnumItemsInRectBJ(GetPlayableMapRect(),function gk)
set I2=aq(GetTriggerPlayer(),null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitType(CE,UNIT_TYPE_HERO)==true then
call UnitAddAbility(CE,$41303239)
call UnitRemoveAbility(CE,$41304138)
call UnitRemoveAbility(CE,$41303150)
call SetUnitX(CE,-1710.)
call SetUnitY(CE,-8160.)
set KK=0
loop
exitwhen KK>5
set KM[0]=UnitItemInSlot(CE,KK)
call SetItemPosition(KM[0],-1200.,-4500.)
call SetItemVisible(KM[0],true)
set KK=KK+1
endloop
endif
if IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false then
call SetUnitX(CE,-1200.)
call SetUnitY(CE,-5300.)
call SetUnitOwner(CE,Player(8),true)
endif
if GetUnitTypeId(CE)==$55585451 then
call RemoveUnit(CE)
endif
endloop
if FN==1 then
set KO=2
loop
exitwhen KO>=8
if GetPlayerSlotState(Player(KO))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(KO))==MAP_CONTROL_USER then
call TriggerRegisterPlayerChatEvent(KP,Player(KO),"QB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(KO),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(KO),"-Q",true)
endif
set KO=KO+1
endloop
endif
call DestroyGroup(I2)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetTriggerPlayer())+" 已经离开游戏，他的所有单位将由电脑托管。")
call MultiboardSetItemValue(MultiboardGetItem(KS,GetPlayerId(GetTriggerPlayer())+1,1),"逃离战场")
if Hm[FN]==true then
set Hl[FN]=Hl[FN]+1
call WQ(GetTriggerPlayer(),"玩家逃跑",Hl[FN])
call DzAPI_Map_Stat_SetStat(GetTriggerPlayer(),"WJTP",I2S(Hl[FN]))
elseif GetUnitTypeId(Ib[FN])==$48594D30 or GetUnitTypeId(Ib[FN])==$48594D31 or GetUnitTypeId(Ib[FN])==$484C4C51 or GetUnitTypeId(Ib[FN])==$484C5132 or GetUnitTypeId(Ib[FN])==$48415330 or GetUnitTypeId(Ib[FN])==$484A5330 or GetUnitTypeId(Ib[FN])==$484A5331 or GetUnitTypeId(Ib[FN])==$484A5332 or GetUnitTypeId(Ib[FN])==$484A5333 or GetUnitTypeId(Ib[FN])==$48575930 or GetUnitTypeId(Ib[FN])==$48575932 or GetUnitTypeId(Ib[FN])==$4E303050 then
call RemoveUnit(Ib[FN])
endif
set I2=null
set CE=null
return false
endfunction
function gm takes nothing returns nothing
local integer CC=0
local trigger Jv=CreateTrigger()
local trigger KJ=CreateTrigger()
loop
exitwhen CC>7
call TriggerRegisterPlayerEvent(Jv,Player(CC),EVENT_PLAYER_LEAVE)
call TriggerRegisterPlayerStateEvent(KJ,Player(CC),PLAYER_STATE_LUMBER_UPKEEP_RATE,GREATER_THAN_OR_EQUAL,777.)
set CC=CC+1
endloop
call TriggerAddCondition(Jv,Condition(function gl))
call TriggerAddCondition(KJ,Condition(function gl))
set Jv=null
set KJ=null
endfunction
function gn takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
set I3[0]=ATTACK_TYPE_NORMAL
set I3[1]=ATTACK_TYPE_HERO
set I3[2]=ATTACK_TYPE_PIERCE
set I3[3]=ATTACK_TYPE_SIEGE
set I3[4]=ATTACK_TYPE_MELEE
set I3[5]=ATTACK_TYPE_CHAOS
set I3[6]=ATTACK_TYPE_MAGIC
// 神圣伤害，无视护甲和魔抗
set I4[0]=DAMAGE_TYPE_UNIVERSAL
set I4[1]=DAMAGE_TYPE_NORMAL
set I4[2]=DAMAGE_TYPE_ENHANCED
set I4[3]=DAMAGE_TYPE_MAGIC
set KU[1]=$41304152
set KU[2]=$41304153
set KU[3]=$41304B4B
set KU[4]=$41304154
set KU[5]=$41304231
set GF[0]="玩家信息"
set GF[1]="|cffFF0000"
set GF[2]="|cff0080FF"
set GF[3]="|cff00FFFF"
set GF[4]="|cff8000FF"
set GF[5]="|cFFFFFF33"
set GF[6]="|cFFFF9933"
set GF[7]="|cFF00FF00"
set GF[8]="|cFFFF66FF"
set GF[101]="|cff80FFFF无名小卒|r"
set GF[102]="|Cff00ff00初入江湖|r"
set GF[103]="|cffffdead鼎足三分|r"
set GF[104]="|Cffff0000纵横天下|r"
set GF[105]="|Cffff0000逆天行事|r"
set GF[106]="|CffB366FF地狱难度|r"
set GF[107]="|cffB366FF无间炼狱|r"
set GF[108]="|cff6f1bc1末日挽歌|r"
endfunction
function go takes nothing returns nothing
set Ic=CreateTrigger()
call TriggerAddAction(Ic,function gn)
endfunction
function gp takes nothing returns boolean
return IsUnitAlly(GetSpellTargetUnit(),Player(8))==true
endfunction
function gq takes nothing returns nothing
if Gq==7 then
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*3.,false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*3.,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endif
endfunction
function gr takes nothing returns nothing
set KG=CreateTrigger()
call DisableTrigger(KG)
call TriggerRegisterPlayerUnitEventSimple(KG,Player(9),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(KG,Player(10),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(KG,Condition(function gp))
call TriggerAddAction(KG,function gq)
endfunction
function gs takes nothing returns boolean
local integer FZ=9
if GetHeroSkillPoints(GetTriggerUnit())>0 then
loop
exitwhen FZ==0
call SelectHeroSkill(GetTriggerUnit(),$414F6372)
call SelectHeroSkill(GetTriggerUnit(),$41616B62)
call SelectHeroSkill(GetTriggerUnit(),$4162736B)
call SelectHeroSkill(GetTriggerUnit(),$414E6D6F)
call SelectHeroSkill(GetTriggerUnit(),$41557473)
call SelectHeroSkill(GetTriggerUnit(),$41616D6B)
call SelectHeroSkill(GetTriggerUnit(),$41487462)
call SelectHeroSkill(GetTriggerUnit(),$4130324A)
call SelectHeroSkill(GetTriggerUnit(),$414F7777)
call SelectHeroSkill(GetTriggerUnit(),$414F6877)
call SelectHeroSkill(GetTriggerUnit(),$414F7332)
call SelectHeroSkill(GetTriggerUnit(),$41436362)
call SelectHeroSkill(GetTriggerUnit(),$41486164)
call SelectHeroSkill(GetTriggerUnit(),$414E736F)
call SelectHeroSkill(GetTriggerUnit(),$41556176)
call SelectHeroSkill(GetTriggerUnit(),$4155696D)
call SelectHeroSkill(GetTriggerUnit(),$41486268)
call SelectHeroSkill(GetTriggerUnit(),$41556373)
call SelectHeroSkill(GetTriggerUnit(),$4173736B)
call SelectHeroSkill(GetTriggerUnit(),$41487463)
call SelectHeroSkill(GetTriggerUnit(),$41456576)
call SelectHeroSkill(GetTriggerUnit(),$414E7362)
call SelectHeroSkill(GetTriggerUnit(),$41456172)
call SelectHeroSkill(GetTriggerUnit(),$41456168)
call SelectHeroSkill(GetTriggerUnit(),$41727371)
call SelectHeroSkill(GetTriggerUnit(),$41436262)
call SelectHeroSkill(GetTriggerUnit(),$414E6331)
call SelectHeroSkill(GetTriggerUnit(),$414E6472)
call SelectHeroSkill(GetTriggerUnit(),$4145696D)
call SelectHeroSkill(GetTriggerUnit(),$416D6466)
call SelectHeroSkill(GetTriggerUnit(),$414E6963)
call SelectHeroSkill(GetTriggerUnit(),$414E6874)
call SelectHeroSkill(GetTriggerUnit(),$41303247)
call SelectHeroSkill(GetTriggerUnit(),$414F7773)
call SelectHeroSkill(GetTriggerUnit(),$414E6272)
call SelectHeroSkill(GetTriggerUnit(),$41486473)
call SelectHeroSkill(GetTriggerUnit(),$41666165)
call SelectHeroSkill(GetTriggerUnit(),$414E6873)
call SelectHeroSkill(GetTriggerUnit(),$41303059)
call SelectHeroSkill(GetTriggerUnit(),$41436966)
call SelectHeroSkill(GetTriggerUnit(),$414E6366)
call SelectHeroSkill(GetTriggerUnit(),$414E7367)
call SelectHeroSkill(GetTriggerUnit(),$4155666E)
call SelectHeroSkill(GetTriggerUnit(),$41707866)
call SelectHeroSkill(GetTriggerUnit(),$414E6D73)
call SelectHeroSkill(GetTriggerUnit(),$414F636C)
call SelectHeroSkill(GetTriggerUnit(),$41707267)
call SelectHeroSkill(GetTriggerUnit(),$41457471)
call SelectHeroSkill(GetTriggerUnit(),$41556175)
call SelectHeroSkill(GetTriggerUnit(),$41556675)
call SelectHeroSkill(GetTriggerUnit(),$414F6D69)
call SelectHeroSkill(GetTriggerUnit(),$4130304B)
call SelectHeroSkill(GetTriggerUnit(),$414E7374)
call SelectHeroSkill(GetTriggerUnit(),$41486176)
call SelectHeroSkill(GetTriggerUnit(),$414E6361)
call SelectHeroSkill(GetTriggerUnit(),$41726F61)
call SelectHeroSkill(GetTriggerUnit(),$41456572)
call SelectHeroSkill(GetTriggerUnit(),$4130314A)
call SelectHeroSkill(GetTriggerUnit(),$4130305A)
call SelectHeroSkill(GetTriggerUnit(),$41303455)
call SelectHeroSkill(GetTriggerUnit(),$41304145)
call SelectHeroSkill(GetTriggerUnit(),$41304146)
set FZ=FZ-1
endloop
call IssuePointOrderById(GetTriggerUnit(),851983,-1180.,-5230.)
endif
return false
endfunction
function gt takes nothing returns nothing
set KH=CreateTrigger()
call DisableTrigger(KH)
call TriggerRegisterPlayerUnitEventSimple(KH,Player(9),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(KH,Player(10),EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(KH,Condition(function gs))
endfunction
function gu takes nothing returns nothing
local integer KW
call DestroyTrigger(GetTriggeringTrigger())
set KW=1
loop
exitwhen KW>8
call CreateFogModifierRectBJ(true,ConvertedPlayer(KW),FOG_OF_WAR_VISIBLE,Bj)
set KW=KW+1
endloop
endfunction
function gv takes nothing returns nothing
set KV=CreateTrigger()
call TriggerRegisterPlayerChatEvent(KV,Player(0),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(1),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(2),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(3),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(4),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(5),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(6),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(7),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(8),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(9),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(10),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(11),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(12),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(13),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(14),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(15),"开启全图",true)
call TriggerRegisterPlayerChatEvent(KV,Player(0),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(1),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(2),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(3),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(4),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(5),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(6),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(7),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(8),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(9),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(10),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(11),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(12),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(13),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(14),"qt",true)
call TriggerRegisterPlayerChatEvent(KV,Player(15),"qt",true)
call TriggerAddAction(KV,function gu)
endfunction
function gw takes nothing returns nothing
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"我所拥有的积分："+I2S(Gp[GetConvertedPlayerId(GetTriggerPlayer())]))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"我所拥有的英雄："+I2S(HJ[GetConvertedPlayerId(GetTriggerPlayer())]))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"我所拥有的皮肤："+I2S(HI[GetConvertedPlayerId(GetTriggerPlayer())]))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"我所拥有的积分："+I2S(WR(GetTriggerPlayer(),"游戏积分")))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"我所拥有的英雄："+I2S(WR(GetTriggerPlayer(),"拥有英雄")))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"我所拥有的皮肤："+I2S(WR(GetTriggerPlayer(),"英雄皮肤")))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"五虎将："+I2S(WR(GetTriggerPlayer(),"WH")))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,I2S(fk(GetTriggerPlayer())))
endfunction
function gx takes nothing returns nothing
set Jm=CreateTrigger()
call TriggerRegisterPlayerChatEvent(Jm,Player(0),"-cd",true)
call TriggerRegisterPlayerChatEvent(Jm,Player(1),"-cd",true)
call TriggerRegisterPlayerChatEvent(Jm,Player(2),"-cd",true)
call TriggerRegisterPlayerChatEvent(Jm,Player(3),"-cd",true)
call TriggerRegisterPlayerChatEvent(Jm,Player(4),"-cd",true)
call TriggerRegisterPlayerChatEvent(Jm,Player(5),"-cd",true)
call TriggerRegisterPlayerChatEvent(Jm,Player(6),"-cd",true)
call TriggerRegisterPlayerChatEvent(Jm,Player(7),"-cd",true)
call TriggerAddAction(Jm,function gw)
endfunction
function gy takes nothing returns nothing
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"当前攻击速度  |cff00ff00"+R2S(GetUnitState(Ib[GetConvertedPlayerId(GetTriggerPlayer())],ConvertUnitState(81))))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"当前攻击间隔  |cff00ff00"+R2S(GetUnitState(Ib[GetConvertedPlayerId(GetTriggerPlayer())],ConvertUnitState(37))))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"当前移动速度  |cff00ff00"+R2S(GetUnitMoveSpeed(Ib[GetConvertedPlayerId(GetTriggerPlayer())])))
endfunction
function gz takes nothing returns nothing
set Kx=CreateTrigger()
call TriggerRegisterPlayerChatEvent(Kx,Player(0),"-speed",true)
call TriggerRegisterPlayerChatEvent(Kx,Player(1),"-speed",true)
call TriggerRegisterPlayerChatEvent(Kx,Player(2),"-speed",true)
call TriggerRegisterPlayerChatEvent(Kx,Player(3),"-speed",true)
call TriggerRegisterPlayerChatEvent(Kx,Player(4),"-speed",true)
call TriggerRegisterPlayerChatEvent(Kx,Player(5),"-speed",true)
call TriggerRegisterPlayerChatEvent(Kx,Player(6),"-speed",true)
call TriggerRegisterPlayerChatEvent(Kx,Player(7),"-speed",true)
call TriggerAddAction(Kx,function gy)
endfunction
function g0 takes nothing returns nothing
endfunction
function g1 takes nothing returns nothing
call DisplayTextToPlayer(DzGetTriggerKeyPlayer(),0,0,"现在时间为："+(I2S(HU)+("年"+(I2S(HV)+("月"+(I2S(HW)+"日"))))))
call DisplayTextToPlayer(DzGetTriggerKeyPlayer(),0,0,"现在日期为："+(I2S(HX)+("时"+(I2S(HY)+("分"+(I2S(HZ)+"秒"))))))
call DisplayTextToPlayer(DzGetTriggerKeyPlayer(),0,0,"星期"+I2S(Ha))
endfunction
function g2 takes nothing returns nothing
set Ky=CreateTrigger()
call TriggerAddAction(Ky,function g1)
endfunction
function g3 takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==true
endfunction
// 受伤触发主函数
function g4 takes nothing returns nothing
local unit Ig=GetTriggerUnit()
local unit Ih=GetEventDamageSource()
local real Ii=GetEventDamage()
local real loc_dmg =0

if GetUnitTypeId(Ig)==$48616E74 then
if GetEventDamage()>=GetUnitState(Ig,UNIT_STATE_LIFE) and LoadInteger(bj_lastCreatedHashtable,$6B6D3030,1)>0 then
call UnitAddItem(Ig,CreateItem($49303053,GetUnitX(Ig),GetUnitY(Ig)))
call SetUnitState(Ig,UNIT_STATE_LIFE,GetUnitState(Ig,UNIT_STATE_MAX_LIFE))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cff00ff00孔明受到天佑，逃过死劫！|r")
call SaveInteger(bj_lastCreatedHashtable,$6B6D3030,1,LoadInteger(bj_lastCreatedHashtable,$6B6D3030,1)-1)
else
endif
else
endif



// 张角被动
if Ih == zhangjiao and GetUnitAbilityLevel(Ih, 'Ab3y') > 0 and IsUnitType(Ih, UNIT_TYPE_HERO) then
    if YDWEIsEventAttackDamage() then
    call UnitDamageTarget(Ih, Ig, I2R(GetHeroInt(Ih,true) * GetUnitAbilityLevel(Ih, 'Ab3s')), false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
    call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(Ih)),$65303939,$41314C54,1,GetUnitX(Ig),GetUnitY(Ig),bj_UNIT_FACING,1),852096)
    call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(Ig),GetUnitY(Ig)))

    call UnitRemoveAbility(Ih,'Ab3y')
    call SaveInteger(Ia, GetHandleId(Ig), 103, LoadInteger(Ia, GetHandleId(Ig), 103) +1)
    // call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00当前目标印记层数：" + I2S(LoadInteger(Ia, GetHandleId(Ig), 103)))

    else
    // call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00当前不是普通攻击" )
    endif

endif
// 残影攻击
if GetUnitTypeId(Ih) == 'ua01' or Ih == zhangjiao  then
    if YDWEIsEventAttackDamage() then
    call UnitDamageTarget(Ih, Ig, I2R(100 * (GetUnitAbilityLevel(Ih, 'Ab3t') + 1)), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
    call SaveInteger(Ia, GetHandleId(Ih), 102, LoadInteger(Ia, GetHandleId(Ih), 102) +1)
    // 如果目标
    if LoadInteger(Ia, GetHandleId(Ih), 102) >6 then
        // 清零残影身上被动计数
        call SaveInteger(Ia, GetHandleId(Ih), 102, 0)
        // 目标身上印记层数+1
        call SaveInteger(Ia, GetHandleId(Ig), 103, LoadInteger(Ia, GetHandleId(Ig), 103) +1)
        // call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00当前目标印记层数：" + I2S(LoadInteger(Ia, GetHandleId(Ig), 103)))

    endif
  

    endif
endif
// 印记爆炸
//   如果目标身上印记层数>3则引爆印记
    if LoadInteger(Ia, GetHandleId(Ig), 103) >2 then
        // 
            // call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00开始引爆：" + I2S(LoadInteger(Ia, GetHandleId(Ig), 103)))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",GetUnitX(Ig),GetUnitY(Ig)))

  call SaveInteger(Ia, GetHandleId(Ig), 103, 0)
  if GetUnitTypeId(Ih) == 'ua01' then
    // 专属增伤
    if GetUnitAbilityLevel(LoadUnitHandle(Ia, GetHandleId(Ih), 101), 'Ab41') >0 then
    // call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|cffff0000有爆伤效果:")

    call UnitDamageTarget(Ih, Ig, 1.2 * bk(LoadUnitHandle(Ia, GetHandleId(Ih), 101), 3, GetUnitAbilityLevel(LoadUnitHandle(Ia, GetHandleId(Ih), 101), 'Ab3t')), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)

    else
        call UnitDamageTarget(Ih, Ig, 0.8 * bk(LoadUnitHandle(Ia, GetHandleId(Ih), 101), 3, GetUnitAbilityLevel(LoadUnitHandle(Ia, GetHandleId(Ih), 101), 'Ab3t')), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)

    endif
  elseif Ih == zhangjiao then
     if GetUnitAbilityLevel(Ih,'Ab41') > 0 then
            // call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|cffff0000有爆伤效果:")

    call UnitDamageTarget(Ih, Ig, 1.2 * bk(Ih, 3, GetUnitAbilityLevel(Ih, 'Ab3t')), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
     else
         call UnitDamageTarget(Ih, Ig, 0.8 *bk(Ih, 3, GetUnitAbilityLevel(Ih, 'Ab3t')), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
   
     endif
  endif
    
    endif
// maliang被动
if Ig ==maliang and  GetUnitAbilityLevel(Ig, 'A0BX') >0 then
// call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00挨打的是马良：" + I2S(GetUnitAbilityLevel(Ig, $41304844)))

if GetUnitAbilityLevel(Ig, $41304844) >0 then
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ig)), $65303939, $4162326A, 1, GetUnitX(Ig), GetUnitY(Ig), bj_UNIT_FACING, 0.5), 852125, Ih)
call UnitDamageTarget(Ig,Ih,bk(Ig, 3, GetUnitAbilityLevel(Ig, 'Ab2j')) *0.5,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)

else
if GetRandomInt(1, 100) < 3 * GetUnitAbilityLevel(Ig, 'A0BX') then 
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ig)), $65303939, $4162326A, 1, GetUnitX(Ig), GetUnitY(Ig), bj_UNIT_FACING, 0.5), 852125, Ih)
call UnitDamageTarget(Ig,Ih,bk(Ig, 3, GetUnitAbilityLevel(Ig, 'Ab2j')) *0.5,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)

endif
endif

endif
// y阎宇反击
if Ig == yanyu and GetUnitAbilityLevel(Ig, 'Ab2g') >0 then
//   call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00收到伤害为：" + R2S(Ii))
  if Ii ==0. then
    // call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00收到伤害为：" + R2S(Ii))
    // call EXSetEventDamage( GetUnitState(Ig, ConvertUnitState(18)) * GetUnitAbilityLevel(Ig, 'Ab2g') *3)
    call UnitDamageTarget(Ig, Ih, GetUnitState(Ig, ConvertUnitState(18)) * GetUnitAbilityLevel(Ig, 'Ab2g') *3, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
  endif
endif

if Gq>=7 then
if GetUnitPointValue(Ig)!=9 and IsUnitType(Ig,UNIT_TYPE_HERO)==true and GetOwningPlayer(Ig)==Player(9) or GetOwningPlayer(Ig)==Player(10) then
call EXSetUnitMoveType(Ig,32)
if GetUnitState(Ig,UNIT_STATE_LIFE)<=GetUnitState(Ig,UNIT_STATE_MAX_LIFE)*.5 then
call UnitRemoveBuffs(Ig,false,true)
call UnitRemoveBuffsEx(Ig,false,true,false,false,true,true,false)
else
endif
else
endif
else
endif

if GetUnitTypeId(GetTriggerUnit())==$65303138 then
call SetUnitX(GetTriggerUnit(),-695.)
call SetUnitY(GetTriggerUnit(),-8062.)
call SetUnitPosition(GetTriggerUnit(),-695.,-8062.)
else
endif
if GetUnitAbilityLevel(Ig,$42303051)>0 then
call UnitRemoveBuffsEx(Ig,false,true,false,false,true,true,false)
else
endif
if GetUnitTypeId(Ih)==$754A5243 then
call UnitDamageTarget(Ib[GetConvertedPlayerId(GetOwningPlayer(Ih))],Ig,GetUnitState(Ib[GetConvertedPlayerId(GetOwningPlayer(Ih))],ConvertUnitState(21)),false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetUnitTypeId(Ih)==$6E303052 then
call bd(Ib[GetPlayerId(GetOwningPlayer(Ih))+1],Ig,40,20.,0.,0.,Ii*2,1.5)
else
endif
if GetUnitTypeId(Ig)==$48594A30 then
if LoadReal(Ia,GetHandleId(Ig),$30304844)>0. then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,R2S(LoadReal(Ia,GetHandleId(Ig),$30304844)))
call b9(Ig,Ih,Ii)
else
if GetUnitAbilityLevel(Ig,$41304844)==0 then
call UnitRemoveAbility(Ig,$41304844)
else
endif
endif
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41413034)>0 then
if LoadReal(Ia,GetHandleId(Ig),$30314844)>0. then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,R2S(LoadReal(Ia,GetHandleId(Ig),$30304844)))
call b7(Ig,Ih,Ii)
else
call UnitRemoveAbility(Ig,$41413034)
endif
else
endif
endif
if GetUnitTypeId(Ig)==$48595030 or GetUnitAbilityLevel(Ig,$41304844)>0 then
if LoadReal(Ia,GetHandleId(Ig),$30304844)>0. then
call b7(Ig,Ih,Ii)
else
endif
else

endif
if GetUnitTypeId(Ih)==$68305344 then
call UnitDamageTarget(Ib[GetConvertedPlayerId(GetOwningPlayer(Ih))],Ig,I2R(GetHeroInt(Ib[GetConvertedPlayerId(GetOwningPlayer(Ih))],true))*2.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetUnitTypeId(Ig)==$485A4630 then
if GetUnitAbilityLevel(Ig,$415A4634)>0 then
call SetUnitAbilityLevel(Ig,$415A4630,R2I((GetUnitState(Ig,ConvertUnitState(1))-GetUnitState(Ig,ConvertUnitState(0)))/GetUnitState(Ig,ConvertUnitState(1))*10)+1)
else
endif
else
endif
// 赵统解控效果
// if GetTriggerUnit()==C8 or UnitHasBuffBJ(GetTriggerUnit(),$42303230)==true or GetUnitAbilityLevel(GetTriggerUnit(),$41304733)>0  then
// call EXPauseUnit(GetTriggerUnit(),false)
// call UnitRemoveBuffs(GetTriggerUnit(),false,true)
// else
// endif
// 高翔大招解控
if GetTriggerUnit() == gaoxiang and LoadReal(FS, GetHandleId(gaoxiang), $130B62E1) > .0 then
call EXPauseUnit(GetTriggerUnit(),false)
call UnitRemoveBuffs(GetTriggerUnit(),false,true)
call EXSetEventDamage(GetEventDamage()*.01)
else
endif
// 蛮子大招解控效果
if GetTriggerUnit()==Cf or UnitHasBuffBJ(GetTriggerUnit(),$42303351)==true or UnitHasBuffBJ(GetTriggerUnit(),$42575935)==true or GetUnitAbilityLevel(Ig,$425A4645)>0 or GetUnitAbilityLevel(Ig,$4230334C)>0 or GetUnitAbilityLevel(Ig,$42475957)>0 then
call EXPauseUnit(GetTriggerUnit(),false)
call UnitRemoveBuffs(GetTriggerUnit(),false,true)
call EXSetEventDamage(GetEventDamage()*.7*1.)
else
endif
if GetPlayerTechCountSimple($5267666F,GetOwningPlayer(Ig))>0 then
call EXSetEventDamage(GetEventDamage()*.8*1.)
else
endif
if IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetUnitTypeId(GetTriggerUnit())==$4530305A and GetRandomReal(0,100.)<=20. and GetUnitAbilityLevel(GetTriggerUnit(),$41304150)>0 and GetUnitAbilityLevel(GetTriggerUnit(),$41304242)==0 and GetUnitAbilityLevel(GetTriggerUnit(),$414F7233)==0 and GetUnitAbilityLevel(GetTriggerUnit(),$41497262)==0 and GetUnitAbilityLevel(GetTriggerUnit(),$41497273)==0 and GetUnitLifePercent(GetTriggerUnit())<=15. then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffdead遁逸之路产生效果，你逃回了营地！")
call SetUnitPosition(GetTriggerUnit(),-1000.,-7700.)
call UnitAddItem(GetTriggerUnit(),CreateItem($49303053,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
if GetUnitTypeId(Ig)==$4F303036 or GetUnitTypeId(Ig)==$4841484E then
call XX(Ig,$41304C50,1,108,10.*(100.*((GetUnitState(Ig,UNIT_STATE_MAX_LIFE)-GetUnitState(Ig,UNIT_STATE_LIFE))/GetUnitState(Ig,UNIT_STATE_MAX_LIFE))))
call IncUnitAbilityLevel(Ig,$41304C50)
call DecUnitAbilityLevel(Ig,$41304C50)
if Ii>=GetUnitState(Ig,UNIT_STATE_LIFE) then
set HK[GetConvertedPlayerId(GetOwningPlayer(Ig))]=0
else
endif
else
endif
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetEventDamageSource(),Player(8))==true and 0!=EXGetEventDamageData(JI)==true then
if Hf[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))]==1 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_LIFE)*.01)
else
if Hf[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))]==2 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_LIFE)*.02)
else
if Hf[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))]>2 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_LIFE)*.03)
else
endif
endif
endif
if GetUnitAbilityLevelSwapped($41303530,Ih)==1 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_LIFE)*.01)
else
endif
if GetUnitAbilityLevel(Ih,$4143584A)>0 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage())
else
endif
if GetUnitAbilityLevel(Ih,$4130444C)>0 and IsUnitAlly(GetEventDamageSource(),Player(8))==true then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*.5)
else
endif
if GetUnitAbilityLevel(Ih,$41304648)>0 or GetUnitAbilityLevel(Ih,$41304232)>0 and IsUnitAlly(GetEventDamageSource(),Player(8))==true then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*.15)
else
endif
else
endif
call DisableTrigger(GetTriggeringTrigger())
if 0!=EXGetEventDamageData(JI)==true then
if GetPlayerController(GetOwningPlayer(Ih))==MAP_CONTROL_USER then
if RequestExtraBooleanData(50,GetOwningPlayer(Ih),null,null,false,0,0,0)==true then
call EXSetEventDamage(GetEventDamage()*2.*1.)
else
endif
else
endif
// 斩蛇伤害
if GetUnitAbilityLevel(Ih,$4130454F)>=1 then
if GetRandomInt(1,3)==3 then
set JJ=CreateUnit(GetOwningPlayer(Ih),$655A534A,GetUnitX(Ih),GetUnitY(Ih),0)
call UnitApplyTimedLife(JJ,$42487765,2.)
call IssuePointOrderById(JJ,851986,GetUnitX(Ih)*1.+2000*1.*Cos(bN(Ih,Ig)*1.*bj_DEGTORAD),GetUnitY(Ih)*1.+2000*1.*Sin(bN(Ih,Ig)*1.*bj_DEGTORAD))
call bv(Ih,I2R(Fr)*250,bN(Ih,Ig),1000,220)
else
endif
else
endif
// 盘古斧伤害，如果拥有技能盘古造成最大生命值0.1的真实伤害，如果不是玩家8的盟友，则只造成0.01%的伤害
if (GetUnitAbilityLevel(Ih,$41303041)>=1 or bC(Ih,'it07')==true) and bC(Ig,$69743039)==false then
if IsUnitAlly(Ih,Player(8))==true then
    if GetUnitState(Ih, UNIT_STATE_MAX_LIFE) >4000000 then
    else
call EXSetEventDamage((GetEventDamage()+GetUnitState(Ih,UNIT_STATE_MAX_LIFE)*.1)*1.)
    endif


else
call UnitDamageTarget(Ih,Ig,GetEventDamage()+GetUnitState(Ih,UNIT_STATE_MAX_LIFE)*.01,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
else
endif
// 增加亮银枪伤害
if bC(Ih,'gobm')==true and bC(Ig,$69743039)==false then

if IsUnitAlly(Ih,Player(8))==true then
//    call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00枪出如龙！造成伤害：" + "物品次数--" + I2S(GetItemCharges(bW(Ih, $676F626D))) + "实际伤害--" + R2S(bk(Ih, 2, 2) * (1. + GetItemCharges(bW(Ih, $676F626D)) * .4) ))
    call bs(Ih, GetUnitX(Ig), GetUnitY(Ig), 330., GetEventDamage() + bk(Ih, 2, GetItemCharges(bW(Ih, $676F626D))) *0.8 + 1200 * (1. + GetItemCharges(bW(Ih, $676F626D))), 1, 0)
// call EXSetEventDamage(GetEventDamage()+(GetHeroAgi(Ih,true))*(6.+GetItemCharges(aj(GetTriggerUnit(),$676F626D))*.5))
else
call UnitDamageTarget(Ih,Ig,GetEventDamage()+GetUnitState(Ih,UNIT_STATE_MAX_LIFE)*.01,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endif
else
endif

if GetUnitTypeId(Ih)==$6E777766 or GetUnitTypeId(Ih)==$6E777767 or GetUnitTypeId(Ih)==$6E303033 or GetUnitTypeId(Ih)==$6E303034 or GetUnitTypeId(Ih)==$6E303035 or GetUnitTypeId(Ih)==$65454C44 then
call SetUnitState(Ih,UNIT_STATE_LIFE,GetUnitState(Ih,UNIT_STATE_LIFE)+GetEventDamage())
else
endif
// 血刃吸血效果
if GetUnitAbilityLevel(Ih,$41303648)>0 and IsUnitAlly(Ih,Player(8))==true then
// call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00吸血！造成伤害")
// call SetUnitState(Ih,UNIT_STATE_LIFE,GetUnitState(Ih,UNIT_STATE_LIFE)+GetEventDamage()*(.1*I2R(GetUnitAbilityLevel(Ih,$41303648))))
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_LIFE)*(.1*I2R(GetUnitAbilityLevel(Ih,$41303648))))
if Ih == zhuiSuiZhe then
call SetUnitState(zhuGeGuo,UNIT_STATE_LIFE,GetUnitState(zhuGeGuo,UNIT_STATE_LIFE)+GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_LIFE)*(.1*I2R(GetUnitAbilityLevel(Ih,$41303648))))

endif
else
endif
// 赵统吸血
if GetUnitAbilityLevel(Ih,$41304733)>0 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetUnitState(GetEventDamageSource(),UNIT_STATE_MAX_LIFE)*(.1*I2R(GetUnitAbilityLevel(Ih,$41304733))))
else
endif
// 马超被动夺命枪效果,如果是玩家的话造成力量系数乘以0.1的伤害，如果携带问天枪，造成0.3系数的伤害
if GetUnitAbilityLevel(Ih,$41303755)>0 then
if IsUnitAlly(Ih,Player(8))==true then
if bC(Ig,$49303055)==true or bC(Ig,$6D6C7374)==true then 
call UnitDamageTarget(Ih,Ig,GetEventDamage()+bk(Ih,1,GetUnitAbilityLevel(Ih,$41303755))*.05,false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Ih,Ig,GetEventDamage()+bk(Ih,1,GetUnitAbilityLevel(Ih,$41303755))*.03,false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
endif
else
endif
// 马忠淬毒箭效果
if GetUnitAbilityLevel(Ih,$414F414F)>0 then
    // GetEventDamage()
 call UnitDamageTarget(Ih,Ig,GetEventDamage()+bk(Ih,2,GetUnitAbilityLevel(Ih,$414F414F))+GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)*.01,false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
// call EXSetEventDamage(GetEventDamage()+bk(Ih,2,GetUnitAbilityLevel(Ih,$414F414F))+GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)*.001)
else
endif
// 霍格抽冷子效果
if GetUnitAbilityLevel(Ih,$42575132)>0 then
call UnitRemoveAbility(Ih,$42575132)
call SetUnitTimeScale(Ih,1)
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*1.5*I2R(GetUnitAbilityLevel(Ih,$41575132)),false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WOOD_HEAVY_BASH)
else
endif
// 霍格碎瓜娃大招伤害效果
if GetUnitAbilityLevel(Ih,$41575135)>0 then
if LoadInteger(Ia,GetHandleId(Ih),$41575135)>=3 then
call SaveInteger(Ia,GetHandleId(Ih),$41575135,0)
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*2.5,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WOOD_HEAVY_BASH)
call EXSetEventDamage(GetEventDamage()+GetUnitState(Ih,ConvertUnitState(21))*2.)
else
call SaveInteger(Ia,GetHandleId(Ih),$41575135,LoadInteger(Ia,GetHandleId(Ih),$41575135)+1)
endif
else
endif
if GetUnitAbilityLevel(Ih,$41304645)>0 and GetUnitAbilityLevel(GetTriggerUnit(),$41304644)>0 then
call SaveInteger(Ia,GetHandleId(Ih),$41564A51,LoadInteger(Ia,GetHandleId(Ih),$41564A51)+1)
call b5(I2S(LoadInteger(Ia,GetHandleId(Ih),$41564A51))+"连击",Ig,.1,10,255,200,0,255)
call UnitDamageTarget(Ih,Ig,I2R(GetUnitAbilityLevel(Ih,$41304645)*100+LoadInteger(Ia,GetHandleId(Ih),$41564A51)*(G5*10)),false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
// 
// 龙鳞甲吸血,双剑吸血
if GetUnitAbilityLevel(Ih,$41304534)==1 or GetUnitAbilityLevel(Ih,'Ab4f')==1 then
call SetUnitState(Ih,UNIT_STATE_LIFE,GetUnitState(Ih,UNIT_STATE_LIFE)+GetEventDamage()*.5)
else
endif
if GetUnitAbilityLevel(Ih,$4130314B)>0 then
if GetRandomInt(1,3)==3 then
call bs(Ih,GetUnitX(Ig),GetUnitY(Ig),220,bk(Ih,3,GetUnitAbilityLevel(Ih,$4130314B)),5,0)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl",GetUnitX(Ig),GetUnitY(Ig)))
else
endif
else
endif
if GetUnitTypeId(Ig)==$486A6169 or GetUnitTypeId(Ig)==$48485959 then
if UnitHasBuffBJ(Ig,$42556661)==true then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(Ig),$6530304D,GetUnitX(Ih),GetUnitY(Ih),270.),"thunderbolt",Ih)
else
endif
else
endif
if GetUnitTypeId(Ih)==$686D7474 and GetUnitAbilityLevelSwapped($41303556,Ih)==1 then
if (C3!=null and IsUnitInTransportBJ(C3,Ih)==false and GetOwningPlayer(Ih)==GetOwningPlayer(C3)) or (Cp!=null and IsUnitInTransportBJ(Cp,Ih)==false and GetOwningPlayer(Ih)==GetOwningPlayer(Cp)) then
call SetUnitMoveSpeed(Ih,200.)
call UnitRemoveAbilityBJ($41303556,Ih)
call UnitRemoveAbilityBJ($414E6961,Ih)
else
endif
else
endif
call cQ(Ih,Ig)
if UnitHasBuffBJ(Ih,$4262736B)==true and GetUnitTypeId(Ih)==$55647265 then
if GetRandomInt(1,5)<=2 then
call UnitAddItem(Ih,CreateItem($66676668,0,0))
else
endif
else
endif
if GetUnitAbilityLevel(Ih,$4130414B)>=1 then
if GetRandomInt(1,5)<=2 then
call SetUnitAnimation(Ih,"spin")
call bs(Ih,GetUnitX(Ih),GetUnitY(Ih),220,GetUnitState(Ih,ConvertUnitState(21)),1,2)
else
endif
else
endif
if GetUnitAbilityLevel(Ih,$415A4635)>=1 and GetRandomInt(1,5)<=2 then
// 张飞携带盘古斧时，大招伤害提高
if  GetUnitAbilityLevel(Ih,$41303041)>=1 then
call b5("万军取首",Ih,.1,12,255,200,0,255)
call UnitDamageTarget(Ih,Ig,(GetUnitState(Ih,ConvertUnitState(21))+GetUnitState(Ih,ConvertUnitState(1)))*.025*I2R(GetUnitAbilityLevel(Ih,$415A4635)+4),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
    call b5("万夫莫敌",Ih,.1,12,255,200,0,255)
    if IsUnitAlly(Ih,Player(8))==true then 

call UnitDamageTarget(Ih,Ig,(GetUnitState(Ih,ConvertUnitState(21))+GetUnitState(Ih,ConvertUnitState(1)))*.01*I2R(GetUnitAbilityLevel(Ih,$415A4635)+4),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
    else
call UnitDamageTarget(Ih,Ig,(GetUnitState(Ih,ConvertUnitState(1)))*.001,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)

    endif

endif
else
endif
if GetUnitAbilityLevel(Ih,$41304736)>=1 then
call UnitDamageTarget(Ih,Ig,bk(Ih,3,GetUnitAbilityLevel(Ih,$41304736))*.05,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
// call UnitDamageTarget(Ih,Ig,I2R(GetUnitAbilityLevel(Ih,$41304736))*200.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(Ig,GetUnitState(Ig,UNIT_STATE_MANA)-I2R(GetUnitAbilityLevel(Ih,$41304736))*200.)
else
endif
if GetUnitAbilityLevel(Ih,$41304457)>=1 then
call UnitDamageTarget(Ih,Ig,bk(Ih,0,2),false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
// 伏羲琴伤害 Gq
if GetUnitAbilityLevel(Ih,$41303552)>=1 then
if Gq >6 then
call UnitDamageTarget(Ih, Ig, GetHeroInt(Ih, true) *2, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Ih,Ig,bk(Ih,3,1)*.05,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
else
endif
if IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetEventDamageSource()))==false and GetUnitTypeId(GetEventDamageSource())==$48475330 or GetUnitTypeId(GetEventDamageSource())==$48475332 or GetUnitTypeId(GetEventDamageSource())==$484C4C51 or GetUnitTypeId(GetEventDamageSource())==$484C5132 or GetUnitTypeId(GetEventDamageSource())==$484C5131 then
set Hv=Atan2BJ(GetUnitY(GetTriggerUnit())-GetUnitY(GetEventDamageSource()),GetUnitX(GetTriggerUnit())-GetUnitX(GetEventDamageSource()))
if Hv<0. then
set Hv=Hv+360.
else
endif
if RAbsBJ(Hv-GetUnitFacing(GetTriggerUnit()))>=310. or RAbsBJ(Hv-GetUnitFacing(GetTriggerUnit()))<=50. then
call UnitDamageTarget(Ih,Ig,I2R(GetHeroAgi(Ih,true))*1.5,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call CreateTextTagUnitBJ("背袭攻击",GetEventDamageSource(),1.,10,60.,0.,100,0)
call SetTextTagVelocity(bj_lastCreatedTextTag,0.,.15)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,.5)
else
endif
else
if IsUnitEnemy(Ig,GetOwningPlayer(Ih))==true and GetUnitAbilityLevel(Ih,$4130344F)>=1 or GetUnitAbilityLevel(GetEventDamageSource(),$41304545)>=1 then
if RAbsBJ(GetUnitFacing(Ih)-GetUnitFacing(Ig))<=90. then
if GetUnitAbilityLevel(GetEventDamageSource(),$41304545)>=1 then
if GetUnitAbilityLevel(Ih,$4130344F)>=1 then
call UnitDamageTarget(Ih,Ig,I2R(GetHeroAgi(Ih,true))*4.,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Ih,Ig,I2R(GetHeroAgi(Ih,true))*3.,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
else
call UnitDamageTarget(Ih,Ig,I2R(GetHeroAgi(Ih,true))*2.,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
call CreateTextTagUnitBJ("背袭攻击",Ih,1.,10,60.,0.,100,0)
call SetTextTagVelocity(bj_lastCreatedTextTag,0.,.15)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagLifespan(bj_lastCreatedTextTag,.5)
else
endif
else
endif
// 魏延反击螺旋
if GetUnitAbilityLevel(Ih,$41575934)>0 then
if GetRandomInt(1,10)<=2 then
call SetUnitState(Ih,UNIT_STATE_LIFE,GetUnitState(Ih,UNIT_STATE_LIFE)+GetUnitState(Ih,UNIT_STATE_MAX_LIFE)*.05)
call bu(Ih,GetUnitX(Ih),GetUnitY(Ih),330,GetUnitState(Ih,UNIT_STATE_MAX_LIFE)*.1,.04,1,0)
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(Ih)),0,$41333030,1,GetUnitX(Ih),GetUnitY(Ih),bj_UNIT_FACING,1),852127)
call SetUnitAnimation(Ih,"spin")
else
endif
if UnitHasBuffBJ(Ih,$42575935)==true then
call UnitDamageTarget(Ih,Ig,GetUnitState(Ig,UNIT_STATE_LIFE)*.03+GetUnitState(Ih,ConvertUnitState(21)),false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
else
    // 黄忠攻击减甲效果
if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetEventDamageSource())==GetUnitTypeId(huntingUnit) and GetUnitTypeId(GetEventDamageSource())!=GetUnitTypeId(GetTriggerUnit()) then
call d10(GetEventDamageSource(),GetTriggerUnit())
else
endif

//  霸龙刀暴击伤害
if GetUnitAbilityLevel(Ih,$41623032)>0 and GetRandomInt(0,10)<=3 then
call SetUnitAnimation(Ih,"Slam")
call EXSetEventDamage(GetEventDamage()+R2I(GetUnitState(Ih,ConvertUnitState(21))*5))
call CreateTextTagUnitBJ(I2S(R2I(GetEventDamage()+R2I(GetUnitState(Ih,ConvertUnitState(21))*5))),Ig,1.,18.,100,0.,0.,20.)

set Jc[10]=GetLastCreatedTextTag()
call SetTextTagVelocityBJ(Jc[10],64,45.)
call SetTextTagPermanent(Jc[10],false)
call SetTextTagLifespan(Jc[10],1.)

endif
//卡牌骗术技能伤害
if GetUnitAbilityLevel(Ih,$41623076)>0 then
if LoadInteger(Ia,GetHandleId(Ih),$41623076)>=3 then
call SaveInteger(Ia,GetHandleId(Ih),$41623076,0)
// call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00卡牌骗术！" + R2S(I2R(GetHeroInt(Ih,true))*GetUnitAbilityLevel(Ih, $41623076)))
call UnitDamageTarget(Ih,Ig,I2R(GetHeroInt(Ih,true))*GetUnitAbilityLevel(Ih, $41623076),false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
if GetRandomInt(1, 6) ==6 and bC(Ih, $69743065) == false then

    // 黄牌眩晕
if GetRandomInt(1, 6) < 3 then
call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00黄牌大师！"  )
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ih)),$65303939,$41623071,1,GetUnitX(Ih),GetUnitY(Ih),bj_UNIT_FACING,1),852095,Ig)
call UnitDamageTarget(Ih,Ig,bk(Ih, 3, GetUnitAbilityLevel(Ih, $41623076)) *0.1,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
        // 红牌减速
elseif GetRandomInt(1, 6) < 3 then 
call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00红牌大师！"  )
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(Ih)),$65303939,$41314C54,1,GetUnitX(Ig),GetUnitY(Ig),bj_UNIT_FACING,1),852096)
call bs(Ih,GetUnitX(Ig),GetUnitY(Ig),330,bk(Ih, 3, GetUnitAbilityLevel(Ih, $41623076)) *0.2 ,5,0)
        // 蓝牌烧蓝
elseif GetRandomInt(1, 6) < 3 then
call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00蓝牌大师！"  )
call SetUnitManaBJ(Ig,GetUnitState(Ig,UNIT_STATE_MANA)-1000.)
call UnitDamageTarget(Ih,Ig,bk(Ih, 3, GetUnitAbilityLevel(Ih, $41623076)) *0.3,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
else
// 如果有专属
if bC(Ih,$69743065)== true then
  
    if GetRandomInt(1, 8) < 3 then
call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00真黄牌大师！"  )
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Ih)),$65303939,$41623071,1,GetUnitX(Ih),GetUnitY(Ih),bj_UNIT_FACING,1),852095,Ig)
call UnitDamageTarget(Ih,Ig,bk(Ih, 3, GetUnitAbilityLevel(Ih, $41623076)) *0.6,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
    elseif  GetRandomInt(1, 9) < 3 then
call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00真红牌大师！"  )
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(Ih)),$65303939,$41314C54,1,GetUnitX(Ig),GetUnitY(Ig),bj_UNIT_FACING,1),852096)
call bs(Ih,GetUnitX(Ig),GetUnitY(Ig),330,bk(Ih, 3, GetUnitAbilityLevel(Ih, $41623076)) *0.8 ,5,0)
    else
call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00真蓝牌大师！"  )
call SetUnitManaBJ(Ig,GetUnitState(Ig,UNIT_STATE_MANA)-1000.)
call UnitDamageTarget(Ih,Ig,bk(Ih, 3, GetUnitAbilityLevel(Ih, $41623076)),false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
    endif
endif
endif

else
call SaveInteger(Ia,GetHandleId(Ih),$41623076,LoadInteger(Ia,GetHandleId(Ih),$41623076)+1)
endif
endif

if IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetEventDamageSource())==$51544453 and GetUnitTypeId(GetEventDamageSource())!=GetUnitTypeId(GetTriggerUnit()) then
call d4(GetEventDamageSource(),GetTriggerUnit())
else
    // 马忠大招狂暴伤害
if UnitHasBuffBJ(GetEventDamageSource(),$42303234)==true then
call UnitDamageTarget(Ih,Ig,I2R(GetUnitAbilityLevel(Ih,$41304151)*1000)+bk(Ih,2,GetUnitAbilityLevel(Ih,$41304151)+2),false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
if GetRandomReal(0,100.)<=20. and GetUnitAbilityLevel(Ih,$41303645)>0 then
call bv(Ih,bk(Ih,1,GetUnitAbilityLevel(Ih,$41303645)),bN(Ih,Ig),1000,220)
call IssuePointOrderById(XB(GetPlayerId(GetOwningPlayer(Ih)),$65303939,$4130364B,1,GetUnitX(Ih),GetUnitY(Ih),0.,1),852125,GetUnitX(Ig),GetUnitY(Ig))
else
endif
if UnitHasBuffBJ(Ih,$42303236)==true and GetRandomReal(0,100.)<=15. then
call UnitDamageTarget(Ih,Ig,GetUnitState(Ig,UNIT_STATE_LIFE)*.05,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call CreateTextTagUnitBJ("元灵之怒",Ig,0,15.,100,100,40.,20.)
call SetTextTagLifespan(bj_lastCreatedTextTag,1.)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)
else
//绝命枪技能伤害
if GetUnitAbilityLevel(Ih,$41594C35)>0 then
if LoadInteger(Ia,GetHandleId(Ih),$41594C35)>=2 then
call SaveInteger(Ia,GetHandleId(Ih),$41594C35,0)
call UnitDamageTarget(Ih,Ig,I2R(GetHeroAgi(Ih,true))*5.,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
call SaveInteger(Ia,GetHandleId(Ih),$41594C35,LoadInteger(Ia,GetHandleId(Ih),$41594C35)+1)
endif
else
    // 武神伤害
if GetRandomInt(1,10)<=GetUnitAbilityLevel(Ih,$41303653) then
call SetUnitAnimation(Ih,"spin")
call bs(Ih,GetUnitX(Ih),GetUnitY(Ih),260,(GetHeroStr(Ih,true)+GetHeroAgi(Ih,true))*I2R(GetUnitAbilityLevel(Ih,$41303653)),5,0)
else
    // 瑞文带被动的攻击伤害
if GetUnitTypeId(Ih)==$48595030 then
if LoadInteger(Ia,GetHandleId(Ih),$41595030)>=$41595030+1 then
call SaveInteger(Ia,GetHandleId(Ih),$41595030,LoadInteger(Ia,GetHandleId(Ih),$41595030)-1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Ih),LoadInteger(Ia,GetHandleId(Ih),$41595030)+1,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Ih),LoadInteger(Ia,GetHandleId(Ih),$41595030),true)
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*I2R(GetHeroStr(Ih,true))*.005,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_METAL_HEAVY_SLICE)
else
endif
else
if GetUnitTypeId(Ih)==$48594A30 then
call cD(Ih,Ig,300,bk(Ih,0,2),6,bN(Ih,Ig))
else
if GetUnitAbilityLevel(Ih,$425A5957)>0 then
call SetUnitState(Ih,UNIT_STATE_LIFE,(GetUnitState(Ih,UNIT_STATE_MAX_LIFE)-GetUnitState(Ih,UNIT_STATE_LIFE))*.05+GetUnitState(Ih,UNIT_STATE_LIFE))
call fU(Ih,Ig,Ii)
else
if GetUnitAbilityLevel(Ih,$42475957)>0 then
call UnitDamageTarget(Ih,Ig,bk(Ih,0,GetUnitAbilityLevel(Ih,$41475957))*.3+GetUnitState(Ih,ConvertUnitState(21)),false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_METAL_HEAVY_SLICE)
else
endif
if GetUnitAbilityLevel(Ih,$41475957)>0 then
if GetRandomInt(1,10)==2 then
call SetUnitAnimationByIndex(Ih,13)
call bs(Ih,GetUnitX(Ih),GetUnitY(Ih),220,GetUnitState(Ih,ConvertUnitState(21))*3,1,0)
else
endif
else
if GetUnitTypeId(Ih)==$4F303036 or GetUnitTypeId(Ih)==$4841484E then
if HK[GetConvertedPlayerId(GetOwningPlayer(Ih))]<100 then
set HK[GetConvertedPlayerId(GetOwningPlayer(Ih))]=HK[GetConvertedPlayerId(GetOwningPlayer(Ih))]+5
call DisplayTextToPlayer(GetOwningPlayer(Ih),0,0,I2S(HK[GetConvertedPlayerId(GetOwningPlayer(Ih))]))
else
endif
// 蛮子暴击伤害
if GetUnitAbilityLevel(Ih,$41304C4F)>0 and GetRandomReal(0,100.)<=I2R(HK[GetConvertedPlayerId(GetOwningPlayer(Ih))])*.5 then
call SetUnitAnimation(Ih,"Slam")
if GetUnitAbilityLevel(Ih,$4230334C)>0 then
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*5,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call CreateTextTagUnitBJ(I2S(R2I(GetUnitState(Ih,ConvertUnitState(21))*5.)),Ig,1.,18.,100,0.,0.,20.)
else
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*3,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call CreateTextTagUnitBJ(I2S(R2I(GetUnitState(Ih,ConvertUnitState(21))*3.)),Ig,1.,18.,100,0.,0.,20.)
endif
set Jc[5]=GetLastCreatedTextTag()
call SetTextTagVelocityBJ(Jc[5],64,45.)
call SetTextTagPermanent(Jc[5],false)
call SetTextTagLifespan(Jc[5],1.)
if XR(Ih,$41304C4E,1)>0. then
if XR(Ih,$41304C4E,1)>1. then
call XV(Ih,$41304C4E,1,XR(Ih,$41304C4E,1)-1.)
else
call XV(Ih,$41304C4E,1,0.)
endif
else
endif
else
endif
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
if GetUnitTypeId(Ih)==$48475330 or GetUnitTypeId(Ih)==$48475332 or GetUnitTypeId(Ih)==$484C4C51 or GetUnitTypeId(Ih)==$484C5132 or GetUnitTypeId(Ih)==$484C5131 and GetUnitAbilityLevel(Ih,$41304239)>0 then
if LoadInteger(Ia,GetHandleId(Ih),$47535A4C)>=3 then
call SaveInteger(Ia,GetHandleId(Ih),$47535A4C,0)
call SetUnitState(Ih,UNIT_STATE_LIFE,GetUnitState(Ih,UNIT_STATE_LIFE)+GetUnitState(Ih,UNIT_STATE_MAX_LIFE)*.05)
call bt(Ih,GetUnitX(Ih),GetUnitY(Ih),330,GetUnitState(Ih,ConvertUnitState(21))*3,.03,1,0)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\lvbu-qzjtx.mdx",Ih,"chest"))
else
call SaveInteger(Ia,GetHandleId(Ih),$47535A4C,LoadInteger(Ia,GetHandleId(Ih),$47535A4C)+1)
endif
if GetUnitAbilityLevel(Ih,$41304451)>0 and GetRandomInt(1,20)<=GetUnitAbilityLevel(Ih,$41304451) then
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*2.,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
else
endif
if GetUnitAbilityLevel(GetEventDamageSource(),$41303530)>0 then
call SetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE,GetUnitState(GetEventDamageSource(),UNIT_STATE_LIFE)+GetEventDamage()*.5)
else
endif
if GetUnitAbilityLevel(GetEventDamageSource(),$416C6974)>0 then
call UnitDamageTarget(GetEventDamageSource(),GetTriggerUnit(),I2R(GetHeroInt(GetEventDamageSource(),true))*2.,false,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetUnitAbilityLevel(GetEventDamageSource(),$41534A38)>0 and 0!=EXGetEventDamageData(JI)==true then
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*1.,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetUnitAbilityLevel(GetEventDamageSource(),$41304558)>0 and 0!=EXGetEventDamageData(JI)==true then
call UnitDamageTarget(Ih,Ig,4500.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetUnitAbilityLevel(Ih,$41304245)>0 or GetUnitAbilityLevel(Ih,$41534A34)>0 or GetUnitAbilityLevel(Ih,$41303748)>=1 and 0!=EXGetEventDamageData(JI)==true and IsUnitType(Ih,UNIT_TYPE_HERO)==true then
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*2.,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
if GetUnitAbilityLevel(Ih,$41594D30)>0 then
call SetUnitState(Ih,UNIT_STATE_LIFE,GetUnitState(Ih,UNIT_STATE_LIFE)+Ii)
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*2.,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
    //附带技能这个的造成1.5倍真伤效果
if GetUnitAbilityLevel(Ih,$41303646)>0 then
call EXSetEventDamage(GetEventDamage()*1.5*1.)
else
endif
endif
endif
if GetUnitTypeId(GetEventDamageSource())==$485A4731 or GetUnitTypeId(GetEventDamageSource())==$48767764 and GetUnitAbilityLevel(Ig,$42486361)>=1 or GetUnitAbilityLevel(Ig,$42637364)>=1 then
call UnitDamageTarget(Ih,Ig,GetUnitState(Ih,ConvertUnitState(21))*1.,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetRandomReal(0,100.)<=10 and GetUnitAbilityLevelSwapped($4130354E,GetEventDamageSource())>=1 then
call UnitDamageTarget(GetEventDamageSource(),GetTriggerUnit(),I2R(GetUnitLevel(GetEventDamageSource()))*10.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetUnitAbilityLevelSwapped($41304341,GetEventDamageSource())>=1 then
call UnitDamageTarget(Ih,Ig,bO(Ih,Ig)*2+I2R(GetHeroLevel(Ih))*15,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
if bC(Ih,$666C6167)==true and IsPlayerAlly(GetOwningPlayer(Ih),GetOwningPlayer(Ig))==false then
call UnitDamageTarget(Ih,Ig,I2R(GetHeroAgi(Ih,true)),false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
if GetUnitAbilityLevelSwapped($4130354A,Ig)<1 and GetRandomInt(1,10)==8 then
set Jd[5]=GetUnitLoc(Ig)
call CreateTextTagLocBJ("破防箭技",Jd[5],1.,15.,100.,100,100.,20.)
set Jc[9]=GetLastCreatedTextTag()
call UnitAddAbilityBJ($4130354A,Ig)
call SetTextTagVelocityBJ(Jc[9],64,90)
call SetTextTagPermanent(Jc[9],false)
call SetTextTagLifespan(Jc[9],1.)
call RemoveLocation(Jd[5])
else
endif
else
endif
else
endif
if GetUnitTypeId(Ih)==$6E30304C then
set HP=0.+I2R(GetHeroAgi(Ib[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))],true)+50)*I2R(GetUnitAbilityLevel(Ib[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))],$4130414E))
call IssueImmediateOrderById(CreateUnit(GetOwningPlayer(Ih),$65303130,GetUnitX(Ig),GetUnitY(Ig),0),852127)
call UnitDamageTarget(Ib[GetConvertedPlayerId(GetOwningPlayer(Ih))],Ig,HP,false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
if GetUnitTypeId(Ih)==$65303144 then
set HP=.25*bk(Ib[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))],2,GetUnitAbilityLevel(Ib[GetConvertedPlayerId(GetOwningPlayer(GetEventDamageSource()))],$41574432))
call UnitDamageTarget(Ib[GetConvertedPlayerId(GetOwningPlayer(Ih))],Ig,HP,false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
if UnitHasBuffBJ(Ig,$42304747)==true or UnitHasBuffBJ(Ig,$42314747)==true or UnitHasBuffBJ(Ig,$42303135)==true then
call UnitDamageTarget(Ih,Ig,GetEventDamage(),false,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call CreateTextTagUnitBJ("伤害加深",GetTriggerUnit(),0,10,100,100,20.,0)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagVelocity(bj_lastCreatedTextTag,GetRandomReal(-.03,.03),.02)
call SetTextTagLifespan(GetLastCreatedTextTag(),2.)
else
endif
if UnitHasBuffBJ(Ig,$42304659)==true or UnitHasBuffBJ(Ig,$426C7361)==true or UnitHasBuffBJ(Ig,$426C7368)==true then
call UnitRemoveBuffs(Ig,false,true)
if UnitHasBuffBJ(Ig,$42304659)==true and UnitHasBuffBJ(Ih,$42486473)==false and GetUnitAbilityLevel(Ih,$416C6F63)==0 and GetUnitAbilityLevel(Ih,$4176756C)==0 then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",Ih,"chest"))
  //轩辕剑 盘古斧伤害计算
if bC(Ig,$6D6C7374)==true or bC(Ig,$6F636F72)==true then
call UnitDamageTarget(Ig,Ih,GetUnitState(Ig,UNIT_STATE_MAX_LIFE)*.1,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
if GetRandomInt(1,10)==5 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(Ig),$65303052,GetUnitX(Ih),GetUnitY(Ih),0),"thunderbolt",Ih)
else
endif
else
call UnitDamageTarget(Ig,Ih,GetUnitState(Ig,UNIT_STATE_MAX_LIFE)*.03,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif

else
if UnitHasBuffBJ(Ig,$426C7361)==true or UnitHasBuffBJ(Ig,$426C7368)==true and UnitHasBuffBJ(Ih,$42486473)==false and GetUnitAbilityLevel(Ih,$416C6F63)==0 and GetUnitAbilityLevel(Ih,$4176756C)==0 then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",Ih,"chest"))
// 轩辕剑、雷神管
if bC(Ig,$6D6C7374)==true or bC(Ig,$49303142)==true then
call UnitDamageTarget(Ig,Ih,I2R(GetHeroInt(Ig,true))*5.,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
if GetRandomInt(1,10)==5 then
call IssueTargetOrder(CreateUnit(GetOwningPlayer(Ig),$65303052,GetUnitX(Ih),GetUnitY(Ih),0),"thunderbolt",Ih)
else
endif
else
call UnitDamageTarget(Ig,Ih,I2R(GetHeroInt(Ig,true))*3.,false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
else
endif
endif
else
endif
set Ig=null
set Ih=null
call EnableTrigger(GetTriggeringTrigger())
endfunction
function g5 takes nothing returns nothing
set If=CreateTrigger()
call TriggerAddCondition(If,Condition(function g3))
call TriggerAddAction(If,function g4)
endfunction
function g6 takes nothing returns nothing
endfunction
function g7 takes nothing returns nothing
if GetUnitTypeId(GetTriggerUnit())==$65305A51 then
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),I2R(GetHeroInt(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],true))*12.)
else
if GetUnitTypeId(GetTriggerUnit())==$656E6563 then
call TriggerRegisterUnitEvent(Nd,GetTriggerUnit(),EVENT_UNIT_DEATH)
else
if GetUnitAbilityLevel(GetTriggerUnit(),$416C6F63)==0 and GetUnitAbilityLevel(GetTriggerUnit(),$4176756C)==0 and GetUnitPointValue(GetTriggerUnit())!=177 then
if IsUnitEnemy(GetTriggerUnit(),Player(8))==true then
if Gq > 6 then
call EXSetUnitCollisionType(false,GetTriggerUnit(),3)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+I2R(50*G5))
else
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+I2R(Gq*G5))
endif
else
endif
call TriggerRegisterUnitEvent(If,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
else
endif
endif
endif
if GetUnitTypeId(GetTriggerUnit())==$65303139 then
call UnitAddAbility(GetTriggerUnit(),$41636462)
call UnitAddAbility(GetTriggerUnit(),$414E6462)
call UnitAddAbility(GetTriggerUnit(),$414E7232)
call UnitAddAbility(GetTriggerUnit(),$41486268)
else
endif
endfunction
function g8 takes nothing returns nothing
set VI=CreateTrigger()
call a9(VI,GetPlayableMapRect())
call TriggerAddAction(VI,function g7)
endfunction
function g9 takes nothing returns nothing
endfunction
function hB takes nothing returns boolean
return GetChangingUnitPrevOwner()==Player(PLAYER_NEUTRAL_PASSIVE) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function hC takes nothing returns nothing
local integer KW
local unit Iv=GetTriggerUnit()
local integer KX=GetPlayerId(GetOwningPlayer(Iv))
call SetPlayerStateBJ(GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_FOOD_CAP,6)
call SetCameraBoundsToRectForPlayerBJ(GetTriggerPlayer(),Bj)
if Ff>1 and Gq>1 then
call WQ(GetOwningPlayer(GetTriggerUnit()),"游戏中",1)
else
call WQ(GetOwningPlayer(GetTriggerUnit()),"游戏中",0)
endif
call SetUnitUserData(GetTriggerUnit(),GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))
// 选英雄后的注册事件
if GetUnitAbilityLevel(Iv,$41304653)==0 then
call UnitAddAbility(Iv,$41304653)
call UnitMakeAbilityPermanent(Iv,true,$41304653)
call TriggerRegisterUnitEvent(Kz,Iv,EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(K0,Iv,EVENT_UNIT_PICKUP_ITEM)
call TriggerRegisterUnitEvent(K1,Iv,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(K2,Iv,EVENT_UNIT_PICKUP_ITEM)
call TriggerRegisterUnitEvent(K3,Iv,EVENT_UNIT_HERO_LEVEL)
call TriggerRegisterUnitEvent(K4,Iv,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(K5,Iv,EVENT_UNIT_SPELL_EFFECT)
else
endif
set Hm[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call SaveUnitHandle(Ia,$3EB6BB4E,GetUnitTypeId(Iv),Iv)
if GetUnitTypeId(GetTriggerUnit())==$51544453 or GetUnitTypeId(GetTriggerUnit())==$48594A30 or GetUnitTypeId(GetTriggerUnit())==$4F4C5642 or GetUnitTypeId(GetTriggerUnit())==$4F303036 or GetUnitTypeId(GetTriggerUnit())==$48574430 or GetUnitTypeId(GetTriggerUnit())==$48475330 or GetUnitTypeId(GetTriggerUnit())==$48575930 or GetUnitTypeId(GetTriggerUnit())==$484A5330 or GetUnitTypeId(GetTriggerUnit())==$48594D30 or GetUnitTypeId(GetTriggerUnit())==$48575931 or GetUnitTypeId(GetTriggerUnit())==$48475930 or GetUnitTypeId(GetTriggerUnit())==$484C4C51 or GetUnitTypeId(GetTriggerUnit())==$485A5930 or GetUnitTypeId(GetTriggerUnit())==$4E303050 then
set Gd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
set HH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
else
endif
if GetUnitTypeId(GetTriggerUnit())==$4F303036 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$4841484E)
else
endif
call TriggerRegisterUnitEvent(K8,Iv,EVENT_UNIT_HERO_SKILL)
else
if GetUnitTypeId(GetTriggerUnit())==$48444430 then
call TriggerRegisterUnitEvent(K9,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
else
if GetUnitTypeId(GetTriggerUnit())==$48574430 then
call TriggerRegisterUnitEvent(LB,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
if DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"ZGGG")==true then
call XZ(GetTriggerUnit(),$41304B32,$48574432)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),1.5)
else
if DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"WDPF")==true or GG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==$2E186322 then
call XZ(GetTriggerUnit(),$41304B32,$48574431)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),1.5)
call SaveUnitHandle(Ia,$3EB6BB4E,$48574431,GetTriggerUnit())
else
endif
endif
else
if GetUnitTypeId(GetTriggerUnit())==$48475330 then
call TriggerRegisterUnitEvent(LC,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
else
if GetUnitTypeId(GetTriggerUnit())==$48575930 then
call SaveUnitHandle(Ia,$3EB6BB4E,$48575931,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4F4C5642 and DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(GetTriggerUnit(),$41304B32,$484C4232)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),1.6)
else
if GetUnitTypeId(GetTriggerUnit())==$4F4C5642 and Hg[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==GetObjectName($65303130) or DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"LBHJJ")==true or DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"WDPF")==true or RequestExtraIntegerData(54,GetOwningPlayer(GetTriggerUnit()),null,null,false,2,0,0)>=7 then
call XZ(GetTriggerUnit(),$41304B32,$484C4231)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),1.6)
else
if GetUnitTypeId(GetTriggerUnit())==$484A5330 then
call SaveItemHandle(Ia,GetHandleId(GetTriggerUnit()),$3063786A,CreateItem($49303157,0,0))
call UnitAddItem(GetTriggerUnit(),LoadItemHandle(Ia,GetHandleId(GetTriggerUnit()),$3063786A))
else
if GetUnitTypeId(GetTriggerUnit())==$484C4C51 then
call SaveItemHandle(Ia,GetHandleId(GetTriggerUnit()),$30707070,CreateItem($4930315A,0,0))
call UnitAddItem(GetTriggerUnit(),LoadItemHandle(Ia,GetHandleId(GetTriggerUnit()),$30707070))
call TriggerRegisterUnitEvent(LC,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
else
    // 杨戬
if GetUnitTypeId(GetTriggerUnit())==$48594A30 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41594A39,false)
call b1(Iv,$55585451)
    // 诸葛果的追随者
elseif GetUnitTypeId(GetTriggerUnit())==$485A4747 then
// call CreateUnit(GetOwningPlayer(Iv),$48303031,GetUnitX(Iv),GetUnitY(Iv),0.)
call registerZhuisuiBorn(Iv,$48303031)
elseif GetUnitTypeId(GetTriggerUnit())=='HA07' then
set gongshuban = CreateUnit(GetOwningPlayer(Iv), 'u00l', GetUnitX(Iv), GetUnitY(Iv), 0.)
else


if GetUnitTypeId(GetTriggerUnit())==$48595030 then
call SaveInteger(Ia,GetHandleId(Iv),$41595030,$41595030)
else
if GetUnitTypeId(GetTriggerUnit())==$48594D30 then
call SaveItemHandle(Ia,GetHandleId(GetTriggerUnit()),$30707070,CreateItem($49303230,0,0))
call UnitAddItem(GetTriggerUnit(),LoadItemHandle(Ia,GetHandleId(GetTriggerUnit()),$30707070))
else
if GetUnitTypeId(Iv)==$4F647274 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$484D5331)
else
endif
else
if GetUnitTypeId(Iv)==$48475930 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true and RequestExtraBooleanData(50,GetOwningPlayer(Iv),null,null,false,0,0,0)==false then
call XZ(Iv,$41304B32,$48475932)
else
endif
else
if GetUnitTypeId(Iv)==$486B616C then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$484A5731)
else
endif
else
if GetUnitTypeId(Iv)==$484C4C51 then
call TriggerRegisterUnitEvent(LC,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
else
if GetUnitTypeId(Iv)==$48757468 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$48575031)
else
endif
else
if GetUnitTypeId(Iv)==$486A6169 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$48485959)
else
endif
else
if GetUnitTypeId(Iv)==$4E626263 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$48475832)
else
endif
else
if GetUnitTypeId(GetTriggerUnit())==$486D6764 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(GetTriggerUnit(),$41304B32,$48303054)
else
endif
else
if GetUnitTypeId(GetTriggerUnit())==$48767764 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$485A4731)
else
endif
else
if GetUnitTypeId(GetTriggerUnit())==$4530305A then
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"ZGGG")==true then
call XZ(Iv,$41304B32,$48303059)
else
endif
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
if IK[GetConvertedPlayerId(GetTriggerPlayer())]==false then
call cw(Iv)
if DzAPI_Map_HasMallItem(GetOwningPlayer(Iv),"XBTZ")==true or RequestExtraBooleanData(50,GetOwningPlayer(Iv),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(GetOwningPlayer(Iv))==true then
    if potholingButton==choosedButton then
        call UnitAddItem(Iv,CreateItem('it0o',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
        else
        call UnitAddItem(Iv,CreateItem($746C756D,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
        endif
// call UnitAddItem(Iv,CreateItem($746C756D,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
if Iv == gaoxiang then 
call UnitAddItem(Iv,CreateItem($69743069,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
if Iv == zongyu and potholingButton !=choosedButton then 
    
call UnitAddItem(Iv,CreateItem('it0o',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
if potholingButton==choosedButton then
    // set found_time =
// call CreateItem($746C756D,-1220.,-5240.)
// call CreateItem($746C756D,-1220.,-5240.)
// call CreateItem($746C756D,-1220.,-5240.)
// call UnitAddItem(Iv,CreateItem($746C756D,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))

endif
else
endif
if Gd[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true or Ff==1 then
call UnitAddItemByIdSwapped($7462616B,Iv)
if GetRandomInt(1,3)==2 then
call UnitAddItem(Iv,CreateItem(LJ[GetRandomInt(182,184)],GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
call UnitAddItem(Iv,CreateItem(LJ[GetRandomInt(180,181)],GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
else
endif
else
endif
if KN[GetConvertedPlayerId(GetOwningPlayer(Iv))]==null then
set KW=0
loop
exitwhen KW>2
set KN[KW*10+GetConvertedPlayerId(GetOwningPlayer(Iv))]=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$4E74696E,12800.,16363.,0)
set KW=KW+1
endloop
else
endif
if GG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==$2E186322 or DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"VIP1")==true or RequestExtraBooleanData(50,GetOwningPlayer(Iv),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(GetOwningPlayer(Iv))==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00您是VIP玩家，可以去马厩那里领取钟意的马匹，同时游戏中英雄的经验获得率比普通玩家高40%")
else
endif
if RequestExtraBooleanData(50,GetOwningPlayer(Iv),null,null,false,0,0,0)==true then
call AdjustPlayerStateBJ(5000,GetOwningPlayer(Iv),PLAYER_STATE_RESOURCE_GOLD)
else
endif
if DzAPI_Map_IsBlueVIP(GetOwningPlayer(Iv))==true then
call UnitAddAbility(Iv,$41304643)
call UnitMakeAbilityPermanent(Iv,true,$41304643)
else
endif
call SetPlayerName(GetOwningPlayer(Iv),Hg[GetConvertedPlayerId(GetOwningPlayer(Iv))]+GetHeroProperName(Iv))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(Iv)),0),GF[GetConvertedPlayerId(GetOwningPlayer(Iv))]+GetPlayerName(GetOwningPlayer(Iv)))
call fn(Iv,0)
if GetLocalPlayer()==GetOwningPlayer(Iv) then
set GF[0]=GF[100+Gq]+(" "+GF[GetConvertedPlayerId(GetOwningPlayer(Iv))])+GetPlayerName(GetOwningPlayer(Iv))
call MultiboardSetTitleText(bj_lastCreatedMultiboard,GF[0])
else
endif
if choosedButton==doubleHeroButton and doubleHeroGroup[GetPlayerId(GetTriggerPlayer())]!=1 then
set doubleHeroGroup[GetPlayerId(GetTriggerPlayer())] =1
call SetPlayerStateBJ(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP,1)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|Cffff0000已开启双将模式，请再选择一个副将！")
endif
set Iv=null
endfunction
function hD takes nothing returns nothing
set Jl=CreateTrigger()
call TriggerAddCondition(Jl,Condition(function hB))
call TriggerAddAction(Jl,function hC)
endfunction
function hE takes nothing returns nothing
endfunction
function hF takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cffff0000主机开启BOSS强化|r")
call eb(Player(9))
call eb(Player(10))
call ea(Lx,Ly,Lz,L0,L1)
endfunction
function hG takes nothing returns nothing
set LP=CreateTrigger()
call TriggerRegisterPlayerChatEvent(LP,Player(0),"BOSS加强",true)
call TriggerAddAction(LP,function hF)
endfunction
function hH takes nothing returns boolean
return GetEventDamage()>=1.
endfunction
function hI takes nothing returns nothing
local real JT=0.
if GetUnitPointValue(GetTriggerUnit())!=9 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitAbilityLevel(GetTriggerUnit(),$4130465A)==0 and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) and IsUnitEnemy(GetTriggerUnit(),Player(8))==true then
if GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)/GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)<=.5 then
call UnitAddAbility(GetTriggerUnit(),$4130465A)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130465A)
set JT=GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)*2.)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+JT)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+I2R(G5)*100.)
else
endif
else
endif
endfunction
function hJ takes nothing returns nothing
set L2=CreateTrigger()
call a5(L2)
call TriggerAddCondition(L2,Condition(function hH))
call TriggerAddAction(L2,function hI)
endfunction
function hK takes nothing returns nothing
local integer Jk
call DisplayTextToPlayer(Player(0),0,0,"玩家注册")
set Jk=1
loop
exitwhen Jk>8
call TriggerRegisterPlayerUnitEventSimple(Jl,ConvertedPlayer(Jk),EVENT_PLAYER_UNIT_CHANGE_OWNER)
call TriggerRegisterPlayerChatEvent(Jm,ConvertedPlayer(Jk),"玩家信息",true)
call TriggerRegisterPlayerChatEvent(Jm,ConvertedPlayer(Jk),"wjxx",true)
call TriggerRegisterPlayerChatEvent(Jn,ConvertedPlayer(Jk),"和谐",true)
call TriggerRegisterPlayerChatEvent(Jn,ConvertedPlayer(Jk),"hx",true)
call TriggerRegisterPlayerChatEvent(Jo,ConvertedPlayer(Jk),"BIG2",true)
call TriggerRegisterPlayerChatEvent(Jo,ConvertedPlayer(Jk),"BIG3",true)
call TriggerRegisterPlayerChatEvent(Jp,ConvertedPlayer(Jk),"BB",false)
call TriggerRegisterPlayerChatEvent(Jq,ConvertedPlayer(Jk),"KQ",false)
call TriggerRegisterPlayerChatEvent(Jr,ConvertedPlayer(Jk),"-X",false)
call TriggerRegisterPlayerChatEvent(Js,ConvertedPlayer(Jk),"-RH",true)
call TriggerRegisterPlayerChatEvent(Jt,ConvertedPlayer(Jk),"yx1",false)
call TriggerRegisterPlayerChatEvent(Jt,ConvertedPlayer(Jk),"yx2",false)
call TriggerRegisterPlayerChatEvent(Jt,ConvertedPlayer(Jk),"yx3",true)
call TriggerRegisterPlayerUnitEventSimple(Ju,ConvertedPlayer(Jk),EVENT_PLAYER_UNIT_DEATH)
call V3(Jy,1,32)
set IF[Jk]=true
set Jk=Jk+1
endloop
call TriggerRegisterPlayerUnitEventSimple(Jl,Player(PLAYER_NEUTRAL_PASSIVE),EVENT_PLAYER_UNIT_CHANGE_OWNER)
endfunction
function hL takes nothing returns nothing
set Jj=CreateTrigger()
call TriggerRegisterTimerEventSingle(Jj,1.5)
call TriggerAddAction(Jj,function hK)
endfunction
function hM takes nothing returns nothing
endfunction
function hN takes nothing returns boolean
return GetUnitAbilityLevel(GetTriggerUnit(),$4176756C)==0
endfunction
function hO takes nothing returns nothing
call SetUnitInvulnerable(Ib[GetConvertedPlayerId(GetTriggerPlayer())],false)
call SetUnitTimeScale(Ib[GetConvertedPlayerId(GetTriggerPlayer())],1)
call SetUnitFlyHeight(Ib[GetConvertedPlayerId(GetTriggerPlayer())],0.,0.)
call PauseUnit(Ib[GetConvertedPlayerId(GetTriggerPlayer())],true)
call PauseUnit(Ib[GetConvertedPlayerId(GetTriggerPlayer())],false)
call KillUnit(Ib[GetConvertedPlayerId(GetTriggerPlayer())])
call ReviveHero(LE,GetUnitX(LE),GetUnitY(LE),false)
call TriggerRegisterPlayerChatEvent(KP,Player(0),"QB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(0),"MDQB",true)
endfunction
function hP takes nothing returns nothing
set Jn=CreateTrigger()
call TriggerAddCondition(Jn,Condition(function hN))
call TriggerAddAction(Jn,function hO)
endfunction
function hQ takes nothing returns nothing
if IF[GetConvertedPlayerId(GetTriggerPlayer())]==true then
set IF[GetConvertedPlayerId(GetTriggerPlayer())]=false
else
set IF[GetConvertedPlayerId(GetTriggerPlayer())]=true
endif
endfunction
function hR takes nothing returns nothing
set Jr=CreateTrigger()
call TriggerAddAction(Jr,function hQ)
endfunction
function hS takes nothing returns nothing
endfunction
function hT takes nothing returns nothing
set HE=HE+1
if HE>=8 then
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
else
endif
call DisplayTextToPlayer(Player(0),0,0,I2S(HE))
if GetPlayerSlotState(ConvertedPlayer(HE))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(ConvertedPlayer(HE))==MAP_CONTROL_USER then
set Hg[HE]=GetPlayerName(ConvertedPlayer(HE))
set Gl[HE]=DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))
set Gm[HE]=DzAPI_Map_GetMapLevelRank(ConvertedPlayer(HE))
set Hw[HE]=DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"DSWY")
set Gn[HE]=DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"QTDS")
set Go[HE]=DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"LVBU")
set HS[HE]=DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"HAHN")
set Ho[HE]=DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"HHWD")
// 设置游戏积分
// set Gp[HE]=fk(Player(HE-1))
set Gp[HE]=80
set HR[HE]=WR(ConvertedPlayer(HE),GF[8000])
set HI[HE]=WR(ConvertedPlayer(HE),"英雄皮肤")
set HJ[HE]=WR(ConvertedPlayer(HE),"拥有英雄")
set He[HE]=WR(ConvertedPlayer(HE),"拥有翅膀")
set Hl[HE]=WR(ConvertedPlayer(HE),"玩家逃跑")
set ID[HE]=WR(ConvertedPlayer(HE),"BB")
if false and DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"DSWY")==true or Hg[HE]==GetObjectName($65303130)  then
call ShowUnit(Dt,true)
call EnableTrigger(MH)
call EnableTrigger(MI)
call ShowUnit(Ck,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dt)+" |cffffcc00已购买|r")
else
endif
if Gn[HE]==true or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true then
call ShowUnit(DH,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(DH)+" |cffffcc00已购买|r")
else
endif
if Go[HE]==true or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true then
call ShowUnit(Dm,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dm)+" |cffffcc00已购买|r")
else
endif
if HS[HE]==true or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true then
call ShowUnit(C6,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(C6)+" |cffffcc00已购买|r")
else
endif
if Ho[HE]==true or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true then
call ShowUnit(Dp,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dp)+" |cffffcc00已购买|r")
else
endif
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"GSLB")==true or Hg[HE]==GetObjectName($65303130) then
call ShowUnit(Dq,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dq)+" |cffffcc00已购买|r")
else
endif
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"WEIY")==true or Hg[HE]==GetObjectName($65303130)  then
// call ShowUnit(Dr,true)
call EnableTrigger(MH)
call EnableTrigger(MI)
call ShowUnit(Ck,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dr)+" |cffffcc00已购买|r")
else
endif
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"HGYC")==true or Hg[HE]==GetObjectName($65303130) or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true then
call ShowUnit(DV,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(DV)+" |cffffcc00已购买|r")
else
endif
if false and DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"CQZY")==true or Hg[HE]==GetObjectName($65303130) or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true  then
call ShowUnit(Cn,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetHeroProperName(Cn)+" |cffffcc00已购买|r")
else
endif
if false and DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"CQZY")==true or DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"GLLQ")==true or Hg[HE]==GetObjectName($65303130) or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true  then
call ShowUnit(Dx,true)
call EnableTrigger(MH)
call EnableTrigger(MI)
call ShowUnit(Ck,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetHeroProperName(Dx)+" |cffffcc00已购买|r")
else
endif
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"HELS")==true or Hg[HE]==GetObjectName($65303130) or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true then
call ShowUnit(DC,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetHeroProperName(DC)+" |cffffcc00已购买|r")
else
endif
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"WQDS")==true or Hg[HE]==GetObjectName($65303130) or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true then
call ShowUnit(Dj,true)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetHeroProperName(Dj)+" |cffffcc00已购买|r")
else
endif
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"ZGGG")==true then
call ShowUnit(DB,true)
call AddItemToStockBJ($656E6773,Dw,1,9)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cff00ff00商城英雄: |r"+GetHeroProperName(DB)+" |cffffcc00已购买|r")
set IN=true
else
endif
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"VIP1")==true or Hg[HE]==GetObjectName($65303130) then
set HG[HE]=true
else
endif
else
endif
if ID[HE]<1 then
set ID[HE]=27
else
endif
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cffff0000背包键：  "+IC[ID[HE]]+"|r")
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|cffff0000连续登陆天数：  "+I2S(RequestExtraIntegerData(54,ConvertedPlayer(HE),null,null,false,2,0,0))+"|r")
endfunction
function hU takes nothing returns nothing
local timer MG
set HE=0
set GF[8000]=I2S(StringHashBJ("WH"))
set MG=CreateTimer()
call TimerStart(MG,.3,true,function hT)
set MG=null
endfunction
function hV takes nothing returns nothing
set MF=CreateTrigger()
call TriggerRegisterTimerEventSingle(MF,0.)
call TriggerAddAction(MF,function hU)
endfunction
function hW takes nothing returns nothing
local integer Jk
local integer Ix=0
set Jk=1
loop
exitwhen Jk>8
if GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER then
set Ix=0
if Gr[0]=="胜利" then
if Gq==6 then
set Gp[Jk]=Gp[Jk]+Fw*1
set Ix=1*Fw
else
set Gp[Jk]=Gp[Jk]+3*Fw*(Gq-1)
set Ix=3*Fw*(Gq-1)
endif
if GetOwningPlayer(DF)==Player(8) and IsUnitAliveBJ(DF)==true then
set Gp[Jk]=Gp[Jk]+Fw*(Gq-1)
set Ix=Fw*(Gq-1)+Ix
else
endif
if GetOwningPlayer(Dh)==Player(8) then
set Gp[Jk]=Gp[Jk]+Fw*(Gq-1)
set Ix=Fw*(Gq-1)+Ix
else
endif
else
endif
if true then
call DzAPI_Map_Stat_SetStat(ConvertedPlayer(Jk),"WHJGX",I2S(fo(Player(Jk-1),Ix*Fw)))
call ay(.2)
call DisplayTextToPlayer(ConvertedPlayer(Jk),0,0,"游戏积分已更新为: "+I2S(Gp[Jk]))
else
endif
else
endif
set Jk=Jk+1
endloop
endfunction
function hX takes nothing returns nothing
set MJ=CreateTrigger()
call TriggerAddAction(MJ,function hW)
endfunction
function hY takes nothing returns nothing
local integer Jk
set Jk=1
loop
exitwhen Jk>8
if GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER then
set Gp[Jk]=Gp[Jk]+Fw*1
call DzAPI_Map_Stat_SetStat(ConvertedPlayer(Jk),"WHJGX",I2S(fo(Player(Jk-1),1*Fw)))
call DisplayTextToPlayer(ConvertedPlayer(Jk),0,0,"游戏积分已更新为: "+I2S(Gp[Jk]))
call ay(.2)
else
endif
set Jk=Jk+1
endloop
endfunction
function hZ takes nothing returns nothing
set MN=CreateTrigger()
call TriggerAddAction(MN,function hY)
endfunction
function ha takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==$6D6F6F6E and TimerGetRemaining(Fk)>=1. then
if GetOwningPlayer(GetTriggerUnit())==Player(0) then
call SetWidgetLife(GetManipulatedItem(),50)
call RemoveItem(GetManipulatedItem())
call StartTimerBJ(Fk,false,.01)
else
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"只有红色玩家才可以使用该功能！！！")
endif
else
endif
if GetItemTypeId(GetManipulatedItem())==$4930314E then
call DzSetUnitModel(Dl,"war3mapImported\\yinjiazhaoyun_a.mdl")
return
else
if GetItemTypeId(GetManipulatedItem())==$4930314F then
call DzSetUnitModel(Dl,"war3mapImported\\QMC.mdl")
return
else
if GetItemTypeId(GetManipulatedItem())==$4930314D then
call DzSetUnitModel(Dl,"war3mapImported\\Unit_LvPaoGuanYu.mdl")
return
else
if GetItemTypeId(GetManipulatedItem())==$49303241 then
call DzSetUnitModel(Dl,"war3mapImported\\U_ZYGuanYu.mdl")
return
else
if GetItemTypeId(GetManipulatedItem())==$49303243 then
call DzSetUnitModel(Dl,"war3mapImported\\ZhangFei.mdl")
return
else
if GetItemTypeId(GetManipulatedItem())==$49303247 then
call DzSetUnitModel(Dl,"war3mapImported\\huz.mdl")
return
else
if GetItemTypeId(GetManipulatedItem())==$49303159 then
call DzSetUnitModel(Dl,"war3mapImported\\zsgmachao.mdl")
return
else
endif
endif
endif
endif
endif
endif
endif
endfunction
function hb takes nothing returns nothing
set K0=CreateTrigger()
call TriggerAddAction(K0,function ha)
endfunction
function hc takes nothing returns nothing
local integer CC=GetPlayerId(GetTriggerPlayer())+1
call ay(.1)
if GetPlayerState(ConvertedPlayer(CC),PLAYER_STATE_GOLD_GATHERED)-Gp[CC]==6852 then
if ModuloInteger(HJ[CC],128)<64 then
set HJ[CC]=HJ[CC]+64
call WQ(ConvertedPlayer(CC),"拥有英雄",HJ[CC])
call DisplayTextToPlayer(ConvertedPlayer(CC),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(Dm)+" |cffffcc00已拥有|r")
else
endif
else
if GetPlayerState(ConvertedPlayer(CC),PLAYER_STATE_GOLD_GATHERED)-Gp[CC]==6916 then
if ModuloInteger(HJ[CC],256)<128 then
set HJ[CC]=HJ[CC]+128
call WQ(ConvertedPlayer(CC),"拥有英雄",HJ[CC])
call DisplayTextToPlayer(ConvertedPlayer(CC),0,0,"|cff00ff00商城英雄: |r"+GetUnitName(DH)+" |cffffcc00已拥有|r")
else
endif
else
endif
endif
endfunction
function hd takes nothing returns nothing
set J7=CreateTrigger()
call TriggerAddAction(J7,function hc)
endfunction
function he takes nothing returns nothing
endfunction
function hf takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==$49303131 then
if DzAPI_Map_GetMapLevel(GetOwningPlayer(GetTriggerUnit()))>=3 or DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"CBBY")==true then
call fe(GetTriggerUnit(),Hf[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1],-1)
call fe(GetTriggerUnit(),1,1)
return
else
if Gp[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>=200 and ModuloInteger(He[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],2)!=1 then
call fe(GetTriggerUnit(),1,7)
return
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000积分不足300,当前游戏积分为: |r"+I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endif
endif
else
endif
if GetItemTypeId(GetManipulatedItem())==$49303132 then
if DzAPI_Map_GetMapLevel(GetOwningPlayer(GetTriggerUnit()))>=5 or DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"CBHY")==true then
call fe(GetTriggerUnit(),Hf[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1],-1)
call fe(GetTriggerUnit(),2,1)
return
else
if Gp[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>=600 and ModuloInteger(He[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],4)<2 then
call fe(GetTriggerUnit(),2,7)
return
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000积分不足600,当前游戏积分为: |r"+I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))
endif
endif
else
if GetItemTypeId(GetManipulatedItem())==$49303133 then
if DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"CBHC")==true or Hg[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=="大男人Abin" then
call fe(GetTriggerUnit(),Hf[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1],-1)
call fe(GetTriggerUnit(),3,1)
else
endif
else
endif
if GetItemTypeId(GetManipulatedItem())==$49303135 then
if Hg[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=="大男人Abin" or DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"CBLH")==true then
call fe(GetTriggerUnit(),Hf[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1],-1)
call fe(GetTriggerUnit(),4,1)
else
endif
else
if GetItemTypeId(GetManipulatedItem())==$49303136 then
if Hg[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=="大男人Abin" or DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"CBDW")==true then
call fe(GetTriggerUnit(),Hf[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1],-1)
call fe(GetTriggerUnit(),5,1)
else
endif
else
if GetItemTypeId(GetManipulatedItem())==$4930314C then
call fe(GetTriggerUnit(),5,8)
else
endif
endif
endif
endif
endfunction
function hg takes nothing returns nothing
set K2=CreateTrigger()
call TriggerAddAction(K2,function hf)
endfunction
function hh takes nothing returns nothing
local unit Iv=GetBuyingUnit()
if GetItemTypeId(GetSoldItem())==$49303345 and GetUnitTypeId(GetBuyingUnit())!=$55585451 then
if Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]>=30 then
set Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]=Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]-30
call fo(GetOwningPlayer(Iv),-30)
call cX(GetOwningPlayer(Iv),$B3B2543A,"游戏积分",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call cX(GetOwningPlayer(Iv),$B3B2543A,"NEW",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call RemoveItem(GetSoldItem())
call UnitAddItem(Iv,CreateItem($49303152,GetUnitX(Iv),GetUnitY(Iv)))
else
endif
else
if GetItemTypeId(GetSoldItem())==$49303346 and GetUnitTypeId(GetBuyingUnit())!=$55585451 then
if Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]>=30 then
set Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]=Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]-30
call fo(GetOwningPlayer(Iv),-30)
call cX(GetOwningPlayer(Iv),$B3B2543A,"游戏积分",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call cX(GetOwningPlayer(Iv),$B3B2543A,"NEW",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call RemoveItem(GetSoldItem())
call UnitAddItem(Iv,CreateItem($66726764,GetUnitX(Iv),GetUnitY(Iv)))
else
endif
else
if GetItemTypeId(GetSoldItem())==$49303347 and GetUnitTypeId(GetBuyingUnit())!=$55585451 then
if Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]>=30 then
set Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]=Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]-30
call fo(GetOwningPlayer(Iv),-30)
call cX(GetOwningPlayer(Iv),$B3B2543A,"游戏积分",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call cX(GetOwningPlayer(Iv),$B3B2543A,"NEW",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call RemoveItem(GetSoldItem())
call UnitAddItem(Iv,CreateItem($72616D31,GetUnitX(Iv),GetUnitY(Iv)))
else
endif
else
endif
endif
endif
if GetItemTypeId(GetSoldItem())==$49303139 and Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]>=20 and DzAPI_Map_GetMapLevel(GetOwningPlayer(Iv))>=10 then
set Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]=Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]-20
call fo(GetOwningPlayer(Iv),-20)
call cX(GetOwningPlayer(Iv),$B3B2543A,"游戏积分",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call cX(GetOwningPlayer(Iv),$B3B2543A,"NEW",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call RemoveItem(GetSoldItem())
call UnitAddItem(Iv,CreateItem($6573617A,GetUnitX(Iv),GetUnitY(Iv)))
else
if GetItemTypeId(GetSoldItem())==$49303138 and Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]>=20 and DzAPI_Map_GetMapLevel(GetOwningPlayer(Iv))>=10 then
set Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]=Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]-20
call fo(GetOwningPlayer(Iv),-20)
call cX(GetOwningPlayer(Iv),$B3B2543A,"游戏积分",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call cX(GetOwningPlayer(Iv),$B3B2543A,"NEW",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call RemoveItem(GetSoldItem())
call UnitAddItem(Iv,CreateItem($72656A36,GetUnitX(Iv),GetUnitY(Iv)))
else
if GetItemTypeId(GetSoldItem())==$49303148 and GetHeroLevel(GetBuyingUnit())>=100 and GetUnitTypeId(GetBuyingUnit())!=$55585451 then
if Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]>=30 then
set Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]=Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]-30
call fo(GetOwningPlayer(Iv),-30)
call cX(GetOwningPlayer(Iv),$B3B2543A,"游戏积分",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call cX(GetOwningPlayer(Iv),$B3B2543A,"NEW",I2S(Gp[GetConvertedPlayerId(GetOwningPlayer(Iv))]),1)
call RemoveItem(GetSoldItem())
call UnitAddItem(Iv,CreateItem($72656A32,GetUnitX(Iv),GetUnitY(Iv)))
else
endif
else
endif
endif
endif
set Iv=null
endfunction
function hi takes nothing returns nothing
set MR=CreateTrigger()
call TriggerRegisterUnitEvent(MR,Dn,EVENT_UNIT_SELL_ITEM)
call TriggerRegisterUnitEvent(MR,Dk,EVENT_UNIT_SELL_ITEM)
call TriggerAddAction(MR,function hh)
endfunction
function hj takes nothing returns nothing
endfunction
function hk takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(J5)
if Gk[GetConvertedPlayerId(GetTriggerPlayer())]>1000. then
set Gk[GetConvertedPlayerId(GetTriggerPlayer())]=Gk[GetConvertedPlayerId(GetTriggerPlayer())]-100.
call SetCameraFieldForPlayer(GetTriggerPlayer(),CAMERA_FIELD_TARGET_DISTANCE,Gk[GetConvertedPlayerId(GetTriggerPlayer())],0)
else
endif
call TriggerSleepAction(.5)
call EnableTrigger(J5)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function hl takes nothing returns nothing
set J4=CreateTrigger()
call TriggerAddAction(J4,function hk)
endfunction
function hm takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(J4)
if Gk[GetConvertedPlayerId(GetTriggerPlayer())]<6000. then
set Gk[GetConvertedPlayerId(GetTriggerPlayer())]=Gk[GetConvertedPlayerId(GetTriggerPlayer())]+100.
call SetCameraFieldForPlayer(GetTriggerPlayer(),CAMERA_FIELD_TARGET_DISTANCE,Gk[GetConvertedPlayerId(GetTriggerPlayer())],0)
else
endif
call TriggerSleepAction(.5)
call EnableTrigger(J4)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function hn takes nothing returns nothing
set J5=CreateTrigger()
call TriggerAddAction(J5,function hm)
endfunction
function ho takes nothing returns boolean
return GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP)<2 and GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_PASSIVE) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function hp takes nothing returns nothing
if GetTriggerUnit()==Ib[GetConvertedPlayerId(GetTriggerPlayer())+10] then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
set Gd[GetConvertedPlayerId(GetTriggerPlayer())]=true
call AdjustPlayerStateBJ(2000,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)
call SetUnitOwner(GetTriggerUnit(),GetTriggerPlayer(),true)
call SetUnitInvulnerable(GetTriggerUnit(),false)
call SetUnitPositionLoc(GetTriggerUnit(),GetRectCenter(W))
call IncUnitAbilityLevelSwapped($41436576,C5)
set MT[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerPlayer()
else
set Ib[GetConvertedPlayerId(GetTriggerPlayer())]=null
endif
if GetTriggerUnit()==DH then
if Gn[GetConvertedPlayerId(GetTriggerPlayer())]==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为商城限定英雄需要购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dm then
if Go[GetConvertedPlayerId(GetTriggerPlayer())]==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为商城限定英雄需要购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==C6 then
if HS[GetConvertedPlayerId(GetTriggerPlayer())]==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为商城限定英雄需要购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dp then
if Ho[GetConvertedPlayerId(GetTriggerPlayer())]==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为商城限定英雄需要购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DP then
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=8 or Hg[GetConvertedPlayerId(GetTriggerPlayer())]==GetObjectName($65303130) or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000地图等级大于等于8级方可选择。")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DJ then
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=5 or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000地图等级大于等于5级方可选择。")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Do then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=12 then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000地图等级大于等于12级方可选择。")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Du then
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=10 or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000地图等级大于等于10级方可选择。")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dq then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"GSLB")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“炽灼焰丶洳瑾”设计定制，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dr then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"WEIY")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”设计定制，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dt then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"DSWY")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or Hg[GetConvertedPlayerId(GetTriggerPlayer())]==GetObjectName($65303130) then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”设计定制，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Cn then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"CQZY")==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or Hg[GetConvertedPlayerId(GetTriggerPlayer())]==GetObjectName($65303130) then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为五虎玩家“炽灼焰丶洳瑾”设计定制，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dx then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"CQZY")==true or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"GLLQ")==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or Hg[GetConvertedPlayerId(GetTriggerPlayer())]==GetObjectName($65303130) then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为五虎玩家“炽灼焰丶洳瑾”设计定制，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DB or GetUnitTypeId(GetTriggerUnit())==$484A5230 then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"ZGGG")==true or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"ZGGM")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”设计定制，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Ds then
if ModuloInteger(HJ[GetConvertedPlayerId(GetTriggerPlayer())],16)>=8 or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=15 or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”定制，并免费为玩家提供|r")
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”定制，需要地图等级15级才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DC then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"HELS")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为商城英雄，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DV then
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"HGYC")==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为商城英雄，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DO then
if ModuloInteger(HJ[GetConvertedPlayerId(GetTriggerPlayer())],32)>=16 or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=10 or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为等级积分英雄，需要地图等级满10级后用500积分兑换后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dv then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000需要地图等级达到20级，或连续游戏3天，或购买“新手特权”才有几率在随机时获取到|r")
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"HZZL")==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
else
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dy then
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=30 or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true or RequestExtraIntegerData(54,GetTriggerPlayer(),null,null,false,2,0,0)>=3 or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”定制，并免费提供给玩家使用，需要地图等级达到30级，或连续游戏3天，或拥有“新手特权”|r")
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”定制，并免费提供给玩家使用，需要地图等级达到30级，或连续游戏3天，或拥有“新手特权”|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DZ then
if RequestExtraIntegerData(54,GetTriggerPlayer(),null,null,false,2,0,0)>=15 or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=50 or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true or DzAPI_Map_GetServerValue(GetTriggerPlayer(),"preset_map_award")=="1" then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”定制，并免费提供给玩家使用，需要地图等级达到50级！|r")
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetUnitName(GetTriggerUnit())+"|cffff0000为五虎玩家“咕嘎大佬”定制，并免费提供给玩家使用，需要地图等级达到50级！|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==DX then
if RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"WHBM")==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为商城英雄，需要商城购买后才能使用|r")
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为商城英雄，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
if GetTriggerUnit()==Dj then
if Hg[GetConvertedPlayerId(GetTriggerPlayer())]==GetObjectName($65303130) or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"WQDS")==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为商城英雄，需要商城购买后才能使用|r")
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,GetHeroProperName(GetTriggerUnit())+"|cffff0000为商城英雄，需要商城购买后才能使用|r")
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=null
endif
else
set Ib[GetConvertedPlayerId(GetTriggerPlayer())+10]=GetTriggerUnit()
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
call ay(120.)
call DestroyTrigger(MS)
call DestroyTrigger(J6)
endfunction
function hq takes nothing returns nothing
set MS=CreateTrigger()
call DisableTrigger(MS)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(0),true)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(1),true)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(2),true)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(3),true)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(4),true)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(5),true)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(6),true)
call TriggerRegisterPlayerSelectionEventBJ(MS,Player(7),true)
call TriggerAddCondition(MS,Condition(function ho))
call TriggerAddAction(MS,function hp)
endfunction
function hr takes nothing returns boolean
return GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP)<2
endfunction
function hs takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetFilterUnit()!=DH
endfunction
function ht takes nothing returns nothing
set HE=GetConvertedPlayerId(GetTriggerPlayer())
set Gd[GetConvertedPlayerId(GetTriggerPlayer())]=true
set Jd[15]=GetRectCenter(W)
set Fu=ao(X,Condition(function hs))
set MU=GroupPickRandomUnit(Fu)
call GroupClear(Fu)
call DestroyGroup(Fu)
if Gq<7 and Go[GetConvertedPlayerId(GetTriggerPlayer())]==true and GetOwningPlayer(Dm)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dm
else
if Gq<7 and HS[GetConvertedPlayerId(GetTriggerPlayer())]==true and GetOwningPlayer(C6)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=C6
else
if Gq<7 and Ho[GetConvertedPlayerId(GetTriggerPlayer())]==true and GetOwningPlayer(Dp)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dp
else
if Gq<7 and GetOwningPlayer(DV)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 and DzAPI_Map_HasMallItem(GetTriggerPlayer(),"HGYC")==true or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true then
set MU=DV
else
if false and Gq<7 and DzAPI_Map_HasMallItem(GetTriggerPlayer(),"GSLB")==true and GetOwningPlayer(Dq)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dq
else
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=10 and GetOwningPlayer(DP)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DP
else
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=5 and GetOwningPlayer(DJ)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DJ
else
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=15 and GetOwningPlayer(Do)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Do
else
if DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=20 and GetOwningPlayer(Du)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Du
else
if HG[GetConvertedPlayerId(GetTriggerPlayer())]==true or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=25 or RequestExtraIntegerData(54,GetTriggerPlayer(),null,null,false,2,0,0)>=3 or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"HZZL")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true and GetOwningPlayer(Dv)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dv
else
if ModuloInteger(HJ[GetConvertedPlayerId(GetTriggerPlayer())],32)>=16 or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=10 and GetOwningPlayer(DO)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DO
else
if HG[GetConvertedPlayerId(GetTriggerPlayer())]==true or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=30 or RequestExtraIntegerData(54,GetTriggerPlayer(),null,null,false,2,0,0)>=3 or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true and GetOwningPlayer(Dy)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dy
else
if HG[HE]==true or DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=50 or RequestExtraIntegerData(54,GetTriggerPlayer(),null,null,false,2,0,0)>=15 or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true and GetOwningPlayer(DZ)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DZ
else
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"WQDS")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true and GetOwningPlayer(Dj)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dj
else
if ModuloInteger(HJ[GetConvertedPlayerId(GetTriggerPlayer())],16)>=8 or DzAPI_Map_GetMapLevel(GetTriggerPlayer())>=20 and GetOwningPlayer(Ds)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Ds
else
if DzAPI_Map_HasMallItem(GetTriggerPlayer(),"HELS")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true and GetOwningPlayer(DC)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DC
else
if RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true and GetOwningPlayer(DB)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DB
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
call SetUnitPositionLoc(MU,Jd[15])
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),Jd[15],0)
set Ib[GetConvertedPlayerId(GetTriggerPlayer())]=MU
call SetUnitOwner(MU,GetTriggerPlayer(),true)
call SetUnitInvulnerable(MU,false)
call SelectUnitForPlayerSingle(MU,GetTriggerPlayer())
set Hu[GetConvertedPlayerId(GetTriggerPlayer())]=true
call IncUnitAbilityLevelSwapped($41436576,C5)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|Cffff0000如果随机到自己不如意的英雄,请不要灰心,每个英雄都是精心设计也是较平衡的,请用心去使用,发挥该英雄的特长,要是能灵活使用每个英雄,你就是成为一个高手了,如果发现BUG欢迎QQ群里提出")
call RemoveLocation(Jd[15])
set MU=null
call AdjustPlayerStateBJ(2000,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)
set MT[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerPlayer()
if choosedButton==doubleHeroButton and doubleHeroGroup[GetPlayerId(GetTriggerPlayer())]!=1 then
set doubleHeroGroup[GetPlayerId(GetTriggerPlayer())] =1
call SetPlayerStateBJ(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP,1)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|Cffff0000已开启双将模式，请再选择一个副将！")
endif
endfunction
function hu takes nothing returns nothing
set J6=CreateTrigger()
call DisableTrigger(J6)
call TriggerRegisterPlayerChatEvent(J6,Player(0),"-suiji",true)
call TriggerRegisterPlayerChatEvent(J6,Player(1),"-suiji",true)
call TriggerRegisterPlayerChatEvent(J6,Player(2),"-suiji",true)
call TriggerRegisterPlayerChatEvent(J6,Player(3),"-suiji",true)
call TriggerRegisterPlayerChatEvent(J6,Player(4),"-suiji",true)
call TriggerRegisterPlayerChatEvent(J6,Player(5),"-suiji",true)
call TriggerRegisterPlayerChatEvent(J6,Player(6),"-suiji",true)
call TriggerRegisterPlayerChatEvent(J6,Player(7),"-suiji",true)
call TriggerAddCondition(J6,Condition(function hr))
call TriggerAddAction(J6,function ht)
endfunction
function hv takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetFilterUnit()!=DH
endfunction
function hw takes nothing returns nothing
set HE=HE+1
if GetPlayerSlotState(ConvertedPlayer(HE))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(ConvertedPlayer(HE))==MAP_CONTROL_USER then
set Gd[HE]=true
set Fu=ao(X,Condition(function hv))
set MU=GroupPickRandomUnit(Fu)
call GroupClear(Fu)
call DestroyGroup(Fu)
if Gq<7 and Go[HE]==true and GetOwningPlayer(Dm)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dm
else
if Gq<7 and HS[HE]==true and GetOwningPlayer(C6)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=C6
else
if Gq<7 and Ho[HE]==true and GetOwningPlayer(Dp)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dp
else
if Gq<7 and GetOwningPlayer(DV)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 and DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"HGYC")==true or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true then
set MU=DV
else
if Gq<7 and DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"GSLB")==true and GetOwningPlayer(Dq)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dq
else
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"WHBM")==true or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true and GetOwningPlayer(Da)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Da
else
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"WHBM")==true or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(ConvertedPlayer(HE))==true and GetOwningPlayer(DX)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DX
else
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"WQDS")==true or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true and GetOwningPlayer(Dj)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dj
else
if DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=10 and GetOwningPlayer(DP)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DP
else
if DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=5 and GetOwningPlayer(DJ)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DJ
else
if DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=15 and GetOwningPlayer(Do)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Do
else
if DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=20 and GetOwningPlayer(Du)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Du
else
if HG[HE]==true or DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=25 or RequestExtraIntegerData(54,ConvertedPlayer(HE),null,null,false,2,0,0)>=3 or DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"HZZL")==true or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true and GetOwningPlayer(Dv)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dv
else
if ModuloInteger(HJ[HE],32)>=16 or DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=10 and GetOwningPlayer(DO)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DO
else
if HG[HE]==true or DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=30 or RequestExtraIntegerData(54,ConvertedPlayer(HE),null,null,false,2,0,0)>=3 or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true and GetOwningPlayer(Dy)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Dy
else
if HG[HE]==true or DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=50 or RequestExtraIntegerData(54,ConvertedPlayer(HE),null,null,false,2,0,0)>=15 or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true and GetOwningPlayer(DZ)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DZ
else
if ModuloInteger(HJ[HE],16)>=8 or DzAPI_Map_GetMapLevel(ConvertedPlayer(HE))>=20 and GetOwningPlayer(Ds)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=Ds
else
if DzAPI_Map_HasMallItem(ConvertedPlayer(HE),"HELS")==true or RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true and GetOwningPlayer(DC)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DC
else
if RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==true and GetOwningPlayer(DB)==Player(PLAYER_NEUTRAL_PASSIVE) and GetRandomInt(1,49)==7 then
set MU=DB
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
call SetCameraBoundsToRectForPlayerBJ(ConvertedPlayer(HE),Bj)
call SetUnitPositionLoc(MU,Jd[15])
set Ib[HE]=MU
call SetUnitOwner(MU,ConvertedPlayer(HE),true)
call SetUnitInvulnerable(MU,false)
call SelectUnitForPlayerSingle(MU,ConvertedPlayer(HE))
set Hu[HE]=true
call IncUnitAbilityLevelSwapped($41436576,C5)
call DisplayTextToPlayer(ConvertedPlayer(HE),0,0,"|Cffff0000如果随机到自己不如意的英雄,请不要灰心,每个英雄都是精心设计也是较平衡的,请用心去使用,发挥该英雄的特长,要是能灵活使用每个英雄,你就是成为一个高手了,如果发现BUG欢迎QQ群里提出")
set MU=null
call AdjustPlayerStateBJ(2000,ConvertedPlayer(HE),PLAYER_STATE_RESOURCE_GOLD)
set MT[HE]=ConvertedPlayer(HE)
else
endif
if HE==8 then
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call RemoveLocation(Jd[15])
else
endif
endfunction
function hx takes nothing returns nothing
local timer MG
set HE=0
set Jd[15]=GetRectCenter(W)
set MG=CreateTimer()
call TimerStart(MG,.1,true,function hw)
set MG=null
endfunction
function hy takes nothing returns nothing
set MV=CreateTrigger()
call TriggerAddAction(MV,function hx)
endfunction
function hz takes nothing returns boolean
return Gd[GetConvertedPlayerId(GetTriggerPlayer())]==true and IK[GetConvertedPlayerId(GetTriggerPlayer())]==false and RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"VIP1")==true
endfunction
function h0 takes nothing returns boolean
return IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetFilterUnit()!=DH
endfunction
function h1 takes nothing returns nothing
set IK[GetConvertedPlayerId(GetTriggerPlayer())]=true
call UnitRemoveAbility(Ib[GetConvertedPlayerId(GetTriggerPlayer())],$41304643)
call SetUnitInvulnerable(Ib[GetConvertedPlayerId(GetTriggerPlayer())],true)
call SetUnitOwner(Ib[GetConvertedPlayerId(GetTriggerPlayer())],Player(PLAYER_NEUTRAL_PASSIVE),true)
call SetUnitPosition(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetRandomReal(-3600.,-2200.),GetRandomReal(-7916.,-6500.))
call DisableTrigger(GetTriggeringTrigger())
if GetUnitTypeId(Ib[GetConvertedPlayerId(GetTriggerPlayer())])==$48594A30 then
call RemoveUnit(LE)
else
endif
set MW[GetConvertedPlayerId(GetTriggerPlayer())]=GetTriggerPlayer()
set IJ=CreateGroup()
set IJ=ao(X,Condition(function h0))
set MX[0]=GroupPickRandomUnit(IJ)
call GroupClear(IJ)
call DestroyGroup(IJ)
set Ib[GetConvertedPlayerId(GetTriggerPlayer())]=MX[0]
call SetUnitOwner(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetTriggerPlayer(),true)
call SetUnitInvulnerable(Ib[GetConvertedPlayerId(GetTriggerPlayer())],false)
call SetUnitPosition(Ib[GetConvertedPlayerId(GetTriggerPlayer())],-1168.,-5300.)
call SetPlayerStateBJ(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP,6)
call SelectUnitForPlayerSingle(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetTriggerPlayer())
set MX[0]=null
call EnableTrigger(GetTriggeringTrigger())
endfunction
function h2 takes nothing returns nothing
set Js=CreateTrigger()
call TriggerAddCondition(Js,Condition(function hz))
call TriggerAddAction(Js,function h1)
endfunction
function h3 takes nothing returns boolean
return Gd[GetConvertedPlayerId(GetTriggerPlayer())]!=false
endfunction
function h4 takes nothing returns nothing
if S2I(SubString(GetEventPlayerChatString(),5,6))>0 and S2I(SubString(GetEventPlayerChatString(),5,6))<9 then
call DisableTrigger(GetTriggeringTrigger())
set Gc=1
loop
exitwhen Gc>8
if SubString(GetEventPlayerChatString(),5,6)==I2S(Gc) then
set Gd[GetConvertedPlayerId(GetTriggerPlayer())]=false
set MZ=GetTriggerPlayer()
set Ma=Ib[GetConvertedPlayerId(GetTriggerPlayer())]
set Ge=GetConvertedPlayerId(GetTriggerPlayer())
set Mb=MT[Gc]
call DialogSetMessage(Gb,GetPlayerName(GetTriggerPlayer())+"请求与你交换英雄")
call DialogDisplay(Mb,Gb,true)
call CreateTimerDialogBJ(Gf,"交换英雄")
set Mc=bj_lastCreatedTimerDialog
call TimerDialogDisplay(Mc,true)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+("希望跟"+(GetPlayerName(Mb)+"交换英雄")))
else
endif
set Gc=Gc+1
endloop
call StartTimerBJ(Gf,false,15.)
else
endif
endfunction
function h5 takes nothing returns nothing
set MY=CreateTrigger()
call TriggerRegisterPlayerChatEvent(MY,Player(0),"-jhyx",false)
call TriggerRegisterPlayerChatEvent(MY,Player(1),"-jhyx",false)
call TriggerRegisterPlayerChatEvent(MY,Player(2),"-jhyx",false)
call TriggerRegisterPlayerChatEvent(MY,Player(3),"-jhyx",false)
call TriggerRegisterPlayerChatEvent(MY,Player(4),"-jhyx",false)
call TriggerRegisterPlayerChatEvent(MY,Player(5),"-jhyx",false)
call TriggerRegisterPlayerChatEvent(MY,Player(6),"-jhyx",false)
call TriggerRegisterPlayerChatEvent(MY,Player(7),"-jhyx",false)
call TriggerAddCondition(MY,Condition(function h3))
call TriggerAddAction(MY,function h4)
endfunction
function h6 takes nothing returns nothing
if GetClickedButtonBJ()==Me then
call DialogDisplay(Mb,Gb,false)
call SetUnitOwner(Ib[GetConvertedPlayerId(Mb)],MZ,true)
set Ib[Ge]=Ib[GetConvertedPlayerId(Mb)]
call SetUnitUserData(Ib[Ge],Ge)
call SetPlayerName(MZ,Hg[GetConvertedPlayerId(MZ)]+GetHeroProperName(Ib[Ge]))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,Ge,0),GF[Ge]+GetPlayerName(MZ))
call SetUnitOwner(Ma,Mb,true)
set Ib[GetConvertedPlayerId(Mb)]=Ma
call SetUnitUserData(Ib[GetConvertedPlayerId(Mb)],GetConvertedPlayerId(Mb))
call SetPlayerName(Mb,Hg[GetConvertedPlayerId(Mb)]+GetHeroProperName(Ib[GetConvertedPlayerId(Mb)]))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(Mb),0),GF[GetConvertedPlayerId(Mb)]+GetPlayerName(Mb))
call DisplayTextToForce(GetPlayersAll(),"英雄交换成功")
else
if GetClickedButtonBJ()==Mf then
set Gd[Ge]=false
call DisplayTextToPlayer(MZ,0,0,"对方拒绝交换英雄,你也失去再次交换的主动权")
call DialogDisplay(Mb,Gb,false)
else
endif
endif
endfunction
function h7 takes nothing returns nothing
set Md=CreateTrigger()
call TriggerRegisterDialogEvent(Md,Gb)
call TriggerAddAction(Md,function h6)
endfunction
function h8 takes nothing returns nothing
call DialogDisplay(Mb,Gb,false)
call DestroyTimerDialog(Mc)
call EnableTrigger(MY)
endfunction
function h9 takes nothing returns nothing
set Mg=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Mg,Gf)
call TriggerAddAction(Mg,function h8)
endfunction
function iB takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function iC takes nothing returns nothing
local group KB
local unit KC
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=8
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if DzAPI_Map_HasMallItem(ConvertedPlayer(GetForLoopIndexB()),"VIP1")==true or RequestExtraBooleanData(50,ConvertedPlayer(GetForLoopIndexB()),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(ConvertedPlayer(bj_forLoopBIndex))==true then
call SetPlayerHandicapXPBJ(GetOwningPlayer(Ib[bj_forLoopBIndex]),50.+10.*I2R(GetUnitAbilityLevel(C5,$41436576)))
call DisplayTextToPlayer(GetOwningPlayer(Ib[bj_forLoopBIndex]),0,0,"|cff00ff00VIP玩家 当前经验获得率为"+(I2S(50+10*GetUnitAbilityLevel(C5,$41436576))+"%"))
else
call SetPlayerHandicapXPBJ(GetOwningPlayer(Ib[bj_forLoopBIndex]),20.+6.*I2R(GetUnitAbilityLevel(C5,$41436576)))
call DisplayTextToPlayer(GetOwningPlayer(Ib[bj_forLoopBIndex]),0,0,"当前经验获得率为"+(I2S(25+8*GetUnitAbilityLevel(C5,$41436576))+"%"))
endif
if GetPlayerSlotState(ConvertedPlayer(bj_forLoopBIndex))==PLAYER_SLOT_STATE_PLAYING then
if Ib[bj_forLoopBIndex]==null then
call CustomDefeatBJ(ConvertedPlayer(bj_forLoopBIndex),"失败!")
else
endif
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
set bj_wantDestroyGroup=true
call ForGroupBJ(ap(Bg,Player(PLAYER_NEUTRAL_PASSIVE)),function iB)
call DestroyTrigger(GetTriggeringTrigger())
set KB=null
set KC=null
endfunction
function iD takes nothing returns nothing
set Mh=CreateTrigger()
call TriggerRegisterUnitEvent(Mh,C5,EVENT_UNIT_HERO_LEVEL)
call TriggerAddAction(Mh,function iC)
endfunction
function iE takes nothing returns nothing
if GetEventPlayerChatString()=="yx1" and DzAPI_Map_HasMallItem(GetTriggerPlayer(),"WHBM")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
if GetUnitTypeId(Ib[GetConvertedPlayerId(GetTriggerPlayer())])!=$4E303050 and GetOwningPlayer(DX)==Player(PLAYER_NEUTRAL_PASSIVE) then
set IK[GetConvertedPlayerId(GetTriggerPlayer())]=true
call RemoveUnit(Ib[GetConvertedPlayerId(GetTriggerPlayer())])
set Ib[GetConvertedPlayerId(GetTriggerPlayer())]=DX
call SetUnitPosition(DX,-1170.,-5300.)
call SetUnitOwner(DX,GetTriggerPlayer(),true)
call SetUnitInvulnerable(DX,false)
call SelectUnitForPlayerSingle(DX,GetTriggerPlayer())
else
endif
else
if GetEventPlayerChatString()=="yx2" and DzAPI_Map_HasMallItem(GetTriggerPlayer(),"ZGGG")==true or RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
if GetUnitTypeId(Ib[GetConvertedPlayerId(GetTriggerPlayer())])!=$484A5230 then
set IK[GetConvertedPlayerId(GetTriggerPlayer())]=true
call RemoveUnit(Ib[GetConvertedPlayerId(GetTriggerPlayer())])
set Ib[GetConvertedPlayerId(GetTriggerPlayer())]=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$484A5230,-3000.,-7000.,0)
call SetUnitPosition(Ib[GetConvertedPlayerId(GetTriggerPlayer())],-1170.,-5300.)
call SetUnitOwner(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetTriggerPlayer(),true)
call SetUnitInvulnerable(Ib[GetConvertedPlayerId(GetTriggerPlayer())],false)
call SelectUnitForPlayerSingle(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetTriggerPlayer())
else
endif
else
if GetEventPlayerChatString()=="yx3" and Hg[GetConvertedPlayerId(GetTriggerPlayer())]==GetObjectName($65303130) or DzAPI_Map_HasMallItem(GetTriggerPlayer(),"WHBM")==true or DzAPI_Map_IsBlueVIP(GetTriggerPlayer())==true then
if GetUnitTypeId(Ib[GetConvertedPlayerId(GetTriggerPlayer())])!=$48415330 then
set IK[GetConvertedPlayerId(GetTriggerPlayer())]=true
call ShowUnit(Da,true)
call RemoveUnit(Ib[GetConvertedPlayerId(GetTriggerPlayer())])
set Ib[GetConvertedPlayerId(GetTriggerPlayer())]=Da
call SetUnitPosition(Ib[GetConvertedPlayerId(GetTriggerPlayer())],-1170.,-5300.)
call SetUnitOwner(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetTriggerPlayer(),true)
call SetUnitInvulnerable(Ib[GetConvertedPlayerId(GetTriggerPlayer())],false)
call SelectUnitForPlayerSingle(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetTriggerPlayer())
call UnitAddItemByIdSwapped($7462616B,Da)
if GetRandomInt(1,3)==2 then
call UnitAddItem(Da,CreateItem(LJ[GetRandomInt(182,184)],GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
call UnitAddItem(Da,CreateItem(LJ[GetRandomInt(180,181)],GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
endif
else
endif
else
endif
endif
endif
endfunction
function iF takes nothing returns nothing
set Jt=CreateTrigger()
call TriggerAddAction(Jt,function iE)
endfunction
function iG takes nothing returns nothing
call StartTimerBJ(H4,true,120.)
set H5[0]=27
set H5[1]=H5[0]
set H6[1]="a"
set H6[2]="b"
set H6[3]="c"
set H6[4]="d"
set H6[10]="|cffFF0000“千里草，何青青！十日卜，不得生！”指何人?"
set H6[11]="董卓"
set H6[12]="王允"
set H6[13]="曹操"
set H6[14]="吕布"
set H6[15]="|cffFF0000本图的作者是谁?"
set H6[16]="大男人"
set H6[17]="小女子"
set H6[18]="爷们"
set H6[19]="不知道"
set H6[20]="|cffFF0000诸葛亮运用了哪一计谋，使得东吴“赔了夫人又折兵”"
set H6[21]="打草惊蛇"
set H6[22]="顺手牵羊"
set H6[23]="瞒天过海"
set H6[24]="声东击西"
set H6[25]="|cffFF0000三国演义谁写的?"
set H6[26]="罗贯中"
set H6[27]="陈寿"
set H6[28]="裴松之"
set H6[29]="刘禅"
set H6[30]="|cffFF0000三国最后被哪个朝代统一?"
set H6[31]="晋"
set H6[32]="魏"
set H6[33]="蜀"
set H6[34]="吴"
set H6[35]="|cffFF0000三国里最先称帝的是哪个国家?"
set H6[36]="魏"
set H6[37]="蜀"
set H6[38]="吴"
set H6[39]="晋"
set H6[40]="|cffFF0000赤壁之战,失败方是哪一方"
set H6[41]="魏"
set H6[42]="蜀"
set H6[43]="吴"
set H6[44]="晋"
set H6[45]="|cffFF0000诸葛亮死于第几次北伐?"
set H6[46]="5"
set H6[47]="7"
set H6[48]="6"
set H6[49]="4"
set H6[50]="|cffFF0000刘备请诸葛亮出山用了几次?"
set H6[51]="3"
set H6[52]="4"
set H6[53]="5"
set H6[54]="2"
set H6[55]="|cffFF0000木牛流马是谁发明的?"
set H6[56]="黄月英"
set H6[57]="诸葛亮"
set H6[58]="司马懿"
set H6[59]="陆逊"
set H6[60]="|cffFF0000赤壁赋是谁作的?"
set H6[61]="苏轼"
set H6[62]="曹操"
set H6[63]="诸葛亮"
set H6[64]="杜甫"
set H6[65]="|cffFF0000当前版本总共有几波?"
set H6[66]="25"
set H6[67]="24"
set H6[68]="22"
set H6[69]="23"
set H6[70]="|cffFF0000关羽温酒斩华雄出自那一战?"
set H6[71]="虎牢关之战"
set H6[72]="淝水之战"
set H6[73]="官渡之战"
set H6[74]="赤壁之战"
set H6[75]="|cffFF0000关羽“单刀赴会”，赴的是谁的宴？"
set H6[76]="鲁子敬"
set H6[77]="陆伯言"
set H6[78]="黄公覆"
set H6[79]="吕子明"
set H6[80]="|cffFF0000关羽走麦城被谁所擒？"
set H6[81]="马忠"
set H6[82]="朱然"
set H6[83]="潘璋"
set H6[84]="马岱"
set H6[85]="|cffFF0000三国时期的夷洲是指如今的哪里？"
set H6[86]="台湾"
set H6[87]="日本"
set H6[88]="海南岛"
set H6[89]="朝鲜半岛"
set H6[90]="|cffFF0000马谡是为什么被诸葛亮斩首的？"
set H6[91]="失守街亭"
set H6[92]="轻敌所败"
set H6[93]="过于自负"
set H6[94]="鞭挞士卒"
set H6[95]="|cffFF0000“横槊赋诗”的典故说的是谁？"
set H6[96]="曹操"
set H6[97]="周瑜"
set H6[98]="诸葛亮"
set H6[99]="曹植"
set H6[100]="|cffFF0000曹魏的五子良将不包括下面的那一位？"
set H6[101]="夏侯渊"
set H6[102]="于禁"
set H6[103]="乐进"
set H6[104]="张辽"
set H6[105]="|cffFF0000长坡一战中，被魏将程昱称为“万人敌”的是谁？"
set H6[106]="张飞"
set H6[107]="关羽"
set H6[108]="赵云"
set H6[109]="吕布"
set H6[110]="|cffFF0000下列说法不正确的是？"
set H6[111]="曹操是三国时期著名的政治家、军事家"
set H6[112]="赤壁之战中,孙刘联军打败曹操"
set H6[113]="曹操之子曹丕废汉献帝，建立魏国"
set H6[114]="曹丕所建魏国被西晋所灭"
set H6[115]="|cffFF0000被称为大贤良师的是？"
set H6[116]="张角"
set H6[117]="张宝"
set H6[118]="张飞"
set H6[119]="张辽"
set H6[120]="|cffFF0000三国时期正史中有记载活的最长的人是？"
set H6[121]="廖化"
set H6[122]="吕岱"
set H6[123]="赵云"
set H6[124]="刘禅"
set H6[125]="|cffFF0000以下哪位不是河北四庭柱？"
set H6[126]="高览"
set H6[127]="张颌"
set H6[128]="颜良"
set H6[129]="文丑"
set H6[130]="|cffFF0000曹操军事集团形成的政治优势是？"
set H6[131]="挟天子以令诸侯"
set H6[132]="豪强地主势力"
set H6[133]="镇压黄巾起义"
set H6[134]="实行屯田制"
set H6[135]="|cffFF0000QQ群是?"
set H6[136]="93060345"
set H6[137]="5476802"
set H6[138]="不知道"
set H6[139]="www.10000tc.com"
set H6[140]="|cffFF0000918刘备在白帝城（），他命人将（）等人接来白帝城，对他殷殷嘱咐，将（）和大汉基业都交给了他?"
set H6[141]="中箭垂危，诸葛亮，刘禅"
set H6[142]="身染重病，刘禅，北伐"
set H6[143]="身染重病，诸葛亮，刘禅"
set H6[144]="中箭垂危，刘禅，北伐"
endfunction
function iH takes nothing returns nothing
set Mi=CreateTrigger()
call TriggerAddAction(Mi,function iG)
endfunction
function iI takes nothing returns nothing
set H5[2]=GetRandomInt(1,H5[1])
set H7=200
set Mk[0]=0
loop
exitwhen Mk[0]>4
set H6[Mk[0]+5]=H6[(H5[2]+1)*5+Mk[0]]
set Mk[0]=Mk[0]+1
endloop
set H6[(H5[1]+2)*5]=H6[6]
set H5[3]=4
set Mk[0]=1
loop
exitwhen Mk[0]>4
set H5[4]=GetRandomInt(1,H5[3])
set Mk[0]=Mk[0]+1
endloop
set Mk[0]=1
loop
exitwhen Mk[0]>4
set H5[Mk[0]+4]=5+Mk[0]
set H6[0]=H6[H5[H5[4]+4]]
set H6[H5[H5[4]+4]]=H6[H5[H5[3]+4]]
set H6[H5[H5[3]+4]]=H6[0]
set H5[3]=H5[3]-1
set Mk[0]=Mk[0]+1
endloop
set Mk[0]=1
loop
exitwhen Mk[0]>8
set H8[Mk[0]]=true
call DisplayTextToPlayer(ConvertedPlayer(Mk[0]),0,0,I2S(H5[0]-(H5[1]-1))+"."+H6[5])
call DisplayTextToPlayer(ConvertedPlayer(Mk[0]),0,0,"|cff00ff00a."+H6[6]+(" |cff00ff00b."+H6[7]+(" |cff00ff00c."+H6[8]+(" |cff00ff00d."+H6[9]))))
set Mk[0]=Mk[0]+1
endloop
set Mk[0]=0
loop
exitwhen Mk[0]>4
set H6[(H5[1]+3)*5+Mk[0]]=H6[(H5[2]+1)*5+Mk[0]]
set H6[(H5[2]+1)*5+Mk[0]]=H6[(H5[1]+1)*5+Mk[0]]
set H6[(H5[1]+1)*5+Mk[0]]=H6[(H5[1]+3)*5+Mk[0]]
set Mk[0]=Mk[0]+1
endloop
set H5[1]=H5[1]-1
if H5[1]==0 then
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"答题活动到此结束")
call PauseTimer(H4)
call DisableTrigger(GetTriggeringTrigger())
else
endif
if IsTriggerEnabled(Ml)==false then
call EnableTrigger(Ml)
else
call DoNothing()
endif
endfunction
function iJ takes nothing returns nothing
set Mj=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Mj,H4)
call TriggerAddAction(Mj,function iI)
endfunction
function iK takes nothing returns nothing
set H6[(H5[1]+3)*5+1]=StringCase(SubStringBJ(GetEventPlayerChatString(),2,3),false)
set Mk[GetConvertedPlayerId(GetTriggerPlayer())]=1
loop
exitwhen Mk[GetConvertedPlayerId(GetTriggerPlayer())]>4
if H6[Mk[GetConvertedPlayerId(GetTriggerPlayer())]]==H6[(H5[1]+3)*5+1] then
set H6[(H5[1]+3)*5+2]=H6[5+Mk[GetConvertedPlayerId(GetTriggerPlayer())]]
else
endif
set Mk[GetConvertedPlayerId(GetTriggerPlayer())]=Mk[GetConvertedPlayerId(GetTriggerPlayer())]+1
endloop
set Mk[GetConvertedPlayerId(GetTriggerPlayer())]=1
loop
exitwhen Mk[GetConvertedPlayerId(GetTriggerPlayer())]>4
if "-"+H6[Mk[GetConvertedPlayerId(GetTriggerPlayer())]]==StringCase(GetEventPlayerChatString(),false) then
if IsUnitAliveBJ(Ib[GetConvertedPlayerId(GetTriggerPlayer())])==true then
if H7>0 then
if H8[GetConvertedPlayerId(GetTriggerPlayer())]==true then
if H6[(H5[1]+3)*5+2]==H6[(H5[1]+3)*5+0] then
set H8[GetConvertedPlayerId(GetTriggerPlayer())]=false
call AddHeroXP(Ib[GetConvertedPlayerId(GetTriggerPlayer())],GetUnitLevel(Ib[GetConvertedPlayerId(GetTriggerPlayer())])*H7,false)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"答对了,请继续努力,此次答题获得经验:"+I2S(GetUnitLevel(Ib[GetConvertedPlayerId(GetTriggerPlayer())])*H7))
set H7=H7-80
else
if GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)>=GetUnitLevel(Ib[GetConvertedPlayerId(GetTriggerPlayer())])*200 then
call AdjustPlayerStateBJ(GetUnitLevel(Ib[GetConvertedPlayerId(GetTriggerPlayer())])*-200,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"你的历史知识太差了,多读点书吧.答错题交纳学费:"+I2S(GetUnitLevel(Ib[GetConvertedPlayerId(GetTriggerPlayer())])*200))
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"你的历史知识太差了,多读点书吧.答错题要交纳学费,而你居然连学费也付不起,那么你就拿属性来抵债吧.捉除你全属性2点
")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SUB,2)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SUB,2)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SUB,2)
endif
endif
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cff00ff00你已经答过一次请忽重复做答")
endif
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cffffcc00你手脚太慢了,经验都让人抢光了")
endif
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"死人不能说话")
endif
else
endif
set Mk[GetConvertedPlayerId(GetTriggerPlayer())]=Mk[GetConvertedPlayerId(GetTriggerPlayer())]+1
endloop
endfunction
function iL takes nothing returns nothing
set Ml=CreateTrigger()
call DisableTrigger(Ml)
call TriggerRegisterPlayerChatEvent(Ml,Player(0),"-",false)
call TriggerRegisterPlayerChatEvent(Ml,Player(1),"-",false)
call TriggerRegisterPlayerChatEvent(Ml,Player(2),"-",false)
call TriggerRegisterPlayerChatEvent(Ml,Player(3),"-",false)
call TriggerRegisterPlayerChatEvent(Ml,Player(4),"-",false)
call TriggerRegisterPlayerChatEvent(Ml,Player(5),"-",false)
call TriggerRegisterPlayerChatEvent(Ml,Player(6),"-",false)
call TriggerRegisterPlayerChatEvent(Ml,Player(7),"-",false)
call TriggerAddAction(Ml,function iK)
endfunction
function iM takes nothing returns nothing
local integer Jk
set Hb[0]=S2I(SubString(GetEventPlayerChatString(),3,4))
if Hb[0]<9 and Hb[0]>1 then
call DisableTrigger(GetTriggeringTrigger())
if RequestExtraBooleanData(50,ConvertedPlayer(Hb[0]),null,null,false,0,0,0)==true then
call DisplayTextToPlayer(Player(0),0,0,"|cffffcc00妄踢作者，天打雷劈！")
else
if DzAPI_Map_HasMallItem(ConvertedPlayer(Hb[0]),"ZGGG")==true then
call DisplayTextToPlayer(Player(0),0,0,"|cffffcc00咕嘎大佬不能踢！")
else
call DisplayTextToPlayer(Player(0),0,0,"|cffffcc00让所有玩家进行投票清理垃圾")
call DialogClear(Hc)
call DialogSetMessage(Hc,"主机请求清理垃圾")
set Mn=DialogAddButton(Hc,"清理吧",89)
set Mo=DialogAddButton(Hc,"无耻主机",78)
set Hb[1]=0
set Hb[2]=0
set Hb[3]=0
set Jk=2
loop
exitwhen Jk>8
if GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER and GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING then
set Hb[1]=Hb[1]+1
if Hb[0]!=Jk then
call DialogDisplay(ConvertedPlayer(Jk),Hc,true)
else
endif
else
endif
set Jk=Jk+1
endloop
call StartTimerBJ(Hd,false,60.)
endif
endif
else
endif
endfunction
function iN takes nothing returns nothing
set Mm=CreateTrigger()
call TriggerRegisterPlayerChatEvent(Mm,Player(0),"-TR",false)
call TriggerAddAction(Mm,function iM)
endfunction
function iO takes nothing returns nothing
if GetClickedButtonBJ()==Mn then
set Hb[2]=Hb[2]+1
call DisplayTextToForce(HQ,GetPlayerName(GetTriggerPlayer())+("赞同主机观点   同意将玩家"+(GetPlayerName(ConvertedPlayer(Hb[0]))+"踢出游戏")))
call DisplayTextToForce(HQ,"|cFFF4674D当前投票数:"+(I2S(Hb[2])+("|cffffcc00赞成  "+(I2S(Hb[3])+"|cffff0000反对"))))
call DialogDisplay(GetTriggerPlayer(),Hc,false)
else
if GetClickedButtonBJ()==Mo then
set Hb[3]=Hb[3]+1
call DisplayTextToForce(HQ,GetPlayerName(GetTriggerPlayer())+("拒绝与主机同流合污,不同意将"+(GetPlayerName(ConvertedPlayer(Hb[0]))+"踢出游戏")))
call DisplayTextToForce(HQ,"|cFFF4674D当前投票数:"+(I2S(Hb[2])+("|cffffcc00赞成  "+(I2S(Hb[3])+"|cffff0000反对"))))
call DialogDisplay(GetTriggerPlayer(),Hc,false)
else
endif
endif
if I2R(Hb[2])>I2R(Hb[1])*.5 or I2R(Hb[3])>I2R(Hb[1])*.5 or Hb[2]+Hb[3]==Hb[1] then
call PauseTimer(Hd)
call TriggerExecute(Mq)
else
endif
endfunction
function iP takes nothing returns nothing
set Mp=CreateTrigger()
call TriggerRegisterDialogEvent(Mp,Hc)
call TriggerAddAction(Mp,function iO)
endfunction
function iQ takes nothing returns nothing
local integer Jk
if I2R(Hb[2])>=I2R(Hb[1])*.5 then
call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"半数以上玩家赞成,开始清理垃圾玩家"+GetPlayerName(ConvertedPlayer(Hb[0])))
set Hm[Hb[0]]=false
call WQ(ConvertedPlayer(Hb[0]),"游戏中",0)
call SetPlayerStateBJ(ConvertedPlayer(Hb[0]),PLAYER_STATE_LUMBER_UPKEEP_RATE,777)
call CustomDefeatBJ(ConvertedPlayer(Hb[0]),"游戏需要配合,否则不如自己去玩单机")
call EnableTrigger(Mm)
else
call DestroyTimer(Hd)
call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"鄙视主机的无耻行为,剥夺主机踢人权利.")
call DestroyTrigger(Mm)
call DestroyTrigger(Mp)
call DestroyTrigger(Mq)
endif
call DialogClear(Hc)
set Jk=1
loop
exitwhen Jk>8
call DialogDisplay(ConvertedPlayer(Jk),Hc,false)
set Jk=Jk+1
endloop
endfunction
function iR takes nothing returns nothing
set Mq=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Mq,Hd)
call TriggerAddAction(Mq,function iQ)
endfunction
function iS takes nothing returns nothing
set HE=S2I(GetEventPlayerChatString())
set HE=S2I(SubString(GetEventPlayerChatString(),5,6))
call DestroyTrigger(Mr)
if RequestExtraBooleanData(50,ConvertedPlayer(HE),null,null,false,0,0,0)==false then
call SetPlayerStateBJ(ConvertedPlayer(HE),PLAYER_STATE_LUMBER_UPKEEP_RATE,777)
call CustomDefeatBJ(ConvertedPlayer(HE),"文明游戏！！！")
else
endif
endfunction
function iT takes nothing returns nothing
set Mr=CreateTrigger()
call TriggerAddAction(Mr,function iS)
endfunction
function iU takes nothing returns nothing
set Mt[7]=GetUnitLoc(GetTriggerUnit())
if GetItemTypeId(GetManipulatedItem())==$6B336D33 then
call CreateNUnitsAtLoc(1,$68706878,GetOwningPlayer(GetTriggerUnit()),Mt[7],bj_UNIT_FACING)
else
endif
if GetItemTypeId(GetManipulatedItem())==$676F7072 then
call CreateNUnitsAtLoc(1,$6E747264,GetOwningPlayer(GetTriggerUnit()),Mt[7],bj_UNIT_FACING)
else
endif
if GetItemTypeId(GetManipulatedItem())==$676C736B then
call CreateNUnitsAtLoc(1,$6E777764,GetOwningPlayer(GetTriggerUnit()),Mt[7],bj_UNIT_FACING)
else
endif
if GetItemTypeId(GetManipulatedItem())==$6B336D32 then
call CreateNUnitsAtLoc(1,$6E677264,GetOwningPlayer(GetTriggerUnit()),Mt[7],bj_UNIT_FACING)
else
endif
if IsItemPowerup(GetManipulatedItem())==true and GetItemType(GetLastCreatedItem())==GetItemType(GetManipulatedItem()) then
call RemoveItem(GetManipulatedItem())
else
endif
call RemoveLocation(Mt[7])
endfunction
function iV takes nothing returns nothing
set Ms=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(0),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(1),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(2),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(3),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(4),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(5),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(6),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(7),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(8),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(9),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(10),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(11),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(12),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(13),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(14),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerRegisterPlayerUnitEventSimple(Ms,Player(15),EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(Ms,function iU)
endfunction
function iW takes nothing returns boolean
return GetRandomInt(1,40)==40
endfunction
function iX takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call ShowUnitShow(CZ)
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|cffffcc00天降祥瑞，传说中的圣兽：青龙已经出现在东北方！")
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function iY takes nothing returns nothing
set Mu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mu,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(Mu,Condition(function iW))
call TriggerAddAction(Mu,function iX)
endfunction
function iZ takes nothing returns boolean
return GetRandomInt(1,40)==11
endfunction
function ia takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call ShowUnitShow(CY)
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|cffffcc00天降祥瑞，传说中的圣兽：朱雀已经出现在南方！")
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function ib takes nothing returns nothing
set Mv=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mv,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(Mv,Condition(function iZ))
call TriggerAddAction(Mv,function ia)
endfunction
function ic takes nothing returns boolean
return GetRandomInt(1,40)==30
endfunction
function id takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call ShowUnitShow(Cb)
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|cffffcc00天降祥瑞，传说中的圣兽：白虎已经出现在西方！")
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function ie takes nothing returns nothing
set Mw=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mw,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(Mw,Condition(function ic))
call TriggerAddAction(Mw,function id)
endfunction
function ig takes nothing returns boolean
return GetRandomInt(1,40)==20
endfunction
function ih takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call ShowUnitShow(Ca)
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|cffffcc00天降祥瑞，传说中的圣兽：玄武已经出现在北方！")
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function ii takes nothing returns nothing
set Mx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Mx,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(Mx,Condition(function ig))
call TriggerAddAction(Mx,function ih)
endfunction
function ij takes nothing returns boolean
return GetRandomInt(1,50)==50
endfunction
function ik takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|cffffcc00江湖传言：在遥远的西南方树林深处，有人见到过像人一样到处跑的植物，那很可能就是传说中的人参精！")
call EnableTrigger(Mz)
call ShowUnitShow(Cd)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function il takes nothing returns nothing
set My=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(My,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(My,Condition(function ij))
call TriggerAddAction(My,function ik)
endfunction
function im takes nothing returns boolean
return GetOwningPlayer(GetKillingUnitBJ())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) and IsUnitAlly(GetTriggerUnit(),Player(8))==false and GetUnitTypeId(GetKillingUnitBJ())==$6E777766 or GetUnitTypeId(GetKillingUnitBJ())==$6E777767 or GetUnitTypeId(GetKillingUnitBJ())==$6E303033 or GetUnitTypeId(GetKillingUnitBJ())==$6E303034
endfunction
function in takes nothing returns nothing
set Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"血狼成长:"+(I2S(Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"/250"))
if Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=25 and GetUnitTypeId(GetKillingUnitBJ())==$6E777766 then
set Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=0
call SetUnitPosition(CreateUnit(GetOwningPlayer(GetKillingUnitBJ()),$6E777767,0,0,0),GetUnitX(GetKillingUnitBJ()),GetUnitY(GetKillingUnitBJ()))
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"小血狼已经成长为二级")
call RemoveUnit(GetKillingUnitBJ())
return
else
endif
if Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=50 and GetUnitTypeId(GetKillingUnitBJ())==$6E777767 then
set Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=0
call SetUnitPosition(CreateUnit(GetOwningPlayer(GetKillingUnitBJ()),$6E303033,0,0,0),GetUnitX(GetKillingUnitBJ()),GetUnitY(GetKillingUnitBJ()))
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"血狼已经成长为三级")
call RemoveUnit(GetKillingUnitBJ())
return
else
endif
if GetUnitTypeId(GetKillingUnitBJ())==$6E303033 and Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=75 then
set Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=0
call SetUnitPosition(CreateUnit(GetOwningPlayer(GetKillingUnitBJ()),$6E303034,0,0,0),GetUnitX(GetKillingUnitBJ()),GetUnitY(GetKillingUnitBJ()))
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"血狼已经成长为四级")
call RemoveUnit(GetKillingUnitBJ())
return
else
endif
if Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]>=100 and GetUnitTypeId(GetKillingUnitBJ())==$6E303034 then
set Fn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=0
call SetUnitPosition(CreateUnit(GetOwningPlayer(GetKillingUnitBJ()),$6E303035,0,0,0),GetUnitX(GetKillingUnitBJ()),GetUnitY(GetKillingUnitBJ()))
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"血狼已经成长为终级")
if GetUnitState(GetLastCreatedUnit(), UNIT_STATE_LIFE) <1 then
call SetUnitPosition(CreateUnit(GetOwningPlayer(GetKillingUnitBJ()),$6E303035,0,0,0),GetUnitX(GetKillingUnitBJ()),GetUnitY(GetKillingUnitBJ()))

endif
call RemoveUnit(GetKillingUnitBJ())
else
endif
endfunction
function io takes nothing returns nothing
set VP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(VP,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(VP,Condition(function im))
call TriggerAddAction(VP,function in)
endfunction
function ip takes nothing returns nothing
endfunction
function iq takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$4930304B
endfunction
// 铁匠铺打造装备
function ir takes nothing returns nothing
if bC(GetTriggerUnit(),$72617439)==true and bC(GetTriggerUnit(),$62677374)==true then
call RemoveItem(aj(GetTriggerUnit(),$72617439))
call RemoveItem(aj(GetTriggerUnit(),$62677374))
call UnitAddItemByIdSwapped($49303045,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了玄铁腰带！")
else
if bC(GetTriggerUnit(),$72617439)==true and bC(GetTriggerUnit(),$6876616C)==true then
call RemoveItem(aj(GetTriggerUnit(),$72617439))
call RemoveItem(aj(GetTriggerUnit(),$6876616C))
call UnitAddItemByIdSwapped($49303044,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了玄铁手戟！")
else
if bC(GetTriggerUnit(),$636E6F62)==true and bC(GetTriggerUnit(),$72646533)==true then
call RemoveItem(aj(GetTriggerUnit(),$72646533))
call RemoveItem(aj(GetTriggerUnit(),$636E6F62))
call UnitAddItemByIdSwapped($736F7237,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了青龙铠甲！")
else
if bC(GetTriggerUnit(),$636E6F62)==true and bC(GetTriggerUnit(),$72737431)==true then
call RemoveItem(aj(GetTriggerUnit(),$72737431))
call RemoveItem(aj(GetTriggerUnit(),$636E6F62))
call UnitAddItemByIdSwapped($736F7238,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了青龙战靴！")
else
if bC(GetTriggerUnit(),$77617264)==true and bC(GetTriggerUnit(),$72646533)==true then
call RemoveItem(aj(GetTriggerUnit(),$77617264))
call RemoveItem(aj(GetTriggerUnit(),$72646533))
call UnitAddItemByIdSwapped($72646530,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了白虎铠甲！")
else
if bC(GetTriggerUnit(),$77617264)==true and bC(GetTriggerUnit(),$6C687374)==true then
call RemoveItem(aj(GetTriggerUnit(),$77617264))
call RemoveItem(aj(GetTriggerUnit(),$6C687374))
call UnitAddItemByIdSwapped($72616D32,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了白虎护手！")
else
if bC(GetTriggerUnit(),$77617264)==true and bC(GetTriggerUnit(),$6863756E)==true then
call RemoveItem(aj(GetTriggerUnit(),$77617264))
call RemoveItem(aj(GetTriggerUnit(),$6863756E))
call UnitAddItemByIdSwapped($68627468,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了白虎头盔！")
else
if bC(GetTriggerUnit(),$62737064)==true and bC(GetTriggerUnit(),$63697269)==true then
call RemoveItem(aj(GetTriggerUnit(),$62737064))
call RemoveItem(aj(GetTriggerUnit(),$63697269))
call UnitAddItemByIdSwapped($62726167,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了朱雀羽衣！")
else
if bC(GetTriggerUnit(),$62737064)==true and bC(GetTriggerUnit(),$49303348)==true then
call RemoveItem(aj(GetTriggerUnit(),$62737064))
call RemoveItem(aj(GetTriggerUnit(),$49303348))
call UnitAddItemByIdSwapped($6F666972,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了朱雀羽扇！")
else
if bC(GetTriggerUnit(),$62737064)==true and bC(GetTriggerUnit(),$70727674)==true then
call RemoveItem(aj(GetTriggerUnit(),$62737064))
call RemoveItem(aj(GetTriggerUnit(),$70727674))
call UnitAddItemByIdSwapped($63726474,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了朱雀头冠！")
else
if bC(GetTriggerUnit(),$736E6567)==true and bC(GetTriggerUnit(),$72646533)==true then
call RemoveItem(aj(GetTriggerUnit(),$72646533))
call RemoveItem(aj(GetTriggerUnit(),$736E6567))
call UnitAddItemByIdSwapped($7368656E,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了玄武战甲！")
else
if bC(GetTriggerUnit(),$736E6567)==true and bC(GetTriggerUnit(),$74677268)==true then
call RemoveItem(aj(GetTriggerUnit(),$736E6567))
call RemoveItem(aj(GetTriggerUnit(),$74677268))
call UnitAddItemByIdSwapped($6667756E,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了玄武大盾！")
else
if bC(GetTriggerUnit(),$736E6567)==true and bC(GetTriggerUnit(),$6863756E)==true then
call RemoveItem(aj(GetTriggerUnit(),$736E6567))
call RemoveItem(aj(GetTriggerUnit(),$6863756E))
call UnitAddItemByIdSwapped($6F666C67,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"打造了玄武头盔！")
else
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00材料不足！")
call AdjustPlayerStateBJ(5000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(5,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function is takes nothing returns nothing
set M0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M0,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M0,Condition(function iq))
call TriggerAddAction(M0,function ir)
endfunction
function it takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$49303038
endfunction
// 牛神打造神兵利器
function iu takes nothing returns nothing
    // 打造青龙魂
if bC(GetTriggerUnit(),$49303343)==true and bC(GetTriggerUnit(),$73666F67)==true and bC(GetTriggerUnit(),$736F7238)==true then
   call RemoveItem(aj(GetTriggerUnit(),$49303343))
   call RemoveItem(aj(GetTriggerUnit(),$73666F67))
   call RemoveItem(aj(GetTriggerUnit(),$736F7238))
   call UnitAddItem(GetTriggerUnit(),CreateItem($69743064,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了器魂（青龙）")
// 如果有青龙器魂+霸王套+人参精
elseif bC(GetTriggerUnit(),$69743064)==true and bC(GetTriggerUnit(),$49303257)==true and bC(GetTriggerUnit(),$49303256)==true and bC(GetTriggerUnit(),$49303255)==true and bC(GetTriggerUnit(),$776F6C67)==true then
   call RemoveItem(aj(GetTriggerUnit(),$69743064))
   call RemoveItem(aj(GetTriggerUnit(),$49303257))
   call RemoveItem(aj(GetTriggerUnit(),$49303256))
   call RemoveItem(aj(GetTriggerUnit(),$49303255))
    call RemoveItem(aj(GetTriggerUnit(),$776F6C67))
   call UnitAddItem(GetTriggerUnit(),CreateItem($69743034,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了霸龙偃月刀")
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.3)
// 如果有青龙器魂+朱雀武套+朱雀魂+三国志
elseif bC(GetTriggerUnit(),'ledg')==true and bC(GetTriggerUnit(),$69743064)==true and bC(GetTriggerUnit(),$6F666972)==true and bC(GetTriggerUnit(),$63726474)==true and bC(GetTriggerUnit(),$49303143)==true and bC(GetTriggerUnit(),$6B336D33)==true then
   call RemoveItem(aj(GetTriggerUnit(),$69743064))
   call RemoveItem(aj(GetTriggerUnit(),$6F666972))
    call RemoveItem(aj(GetTriggerUnit(),$63726474))
   call RemoveItem(aj(GetTriggerUnit(),$49303143))
     call RemoveItem(aj(GetTriggerUnit(),$6B336D33))
       call RemoveItem(aj(GetTriggerUnit(),'ledg'))
   call UnitAddItem(GetTriggerUnit(),CreateItem($69743038,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了烛龙偃月刀")
// 如果有青龙器魂+玄武套+玄武魂+盘古斧
elseif bC(GetTriggerUnit(),'ocor')==true and bC(GetTriggerUnit(),$69743064)==true and bC(GetTriggerUnit(),$7368656E)==true and bC(GetTriggerUnit(),$6667756E)==true and bC(GetTriggerUnit(),$676F7072)==true and bC(GetTriggerUnit(),$676F7072)==true then
   call RemoveItem(aj(GetTriggerUnit(),$69743064))
   call RemoveItem(aj(GetTriggerUnit(),$7368656E))
    call RemoveItem(aj(GetTriggerUnit(),$6667756E))
   call RemoveItem(aj(GetTriggerUnit(),$6F666C67))
    call RemoveItem(aj(GetTriggerUnit(),$676F7072))
    call RemoveItem(aj(GetTriggerUnit(),'ocor'))
   call UnitAddItem(GetTriggerUnit(),CreateItem($69743037,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了盘龙偃月刀")
// 如果有青龙器魂+白虎套+白虎魂+三尖刀
elseif bC(GetTriggerUnit(),'I02I')==true and bC(GetTriggerUnit(),$69743064)==true and bC(GetTriggerUnit(),$72616D32)==true and bC(GetTriggerUnit(),$72646530)==true and bC(GetTriggerUnit(),$68627468)==true and bC(GetTriggerUnit(),$676C736B)==true then
   call RemoveItem(aj(GetTriggerUnit(),$69743064))
   call RemoveItem(aj(GetTriggerUnit(),$72616D32))
    call RemoveItem(aj(GetTriggerUnit(),$72646530))
   call RemoveItem(aj(GetTriggerUnit(),$68627468))
     call RemoveItem(aj(GetTriggerUnit(),$676C736B))
      call RemoveItem(aj(GetTriggerUnit(),'I02I'))
   call UnitAddItem(GetTriggerUnit(),CreateItem($69743036,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了苍龙偃月刀")
// 如果有青龙器魂+玄铁腰带+玄铁手机+青龙魂+飞刀
elseif bC(GetTriggerUnit(),'I01V')==true and bC(GetTriggerUnit(),$69743064)==true and bC(GetTriggerUnit(),$49303045)==true and bC(GetTriggerUnit(),$49303044)==true and bC(GetTriggerUnit(),$6B336D32)==true then
   call RemoveItem(aj(GetTriggerUnit(),$69743064))
   call RemoveItem(aj(GetTriggerUnit(),$49303045))
   call RemoveItem(aj(GetTriggerUnit(),$49303044))
   call RemoveItem(aj(GetTriggerUnit(),$6B336D32))
   call RemoveItem(aj(GetTriggerUnit(),'I01V'))
   call UnitAddItem(GetTriggerUnit(),CreateItem($69743035,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了玄龙偃月刀")
// 打造苍玄之书
elseif bC(GetTriggerUnit(),$6F666972)==true and bC(GetTriggerUnit(),$63726474)==true and bC(GetTriggerUnit(),$49303143)==true  and GetItemCharges(aj(GetTriggerUnit(),'I02S'))>=3  then
 
if GetItemCharges(aj(GetTriggerUnit(),'I02S'))>3 then
call SetItemCharges(aj(GetTriggerUnit(),'I02S'),GetItemCharges(aj(GetTriggerUnit(),'I02S'))-3)
else
call RemoveItem(aj(GetTriggerUnit(),'I02S'))
endif
    // 朱雀护腕
   call RemoveItem(aj(GetTriggerUnit(),$6F666972))
    // 朱雀头冠
    call RemoveItem(aj(GetTriggerUnit(),$63726474))
   call RemoveItem(aj(GetTriggerUnit(),$49303143))

call UnitAddItem(GetTriggerUnit(),CreateItem('it0s',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了苍玄之书")
// 打造羽渡尘=
elseif bC(GetTriggerUnit(),'rej2')==true and bC(GetTriggerUnit(),'rots')==true and bC(GetTriggerUnit(),'bspd')==true and bC(GetTriggerUnit(),'brag')==true and bC(GetTriggerUnit(),'srtl')==true  then
 
call RemoveItem(aj(GetTriggerUnit(),'rej2'))
call RemoveItem(aj(GetTriggerUnit(),'rots'))
call RemoveItem(aj(GetTriggerUnit(),'bspd'))
call RemoveItem(aj(GetTriggerUnit(),'brag'))
call RemoveItem(aj(GetTriggerUnit(),'srtl'))
call UnitAddItem(GetTriggerUnit(),CreateItem('it0r',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了羽渡尘")
// 打造自然魂珠
elseif bC(GetTriggerUnit(),$49303142)==true and bC(GetTriggerUnit(),$62747374)==true and bC(GetTriggerUnit(),$73747067)==true and bC(GetTriggerUnit(),$726F7473)==true and bC(GetTriggerUnit(),$7372746C)==true and bC(GetTriggerUnit(),'I00B')==true then
 
  call RemoveItem(aj(GetTriggerUnit(),$62747374))
   call RemoveItem(aj(GetTriggerUnit(),$49303142))
   call RemoveItem(aj(GetTriggerUnit(),$73747067))
   call RemoveItem(aj(GetTriggerUnit(),$726F7473))
    call RemoveItem(aj(GetTriggerUnit(),$7372746C))
    call RemoveItem(aj(GetTriggerUnit(),'I00B'))
    call UnitAddItem(GetTriggerUnit(),CreateItem($6974306B,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
    call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了自然魂珠")
//   真龙铠甲 = 龙魂+龙鳞甲+真龙护手+雷霆之力
elseif bC(GetTriggerUnit(),$69743064)==true and bC(GetTriggerUnit(),'oli2')==true and bC(GetTriggerUnit(),'tels')==true and bC(GetTriggerUnit(),'I00B')==true  then
 
  call RemoveItem(aj(GetTriggerUnit(),$69743064))
   call RemoveItem(aj(GetTriggerUnit(),'oli2'))
   call RemoveItem(aj(GetTriggerUnit(),'tels'))
    call RemoveItem(aj(GetTriggerUnit(),'I00B'))
    call UnitAddItem(GetTriggerUnit(),CreateItem('it0q',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
    call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了真龙铠甲")
  
// 蚩尤套+蚩尤披风打造魔龙刀
// 蚩尤护手、蚩尤魔甲、蚩尤魔头、蚩尤战靴、蚩尤披风
elseif bC(GetTriggerUnit(),$49303245)==true or bC(GetTriggerUnit(),$49303341)==true and bC(GetTriggerUnit(),$49303235)==true and bC(GetTriggerUnit(),$49303234)==true and bC(GetTriggerUnit(),$49303236)==true and bC(GetTriggerUnit(),$49303237)==true then
   call RemoveItem(aj(GetTriggerUnit(),$49303341))
   call RemoveItem(aj(GetTriggerUnit(),$49303234))
   call RemoveItem(aj(GetTriggerUnit(),$49303235))
   call RemoveItem(aj(GetTriggerUnit(),$49303236))
   call RemoveItem(aj(GetTriggerUnit(),$49303237))
   call UnitAddItem(GetTriggerUnit(),CreateItem($69743068,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了鸩魔龙刀")
elseif bC(GetTriggerUnit(),'I003')==true or bC(GetTriggerUnit(),'I01E')==true and bC(GetTriggerUnit(),'pspd')==true and bC(GetTriggerUnit(),'I006')==true and bC(GetTriggerUnit(),'gsou')==true and bC(GetTriggerUnit(),'cosl')==true and bC(GetTriggerUnit(),'I00B')==true then
 call RemoveItem(aj(GetTriggerUnit(),'I003'))
   call RemoveItem(aj(GetTriggerUnit(),'I01E'))
   call RemoveItem(aj(GetTriggerUnit(),'pspd'))
   call RemoveItem(aj(GetTriggerUnit(),'I006'))
   call RemoveItem(aj(GetTriggerUnit(),'gsou'))
    call RemoveItem(aj(GetTriggerUnit(),'I00B'))
   call RemoveItem(aj(GetTriggerUnit(),'cosl'))
   call UnitAddItem(GetTriggerUnit(),CreateItem('it0n',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了神鬼天惊")
    // 打造极八蛇矛
elseif bC(GetTriggerUnit(),$726E7370)==true  and GetItemCharges(aj(GetTriggerUnit(),$646B6677))>=5 then
if GetItemCharges(aj(GetTriggerUnit(),$646B6677))>5 then
call SetItemCharges(aj(GetTriggerUnit(),$646B6677),GetItemCharges(aj(GetTriggerUnit(),$646B6677))-5)
else
call RemoveItem(aj(GetTriggerUnit(),$646B6677))
endif
call RemoveItem(aj(GetTriggerUnit(),$726E7370))

call UnitAddItem(GetTriggerUnit(),CreateItem($69743062,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了极八蛇矛")
 

    // 如果带了方天画戟和幽冥赤兔，且强化石数量大于2
elseif bC(GetTriggerUnit(),$6D6E7366)==true and bC(GetTriggerUnit(),$49303146)==true and GetItemCharges(aj(GetTriggerUnit(),$646B6677))>=2 then
if GetItemCharges(aj(GetTriggerUnit(),$646B6677))>2 then
call SetItemCharges(aj(GetTriggerUnit(),$646B6677),GetItemCharges(aj(GetTriggerUnit(),$646B6677))-2)
else
call RemoveItem(aj(GetTriggerUnit(),$646B6677))
endif
call RemoveItem(aj(GetTriggerUnit(),$6D6E7366))
call RemoveItem(aj(GetTriggerUnit(),$49303146))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303147,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了方天鬼戟")
 
   // 如果待了震天弓和穿云箭，且强化石数量大于10
elseif bC(GetTriggerUnit(),$72616D34)==true and bC(GetTriggerUnit(),$6F76656E)==true and GetItemCharges(aj(GetTriggerUnit(),$646B6677))>=10 then
    // 如果强化石数量大于10
if GetItemCharges(aj(GetTriggerUnit(),$646B6677))>10 then
call SetItemCharges(aj(GetTriggerUnit(),$646B6677),GetItemCharges(aj(GetTriggerUnit(),$646B6677))-10)
else
call RemoveItem(aj(GetTriggerUnit(),$646B6677))
endif
call RemoveItem(aj(GetTriggerUnit(),$6F76656E))
call RemoveItem(aj(GetTriggerUnit(),$72616D34))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303344,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"打造了后羿射日弓")

elseif bC(GetTriggerUnit(),$77617264)==true and bC(GetTriggerUnit(),$62737064)==true and bC(GetTriggerUnit(),$636E6F62)==true and bC(GetTriggerUnit(),$72617439)==true then
call RemoveItem(aj(GetTriggerUnit(),$77617264))
call RemoveItem(aj(GetTriggerUnit(),$62737064))
call RemoveItem(aj(GetTriggerUnit(),$636E6F62))
call RemoveItem(aj(GetTriggerUnit(),$72617439))
call UnitAddItemByIdSwapped(LJ[GetRandomInt(1,59)],GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),30,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("打造了："+GetItemName(GetLastCreatedItem())))
else
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00材料不足！")
call AdjustPlayerStateBJ(20000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(20,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)

endif
 

endfunction
function iv takes nothing returns nothing
set M2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M2,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M2,Condition(function it))
call TriggerAddAction(M2,function iu)
endfunction
function iw takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$4930304E
endfunction
function ix takes nothing returns nothing
if bC(GetTriggerUnit(),$62726163)==true then
call RemoveItem(aj(GetTriggerUnit(),$62726163))
call UnitAddItemByIdSwapped($61666163,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$61666163)==true then
call RemoveItem(aj(GetTriggerUnit(),$61666163))
call UnitAddItemByIdSwapped($6876616C,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6876616C)==true then
call RemoveItem(aj(GetTriggerUnit(),$6876616C))
call UnitAddItemByIdSwapped($73726264,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$72646531)==true then
call RemoveItem(aj(GetTriggerUnit(),$72646531))
call UnitAddItemByIdSwapped($6576746C,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6576746C)==true then
call RemoveItem(aj(GetTriggerUnit(),$6576746C))
call UnitAddItemByIdSwapped($72617463,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$72617463)==true then
call RemoveItem(aj(GetTriggerUnit(),$72617463))
call UnitAddItemByIdSwapped($66777373,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$72617436)==true then
call RemoveItem(aj(GetTriggerUnit(),$72617436))
call UnitAddItemByIdSwapped($72687468,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$72687468)==true then
call RemoveItem(aj(GetTriggerUnit(),$72687468))
call UnitAddItemByIdSwapped($7277697A,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$7277697A)==true then
call RemoveItem(aj(GetTriggerUnit(),$7277697A))
call UnitAddItemByIdSwapped($676C646F,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$706D6E61)==true then
call RemoveItem(aj(GetTriggerUnit(),$706D6E61))
call UnitAddItemByIdSwapped($6B70696E,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6B70696E)==true then
call RemoveItem(aj(GetTriggerUnit(),$6B70696E))
call UnitAddItemByIdSwapped($6763656C,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6763656C)==true then
call RemoveItem(aj(GetTriggerUnit(),$6763656C))
call UnitAddItemByIdSwapped($61727368,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$7374656C)==true then
call RemoveItem(aj(GetTriggerUnit(),$7374656C))
call UnitAddItemByIdSwapped($73626368,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$73626368)==true then
call RemoveItem(aj(GetTriggerUnit(),$73626368))
call UnitAddItemByIdSwapped($6D636F75,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6D636F75)==true then
call RemoveItem(aj(GetTriggerUnit(),$6D636F75))
call UnitAddItemByIdSwapped($64727068,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$636C7364)==true then
call RemoveItem(aj(GetTriggerUnit(),$636C7364))
call UnitAddItemByIdSwapped($616A656E,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$616A656E)==true then
call RemoveItem(aj(GetTriggerUnit(),$616A656E))
call UnitAddItemByIdSwapped($6473756D,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6473756D)==true then
call RemoveItem(aj(GetTriggerUnit(),$6473756D))
call UnitAddItemByIdSwapped($61786173,GetTriggerUnit())
else
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00你没有可升级的武器！")
call AdjustPlayerStateBJ(3000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function iy takes nothing returns nothing
set M3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M3,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M3,Condition(function iw))
call TriggerAddAction(M3,function ix)
endfunction
function iz takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$49303134
endfunction
function i0 takes nothing returns nothing
if bC(GetTriggerUnit(),$636C666D)==true then
call RemoveItem(aj(GetTriggerUnit(),$636C666D))
call UnitAddItemByIdSwapped($72616731,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$72616731)==true then
call RemoveItem(aj(GetTriggerUnit(),$72616731))
call UnitAddItemByIdSwapped($72646533,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$72646533)==true then
call RemoveItem(aj(GetTriggerUnit(),$72646533))
call UnitAddItemByIdSwapped($7368686E,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$73707368)==true then
call RemoveItem(aj(GetTriggerUnit(),$73707368))
call UnitAddItemByIdSwapped($7373696C,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$7373696C)==true then
call RemoveItem(aj(GetTriggerUnit(),$7373696C))
call UnitAddItemByIdSwapped($63697269,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$63697269)==true then
call RemoveItem(aj(GetTriggerUnit(),$63697269))
call UnitAddItemByIdSwapped($72617433,GetTriggerUnit())
else
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00你没有可升级的盔甲！")
call AdjustPlayerStateBJ(3000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
endif
endif
endif
endif
endif
endif
endfunction
function i1 takes nothing returns nothing
set M4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M4,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M4,Condition(function iz))
call TriggerAddAction(M4,function i0)
endfunction
function i2 takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$4930304F
endfunction
function i3 takes nothing returns nothing
if bC(GetTriggerUnit(),$70656E72)==true then
call RemoveItem(aj(GetTriggerUnit(),$70656E72))
call UnitAddItemByIdSwapped($6C676468,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6C676468)==true then
call RemoveItem(aj(GetTriggerUnit(),$6C676468))
call UnitAddItemByIdSwapped($6863756E,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$6863756E)==true then
call RemoveItem(aj(GetTriggerUnit(),$6863756E))
call UnitAddItemByIdSwapped($7370726E,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$62656C76)==true then
call RemoveItem(aj(GetTriggerUnit(),$62656C76))
call UnitAddItemByIdSwapped($72646532,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$72646532)==true then
call RemoveItem(aj(GetTriggerUnit(),$72646532))
call UnitAddItemByIdSwapped($70727674,GetTriggerUnit())
else
if bC(GetTriggerUnit(),$70727674)==true then
call RemoveItem(aj(GetTriggerUnit(),$70727674))
call UnitAddItemByIdSwapped($72756774,GetTriggerUnit())
else
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00你没有可升级的头盔！")
call AdjustPlayerStateBJ(3000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
endif
endif
endif
endif
endif
endif
endfunction
function i4 takes nothing returns nothing
set M5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M5,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M5,Condition(function i2))
call TriggerAddAction(M5,function i3)
endfunction
function i5 takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$616D7263 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())<9 and GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())<9 and GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit())<9 and GetUnitAbilityLevelSwapped($41303539,GetTriggerUnit())<9 and GetUnitAbilityLevelSwapped($41303541,GetTriggerUnit())<9
endfunction
function i6 takes nothing returns nothing
if GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())>=1 then
call IncUnitAbilityLevelSwapped($41303537,GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00恭喜你成功晋升官阶！")
call SetPlayerTechResearchedSwap($526F7374,GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
if GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())>=1 then
call IncUnitAbilityLevelSwapped($41303536,GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00恭喜你成功晋升官阶！")
call SetPlayerTechResearchedSwap($526F7374,GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
if GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit())>=1 then
call IncUnitAbilityLevelSwapped($41303538,GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00恭喜你成功晋升官阶！")
call SetPlayerTechResearchedSwap($526F7374,GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
if GetUnitAbilityLevelSwapped($41303539,GetTriggerUnit())>=1 then
call IncUnitAbilityLevelSwapped($41303539,GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00恭喜你成功晋升官阶！")
call SetPlayerTechResearchedSwap($526F7374,GetUnitAbilityLevelSwapped($41303539,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
if GetUnitAbilityLevelSwapped($41303541,GetTriggerUnit())>=1 then
call IncUnitAbilityLevelSwapped($41303541,GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00恭喜你成功晋升官阶！")
call SetPlayerTechResearchedSwap($526F7374,GetUnitAbilityLevelSwapped($41303541,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffffff00你没有晋升的资格（不贿赂本官还想升官，门都没有）！")
call AdjustPlayerStateBJ(20000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(20,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)
endif
endif
endif
endif
endif
if GetPlayerTechCountSimple($526F7374,GetOwningPlayer(GetTriggerUnit()))==9 then
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),3),GF[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+"最高阶")
else
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),3),I2S(GetPlayerTechCountSimple($526F7374,GetOwningPlayer(GetTriggerUnit()))))
endif
endfunction
function i7 takes nothing returns nothing
set M6=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M6,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M6,Condition(function i5))
call TriggerAddAction(M6,function i6)
endfunction
// 清地板物品事件
function i8 takes nothing returns nothing
if RequestExtraBooleanData(50,GetTriggerPlayer(),null,null,false,0,0,0)==true and IsItemHiddenBJ(GetEnumItem())==false then
if GetItemTypeId(GetEnumItem())==$706F6D6E then
call RemoveItem(GetEnumItem())
call AdjustPlayerStateBJ(1000,ConvertedPlayer(1),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(1000,ConvertedPlayer(2),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(1000,ConvertedPlayer(3),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(1000,ConvertedPlayer(4),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(1000,ConvertedPlayer(5),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(1000,ConvertedPlayer(6),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(1000,ConvertedPlayer(7),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(1000,ConvertedPlayer(8),PLAYER_STATE_RESOURCE_GOLD)
else
if GetItemTypeId(GetEnumItem())==$73727263 then
call RemoveItem(GetEnumItem())
call AdjustPlayerStateBJ(2500,ConvertedPlayer(1),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(2500,ConvertedPlayer(2),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(2500,ConvertedPlayer(3),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(2500,ConvertedPlayer(4),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(2500,ConvertedPlayer(5),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(2500,ConvertedPlayer(6),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(2500,ConvertedPlayer(7),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(2500,ConvertedPlayer(8),PLAYER_STATE_RESOURCE_GOLD)
else
endif
endif
else
endif
if CheckItemStatus(GetEnumItem(),bj_ITEM_STATUS_SELLABLE)==true and IsItemHiddenBJ(GetEnumItem())==false then
call SetWidgetLife(GetEnumItem(),50)
call RemoveItem(GetEnumItem())
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(1), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(2), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(3), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(4), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(5), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(6), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(7), PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100 *GetUnitLevel(C5), ConvertedPlayer(8), PLAYER_STATE_RESOURCE_GOLD)
else
endif
endfunction
function i9 takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"|cFFFF00335秒钟后将清理地上物品")
call TriggerSleepAction(5.)
call EnumItemsInRectBJ(GetPlayableMapRect(),function i8)
endfunction
function jB takes nothing returns nothing
set KR=CreateTrigger()
call TriggerRegisterPlayerChatEvent(KR,Player(0),"-Q",true)
call TriggerRegisterPlayerChatEvent(KR,Player(1),"-Q",true)
call TriggerRegisterPlayerChatEvent(KR,Player(2),"-Q",true)
call TriggerRegisterPlayerChatEvent(KR,Player(3),"-Q",true)
call TriggerRegisterPlayerChatEvent(KR,Player(4),"-Q",true)
call TriggerRegisterPlayerChatEvent(KR,Player(5),"-Q",true)
call TriggerRegisterPlayerChatEvent(KR,Player(6),"-Q",true)
call TriggerRegisterPlayerChatEvent(KR,Player(7),"-Q",true)
call TriggerAddAction(KR,function i9)
endfunction
// 人品调查判断
function jC takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$6B79626C and bC(GetTriggerUnit(),$6D6C7374)==true and (IsItemInvulnerable(aj(GetTriggerUnit(),$6D6C7374))==false and bC(GetTriggerUnit(),$67656D74)==true or bC(GetTriggerUnit(),$6C757265)==true or bC(GetTriggerUnit(),$746D7363)==true or bC(GetTriggerUnit(),$61727363)==true or bC(GetTriggerUnit(),$6E666C67)==true)
endfunction
function jD takes nothing returns nothing
    // 轩辕剑
call SetItemInvulnerable(aj(GetTriggerUnit(),$6D6C7374),true)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"完成打造,获得能力,攻击时有10%机率触发各种特殊效果")
// 任意玉
call RemoveItem(aj(GetTriggerUnit(),$67656D74))
call RemoveItem(aj(GetTriggerUnit(),$6C757265))
call RemoveItem(aj(GetTriggerUnit(),$746D7363))
call RemoveItem(aj(GetTriggerUnit(),$6E666C67))
call RemoveItem(aj(GetTriggerUnit(),$61727363))
endfunction
function jE takes nothing returns nothing
set M7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M7,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M7,Condition(function jC))
call TriggerAddAction(M7,function jD)
endfunction
// 人品调查技能
function jF takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$6B79626C and bC(GetTriggerUnit(),$6D6C7374)==true and IsItemInvulnerable(aj(GetTriggerUnit(),$6D6C7374))==true and bC(GetTriggerUnit(),$636E686E)==true and GetItemUserData(aj(GetTriggerUnit(),$6D6C7374))==0
endfunction
function jG takes nothing returns nothing
local integer Ix=GetRandomInt(101,107)
call SetItemUserData(aj(GetTriggerUnit(),$6D6C7374),Ix)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"完成打造,获得技能:")
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetAbilityName(M9[Ix]))
call RemoveItem(aj(GetTriggerUnit(),$636E686E))
endfunction
function jH takes nothing returns nothing
set M8=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(M8,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(M8,Condition(function jF))
call TriggerAddAction(M8,function jG)
endfunction

function jI takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$6B79626C and bC(GetTriggerUnit(),$6D6C7374)==true and GetItemUserData(aj(GetTriggerUnit(),$6D6C7374))>0 and bC(GetTriggerUnit(),$73656872)==true
endfunction
function jJ takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),M9[GetItemUserData(aj(GetTriggerUnit(),$6D6C7374))])
call SetItemUserData(aj(GetTriggerUnit(),$6D6C7374),0)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"已将技能清洗")
call RemoveItem(aj(GetTriggerUnit(),$73656872))
endfunction
function jK takes nothing returns nothing
set NB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(NB,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(NB,Condition(function jI))
call TriggerAddAction(NB,function jJ)
endfunction
function jL takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$6D6C7374 and IsItemInvulnerable(aj(GetTriggerUnit(),$6D6C7374))==true and GetUnitTypeId(GetTriggerUnit())!=$4E74696E
endfunction
function jM takes nothing returns nothing
call UnitAddAbility(GetTriggerUnit(),$41303939)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41303939,false)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303939)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130385A)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130334E)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130334D)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"使用轩辕剑攻击时有10%机率触发各种特殊技能效果")
if GetItemUserData(aj(GetTriggerUnit(),$6D6C7374))>0 then
call UnitAddAbility(GetTriggerUnit(),M9[GetItemUserData(GetManipulatedItem())])
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,M9[GetItemUserData(GetManipulatedItem())])
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00你获得了轩辕附加属性：|r"+GetAbilityName(M9[GetItemUserData(GetManipulatedItem())]))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),M9[GetItemUserData(GetManipulatedItem())],false)
else
endif
endfunction
function jN takes nothing returns nothing
set NC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(NC,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(NC,Condition(function jL))
call TriggerAddAction(NC,function jM)
endfunction
function jO takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$6D6C7374 and IsItemInvulnerable(aj(GetTriggerUnit(),$6D6C7374))==true and GetUnitTypeId(GetTriggerUnit())!=$4E74696E
endfunction
function jP takes nothing returns nothing
call UnitRemoveAbility(GetTriggerUnit(),$41303939)
if GetItemUserData(aj(GetTriggerUnit(),$6D6C7374))>0 then
call UnitRemoveAbility(GetTriggerUnit(),M9[GetItemUserData(GetManipulatedItem())])
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00你失去了轩辕附加属性：|r"+GetAbilityName(M9[GetItemUserData(GetManipulatedItem())]))
else
endif
endfunction
function jQ takes nothing returns nothing
set ND=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(ND,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(ND,Condition(function jO))
call TriggerAddAction(ND,function jP)
endfunction
function jR takes nothing returns nothing
    // 掉落物品池
local integer KW
// 朱雀头冠
set LJ[1]=$63726474
// 朱雀羽衣
set LJ[2]=$62726167
// 朱雀护腕
set LJ[3]=$6F666972
// 青龙刀
set LJ[4]=$73666F67
// 青龙靴
set LJ[5]=$736F7238
// 青龙甲
set LJ[6]=$736F7237
// 白虎头盔
set LJ[7]=$68627468
// 白虎护手
set LJ[8]=$72616D32
// 白虎铠甲
set LJ[9]=$72646530
// 玄武战甲
set LJ[10]=$7368656E
// 玄武大盾
set LJ[11]=$6667756E
// 玄武头盔
set LJ[12]=$6F666C67
// 无敌甲
set LJ[13]=$72617433
// 天空盔
set LJ[14]=$7370726E
// 大宛马-
// set LJ[15]=$626C6261
// 日月啸霜
set LJ[15]='it0l'
// 风神衣
set LJ[16]=$62747374
// 神宇盔
set LJ[17]=$72756774
// 古锭刀
set LJ[18]=$66777373
// 鹊画弓
set LJ[19]=$61727368
// 黄金锁子甲
set LJ[20]=$7368686E
// 龙泉剑
set LJ[21]=$73726264
// 龙胆枪
set LJ[22]=$676C646F
// 养由基
set LJ[23]=$72616D33
// 日月乾坤
set LJ[24]=$7664646C
// 绝影
set LJ[25]=$49303039
// 孟德新书
set LJ[26]=$736F7234
// 孙子兵法
set LJ[27]=$736F7233
// 水神姬
set LJ[28]=$73747067
// 真龙护手
set LJ[29]=$74656C73
// 七星宝刀
set LJ[30]=$6E737069
// 倚天剑
set LJ[31]=$73686377
// 空空手
set LJ[32]=$73707265
// 青囊书
set LJ[33]=$7363686C
// 爪黄飞电
// set LJ[34]=$736F7232
// 踏雪乌骓
set LJ[34]='it0m'
// 巨象
set LJ[35]=$49303037
// 玄铁手机
set LJ[36]=$49303044
// 玄铁腰带
set LJ[37]=$49303045
// 战狼
set LJ[38]=$66677267
// 丈八蛇矛
set LJ[39]=$726E7370
// 赤兔
set LJ[40]=$6F736C6F
// 魔神甲
set LJ[41]=$70737064
// 三国志
set LJ[42]=$6C656467
// 遁甲天书
set LJ[43]=$64747362
// 魔神之翼
set LJ[44]=$49303036
// 轩辕剑
set LJ[45]=$6D6C7374
// 玄光之翼
set LJ[46]=$62666872
// 天狼枪
set LJ[47]=$49303055
// 震天弓
set LJ[48]=$72616D34
// 机关车
set LJ[49]=$49303056
// 虎筋弦弓
set LJ[50]=$49303250
// 雷神管
set LJ[51]=$49303142
// 问天枪
set LJ[52]=$49303034
// 镇魂甲
set LJ[53]=$49303032
// 火神盾
set LJ[54]=$726F7473
// 项羽战刃
set LJ[55]=$73747265
// 镇魂杖
set LJ[56]=$49303031
// 麒麟弓
set LJ[57]=$49303144
// 火焰拳套
set LJ[58]=$73687273
// 刑天斧
set LJ[59]=$67736F75
// 刑天盾
set LJ[60]=$636F736C
// 九转
set LJ[61]=$49303041
// 穿云箭
set LJ[62]=$6F76656E
// 魔魂盔
set LJ[63]=$49303033
// 精品小馒头
set LJ[64]='pres'
// 九转金丹
set LJ[65]='rej3'
// 强化石
set LJ[66]='dkfw'
// 优质兽皮
set LJ[67]='srrc'
// 藏宝图
set LJ[68]='tlum'
// 仙魔书
set LJ[69]='grsl'
// 太平令
set LJ[70]='it0u'
// 伏羲琴
set LJ[71]=$49303049
// 崆峒印
set LJ[72]=$4930304A
// 昊天塔
set LJ[73]=$4930304C
// 盘古斧
set LJ[74]=$6F636F72
// 女娲石
set LJ[75]=$7468646D
// 神农鼎
set LJ[76]=$7368746D
// 九天算尺
set LJ[77]=$49303043
// 炼妖壶
set LJ[78]=$64757374
// 昆仑镜
set LJ[79]=$736F756C
// 太平要术
set LJ[80]=$49303035
// 蚩尤魔头
set LJ[81]=$49303234
// 蚩尤魔甲
set LJ[82]=$49303235
// 蚩尤鞋子
set LJ[83]=$49303236
// 蚩尤护手
set LJ[84]=$49303238
// 青龙刀
set LJ[99]=$73666F67
// 人参精华
set LJ[100]=$776F6C67
// 圣痕青龙
set LJ[101]=$6B336D32
// 无字天书
set LJ[102]=$72656A32
// 东皇钟
set LJ[103]=$7067696E
// 给孙乾四阶段偷的
// 追日靴
set LJ[104]=$49303030
// 玄光盾
set LJ[105]=$69743039
// 混元霹雳手
set LJ[106]=$69743061
// 斩蛇剑
set LJ[107]=$49303251
// 赌狗戒指
set LJ[108]=$69743063
// 麒麟戒指
set LJ[109]=$49303059
// 龙刀
set LJ[110]=$69743035
set LJ[111]=$69743036
set LJ[112]=$69743037
set LJ[113]=$69743038
// 藏宝图
set LJ[114]=$746C756D
// 落宝铜钱
set LJ[115]=$69743065
// 的卢满级
set LJ[116]=$6B67616C
// 奇谋
set LJ[117]=$49303150
// 雷霆之力
set LJ[118]=$49303042
// 蚩尤披风
set LJ[119]=$49303237
// 极八蛇矛
set LJ[120]=$69743062
// 幸运币
set LJ[121]=$69743067
// 器胚青龙
set LJ[122]=$69743064
// 小李飞刀
set LJ[123]=$69743066
// 心之钢
set LJ[124]=$69743069
//  神鬼天惊
set LJ[125]='it0n'
// 自然魂珠
set LJ[126]='it0k'
// 洛河图书 
set LJ[127]='it0o'
// 刚弓
set LJ[170]=$6B70696E
// 钢剑
set LJ[171]=$61666163
// 钢刀
set LJ[172]=$6576746C
// 诸葛巾
set LJ[173]=$72646532
// 大斧
set LJ[174]=$616A656E
// 黑羽扇
set LJ[175]=$73626368
// 鹤髦
set LJ[176]=$7373696C
// 铁锁甲
set LJ[177]=$72616731
// 铁盔
set LJ[178]=$6C676468
// 钢枪
set LJ[179]=$72687468
// 马
set LJ[180]=$726C6966
// 黑鬃马
set LJ[181]=$6F646566
// 大宛马
// set LJ[182]=$626C6261
set LJ[182]='it0l'
// 爪黄飞电
// set LJ[183]=$736F7232

set LJ[183]='it0m'
// 绝影
set LJ[184]=$49303039
// 巨象
set LJ[185]=$49303037
// 魔神之翼
set LJ[186]=$49303036
// 战狼
set LJ[187]=$66677267
// 赤兔
set LJ[188]=$6F736C6F
// 后面都是玉
set LJ[201]=$74666172
set LJ[202]=$74626172
set LJ[203]=$7462736D
set LJ[204]=$72656A31
set LJ[205]=$63636D64
set LJ[206]=$67656D74
set LJ[207]=$6C757265
set LJ[208]=$746D7363
set LJ[209]=$6E666C67
// 玉
set LJ[210]=$61727363
set NF=CreateItemPool()
call ItemPoolAddItemType(NF,$49303339,1)
call ItemPoolAddItemType(NF,$49303338,2.)
call ItemPoolAddItemType(NF,$49303336,2.)
call ItemPoolAddItemType(NF,$49303331,2.)
call ItemPoolAddItemType(NF,$49303337,3.)
call ItemPoolAddItemType(NF,$49303335,3.)
call ItemPoolAddItemType(NF,$49303330,3.)
call ItemPoolAddItemType(NF,$49303334,4.)
call ItemPoolAddItemType(NF,$4930325A,4.)
call ItemPoolAddItemType(NF,$49303333,5.)
call ItemPoolAddItemType(NF,$49303258,5.)
call ItemPoolAddItemType(NF,$49303332,6.)
call ItemPoolAddItemType(NF,$49303259,6.)
set NG=CreateItemPool()
call ItemPoolAddItemType(NG,$49303251,1)
set NH=CreateItemPool()
set KW=13
loop
exitwhen KW>62
if KW>40 then
call ItemPoolAddItemType(NH,LJ[KW],6.)
else
call ItemPoolAddItemType(NH,LJ[KW],9.)
endif
set KW=KW+1
endloop
endfunction
function jS takes nothing returns nothing
set NE=CreateTrigger()
call TriggerRegisterTimerEventSingle(NE,1.)
call TriggerAddAction(NE,function jR)
endfunction
function jT takes nothing returns nothing
if GetUnitTypeId(GetTriggerUnit())==$65303145 then
call bs(DM,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),330,bk(DM,1,5),1,0)
else
endif
if GetOwningPlayer(GetTriggerUnit())!=Player(9) and GetOwningPlayer(GetTriggerUnit())!=Player(10) then
set Mt[3]=GetUnitLoc(GetTriggerUnit())
if GetUnitTypeId(GetTriggerUnit())==$68706878 then
call CreateItemLoc($6B336D33,Mt[3])
else
endif
if GetUnitTypeId(GetTriggerUnit())==$6E677264 then
call CreateItemLoc($6B336D32,Mt[3])
else
endif
if GetUnitTypeId(GetTriggerUnit())==$6E777764 then
call CreateItemLoc($676C736B,Mt[3])
else
endif
if GetUnitTypeId(GetTriggerUnit())==$6E747264 then
call CreateItemLoc($676F7072,Mt[3])
else
endif
if GetUnitTypeId(GetTriggerUnit())==$65647279 then
call CreateItemLoc(LJ[GetRandomInt(13,62)],Mt[3])
else
endif
call RemoveLocation(Mt[3])
else
endif
endfunction
function jU takes nothing returns nothing
set Ju=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(Ju,Player(PLAYER_NEUTRAL_AGGRESSIVE),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(Ju,Player(8),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Ju,function jT)
endfunction
function jV takes nothing returns nothing
endfunction
function jW takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==false
endfunction
function jX takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(Ce,-10000.,2257.,false)
if huntingFinish==true  then 
call UnitAddAbility(Ce,'Ab3p')
endif
endfunction
function jY takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(Cm,-14323.,1800.,false)
if huntingFinish==true  then 
call UnitAddAbility(Cm,'Ab3p')
endif
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|Cff00ff00霸王咕嘎再次出现在隐秘洞窟")
endfunction
function jZ takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(Cl,-11666.,5800.,false)
call SetHeroLevel(Cl,GetHeroLevel(Cl)+5,false)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|Cff00ff00黑水玄蛇再次出现在幽冥蛇洞")

if huntingFinish==true  then 
    set huntingBoss[4]=true
    call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00黑水玄蛇已被标记！")
     call UnitAddAbility(Cl,'Ab3p')
else
    set huntingBoss[4]=false
endif
endfunction
function ja takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(Ck,-12400.,-2050.,false)
call ReviveHero(Cg,12385.,11550.,false)
call ReviveHero(Ch,12716.,9735.,false)
call ReviveHero(Ci,12600.,7380.,false)
call ReviveHero(Cj,12600.,5777.,false)
call SetUnitInvulnerable(Ck,true)
endfunction
// 死亡触发函数
function jb takes nothing returns nothing
local integer KW
local timer MG
local integer Jk
local unit VK=GetKillingUnit()
local integer touzi =0
local group loc_group=CreateGroup()
local unit loc_u
// 黄忠击杀判定
local unit killer = GetKillingUnitBJ()
// if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) and GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingFinish==true then
// call archeryEvent(1)
// endif
// if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE) and GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingFinish==true then
// call archeryEvent(3)
// endif
// 
if killer == zhuiSuiZhe then
if IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true then
call AddHeroXPSwapped(GetUnitLevel(C5) * GetRandomInt(1, GetUnitLevel(C5) ) *20, zhuGeGuo, true)
else
call AddHeroXPSwapped(GetUnitLevel(C5) * GetRandomInt(1,GetUnitLevel(C5)), zhuGeGuo, true)
endif
endif

// 如果死的是张角
if GetTriggerUnit()== EI then
call GroupEnumUnitsInRange(loc_group,GetUnitX(EI),GetUnitY(EI),1000,null)
loop
set loc_u=FirstOfGroup(loc_group)
exitwhen loc_u == zhangjiao or GetUnitTypeId(loc_u) == $484D5331 or loc_u ==null
call GroupRemoveUnit(loc_group,loc_u)
endloop
if loc_u !=null then
set Mt[2]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc('it0v',Mt[2])
call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "罢了罢了,我太平教义自有后人传承！")
endif
call DestroyGroup(loc_group)
endif


// 如果击杀者是孙乾，且灌铅骰子技能等级>0
if killer == sunQian and GetUnitAbilityLevel(killer, $41623075) >0 then
set touzi = GetRandomInt(1, 6) 
set touzi = touzi + GetRandomInt(1, 6)
// call DisplayTextToPlayer(GetOwningPlayer(killer), 0, 0, "|Cff00ff00两枚骰子掷出了 " + I2S(touzi) + " 点,获得 " + I2S(10 * touzi * GetUnitAbilityLevel(killer, $41623075)) +" 金钱奖励")
call AdjustPlayerStateBJ(7 * touzi * GetUnitAbilityLevel(killer, $41623075), GetOwningPlayer(killer), PLAYER_STATE_RESOURCE_GOLD)
if touzi == 12 then
call DisplayTextToPlayer(GetOwningPlayer(killer), 0, 0, "|Cff00ff00幸运日！额外获得" + I2S((70 * GetUnitAbilityLevel(killer, $41623075))) + " 金钱奖励")
call AdjustPlayerStateBJ(70*GetUnitAbilityLevel(killer, $41623075),GetOwningPlayer(killer),PLAYER_STATE_RESOURCE_GOLD)
endif
endif

// 如果被击杀的是潘璋、且触发条件是武神等级>0(击杀者是关锁)
if GetTriggerUnit()==Ek and GetUnitAbilityLevel(killer,$41303653)>0 then
call UnitAddAbilityBJ($4130304B,killer)
call UnitMakeAbilityPermanent(killer,true,$4130304B)
call IncUnitAbilityLevelSwapped($4130304B,killer)
call IncUnitAbilityLevelSwapped($4130304B,killer)
call IncUnitAbilityLevelSwapped($4130304B,killer)
call SetUnitState(killer,ConvertUnitState(37),GetUnitState(killer,ConvertUnitState(37))-.1)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(killer)+"：今日以尔首级，告吾父亲在天之灵！")
// 如果被击杀的是潘璋、且触发条件是圣灵护体等级>0(击杀者是关凤)
elseif GetTriggerUnit()==Ek and GetUnitAbilityLevel(killer,$41303130)>0 then
call UnitAddAbilityBJ($41303653,killer)
call UnitMakeAbilityPermanent(killer,true,$41303653)
call IncUnitAbilityLevelSwapped($41303653,killer)
call IncUnitAbilityLevelSwapped($41303653,killer)
call IncUnitAbilityLevelSwapped($41303653,killer)
call SetUnitState(killer,ConvertUnitState(37),GetUnitState(killer,ConvertUnitState(37))-.2)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(killer)+"：今日以尔首级，告吾父亲在天之灵！")
// 如果被击杀的是潘璋、且触发条件是真实残像等级>0(击杀者是关兴)
elseif GetTriggerUnit()==Ek and GetUnitAbilityLevel(killer,$4130304B)>0 then
call UnitAddAbilityBJ($41303130,killer)
call UnitMakeAbilityPermanent(killer,true,$41303130)
call IncUnitAbilityLevelSwapped($41303130,killer)
call IncUnitAbilityLevelSwapped($41303130,killer)
call IncUnitAbilityLevelSwapped($41303130,killer)
call SetUnitState(killer,ConvertUnitState(37),GetUnitState(killer,ConvertUnitState(37))-.1)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(killer)+"：今日以尔首级，告吾父亲在天之灵！")
endif
if GetOwningPlayer(GetTriggerUnit())==Player(9) or GetOwningPlayer(GetTriggerUnit())==Player(10) then
call cF(GetTriggerUnit(),5.)
else
endif
if GetUnitTypeId(GetKillingUnitBJ())==$484A5330 or GetUnitTypeId(GetKillingUnitBJ())==$484A5331 or GetUnitTypeId(GetKillingUnitBJ())==$484A5332 or GetUnitTypeId(GetKillingUnitBJ())==$484A5333 then
if GetUnitAbilityLevel(VK,$41534A38)>0 and GetUnitState(VK,UNIT_STATE_LIFE)>.405 then
call SetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$3063786A),GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$3063786A))+1)
call XX(VK,$41534A38,1,109,100.+I2R(GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$3063786A))))
call XX(VK,$4130434C,1,109,1+I2R(GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$3063786A)))*.001)
call XX(VK,$4130434D,1,109,.1+I2R(GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$3063786A)))*.01)
call UnitRemoveAbility(VK,$4130434D)
call UnitAddAbility(VK,$4130434D)
call UnitRemoveAbility(VK,$4130434C)
call UnitAddAbility(VK,$4130434C)
call UnitRemoveAbility(VK,$41534A38)
call UnitAddAbility(VK,$41534A38)
else
endif
else
if GetUnitTypeId(GetKillingUnitBJ())==$484C4C51 or GetUnitTypeId(GetKillingUnitBJ())==$484C5132 or GetUnitTypeId(GetKillingUnitBJ())==$484C5131 then
if GetUnitAbilityLevel(VK,$41304353)>0 and GetUnitState(VK,UNIT_STATE_LIFE)>.405 then
call SetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070),GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070))+1)
call XX(VK,$41304353,1,109,100.+I2R(GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070))))
call XX(VK,$41304355,1,109,1+I2R(GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070)))*.001)
call UnitRemoveAbility(VK,$41304353)
call UnitAddAbility(VK,$41304353)
call UnitRemoveAbility(VK,$41304355)
call UnitAddAbility(VK,$41304355)
else
endif
else
if GetUnitTypeId(GetKillingUnitBJ())==$48594D30 or GetUnitTypeId(GetKillingUnitBJ())==$48594D31 then
if GetUnitAbilityLevel(VK,$4130454E)>0 and GetUnitState(VK,UNIT_STATE_LIFE)>.405 then
call SetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070),GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070))+1)
call XX(VK,$4130454E,1,109,0.+I2R(GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070))))
call XX(VK,$41304355,1,109,1+I2R(GetItemCharges(LoadItemHandle(Ia,GetHandleId(VK),$30707070)))*(.001*.5))
call UnitRemoveAbility(VK,$4130454E)
call UnitAddAbility(VK,$4130454E)
call UnitRemoveAbility(VK,$41304355)
call UnitAddAbility(VK,$41304355)
else
endif
else
endif
endif
endif
set Mt[2]=GetUnitLoc(GetTriggerUnit())
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetRandomInt(1,5)==3 then
call CreateItemLoc(ChooseRandomItemExBJ(GetRandomInt(3,8),ITEM_TYPE_PERMANENT),Mt[2])
if H1==true and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) and GetRandomInt(1,3)==3 then
set NL[8000]=RandomItemInRectSimpleBJ(BD)
if NL[8000]!=null then
call SetItemVisible(NL[8000],true)
call SetItemPosition(NL[8000],GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
set H1=false
endif
else
endif
else
endif
if GetUnitLevel(GetTriggerUnit())<6 and GetRandomInt(1,120)==90 then
call CreateItemLoc(LJ[GetRandomInt(160,180)],Mt[2])
else
endif
if GetHeroLevel(GetTriggerUnit())>=50 and GetRandomInt(1,10)==3 then
call CreateItemLoc(LJ[GetRandomInt(13,39)],Mt[2])
else
endif
if GetHeroLevel(GetTriggerUnit())>=100 and GetUnitPointValue(GetTriggerUnit())!=9 and GetRandomInt(1,4)==2 then
call CreateItemLoc(LJ[GetRandomInt(40,63)],Mt[2])
else
endif
if GetHeroLevel(GetTriggerUnit())>=100 and GetUnitPointValue(GetTriggerUnit())!=9 then
call CreateItemLoc(LJ[GetRandomInt(13,41)],Mt[2])
else
endif
if GetHeroLevel(GetTriggerUnit())>=90 and GetRandomInt(1,30)==4 then
call CreateItemLoc(LJ[GetRandomInt(43,62)],Mt[2])
else
endif
if GetUnitLevel(GetTriggerUnit())>=10 and GetRandomInt(1,75)==90 then
call CreateItemLoc(ChooseRandomItemExBJ(GetRandomInt(3,8),ITEM_TYPE_PERMANENT),Mt[2])
else
endif
if GetUnitPointValue(GetTriggerUnit())==10 and GetRandomInt(1,6)==3 then
call CreateItemLoc($706F6D6E,Mt[2])
else
endif
if GetUnitPointValue(GetTriggerUnit())==10 and GetRandomInt(1,20)==15 then
call CreateItemLoc($73727263,Mt[2])
else
endif
if GetUnitPointValue(GetTriggerUnit())!=9 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) then
set KW=1
loop
exitwhen KW>GetRandomInt(1,Gq)
call PlaceRandomItem(NF,GetUnitX(GetTriggerUnit())+100.*I2R(GetRandomInt(-6,6)),GetUnitY(GetTriggerUnit())+100.*I2R(GetRandomInt(-6,6)))
set KW=KW+1
endloop
else
endif
if GetUnitAbilityLevel(VK,$41304542)>0 then
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
call AddHeroXP(VK,50,false)
else
call AddHeroXP(VK,5,false)
endif
else
endif
if GetTriggerUnit()==Ck then
    // 黄忠击杀蚩尤判定，因为开头已经默认+6，所以这里+24

if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingFinish==true then
call archeryEvent(12)
endif
if Gq>6 then
if GetItemPlayer(SY)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetItemPosition(SY,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call SetItemVisible(SY,true)
call SetItemPlayer(SY,GetOwningPlayer(GetKillingUnitBJ()),true)
else
endif
else
    // 1/3的概率出三尖两刃
if GetRandomInt(0,2)==0 then
call CreateItem($49303249,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
endif
// 1/6概率出雷霆之力
if GetRandomInt(0,6)==5 then
call CreateItem($49303042,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
 // 1/50的概率出蚩尤魔刀
if GetRandomInt(0,50)==27 then
call CreateItem($49303233,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
set Jk=1
loop
exitwhen Jk>8
call SaveInteger(Ia,$C27B93C6,Jk,LoadInteger(Ia,$C27B93C6,Jk)+1)
set Jk=Jk+1
endloop
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cffffcc00成功击杀蚩尤,请到积分商店领取击杀奖励并可以获得10点全属性！！！")
set MG=CreateTimer()
call TimerStart(MG,60.,false,function ja)
else
if GetTriggerUnit()==Cl then
if GetRandomInt(1,10)==2 then
else
call CreateItem($646B6677,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingFinish==true then
call archeryEvent(9)
endif
if Gq>=7 then
if GetRandomInt(0,2)==2 then
set VL[0]=PlaceRandomItem(NG,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call ItemPoolRemoveItemType(NG,GetItemTypeId(VL[0]))
set VL[0]=null
if GetItemPlayer(SY)==Player(PLAYER_NEUTRAL_PASSIVE) then
call SetItemPosition(SY,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call SetItemVisible(SY,true)
call SetItemPlayer(SY,GetOwningPlayer(GetKillingUnitBJ()),true)
else
endif
else
endif
else
if GetRandomInt(0,2)==2 then
call CreateItem($49303249,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
if GetRandomInt(0,3)==3 then
call CreateItem($49303057,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
if GetRandomInt(0,6)==5 then
call CreateItem($49303042,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
if GetUnitTypeId(GetKillingUnitBJ())==$51544453 or GetUnitTypeId(GetKillingUnitBJ())==$48303051 then
call CreateItem($6D67746B,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
endif
if GetRandomInt(0,4)==2 then
call CreateItem($49303250,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
set MG=CreateTimer()
call TimerStart(MG,60.,false,function jZ)
else
if GetTriggerUnit()==Cm then
    if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit)and huntingFinish==true then
call archeryEvent(24)
endif
    // 霸王套掉落机制
set VL[0]=PlaceRandomItem(SZ,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
// call ItemPoolRemoveItemType(SZ,GetItemTypeId(VL[0]))
set VL[0]=null
set MG=CreateTimer()
call TimerStart(MG,60.,false,function jY)
else
    // 强化技掉落机制
if GetTriggerUnit()==Ce then
    if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and archeryTime<120 then
call archeryEvent(6)
endif
if GetUnitAbilityLevel(Ce,$41304244)==0 and GetRandomInt(1,5)==3 then
if GetRandomInt(1,20)==19 then
// call UnitAddAbility(Ce,$41304244)
call SetItemInvulnerable(CreateItem($4930324E,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
else
if GetRandomInt(1,20)==11 then
// call UnitAddAbility(Ce,$41304244)
call SetItemInvulnerable(CreateItem($4930324D,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
else
if GetRandomInt(1,20)==11 then
// call UnitAddAbility(Ce,$41304244)
call SetItemInvulnerable(CreateItem($4930324A,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
else
if GetRandomInt(1,20)==11 then
// call UnitAddAbility(Ce,$41304244)
call SetItemInvulnerable(CreateItem($4930324C,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
else
if GetRandomInt(1,20)==11 then
// call UnitAddAbility(Ce,$41304244)
call SetItemInvulnerable(CreateItem($4930324B,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
else
endif
endif
endif
endif
endif
else
endif
if GetRandomInt(1,10)==2 then
else
call CreateItem($646B6677,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
set MG=CreateTimer()
call TimerStart(MG,60.,false,function jX)
else
endif
endif
endif
endif
call RemoveLocation(Mt[2])
set VK=null
set MG=null
endfunction
function jc takes nothing returns nothing
set VJ=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(VJ,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(VJ,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(VJ,Player(PLAYER_NEUTRAL_AGGRESSIVE),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(VJ,Condition(function jW))
call TriggerAddAction(VJ,function jb)
endfunction
function jd takes nothing returns nothing
endfunction
function je takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),GetOwningPlayer(GetKillingUnitBJ()))==false and bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$7462616B)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$74666172)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$74626172)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$7462736D)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A31)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$63636D64)==true
endfunction
function jf takes nothing returns nothing
set GI[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=GI[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]+1
if GI[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]==100 and bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$7462616B)==true then
set GI[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=0
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$7462616B))
call UnitAddItemByIdSwapped(LJ[GetRandomInt(201,205)],Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
else
endif
if GI[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]==100 and bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$74666172)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$74626172)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$7462736D)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A31)==true or bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$63636D64)==true then
set GI[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=0
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$74666172))
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$74626172))
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$7462736D))
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A31))
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$63636D64))
call UnitAddItemByIdSwapped(LJ[GetRandomInt(206,210)],Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
else
endif
endfunction
function jg takes nothing returns nothing
set NI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(NI,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(NI,Condition(function je))
call TriggerAddAction(NI,function jf)
endfunction
function jh takes nothing returns nothing
set Mt[8]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($77746C67,Mt[8])
call SetItemInvulnerable(GetLastCreatedItem(),true)
call RemoveLocation(Mt[8])
endfunction
function ji takes nothing returns nothing
set NJ=CreateTrigger()
call TriggerRegisterUnitEvent(NJ,EH,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(NJ,EY,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(NJ,EP,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(NJ,D7,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(NJ,Ed,EVENT_UNIT_DEATH)
call TriggerAddAction(NJ,function jh)
endfunction
function jj takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==$4E6B6C6A
endfunction
function jk takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set Mt[8]=GetRectCenter(s)
call ReviveHeroLoc(CN,Mt[8],true)
call RemoveLocation(Mt[8])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|Cff00ff00项羽之魂再次出现在地下密室！")
if Gq>=6 then
call ModifyHeroStat(bj_HEROSTAT_STR,CN,bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,CN,bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,CN,bj_MODIFYMETHOD_ADD,50)
else
endif
// 黄忠印记标记
if huntingFinish==true and archeryTime<30 and GetRandomInt(1,5)>2 then 
    set huntingBoss[0]=true
    call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00项羽之魂已被标记！")
    call UnitAddAbility(CN,'Ab3p')
else
    set huntingBoss[0]=false
endif
endfunction
// 项羽击杀事件
function jl takes nothing returns nothing
local timer MG
// 黄忠击杀判定
local unit killer = GetKillingUnitBJ()
if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingBoss[0]==true then
call archeryEvent(2)
endif

// call archeryEvent(2)
set Mt[8]=GetUnitLoc(GetTriggerUnit())
if Gq >6 then
call CreateItemLoc(hight_level_item_pool[GetRandomInt(13,79)],Mt[8])
else
call CreateItemLoc(LJ[GetRandomInt(13,63)],Mt[8])
endif

if GetRandomInt(1,5)==4  then
if Gq <7 then
call CreateItemLoc(LJ[GetRandomInt(71,78)],Mt[8])
else
call CreateItemLoc(hight_level_item_pool[GetRandomInt(71,79)],Mt[8])
endif
endif


if GetRandomInt(1,10)==5 then
call CreateItemLoc($636E686E,Mt[8])
else
if GetRandomInt(1,10)==5 then
call CreateItemLoc($73656872,Mt[8])
else
endif
endif
// 如果触发单位没有追日靴，且骰子的值》95
// GetUnitAbilityLevel(GetTriggerUnit(),$4130344D)==0 and
if  GetRandomInt(1,100)>98 then
call UnitAddAbility(GetTriggerUnit(),$4130344D)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130344D)
call SetItemUserData(CreateItem($49303030,GetUnitX(CN),GetUnitY(CN)),288)
else
endif
call RemoveLocation(Mt[8])
set MG=CreateTimer()
call TimerStart(MG,60.,false,function jk)
set MG=null
endfunction
// 注册项羽事件
function jm takes nothing returns nothing
set NK=CreateTrigger()
call TriggerRegisterUnitEvent(NK,CN,EVENT_UNIT_DEATH)
call TriggerAddCondition(NK,Condition(function jj))
call TriggerAddAction(NK,function jl)
// call TriggerAddAction(NK,function archeryEvent(2))
endfunction
function jn takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
if GetRandomInt(1,4)==1 then
set Jd[30]=GetRandomLocInRect(BT)
call ReviveHeroLoc(CQ,Jd[30],true)
call RemoveLocation(Jd[30])
else
if GetRandomInt(1,4)==2 then
set Jd[30]=GetRandomLocInRect(BS)
call ReviveHeroLoc(CQ,Jd[30],true)
call RemoveLocation(Jd[30])
else
if GetRandomInt(1,4)==3 then
set Jd[30]=GetRandomLocInRect(BU)
call ReviveHeroLoc(CQ,Jd[30],true)
call RemoveLocation(Jd[30])
else
if GetRandomInt(5,9)==5 then
set Jd[30]=GetRandomLocInRect(BV)
call ReviveHeroLoc(CQ,Jd[30],true)
call RemoveLocation(Jd[30])
else
set Jd[30]=GetRandomLocInRect(r)
call ReviveHeroLoc(CQ,Jd[30],true)
call RemoveLocation(Jd[30])
endif
endif
endif
endif
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|Cff00ff00刑天魔神再次出现在神秘山洞！")
if Gq>=6 then
call ModifyHeroStat(bj_HEROSTAT_STR,CQ,bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,CQ,bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_INT,CQ,bj_MODIFYMETHOD_ADD,50)
else
endif
// 黄忠印记标记
if huntingFinish==true and archeryTime<30 and GetRandomInt(1,5)>2 then 
    set huntingBoss[1]=true
    call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00刑天魔神已被标记！")
    call UnitAddAbility(CQ,'Ab3p')
else
    set huntingBoss[1]=false
endif
endfunction

function jo takes nothing returns nothing
local timer MG
// 黄忠击杀判定
local unit killer = GetKillingUnitBJ()
if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingBoss[1]==true then
call archeryEvent(2)
endif
set Jd[31]=GetUnitLoc(CQ)

if Gq >6 then
call CreateItemLoc(hight_level_item_pool[GetRandomInt(13,79)],Jd[31])
else
call CreateItemLoc(LJ[GetRandomInt(13,63)],Jd[31])
endif

if GetRandomInt(1, 8) == 3  then
if Gq <7 then
        call CreateItemLoc(LJ[GetRandomInt(71,78)],Jd[31])
    else
        call CreateItemLoc(hight_level_item_pool[GetRandomInt(71,79)],Jd[31])
    endif
endif

if GetRandomInt(1,3)==1 then
call CreateItemLoc($6772736C,Jd[31])
else
endif
call RemoveLocation(Jd[31])
set MG=CreateTimer()
call TimerStart(MG,60.,false,function jn)
set MG=null
endfunction
// 注册刑天事件
function jp takes nothing returns nothing
set NM=CreateTrigger()
call TriggerRegisterUnitEvent(NM,CQ,EVENT_UNIT_DEATH)
call TriggerAddAction(NM,function jo)
endfunction

function jq takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(CO,9840.,13180.,false)
if Gq>=6 then
call ModifyHeroStat(bj_HEROSTAT_STR,CO,bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,CO,bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_INT,CO,bj_MODIFYMETHOD_ADD,50)
else
endif
// 黄忠印记标记
if huntingFinish==true and archeryTime<80 and GetRandomInt(1,5)>2 then 
    set huntingBoss[2]=true
    call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00 夔牛（黑）已被标记！")
    call UnitAddAbility(CO,'Ab3p')
else
    set huntingBoss[2]=false
endif
endfunction
function jr takes nothing returns nothing
local timer MG
// 黄忠击杀判定
local unit killer = GetKillingUnitBJ()
if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingBoss[2]==true then
call archeryEvent(4)
endif
set Jd[66]=GetUnitLoc(GetTriggerUnit())
// 测试难7以上掉落
// call DisplayTextToForce(GetPlayersAll(),"|Cffff0000正在测试物品掉落")
// call CreateItemLoc(LJ[GetRandomInt(71,78)],Jd[66])
if Gq >6 then
call CreateItemLoc(hight_level_item_pool[GetRandomInt(13,79)],Jd[66])
else
call CreateItemLoc(LJ[GetRandomInt(13,63)],Jd[66])
endif

if GetRandomInt(1, 5) == 3 then
if Gq <7 then
        call CreateItemLoc(LJ[GetRandomInt(71,78)],Jd[66])
    else
        call CreateItemLoc(hight_level_item_pool[GetRandomInt(71,79)],Jd[66])
    endif
endif

if GetRandomInt(1,7)==7 then
call CreateItemLoc($636E686E,Jd[66])
else
if GetRandomInt(1,10)==7 then
call CreateItemLoc($73656872,Jd[66])
else
endif
endif
call RemoveLocation(Jd[66])
set MG=CreateTimer()
call TimerStart(MG,60.,false,function jq)
set MG=null
endfunction
// 红牛事件
function js takes nothing returns nothing
set NN=CreateTrigger()
call TriggerRegisterUnitEvent(NN,CO,EVENT_UNIT_DEATH)
call TriggerAddAction(NN,function jr)
endfunction

// 大蛇事件
function sheBorn takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(she,1878.7,7866.2,false)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|Cff00ff00八岐化蛇再次出现在玄武洞窟")
if huntingFinish==true  then 
call UnitAddAbility(she,'Ab3p')
endif
if Gq>=6 then
call ModifyHeroStat(bj_HEROSTAT_STR,she,bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,she,bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_INT,she,bj_MODIFYMETHOD_ADD,50)
else
endif

// if huntingFinish==true and archeryTime<80 and GetRandomInt(1,5)>2 then 
//     set huntingBoss[2]=true
//     call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00 夔牛（黑）已被标记！")
// else
//     set huntingBoss[2]=false
// endif
endfunction

function sheDeath takes nothing returns nothing
local timer MG

local unit killer = GetKillingUnitBJ()
if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit)  then
call archeryEvent(8)
endif
set Jd[66]=GetUnitLoc(GetTriggerUnit())
if Gq >6 then
call CreateItemLoc(hight_level_item_pool[GetRandomInt(13,79)],Jd[66])
else
call CreateItemLoc(LJ[GetRandomInt(13,63)],Jd[66])
endif

if GetRandomInt(1,10)==2 then
else
call CreateItem($646B6677,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif

if GetRandomInt(1,5)==3 then
    if Gq <7 then
        call CreateItemLoc(LJ[GetRandomInt(71,78)],Jd[66])
    else
        call CreateItemLoc(hight_level_item_pool[GetRandomInt(71,79)],Jd[66])
    endif
endif

if GetRandomInt(1,7)==7 then
call CreateItemLoc($636E686E,Jd[66])
else
if GetRandomInt(1,10)==7 then
call CreateItemLoc($73656872,Jd[66])
else
endif
endif

// if GetRandomInt(1,5)==3 then
// if GetRandomInt(1,20)==19 then
// call SetItemInvulnerable(CreateItem($4930324E,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324D,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324A,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324C,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324B,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// else
// endif
// endif

// 30%概率掉落幸运币
if GetRandomInt(1, 10) > 7 then
call SetItemInvulnerable(CreateItem($69743067,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
endif

call RemoveLocation(Jd[66])
set MG=CreateTimer()
call TimerStart(MG,60.,false,function sheBorn)
set MG=null
endfunction

function sheEvent takes nothing returns nothing
set she_trg=CreateTrigger()
call TriggerRegisterUnitEvent(she_trg,she,EVENT_UNIT_DEATH)
call TriggerAddAction(she_trg,function sheDeath)
endfunction
// 蜘蛛事件
function spiderBorn takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(spider,-7535.7,-7173.,false)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|Cff00ff00蜘蛛罔象再次出现在丛林深处")
if huntingFinish==true  then 
call UnitAddAbility(spider,'Ab3p')
endif
if Gq>=6 then
call ModifyHeroStat(bj_HEROSTAT_STR,spider,bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_AGI,spider,bj_MODIFYMETHOD_ADD,40)
call ModifyHeroStat(bj_HEROSTAT_INT,spider,bj_MODIFYMETHOD_ADD,20)
else
endif

// if huntingFinish==true and archeryTime<80 and GetRandomInt(1,5)>2 then 
//     set huntingBoss[2]=true
//     call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00 夔牛（黑）已被标记！")
// else
//     set huntingBoss[2]=false
// endif
endfunction

function spiderDeath takes nothing returns nothing
local timer MG

local unit killer = GetKillingUnitBJ()
if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) then
call archeryEvent(8)
endif
set Jd[66]=GetUnitLoc(GetTriggerUnit())

if Gq >6 then
call CreateItemLoc(hight_level_item_pool[GetRandomInt(13,79)],Jd[66])
else
call CreateItemLoc(LJ[GetRandomInt(13,63)],Jd[66])
endif

if GetRandomInt(1,10)==2 then
else
call CreateItem($646B6677,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
if GetRandomInt(1,5)==3 then
if Gq <7 then
        call CreateItemLoc(LJ[GetRandomInt(71,78)],Jd[66])
    else
        call CreateItemLoc(hight_level_item_pool[GetRandomInt(71,79)],Jd[66])
    endif
else
endif
// 青龙刀
if GetRandomInt(1,12)==7 then
call CreateItemLoc($73666F67,Jd[66])
endif
if GetRandomInt(1,7)==7 then
call CreateItemLoc($636E686E,Jd[66])
else
if GetRandomInt(1,10)==7 then
call CreateItemLoc($73656872,Jd[66])
else
endif
endif
// 1%概率掉落蚩尤披风
if GetRandomInt(1,100)==33 then
call SetItemInvulnerable(CreateItem($49303237,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
endif
// if GetRandomInt(1,5)==3 then
// if GetRandomInt(1,20)==19 then
// call SetItemInvulnerable(CreateItem($4930324E,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324D,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324A,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324C,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// elseif GetRandomInt(1,20)==11 then
// call SetItemInvulnerable(CreateItem($4930324B,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),true)
// else
// endif
// endif

call RemoveLocation(Jd[66])
set MG=CreateTimer()
call TimerStart(MG,60.,false,function spiderBorn)
set MG=null
endfunction

function spiderEvent takes nothing returns nothing
set spider_trg=CreateTrigger()
call TriggerRegisterUnitEvent(spider_trg,spider,EVENT_UNIT_DEATH)
call TriggerAddAction(spider_trg,function spiderDeath)
endfunction

function jt takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call ReviveHero(CP,9350.,13180.,false)
if Gq>=6 then
call ModifyHeroStat(bj_HEROSTAT_STR,CP,bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,CP,bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_INT,CP,bj_MODIFYMETHOD_ADD,50)
else
endif
// 黄忠印记标记
if huntingFinish==true and archeryTime<80 and GetRandomInt(1,5)>2 then 
    set huntingBoss[3]=true
    call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00夔牛（红）已被标记！")
    call UnitAddAbility(CP,'Ab3p')
else
    set huntingBoss[3]=false
endif
endfunction
function ju takes nothing returns nothing
local timer MG
// 黄忠击杀判定
local unit killer = GetKillingUnitBJ()
if GetUnitTypeId(killer) == GetUnitTypeId(huntingUnit) and huntingBoss[3]==true then
call archeryEvent(4)
endif
set Jd[77]=GetUnitLoc(GetTriggerUnit())
if Gq > 6 then
if H3==true and GetRandomInt(1,7)==3 then
set NL[8001]=RandomItemInRectSimpleBJ(Bt)
if NL[8001]!=null then
call SetItemVisible(NL[8001],true)
call SetItemPosition(NL[8001],GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
set NL[8001]=null
else
set H3=false
endif
else
endif
else
endif
if GetRandomInt(1,5)==3 then
if Gq <7 then
        call CreateItemLoc(LJ[GetRandomInt(71,78)],Jd[66])
    else
        call CreateItemLoc(hight_level_item_pool[GetRandomInt(71,79)],Jd[66])
    endif
endif
if GetRandomInt(1,7)==7 then
call CreateItemLoc($636E686E,Jd[77])
else
if GetRandomInt(1,7)==7 then
call CreateItemLoc($73656872,Jd[77])
else
endif
endif
call RemoveLocation(Jd[77])
set MG=CreateTimer()
call TimerStart(MG,60.,false,function jt)
set MG=null
endfunction
function jv takes nothing returns nothing
set NO=CreateTrigger()
call TriggerRegisterUnitEvent(NO,CP,EVENT_UNIT_DEATH)
call TriggerAddAction(NO,function ju)
endfunction
function jw takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function jx takes nothing returns nothing
if bC(GetTriggerUnit(),$706F6D6E)==true then
call AdjustPlayerStateBJ(GetItemCharges(aj(GetTriggerUnit(),$706F6D6E))*3000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call RemoveItem(aj(GetTriggerUnit(),$706F6D6E))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"猎人：“这些兽皮还不错！”")
else
if bC(GetTriggerUnit(),$73727263)==true then
    // 如果UP数量大于50，则给一个蛋
if GetItemCharges(bW(GetTriggerUnit(), $73727263)) > 49 then
call UnitAddItem(GetTriggerUnit(), CreateItem('it0p', GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit())))
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DD,"猎人",null,"这就是不知道什么妖兽的蛋，送给你！",bj_TIMETYPE_ADD,0,true)
endif
call AdjustPlayerStateBJ(GetItemCharges(aj(GetTriggerUnit(),$73727263))*8000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call RemoveItem(aj(GetTriggerUnit(),$73727263))
if GetUnitUserData(DD)==0 then
call SetUnitUserData(DD,1)
call UnitAddItemByIdSwapped($70636C72,GetTriggerUnit())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DD,"猎人",null,"你带回来的兽皮太棒了！看你一定是个打猎的好手,有个好东西卖给你",bj_TIMETYPE_ADD,0,true)
else
endif
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"猎人：“你可以帮我找些兽皮回来吗？我愿意高价收购！如果一次性给我50张优质兽皮，我还会送你一枚奇异蛋！”")
endif
endif
// 养由基之弓
if GetUnitTypeId(GetTriggerUnit())=='HHZ1' or GetUnitTypeId(GetTriggerUnit())==$48303036 or GetUnitTypeId(GetTriggerUnit())==$4830304D and bC(GetTriggerUnit(),$72616D33)==true and huntingTime>29 and huntingFinish==false then
    set huntingFinish=true
    set huntingUnit=GetTriggerUnit()
        call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DD,"猎人",null,"将军气概与天参，白发犹然困汉南。至死甘心无怨望，临降低首尚怀惭。宝刀灿雪彰神勇，铁骑临风忆战酣。千古高名应不泯，长随孤月照湘潭!",bj_TIMETYPE_ADD,0,true)
        call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00黄忠获得觉醒技能：仓皇北顾！ |cffff0000黄忠周期性标记地图上的生物，每击杀一名被标记的生物会获得相应的印记层数！每层印记增加5点攻击距离，3点攻击力，攻击在7秒内额外造成印记层数*2的基础护甲击破！最大层数150，最大护甲击破150")
        call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00黄忠减少0.2攻击间隔！")
        call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.2)
endif

if GetUnitTypeId(GetTriggerUnit())=='HHZ1' or GetUnitTypeId(GetTriggerUnit())==$48303036 or GetUnitTypeId(GetTriggerUnit())==$4830304D and bC(GetTriggerUnit(),$72616D33)==true and huntingStart==false and huntingFinish==false then 
     set huntingStart=true
    call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DD,"猎人",null,"我听闻当年廉颇为之一饭斗米,肉十斤,被甲上马,以示尚可用。汉升将军如今可是比不得廉将军？",bj_TIMETYPE_ADD,0,true)
    call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00隐藏任务开启！使用养由基之弓射出30箭强化箭来证明给猎人看！")
   
endif


endfunction
function jy takes nothing returns nothing
set NP=CreateTrigger()
call a9(NP,j)
call TriggerAddCondition(NP,Condition(function jw))
call TriggerAddAction(NP,function jx)
endfunction
function jz takes nothing returns nothing
set NT[19]=GetRectCenter(t)
call CreateNUnitsAtLoc(1,NU[GetRandomInt(1,5)],Player(8),NT[19],bj_UNIT_FACING)
call RemoveLocation(NT[19])
endfunction
function j0 takes nothing returns nothing
set NS=CreateTrigger()
call DisableTrigger(NS)
// 百姓刷新触发器
call TriggerRegisterTimerEventPeriodic(NS,3.)
call TriggerAddAction(NS,function jz)
endfunction
function j1 takes nothing returns boolean
return GetUnitPointValue(GetTriggerUnit())==20
endfunction
function j2 takes nothing returns nothing
call AdjustPlayerStateBJ(10*GetUnitLevel(Dz),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function j3 takes nothing returns nothing
set Mt[5]=GetUnitLoc(GetTriggerUnit())
set Fr=Fr+1
call DisplayTimedTextToForce(GetPlayersAll(),2.,"救出"+I2S(Fr)+"个百姓")
call ForForce(ak(Player(8)),function j2)
if GetRandomInt(1,10)==7 then
call CreateItemLoc(ChooseRandomItemExBJ(GetRandomInt(3,8),ITEM_TYPE_PERMANENT),Mt[5])
else
endif
// 百姓数量事件
if Fr==100 then
call ShowUnitShow(CX)
call SetUnitInvulnerable(CX,false)
call DisplayTextToForce(GetPlayersAll(),"众将军卫护百姓已有100人，据百姓传言:西域有神器存在!")
call PingMinimapLocForForce(GetPlayersAll(),GetUnitLoc(CX),3.)
elseif Fr==150 then
call SetItemInvulnerable(CreateItem($49303251,-1220.,-5240.),true)
call DisplayTextToForce(GetPlayersAll(),"众将军卫护百姓已有150人，受百姓感召高祖降下斩蛇剑！）")
elseif Fr==200 then

call DisplayTextToForce(GetPlayersAll(),"众将军卫护百姓已有200人，所有英雄增加50点全属性！）")   
call ExecuteFunc ("batchAddHeroAttributes50")  
elseif Fr==250 then

call DisplayTextToForce(GetPlayersAll(),"在魏国的铁骑下居然没有一名百姓流离失所，所有英雄增加100点全属性！）") 
call ExecuteFunc ("batchAddHeroAttributes50")  
call ExecuteFunc ("batchAddHeroAttributes50")  
endif
if GetRandomInt(GetUnitLevel(Dz),150)==150 and GetUnitLevel(C5)>=15 then
call CreateNUnitsAtLoc(1,$6E303032,Player(10),Mt[5],bj_UNIT_FACING)
call IssueTargetOrder(GetLastCreatedUnit(),"attackonce",Dz)
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|cffffdead魏国刺客混入剑阁对孔明发起偷袭！！！")
else
endif
call RemoveUnit(GetTriggerUnit())
call RemoveLocation(Mt[5])
endfunction
function j4 takes nothing returns nothing
set NV=CreateTrigger()
call a9(NV,W)
call TriggerAddCondition(NV,Condition(function j1))
call TriggerAddAction(NV,function j3)
endfunction
function j5 takes nothing returns boolean
return GetEventDamage()>=10.
endfunction
function j6 takes nothing returns nothing
if GetUnitLifePercent(Dz)<=50. and GetEventDamage()>=100. then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000大男人友情提示:孔明血量过半,刷装备的各位虾米还有开小猜的朋友快回来保护")
call TriggerSleepAction(3.)
call EnableTrigger(GetTriggeringTrigger())
else
endif
if GetEventDamage()>=3000. then
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000大男人友情提示:来了个狠角色在伤害孔明,再不来救,就等着再不能临阵讨贼矣！")
else
endif
endfunction
function j7 takes nothing returns nothing
set NW=CreateTrigger()
call TriggerRegisterUnitEvent(NW,Dz,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(NW,Condition(function j5))
call TriggerAddAction(NW,function j6)
endfunction
function j8 takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())==Player(8)
endfunction
function j9 takes nothing returns nothing
call SelectHeroSkill(GetTriggerUnit(),$414F6372)
call SelectHeroSkill(GetTriggerUnit(),$41616B62)
call SelectHeroSkill(GetTriggerUnit(),$4162736B)
call SelectHeroSkill(GetTriggerUnit(),$414E6D6F)
call SelectHeroSkill(GetTriggerUnit(),$414F6878)
call SelectHeroSkill(GetTriggerUnit(),$41557473)
call SelectHeroSkill(GetTriggerUnit(),$41616D6B)
call SelectHeroSkill(GetTriggerUnit(),$41487462)
call SelectHeroSkill(GetTriggerUnit(),$4130324A)
call SelectHeroSkill(GetTriggerUnit(),$414F7777)
call SelectHeroSkill(GetTriggerUnit(),$414F6877)
call SelectHeroSkill(GetTriggerUnit(),$414F7332)
call SelectHeroSkill(GetTriggerUnit(),$41303432)
call SelectHeroSkill(GetTriggerUnit(),$41436362)
call SelectHeroSkill(GetTriggerUnit(),$41486164)
call SelectHeroSkill(GetTriggerUnit(),$414E736F)
call SelectHeroSkill(GetTriggerUnit(),$41556176)
call SelectHeroSkill(GetTriggerUnit(),$4155696D)
call SelectHeroSkill(GetTriggerUnit(),$41486268)
call SelectHeroSkill(GetTriggerUnit(),$41556373)
call SelectHeroSkill(GetTriggerUnit(),$4173736B)
call SelectHeroSkill(GetTriggerUnit(),$41487463)
call SelectHeroSkill(GetTriggerUnit(),$41456576)
call SelectHeroSkill(GetTriggerUnit(),$41303351)
call SelectHeroSkill(GetTriggerUnit(),$41456172)
call SelectHeroSkill(GetTriggerUnit(),$41436662)
call SelectHeroSkill(GetTriggerUnit(),$41303632)
if GetTriggerUnit()==Cx then
call SelectHeroSkill(GetTriggerUnit(),$41456168)
call SelectHeroSkill(GetTriggerUnit(),$41727371)
call SelectHeroSkill(GetTriggerUnit(),$41436262)
else
endif
if GetTriggerUnit()==Cr then
call SelectHeroSkill(GetTriggerUnit(),$4145696D)
call SelectHeroSkill(GetTriggerUnit(),$414E6963)
else
endif
if GetTriggerUnit()==Cu then
call SelectHeroSkill(GetTriggerUnit(),$41486473)
call SelectHeroSkill(GetTriggerUnit(),$414E6874)
call SelectHeroSkill(GetTriggerUnit(),$414F7773)
else
endif
if GetTriggerUnit()==Cz then
call SelectHeroSkill(GetTriggerUnit(),$414E6873)
call SelectHeroSkill(GetTriggerUnit(),$41666165)
call SelectHeroSkill(GetTriggerUnit(),$41303247)
call SelectHeroSkill(GetTriggerUnit(),$41303059)
else
endif
if GetTriggerUnit()==DE then
call SelectHeroSkill(GetTriggerUnit(),$414E6272)
call SelectHeroSkill(GetTriggerUnit(),$414E6366)
call SelectHeroSkill(GetTriggerUnit(),$41636462)
call SelectHeroSkill(GetTriggerUnit(),$41636468)
else
endif
if GetTriggerUnit()==DL then
call SelectHeroSkill(GetTriggerUnit(),$41436966)
call SelectHeroSkill(GetTriggerUnit(),$414F6878)
call SelectHeroSkill(GetTriggerUnit(),$414E7367)
else
endif
if GetTriggerUnit()==Co then
call SelectHeroSkill(GetTriggerUnit(),$41486661)
call SelectHeroSkill(GetTriggerUnit(),$41726F61)
call SelectHeroSkill(GetTriggerUnit(),$41457368)
call SelectHeroSkill(GetTriggerUnit(),$414E6162)
else
endif
if GetTriggerUnit()==Cp then
call SelectHeroSkill(GetTriggerUnit(),$41457471)
call SelectHeroSkill(GetTriggerUnit(),$41556175)
call SelectHeroSkill(GetTriggerUnit(),$41556675)
call SelectHeroSkill(GetTriggerUnit(),$414E6373)
else
endif
endfunction
function kB takes nothing returns nothing
set NX=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(NX,Player(0),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(1),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(2),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(3),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(4),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(5),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(6),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(7),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(8),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(9),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(10),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(11),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(12),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(13),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(14),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(NX,Player(15),EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(NX,Condition(function j8))
call TriggerAddAction(NX,function j9)
endfunction
function kC takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==$48616E74
endfunction
function kD takes nothing returns nothing
call AdjustPlayerStateBJ(1,GetEnumPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP)
endfunction
function kE takes nothing returns nothing
call ForForce(GetPlayersAll(),function kD)
if GetHeroLevel(GetTriggerUnit())>=50 and GetUnitAbilityLevel(GetTriggerUnit(),$4143616D)!=1 then
call UnitAddAbilityBJ($4143616D,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),"孔明学得新技能：五行罩")
else
endif
endfunction
function kF takes nothing returns nothing
set NY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(NY,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(NY,Condition(function kC))
call TriggerAddAction(NY,function kE)
endfunction
function kG takes nothing returns boolean
return bC(GetTriggerUnit(),$636B6E67)==true
endfunction
function kH takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$636B6E67))
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(8),$48616E74,"诸葛亮",GetRectCenter(W),null,"此传国玉玺也！今天授吾主，汉室可兴矣！汝立大功一件，当受重赏。",bj_TIMETYPE_ADD,2.,true)
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,15)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,15)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,15)
call ShowUnitShow(CK)
call DisplayTimedTextToForce(GetPlayersAll(),5.,GetPlayerName(GetTriggerPlayer())+"获得所有属性+15的奖励！|Cff00ff00同时后主派来了新的军需官,作为找到玉玺的奖励！")
endfunction
function kI takes nothing returns nothing
set NZ=CreateTrigger()
call a9(NZ,W)
call TriggerAddCondition(NZ,Condition(function kG))
call TriggerAddAction(NZ,function kH)
endfunction
function kJ takes nothing returns boolean
return GetUnitPointValue(GetTriggerUnit())==814
endfunction
function kK takes nothing returns nothing
call AdjustPlayerStateBJ(500*GetUnitLevel(C5),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function kL takes nothing returns nothing
set Mt[5]=GetUnitLoc(GetTriggerUnit())
set provision=provision+1
call DisplayTimedTextToForce(GetPlayersAll(),2.,"我军粮草准时运到"+I2S(provision)+"，所有玩家增加金钱"+I2S(GetUnitLevel(C5)*500))
call EnableTrigger(Nb)
call ForForce(ak(Player(8)),function kK)
if ModuloInteger(provision,10)==0 then
call DisplayTimedTextToForce(GetPlayersAll(),2.,"我军粮草累计运到"+I2S(provision)+" 次，所有玩家增加全属性5点！")
call ExecuteFunc ("batchAddHeroAttributes5")


elseif ModuloInteger(provision,50)==0 then 
call DisplayTimedTextToForce(GetPlayersAll(),2.,"我军粮草累计运到"+I2S(provision)+" 次，所有玩家增加全属性50点！")
call ExecuteFunc ("batchAddHeroAttributes50")
else
endif
if GetUnitTypeId(Nc)==$48485959 and isSpeed==false and provision>20 then
call DisplayTimedTextToForce(GetPlayersAll(),2.,"月英体恤运粮将士不易，发明了木牛流马！粮草移动速度增加！")
set isSpeed = true
else
endif

if GetRandomInt(1,3)==3 then
call CreateItemLoc(ChooseRandomItemExBJ(GetRandomInt(3,8),ITEM_TYPE_PERMANENT),Mt[5])
else
endif
if GetRandomInt(1,5)==5 then
call CreateItemLoc(LJ[GetRandomInt(170,180)],Mt[5])
else
endif
if GetRandomInt(1,10)==8 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(11,22)],Nc)
call DisplayTextToForce(GetPlayersAll(),"后主刘禅恩赐"+(GetItemName(GetLastCreatedItem())+"犒赏各位将军！"))
else
endif
if GetRandomInt(1,50)==50 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(23,62)],Nc)
call DisplayTextToForce(GetPlayersAll(),"后主刘禅恩赐"+(GetItemName(GetLastCreatedItem())+"犒赏各们将军！"))
else
endif
call RemoveUnit(GetTriggerUnit())
call RemoveLocation(Mt[5])
set Nc=null
endfunction
function kM takes nothing returns nothing
set Na=CreateTrigger()
call a9(Na,W)
call TriggerAddCondition(Na,Condition(function kJ))
call TriggerAddAction(Na,function kL)
endfunction
function kN takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function kO takes nothing returns nothing
set Nc=null
set Nc=GetTriggerUnit()

call DisplayTextToForce(GetPlayersAll(),"军师命我前来督促粮草！")
call DisplayTextToForce(GetPlayersAll(),"李严："+"粮草已备好，请将军一路小心！另外还有小小的心意请将军笑纳")
call AddHeroXPSwapped(provision*GetUnitLevel(C5)*60,Nc,true)
set provisionUnit = CreateUnit(Player(8),$656E6563,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)
call IssuePointOrder(provisionUnit,"move",-1500.,-4867.)
if (provision>40 or isSpeed) and provision>20 then
call SetUnitMoveSpeed(provisionUnit, 500)
else
endif
call AdjustPlayerStateBJ(1500*GetUnitLevel(C5),GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisableTrigger(GetTriggeringTrigger())
set provisionUnit=null
endfunction
function kP takes nothing returns nothing
set Nb=CreateTrigger()
call a9(Nb,BL)
call TriggerAddCondition(Nb,Condition(function kN))
call TriggerAddAction(Nb,function kO)
endfunction
function kQ takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==$656E6563 and IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function kR takes nothing returns nothing
call ModifyHeroStat(bj_HEROSTAT_STR,Nc,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,Nc,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_INT,Nc,bj_MODIFYMETHOD_SUB,10)
call KillUnit(Nc)
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(Nc)+"由于护送粮草不利导致我军粮草被劫，被孔明处死，并减少全属性10点。"))
if GetPlayerState(Player(0),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(0),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(0),PLAYER_STATE_RESOURCE_GOLD,0)
endif
if GetPlayerState(Player(1),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(1),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(1),PLAYER_STATE_RESOURCE_GOLD,0)
endif
if GetPlayerState(Player(2),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(2),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(2),PLAYER_STATE_RESOURCE_GOLD,0)
endif
if GetPlayerState(Player(3),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(3),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(3),PLAYER_STATE_RESOURCE_GOLD,0)
endif
if GetPlayerState(Player(4),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(4),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(4),PLAYER_STATE_RESOURCE_GOLD,0)
endif
if GetPlayerState(Player(5),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(5),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(5),PLAYER_STATE_RESOURCE_GOLD,0)
endif
if GetPlayerState(Player(6),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(6),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(6),PLAYER_STATE_RESOURCE_GOLD,0)
endif
if GetPlayerState(Player(7),PLAYER_STATE_RESOURCE_GOLD)>=2000*GetUnitLevel(C5) then
call AdjustPlayerStateBJ(0-2000*GetUnitLevel(C5),Player(7),PLAYER_STATE_RESOURCE_GOLD)
else
call SetPlayerStateBJ(Player(7),PLAYER_STATE_RESOURCE_GOLD,0)
endif
set Nc=null
endfunction
function kS takes nothing returns nothing
set Nd=CreateTrigger()
call TriggerAddCondition(Nd,Condition(function kQ))
call TriggerAddAction(Nd,function kR)
endfunction
function kT takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"|cFF0041FF准备为孔明更换装备!")
if bC(Dz,$7363756C)==false then
call UnitRemoveItemFromSlotSwapped(1,Dz)
else
endif
call UnitRemoveItemFromSlotSwapped(2,Dz)
call UnitRemoveItemFromSlotSwapped(3,Dz)
call UnitRemoveItemFromSlotSwapped(4,Dz)
call UnitRemoveItemFromSlotSwapped(5,Dz)
call UnitRemoveItemFromSlotSwapped(6,Dz)
endfunction
function kU takes nothing returns nothing
set KP=CreateTrigger()
call TriggerRegisterPlayerChatEvent(KP,Player(0),"QB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(1),"QB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(2),"QB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(3),"QB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(4),"QB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(5),"QB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(6),"QB",true)
call TriggerRegisterPlayerChatEvent(KR,Player(7),"QB",true)
call TriggerAddAction(KP,function kT)
endfunction
function kV takes nothing returns nothing
local integer KW
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"|cFF0041FF准备为孟达更换装备!")
set KW=1
loop
exitwhen KW>6
call UnitRemoveItemFromSlotSwapped(KW,DF)
set KW=KW+1
endloop
endfunction
function kW takes nothing returns nothing
set KQ=CreateTrigger()
call TriggerRegisterPlayerChatEvent(KQ,Player(0),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(1),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(2),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(3),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(4),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(5),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(6),"MDQB",true)
call TriggerRegisterPlayerChatEvent(KQ,Player(7),"MDQB",true)
call TriggerAddAction(KQ,function kV)
endfunction
function kX takes nothing returns boolean
return GetTriggerUnit()==EL
endfunction
function kY takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call SetPlayerTechResearchedSwap($52686D65,1,Player(10))
call SetPlayerTechResearchedSwap($526F7374,1,Player(10))
call UnitAddItemByIdSwapped($4930304E,Dz)
call UnitAddItemByIdSwapped($49303134,Dz)
call UnitAddItemByIdSwapped($4930304F,Dz)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"今南方已定，兵甲已足，当奖率三军，北定中原，庶竭驽钝，攘除奸凶，兴复汉室，还于旧都。",bj_TIMETYPE_ADD,0,false)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"奋勇杀敌（任务开启）")
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00百姓们都在谈论看见活神仙的事！")
call PingMinimapEx(1860.,14560.,3.,0,255,0,true)
call SetUnitPosition(Dk,6300.,300.)
call ShowUnitShow(Dk)
call ShowUnitShow(Db)
call EnableTrigger(N5)
call StartTimerBJ(Fv,false,300.)
endfunction
function kZ takes nothing returns nothing
set Ne=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ne,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Ne,Condition(function kX))
call TriggerAddAction(Ne,function kY)
endfunction
function ka takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
// 村长任务
function kb takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call SetUnitOwner(CH,Player(8),true)
call SetUnitOwner(DG,Player(8),true)
call EnableTrigger(Ng)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"为民除害")
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DG,"村长",null,"请等一下！",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DG,"村长",null,"对岸的森林里有一群强盗经常到村里来抢掠财物，村民们都去了别的村落避难，如果你能将他们杀死，我会好好酬谢你的。",bj_TIMETYPE_ADD,0,true)
call DisplayTextToForce(GetPlayersAll(),"杀死强盗头子，并将其首级带回来给村长。")
endfunction
// 村长任务初始化
function kc takes nothing returns nothing
set Nf=CreateTrigger()
call a9(Nf,z)
call TriggerAddCondition(Nf,Condition(function ka))
call TriggerAddAction(Nf,function kb)
endfunction
function kd takes nothing returns boolean
return bC(GetTriggerUnit(),$6B796D6E)==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function ke takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$6B796D6E))
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DG,"村长",null,"你真的杀死了那个强盗头子？！真是个了不起的人。这是我给你的报酬，请收下吧！",bj_TIMETYPE_ADD,0,true)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"为民除害（完成）")
call UnitAddItemByIdSwapped(LJ[GetRandomInt(10,63)],GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),"你得到了5000经验值，以及一件装备；村民们都回来了...")
call AddHeroXPSwapped(5000,GetTriggerUnit(),true)
call ShowUnitShow(DS)
call ShowUnitShow(CG)
endfunction
function kf takes nothing returns nothing
set Ng=CreateTrigger()
call DisableTrigger(Ng)
call a9(Ng,z)
call TriggerAddCondition(Ng,Condition(function kd))
call TriggerAddAction(Ng,function ke)
endfunction
function kg takes nothing returns boolean
return GetTriggerUnit()==EX
endfunction
function kh takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"吾已在上方谷埋下地雷火器；如遇司马懿，只许诈败，将司马懿引入谷中，吾用火攻之，司马懿必死！",bj_TIMETYPE_ADD,0,true)
call ShowUnitShow(Ei)
call ShowUnitShow(EW)
call SetUnitPositionLoc(Ei,GetRectCenter(b))
call SetUnitPositionLoc(EW,GetRectCenter(b))
call DestroyTrigger(Ni)
call DestroyTrigger(Nj)
call DestroyTrigger(Nk)
call DestroyTrigger(Nl)
endfunction
function ki takes nothing returns nothing
set Nh=CreateTrigger()
call a9(Nh,b)
call TriggerAddCondition(Nh,Condition(function kg))
call TriggerAddAction(Nh,function kh)
endfunction
function kj takes nothing returns boolean
return GetTriggerUnit()==EX
endfunction
function kk takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),EX,"司马懿",null,"此必是积粮之所也！",bj_TIMETYPE_ADD,0,true)
endfunction
function kl takes nothing returns nothing
set Nm=CreateTrigger()
call a9(Nm,x)
call TriggerAddCondition(Nm,Condition(function kj))
call TriggerAddAction(Nm,function kk)
endfunction
function km takes nothing returns boolean
return GetTriggerUnit()==EX
endfunction
function kn takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),EX,"司马懿",null,"倘有兵截断谷口，如之奈何？",bj_TIMETYPE_ADD,0,true)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call CreateNUnitsAtLocFacingLocBJ(1,$6F777477,Player(8),GetRandomLocInRect(y),GetUnitLoc(GetTriggerUnit()))
call CreateNUnitsAtLocFacingLocBJ(1,$6F777477,Player(8),GetRandomLocInRect(y),GetUnitLoc(GetTriggerUnit()))
call CreateNUnitsAtLocFacingLocBJ(1,$6F777477,Player(8),GetRandomLocInRect(x),GetUnitLoc(GetTriggerUnit()))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call TriggerExecute(No)
endfunction
function ko takes nothing returns nothing
set Nn=CreateTrigger()
call a9(Nn,y)
call TriggerAddCondition(Nn,Condition(function km))
call TriggerAddAction(Nn,function kn)
endfunction
function kp takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6F777477
endfunction
function kq takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function kr takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==$6F777477
endfunction
function ks takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function kt takes nothing returns nothing
local group KB
local unit KC
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),EX,"司马懿",null,"我父子三人皆死于此处矣！",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"司马懿，你死期到矣！",bj_TIMETYPE_ADD,0,true)
call ay(50.)
call ForGroupBJ(ao(x,Condition(function kp)),function kq)
call ForGroupBJ(ao(y,Condition(function kr)),function ks)
call AddWeatherEffectSaveLast(y,$52416872)
call DisplayTimedTextToForce(GetPlayersAll(),10.,"忽然狂风大作，黑气漫空，一声霹雳响处，骤雨倾盆。满谷之火尽皆烧灭：地雷不震，火器无功。")
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),EX,"司马懿",null,"不就此时杀出，更待何时！",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"谋事在人，成事在天，不可强也...",bj_TIMETYPE_ADD,0,true)
set KB=null
set KC=null
endfunction
function ku takes nothing returns nothing
set No=CreateTrigger()
call TriggerAddAction(No,function kt)
endfunction
function kv takes nothing returns boolean
return GetTriggerUnit()==EK
endfunction
function kw takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),EK,"王郎",null,"久闻公之大名，今幸一会。公既知天命，识时务，何故兴无名之兵？",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"吾奉诏讨贼，何谓无名？",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),EK,"王郎",null,"天数有变，神器更易，而归有德之人，此自然之理也。曩自桓、灵以来，黄巾倡乱，天下争横。我太祖武皇帝，扫清六合席卷八荒；万姓倾心，四方仰德。非以权势取之，实天命所归也。世祖文帝，神文圣武，以膺大统，应天合人，法尧禅舜，处中国以临万邦，岂非天心人意乎？今公蕴大才、抱大器，自欲比于管、乐，何乃强欲逆天理、背人情而行事耶？岂不闻古人曰：‘顺天者昌，逆天者亡。’今我大魏带甲百万，良将千员。谅腐草之萤光，怎及天心之皓月？公可倒戈卸甲，以礼来降，不失封侯之位。国安民乐，岂不美哉！",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"吾以为汉朝大老元臣，必有高论，岂期出此鄙言！吾有一言，诸军静听：昔日桓、灵之世，汉统陵替，宦官酿祸；国乱岁凶，四方扰攘。因庙堂之上，朽木为官，殿陛之间，禽兽食禄；狼心狗行之辈，滚滚当道，奴颜婢膝之徒，纷纷秉政。以致社稷丘墟，苍生涂炭。吾素知汝所行：世居东海之滨，初举孝廉入仕；理合匡君辅国，安汉兴刘；何期反助逆贼，同谋篡位！罪恶深重，天地不容！天下之人，愿食汝肉！今幸天意不绝炎汉，昭烈皇帝继统西川。吾今奉嗣君之旨，兴师讨贼。汝既为谄谀之臣，只可潜身缩首，苟图衣食；安敢在行伍之前，妄称天数耶！皓首匹夫！苍髯老贼！汝即日将归于九泉之下，何面目见二十四帝乎！老贼速退！可教反臣与吾共决胜负！”",bj_TIMETYPE_ADD,0,true)
call SetUnitLifeBJ(EK,100.)
call AddHeroXPSwapped(3000,Dz,true)
call ModifyHeroStat(bj_HEROSTAT_STR,Dz,bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_AGI,Dz,bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_INT,Dz,bj_MODIFYMETHOD_ADD,30)
call DisplayTextToForce(GetPlayersAll(),"孔明获得3000经验值，所有属性提高30！")
endfunction
function kx takes nothing returns nothing
set Np=CreateTrigger()
call a9(Np,BE)
call TriggerAddCondition(Np,Condition(function kv))
call TriggerAddAction(Np,function kw)
endfunction
function ky takes nothing returns boolean
return GetTriggerUnit()==EJ
endfunction
function kz takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call ShowUnitShow(Eb)
call SetUnitPosition(Eb,-6222.,-4715.)
call ShowUnitShow(Ec)
call SetUnitPosition(Ec,4344.,-2950.)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Ec,"邓忠",null,"父亲且慢行，儿愿为先锋！",bj_TIMETYPE_ADD,0,true)
call DisplayTextToForce(GetPlayersAll(),"邓艾、邓忠从景谷道偷渡！")
endfunction
function k0 takes nothing returns nothing
set Nq=CreateTrigger()
call a9(Nq,b)
call TriggerAddCondition(Nq,Condition(function ky))
call TriggerAddAction(Nq,function kz)
endfunction
function k1 takes nothing returns boolean
return GetTriggerUnit()==EI
endfunction
function k2 takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call ShowUnitShow(EZ)
call ShowUnitShow(Ea)
call SetUnitPosition(EZ,-6122.,-4715.)
call SetUnitPosition(Ea,4344.,-2950.)
call DisplayTextToForce(GetPlayersAll(),"张宝，张梁已经出现！")
endfunction
function k3 takes nothing returns nothing
set Nr=CreateTrigger()
call a9(Nr,g)
call TriggerAddCondition(Nr,Condition(function k1))
call TriggerAddAction(Nr,function k2)
endfunction
function k4 takes nothing returns boolean
return GetTriggerUnit()==EO
endfunction
function k5 takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call ShowUnitShow(Eh)
call SetUnitPosition(Eh,4344.,-2950.)
call DisplayTextToForce(GetPlayersAll(),"文丑已经出现！")
endfunction
function k6 takes nothing returns nothing
set Ns=CreateTrigger()
call a9(Ns,g)
call TriggerAddCondition(Ns,Condition(function k4))
call TriggerAddAction(Ns,function k5)
endfunction
function k7 takes nothing returns boolean
return GetTriggerUnit()==EY
endfunction
function k8 takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call ShowUnitShow(EH)
call SetUnitPosition(EH,4344.,-2950.)
call DisplayTextToForce(GetPlayersAll(),"夏侯渊已经出现！")
if Gq>=7 or IN==true then
call ShowUnitShow(Er)
call SetUnitPosition(Er,5350.,-1380.)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"凌统 从吴国进攻来了")
else
endif
endfunction
function k9 takes nothing returns nothing
set Nt=CreateTrigger()
call a9(Nt,g)
call TriggerAddCondition(Nt,Condition(function k7))
call TriggerAddAction(Nt,function k8)
endfunction
function lB takes nothing returns boolean
return GetTriggerUnit()==EF
endfunction
function lC takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call ShowUnitShow(Ej)
call SetUnitPosition(Ej,4344.,-2950.)
call ShowUnitShow(Ez)
call SetUnitPosition(Ez,-6122.,-4715.)
call DisplayTextToForce(GetPlayersAll(),"典韦、郭嘉已经出现！")
call ShowUnitShow(FF)
call SetUnitPosition(FF,4344.,-2950.)
endfunction
function lD takes nothing returns nothing
set Nu=CreateTrigger()
call a9(Nu,g)
call TriggerAddCondition(Nu,Condition(function lB))
call TriggerAddAction(Nu,function lC)
endfunction
function lE takes nothing returns boolean
return GetTriggerUnit()==EM
endfunction
function lF takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call ShowUnitShow(EU)
call SetUnitPosition(EU,4344.,-2950.)
call DisplayTextToForce(GetPlayersAll(),"曹彰魂已经出现！")
endfunction
function lG takes nothing returns nothing
set Nv=CreateTrigger()
call a9(Nv,g)
call TriggerAddCondition(Nv,Condition(function lE))
call TriggerAddAction(Nv,function lF)
endfunction
function lH takes nothing returns boolean
return GetTriggerUnit()==EE
endfunction
function lI takes nothing returns nothing
call ShowUnitShow(Eg)
call SetUnitPosition(Eg,4344.,-2950.)
call DisplayTextToForce(GetPlayersAll(),"高顺已经出现！")
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function lJ takes nothing returns nothing
set Nw=CreateTrigger()
call a9(Nw,g)
call TriggerAddCondition(Nw,Condition(function lH))
call TriggerAddAction(Nw,function lI)
endfunction
function lK takes nothing returns boolean
return GetTriggerUnit()==D6
endfunction
function lL takes nothing returns nothing
call ShowUnitShow(Ek)
call SetUnitPosition(Ek,5350.,-1380.)
call ShowUnitShow(FL)
call SetUnitPosition(FL,5350.,-1380.)
call DisplayTextToForce(GetPlayersAll(),"吴国潘璋已经出现！")
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function lM takes nothing returns nothing
set Nx=CreateTrigger()
call a9(Nx,b)
call TriggerAddCondition(Nx,Condition(function lK))
call TriggerAddAction(Nx,function lL)
endfunction
function lN takes nothing returns boolean
return GetTriggerUnit()==D3 and GetOwningPlayer(Dh)!=Player(8)
endfunction
function lO takes nothing returns nothing
call ShowUnitShow(Eo)
call SetUnitPosition(Eo,5350.,-1380.)
call DisplayTextToForce(GetPlayersAll(),"吴国甘宁已经出现！")
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function lP takes nothing returns nothing
set Ny=CreateTrigger()
call a9(Ny,b)
call TriggerAddCondition(Ny,Condition(function lN))
call TriggerAddAction(Ny,function lO)
endfunction
function lQ takes nothing returns boolean
return GetTriggerUnit()==Ef
endfunction
function lR takes nothing returns nothing
call ShowUnitShow(Eq)
call SetUnitPosition(Eq,5350.,-1380.)
call DisplayTextToForce(GetPlayersAll(),"吴国周瑜(魂)已经出现！")
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function lS takes nothing returns nothing
set Nz=CreateTrigger()
call a9(Nz,c)
call TriggerAddCondition(Nz,Condition(function lQ))
call TriggerAddAction(Nz,function lR)
endfunction
function lT takes nothing returns boolean
return GetTriggerUnit()==D7
endfunction
function lU takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call SetPlayerTechResearchedSwap($52686D65,3,Player(10))
call SetPlayerTechResearchedSwap($52686172,3,Player(10))
call UnitAddItemByIdSwapped($4930304E,Dz)
call UnitAddItemByIdSwapped($49303134,Dz)
call UnitAddItemByIdSwapped($4930304F,Dz)
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(9),$4564656D,"张合",GetRectCenter(GetPlayableMapRect()),null,"我中计矣！",bj_TIMETYPE_ADD,0,true)
call EnableTrigger(N1)
endfunction
function lV takes nothing returns nothing
set N0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(N0,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(N0,Condition(function lT))
call TriggerAddAction(N0,function lU)
endfunction
function lW takes nothing returns boolean
return GetTriggerUnit()==EC
endfunction
function lX takes nothing returns nothing
call DestroyTrigger(N2)

call UnitAddItemByIdSwapped($4930304F,Dz)
call UnitAddItemByIdSwapped($49303134,Dz)
call UnitAddItemByIdSwapped($4930304E,Dz)
call SetPlayerTechResearchedSwap($52686D65,2,Player(10))
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00孟达差心腹至，持书来见；书言：欲起金城、新城、上庸三处军马，就彼起事，径取洛阳。")
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DD,"细作",null,"魏主曹睿，一面驾幸长安；一面招司马懿复职，加为平西都督，起本处之兵，于长安聚会。",bj_TIMETYPE_ADD,0,false)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"今孟达欲举大事，若遇司马懿，事必败矣。达非司马懿对手，必被所擒。孟达若死，中原不易得也。",bj_TIMETYPE_ADD,0,false)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),C2,"马谡",null,"何不急修书，令孟达提防？",bj_TIMETYPE_ADD,0,false)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_DISCOVERED,"送信")
call SetItemInvulnerable(CreateItem($6D6F7274,-1220.,-5240.),true)
call DisplayTextToForce(GetPlayersAll(),"拿着书信去找左上方新城里的孟达。（须穿越魏国营寨）")

call PingMinimapEx(-6040.,13000.,3.,0,255,0,true)
call EnableTrigger(N3)
call EnableTrigger(N4)
call ShowUnitShow(she)
call DisplayTextToForce(GetPlayersAll(),"八岐化蛇悄悄占据了玄武的地盘！")
call ShowUnitShow(spider)
call DisplayTextToForce(GetPlayersAll(),"蜘蛛罔象出没在丛林深处！")
endfunction
function lY takes nothing returns nothing
set N2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(N2,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(N2,Condition(function lW))
call TriggerAddAction(N2,function lX)
endfunction
function lZ takes nothing returns boolean
return GetTriggerUnit()==EI
endfunction
function la takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"|Cff00ff00时孔明兵强马壮，粮草丰足，所用之物，一切完备，正要出师；忽闻镇南将军赵云病逝，孔明跌足而哭，众将无不挥涕...",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"|Cff00ff00后人有诗曰：常山有虎将，智勇匹关张。汉水功勋在，当阳姓字彰。两番扶幼主，一念答先皇。青史书忠烈，应流百世芳。",bj_TIMETYPE_ADD,0,true)
call DisplayTimedTextToForce(GetPlayersAll(),7.,"|Cff00ff00后主思念赵云昔日之功，祭葬甚厚；封赵统为虎贲中郎，赵广为牙门将。（赵统，赵广敏捷+30）")
call ModifyHeroStat(bj_HEROSTAT_AGI,C8,bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_AGI,Cy,bj_MODIFYMETHOD_ADD,30)
endfunction
function lb takes nothing returns nothing
set N6=CreateTrigger()
call DisableTrigger(N6)
call TriggerRegisterAnyUnitEventBJ(N6,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(N6,Condition(function lZ))
call TriggerAddAction(N6,function la)
endfunction
function lc takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and bC(GetTriggerUnit(),$6D6F7274)==true and GetUnitState(DF,UNIT_STATE_LIFE)>1.
endfunction
function ld takes nothing returns nothing
call SetUnitOwner(GetEnumUnit(),Player(8),true)
endfunction
function le takes nothing returns nothing
local group KB
local unit KC
local unit Iv=GetTriggerUnit()
call DisableTrigger(GetTriggeringTrigger())
call DestroyTrigger(GetTriggeringTrigger())
call RemoveItem(aj(Iv,$6D6F7274))
call IssueImmediateOrder(DF,"holdposition")
call ForGroupBJ(ap(v,Player(PLAYER_NEUTRAL_PASSIVE)),function ld)
call SetUnitInvulnerable(DF,false)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DF,"孟达",null,"人言孔明多心，今观此事可知矣。",bj_TIMETYPE_ADD,0,true)
call DestroyGroup(bj_lastCreatedGroup)
call AddHeroXPSwapped(3000,Iv,true)
call ModifyHeroStat(bj_HEROSTAT_STR,Iv,bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_AGI,Iv,bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_INT,Iv,bj_MODIFYMETHOD_ADD,20)
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"送信（完成）")
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"获得了所有属性+20及3000点经验的奖励。")
call DisplayTextToForce(GetPlayersAll(),"|cffffcc00新城的刷兵被开启了，守住新城每一波都将获得木材奖励；孟达死去后会关闭刷兵和奖励。")
call ShowUnitShow(Ed)
call ShowUnitShow(CJ)
call SetUnitPositionLoc(Ed,GetRectCenter(w))
call CreateNUnitsAtLoc(10,N7[GetUnitLevel(C5)],Player(9),GetRectCenter(w),bj_UNIT_FACING)
call EnableTrigger(N8)
set Iv=null
set KB=null
set KC=null
endfunction
function lf takes nothing returns nothing
set N3=CreateTrigger()
call a9(N3,u)
call TriggerAddCondition(N3,Condition(function lc))
call TriggerAddAction(N3,function le)
endfunction
function lg takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Ed,"徐晃",null,"反贼孟达，早早受降！",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DF,"孟达",null,"果不出孔明所料也！",bj_TIMETYPE_ADD,0,true)
endfunction
function lh takes nothing returns nothing
set N9=CreateTrigger()
call TriggerRegisterUnitEvent(N9,Ed,EVENT_UNIT_ATTACKED)
call TriggerAddAction(N9,function lg)
endfunction
function li takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),CR,"强盗头子",null,"哈哈，送上门的财神爷，小的们，快把他抓起来！",bj_TIMETYPE_ADD,0,true)
endfunction
function lj takes nothing returns nothing
set OB=CreateTrigger()
call TriggerRegisterUnitEvent(OB,CR,EVENT_UNIT_ATTACKED)
call TriggerAddAction(OB,function li)
endfunction
function lk takes nothing returns nothing
call CustomDefeatBJ(Player(0),"失败!")
call CustomDefeatBJ(Player(1),"失败!")
call CustomDefeatBJ(Player(2),"失败!")
call CustomDefeatBJ(Player(3),"失败!")
call CustomDefeatBJ(Player(4),"失败!")
call CustomDefeatBJ(Player(5),"失败!")
call CustomDefeatBJ(Player(6),"失败!")
call CustomDefeatBJ(Player(7),"失败!")
endfunction
function ll takes nothing returns nothing
set OC=CreateTrigger()
call TriggerAddAction(OC,function lk)
endfunction
function lm takes nothing returns nothing
local integer Jk
call DestroyTrigger(OE)
call DestroyTrigger(OF)
call DestroyTrigger(OG)
set Jk=1
loop
exitwhen Jk>8
if GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER and GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING then
call WQ(ConvertedPlayer(Jk),"游戏中",0)
else
endif
set Jk=Jk+1
endloop
call ay(5.)
call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN,6.,"ReplaceableTextures\\CameraMasks\\SpecialSplatMask.blp",100.,50.,50.,0.)
call CinematicModeBJ(true,GetPlayersAll())
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(8),$48616E74,"诸葛亮",GetRectCenter(W),null,"再不能临阵讨贼矣！悠悠苍天，曷此其极！",bj_TIMETYPE_ADD,2.,true)
call RemoveUnit(Dz)
call CinematicModeBJ(false,GetPlayersAll())
call DisplayTimedTextToForce(GetPlayersAll(),90.,"|Cffff0000孔明已经战死，游戏失败，请再接再厉！
90秒后游戏结束，请各位利用这些时间自己检讨一下！")
call ay(60.)
call TriggerExecute(OC)
endfunction
function ln takes nothing returns nothing
set OD=CreateTrigger()
call TriggerRegisterUnitEvent(OD,Dz,EVENT_UNIT_DEATH)
call TriggerAddAction(OD,function lm)
endfunction
function lo takes nothing returns nothing
local integer Jk
call RemoveUnit(GetTriggerUnit())
call DestroyTrigger(OG)
set Jk=1
loop
exitwhen Jk>8
if GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER and GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING then
call WQ(ConvertedPlayer(Jk),"游戏中",0)
else
endif
set Jk=Jk+1
endloop
call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN,6.,"ReplaceableTextures\\CameraMasks\\SpecialSplatMask.blp",100.,50.,50.,0.)
call DisplayTimedTextToForce(GetPlayersAll(),60.,"|Cffff0000杨仪已经战死！由于魏延的叛乱，蜀国很快进入动荡不安的局面；魏国乘机入侵...
60秒后游戏结束，请各位利用这些时间自己检讨一下！")
call TriggerSleepAction(60.)
endfunction
function lp takes nothing returns nothing
set OH=CreateTrigger()
call TriggerRegisterUnitEvent(OH,DT,EVENT_UNIT_DEATH)
call TriggerAddAction(OH,function lo)
endfunction
function lq takes nothing returns nothing
local group KB
local unit KC
call RemoveUnit(GetTriggerUnit())
call DestroyTrigger(OJ)
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffff0000孟达已经战死！新城失守！")
call ShowUnitHide(CJ)
call RemoveUnit(CJ)
call SetUnitOwner(Dh,Player(PLAYER_NEUTRAL_PASSIVE),true)
call DestroyTrigger(N8)
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,4346.,-1280.,512,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if GetUnitTypeId(KC)==$65305344 then
call RemoveUnit(KC)
else
endif
endloop
call DestroyGroup(KB)
call DestroyTrigger(GetTriggeringTrigger())
set KB=null
set KC=null
endfunction
function lr takes nothing returns nothing
set OI=CreateTrigger()
call TriggerRegisterUnitEvent(OI,DF,EVENT_UNIT_DEATH)
call TriggerAddAction(OI,function lq)
endfunction
function ls takes nothing returns nothing
call CameraSetupApplyForPlayer(true,B9,GetEnumPlayer(),0)
endfunction
function lt takes nothing returns nothing
call CameraSetupApplyForPlayer(true,CB,GetEnumPlayer(),0)
endfunction
function lu takes nothing returns nothing
call ResetToGameCameraForPlayer(GetEnumPlayer(),0)
endfunction
function lv takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())
call DestroyTrigger(OD)
call StopMusic(true)
call PlaySoundBJ(O)
call ShowUnit(Dz,false)
call SetUnitInvulnerable(DF,true)
call ShowUnitHide(DF)
call SetUnitInvulnerable(Ef,true)
call CinematicModeBJ(true,GetPlayersAll())
call SetSkyModel("Environment\\Sky\\LordaeronFallSky\\LordaeronFallSky.mdl")
call ForForce(GetPlayersAll(),function ls)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"此役之后渭南大寨被蜀兵占领，司马懿烧断浮桥，据住北岸。",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"不久，蜀汉丞相诸葛亮去世，时建兴十二年秋八月二十三日，寿五十四岁。",bj_TIMETYPE_ADD,0,true)
call TriggerSleepAction(3.)
call ShowUnitShow(Ef)
call SetUnitPositionLoc(Ef,GetRectCenter(c))
call ShowUnitShow(DT)
call SetUnitOwner(DT,Player(8),true)
call aw(true)
call ForForce(GetPlayersAll(),function lt)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Cq,"姜维",null,"反贼魏延！丞相不曾亏你，今日如何背反？",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(10),$45303031,"魏延",GetRectCenter(c),null,"伯约，不干你事。只教杨仪来。",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(8),$456D6E73,"杨仪",GetRectCenter(c),null,"丞相在日，知汝久后必反，教我提备，今果应其言。汝敢在马上连叫三声谁敢杀我，便是真大丈夫，吾就献城池与汝。",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(10),$45303031,"魏延",GetRectCenter(c),null,"杨仪匹夫听着，！若孔明在日，吾尚惧他三分；他今已亡，天下谁敢敌我？休道连叫三声，便叫三万声亦有何难？",bj_TIMETYPE_ADD,0,true)
call EnableTrigger(OF)
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cffff0000杀死魏延，保护好杨仪")
call ForForce(GetPlayersAll(),function lu)
call CinematicModeBJ(false,GetPlayersAll())
call aw(false)
call SetUnitInvulnerable(Ef,false)
call IssuePointOrder(Eq,"attack",-1170.,-5060.)
call TriggerSleepAction(30.)
call ResumeMusic()
endfunction
function lw takes nothing returns nothing
set OG=CreateTrigger()
call TriggerRegisterUnitEvent(OG,EX,EVENT_UNIT_DEATH)
call TriggerAddAction(OG,function lv)
endfunction
function lx takes nothing returns boolean
return GetTriggerUnit()==Ef
endfunction
function ly takes nothing returns nothing
local integer Jk
call DestroyTrigger(GetTriggeringTrigger())
call SetUnitInvulnerable(Ef,true)
call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN,6.,"ReplaceableTextures\\CameraMasks\\SpecialPowMask.blp",100.,50.,50.,0.)
call CinematicModeBJ(true,GetPlayersAll())
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(10),$45303031,"魏延",GetRectCenter(c),null,"谁敢杀我！",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),GetKillingUnitBJ(),GetUnitName(GetKillingUnitBJ()),null,"吾敢杀汝！",bj_TIMETYPE_ADD,0,true)
call CinematicModeBJ(false,GetPlayersAll())
call DisplayTextToForce(GetPlayersAll(),"游戏开始选择随机英雄将获得额外属性点奖励,随机送好,赠送可成长玉,经验获得率比选择英雄高出30%")
set Jk=1
loop
exitwhen Jk>8
if GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER and GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING then
call WQ(ConvertedPlayer(Jk),"游戏中",0)
if Hl[Jk]>0 then
set Hl[Jk]=Hl[Jk]-1
call WQ(ConvertedPlayer(Jk),"玩家逃离",Hl[Jk])
else
endif
else
endif
call ay(2)
set Jk=Jk+1
endloop
call ay(5.)
set Gr[0]="胜利"
call CinematicModeBJ(true,GetPlayersAll())
call TriggerExecute(MJ)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"|Cffff0000两分钟后将进入历史游戏模式(千里走单骑，过五关斩。必须要保护好刘备的两个夫人)，趁现在补充一下给养，准备接受挑战！
你也可以按F9来查看本游戏的详细内容。",bj_TIMETYPE_ADD,0.,true)
call CinematicModeBJ(false,GetPlayersAll())
call DisplayTimedTextToForce(GetPlayersAll(),30,"|Cffff0000两分钟后将进入历史游戏模式(千里走单骑，过五关斩。必须要保护好刘备的两个夫人)，趁现在补充一下给养，准备接受挑战！
你也可以按F9来查看本游戏的详细内容。")
call GroupClear(ap(GetPlayableMapRect(),Player(11)))
call DestroyTrigger(N1)
call TriggerSleepAction(120.)
call CinematicModeBJ(true,GetPlayersAll())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"恭喜你们获得通，可以随时退出游戏重新开始！！！",bj_TIMETYPE_ADD,2.,true)
call CinematicModeBJ(false,GetPlayersAll())
endfunction
function lz takes nothing returns nothing
set OF=CreateTrigger()
call DisableTrigger(OF)
call TriggerRegisterUnitEvent(OF,Ef,EVENT_UNIT_DEATH)
call TriggerAddCondition(OF,Condition(function lx))
call TriggerAddAction(OF,function ly)
endfunction
function l0 takes nothing returns nothing
set Gj=101
loop
exitwhen Gj>GN
call ReviveHero(ON[Gj],9724.,857.,false)
call SetHeroLevel(ON[Gj],150,false)
call PauseUnit(ON[Gj],false)
call ShowUnit(ON[Gj],true)
set Gj=Gj+1
endloop
endfunction
function l1 takes nothing returns nothing
set OM=CreateTrigger()
call TriggerAddAction(OM,function l0)
endfunction
function l2 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitPointValue(GetTriggerUnit())!=9
endfunction
function l3 takes nothing returns nothing
set GN=GN+1
set ON[GN]=GetTriggerUnit()
endfunction
function l4 takes nothing returns nothing
set OO=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(OO,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(OO,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(OO,Condition(function l2))
call TriggerAddAction(OO,function l3)
endfunction
function l5 takes nothing returns boolean
return GetHeroSkillPoints(GetTriggerUnit())>0
endfunction
function l6 takes nothing returns nothing
call SelectHeroSkill(GetTriggerUnit(),$414F6372)
call SelectHeroSkill(GetTriggerUnit(),$41616B62)
call SelectHeroSkill(GetTriggerUnit(),$4162736B)
call SelectHeroSkill(GetTriggerUnit(),$414E6D6F)
call SelectHeroSkill(GetTriggerUnit(),$414F6878)
call SelectHeroSkill(GetTriggerUnit(),$41557473)
call SelectHeroSkill(GetTriggerUnit(),$41616D6B)
call SelectHeroSkill(GetTriggerUnit(),$41487462)
call SelectHeroSkill(GetTriggerUnit(),$4130324A)
call SelectHeroSkill(GetTriggerUnit(),$414F7777)
call SelectHeroSkill(GetTriggerUnit(),$414F6877)
call SelectHeroSkill(GetTriggerUnit(),$414F7332)
call SelectHeroSkill(GetTriggerUnit(),$41303432)
call SelectHeroSkill(GetTriggerUnit(),$41436362)
call SelectHeroSkill(GetTriggerUnit(),$41486164)
call SelectHeroSkill(GetTriggerUnit(),$414E736F)
call SelectHeroSkill(GetTriggerUnit(),$41556176)
call SelectHeroSkill(GetTriggerUnit(),$4155696D)
call SelectHeroSkill(GetTriggerUnit(),$41486268)
call SelectHeroSkill(GetTriggerUnit(),$41556373)
call SelectHeroSkill(GetTriggerUnit(),$4173736B)
call SelectHeroSkill(GetTriggerUnit(),$41487463)
call SelectHeroSkill(GetTriggerUnit(),$41456576)
call SelectHeroSkill(GetTriggerUnit(),$414E7362)
call SelectHeroSkill(GetTriggerUnit(),$41456172)
call SelectHeroSkill(GetTriggerUnit(),$41456168)
call SelectHeroSkill(GetTriggerUnit(),$41727371)
call SelectHeroSkill(GetTriggerUnit(),$41436262)
call SelectHeroSkill(GetTriggerUnit(),$414E6331)
call SelectHeroSkill(GetTriggerUnit(),$414E6472)
call SelectHeroSkill(GetTriggerUnit(),$4145696D)
call SelectHeroSkill(GetTriggerUnit(),$416D6466)
call SelectHeroSkill(GetTriggerUnit(),$414E6963)
call SelectHeroSkill(GetTriggerUnit(),$414E6874)
call SelectHeroSkill(GetTriggerUnit(),$41303247)
call SelectHeroSkill(GetTriggerUnit(),$414F7773)
call SelectHeroSkill(GetTriggerUnit(),$414E6272)
call SelectHeroSkill(GetTriggerUnit(),$41486473)
call SelectHeroSkill(GetTriggerUnit(),$41666165)
call SelectHeroSkill(GetTriggerUnit(),$414E6873)
call SelectHeroSkill(GetTriggerUnit(),$41303059)
call SelectHeroSkill(GetTriggerUnit(),$41436966)
call SelectHeroSkill(GetTriggerUnit(),$414E6366)
call SelectHeroSkill(GetTriggerUnit(),$414E7367)
call SelectHeroSkill(GetTriggerUnit(),$4155666E)
call SelectHeroSkill(GetTriggerUnit(),$41707866)
call SelectHeroSkill(GetTriggerUnit(),$414E6D73)
call SelectHeroSkill(GetTriggerUnit(),$414F6878)
call SelectHeroSkill(GetTriggerUnit(),$414F636C)
call SelectHeroSkill(GetTriggerUnit(),$41707267)
call SelectHeroSkill(GetTriggerUnit(),$41457471)
call SelectHeroSkill(GetTriggerUnit(),$41556175)
call SelectHeroSkill(GetTriggerUnit(),$41556675)
call SelectHeroSkill(GetTriggerUnit(),$414F7368)
endfunction
function l7 takes nothing returns nothing
set OP=CreateTrigger()
call DisableTrigger(OP)
call TriggerRegisterPlayerUnitEventSimple(OP,Player(9),EVENT_PLAYER_HERO_LEVEL)
call TriggerRegisterPlayerUnitEventSimple(OP,Player(10),EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(OP,Condition(function l5))
call TriggerAddAction(OP,function l6)
endfunction
function l8 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetKillingUnitBJ(),Player(8))==true
endfunction
function l9 takes nothing returns nothing
set GK[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=GK[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]+1
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+("击杀了"+(I2S(GK[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"个最后BOSS")))
call SetPlayerStateBJ(GetOwningPlayer(GetKillingUnitBJ()),PLAYER_STATE_GAME_RESULT,$F4240*GK[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call SetPlayerOnScoreScreen(GetOwningPlayer(GetKillingUnitBJ()),true)
endfunction
function mB takes nothing returns nothing
set OQ=CreateTrigger()
call DisableTrigger(OQ)
call TriggerRegisterPlayerUnitEventSimple(OQ,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(OQ,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(OQ,Condition(function l8))
call TriggerAddAction(OQ,function l9)
endfunction
function mC takes nothing returns boolean
return IsPlayerAlly(GetFilterPlayer(),Player(8))==true
endfunction
function mD takes nothing returns nothing
call CustomVictoryBJ(GetEnumPlayer(),true,true)
endfunction
function mE takes nothing returns nothing
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"|cffffdead恭喜你们改变历史,灭了魏国,完成了先帝及孔明的遗愿!",bj_TIMETYPE_ADD,0,true)
call ForForce(al(Condition(function mC)),function mD)
endfunction
function mF takes nothing returns nothing
set OR=CreateTrigger()
call DisableTrigger(OR)
call TriggerRegisterUnitEvent(OR,CL,EVENT_UNIT_DEATH)
call TriggerAddAction(OR,function mE)
endfunction
function mG takes nothing returns boolean
return IsPlayerAlly(GetFilterPlayer(),Player(8))==true
endfunction
function mH takes nothing returns nothing
call CustomDefeatBJ(GetEnumPlayer(),"错此良机,收复我大汉河山又遥遥无期了!
60秒后游戏结束，请各位利用这些时间自己检讨一下！")
endfunction
function mI takes nothing returns nothing
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),D1,"大男人",null,"手脚太慢,失去了击杀曹睿的最佳良机,历史终究无法改变........",bj_TIMETYPE_ADD,0,true)
call ForForce(al(Condition(function mG)),function mH)
call TriggerSleepAction(60.)
call TriggerExecute(OC)
endfunction
function mJ takes nothing returns nothing
set OS=CreateTrigger()
call DisableTrigger(OS)
call TriggerRegisterTimerExpireEvent(OS,Fk)
call TriggerAddAction(OS,function mI)
endfunction
function mK takes nothing returns boolean
return GetSpellAbilityId()==$41746175 and DistanceBetweenPoints(GetUnitLoc(GetTriggerUnit()),GetUnitLoc(Ct))<=300.
endfunction
function mL takes nothing returns nothing
call UnitDamageTarget(Ct,GetTriggerUnit(),1000000000.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endfunction
function mM takes nothing returns nothing
set OT=CreateTrigger()
call TriggerRegisterUnitEvent(OT,Ef,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(OT,Condition(function mK))
call TriggerAddAction(OT,function mL)
endfunction
function mN takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()==ON[G5]
endfunction
function mO takes nothing returns nothing
    // 延迟30秒
    call TriggerSleepAction(30.0)
    // 杀死计时器开始下一关
call KillUnit(OV)
if Gq>=6 then
call TriggerExecute(MN)
else
endif
endfunction
function mP takes nothing returns nothing
set OU=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(OU,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(OU,Condition(function mN))
call TriggerAddAction(OU,function mO)
endfunction
function mQ takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==$6E646572
endfunction
function mR takes nothing returns nothing
call AdjustPlayerStateBJ(100*GetUnitLevel(DF),GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function mS takes nothing returns boolean
return GetUnitTypeId(GetFilterUnit())==N7[GetUnitLevel(C5)-3]
endfunction
function mT takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function mU takes nothing returns nothing
local group KB
local unit KC
if GetOwningPlayer(DF)==Player(8) then
call DisplayTextToForce(GetPlayersAll(),"所有玩家获得额外奖励，|cffffcc00金钱+"+I2S(100*GetHeroLevel(DF)))
call ForForce(ak(Player(8)),function mR)
else
endif
if GetOwningPlayer(ON[GetUnitLevel(C5)])==Player(9) then
call SetUnitOwner(ON[GetUnitLevel(C5)],Player(10),true)
else
endif
set bj_wantDestroyGroup=true
call ForGroupBJ(ao(GetPlayableMapRect(),Condition(function mS)),function mT)
call DisplayTextToForce(GetPlayersAll(),"魏国处决怠战士兵!")
call ay(2)
call TriggerExecute(Ni)
set KB=null
set KC=null
endfunction
function mV takes nothing returns nothing
set OW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(OW,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(OW,Condition(function mQ))
call TriggerAddAction(OW,function mU)
endfunction
function mW takes nothing returns nothing
set bj_lastCreatedHashtable=Ia
call DisplayTimedTextToForce(GetPlayersAll(),6.,"魏国发起了新一波的进攻！")
call AdjustPlayerStateBJ(1,Player(8),PLAYER_STATE_LUMBER_GATHERED)
call SetHeroLevelBJ(C5,GetUnitLevel(C5)+1,false)
call SetHeroLevelBJ(Dz,GetUnitLevel(Dz)+1,false)
set G5=GetUnitLevel(C5)
if Gq>=7 then
call XX(Ef,$41304532,1,108,5.*I2R(G5*Gq))
call SetUnitAbilityLevel(Ef,$41304532,2)
call SetUnitAbilityLevel(Ef,$41304532,1)
else
endif
call TimerDialogSetTitle(OX,""+("敌主将："+GetUnitName(ON[G5])))
if GetUnitAbilityLevel(C5,$41304242)>0 then
call StartTimerBJ(Fk,false,75.)
call StartTimerBJ(G7,true,8.)
call StartTimerBJ(G8,true,9.)
else
call StartTimerBJ(Fk,false,150.)
call StartTimerBJ(G7,true,17.-I2R(GetUnitAbilityLevel(C5,$41436576)))
call StartTimerBJ(G8,true,20.)
endif
if Nc==null then
call EnableTrigger(Nb)
else
endif
if GetOwningPlayer(DF)==Player(8) then
call EnableTrigger(OJ)
else
endif
if ModuloInteger(GetUnitLevel(C5),3)==0 then
call DisplayTimedTextToForce(GetPlayersAll(),6.,"司马懿发动了鬼魂偷袭剑阁，请小心应付！")
call EnableTrigger(Nl)
else
endif
if ModuloInteger(GetUnitLevel(C5),5)==0 then
call DisplayTimedTextToForce(GetPlayersAll(),6.,"广元地区出现大量老百姓，保护他们逃进剑阁将获得经验、金钱和物品奖励！")
call EnableTrigger(NS)
else
endif
if IsTriggerEnabled(Nb)==false and Nc==null then
call EnableTrigger(Nb)
else
call DoNothing()
endif
endfunction
function mX takes nothing returns nothing
set Ni=CreateTrigger()
call TriggerAddAction(Ni,function mW)
endfunction
function mY takes nothing returns nothing
set NT[0]=GetRectCenter(g)
set NT[4]=GetRandomLocInRect(b)
set NT[6]=GetRectCenter(W)
call ShowUnitShow(ON[GetUnitLevel(C5)])
if ModuloInteger(GetUnitLevel(C5),3)==0 then
call SetUnitPositionLoc(ON[GetUnitLevel(C5)],NT[0])
call CreateNUnitsAtLoc(1,OZ[GetRandomInt(1,6)],Player(10),NT[0],bj_UNIT_FACING)
call SetHeroLevelBJ(GetLastCreatedUnit(),GetUnitLevel(C5)*6,false)
call UnitAddAbilityBJ(M9[GetRandomInt(1,17)],GetLastCreatedUnit())
call UnitAddAbilityBJ(M9[GetRandomInt(1,17)],GetLastCreatedUnit())
call IssueTargetOrder(GetLastCreatedUnit(),"attack",Dz)
else
call SetUnitPositionLoc(ON[GetUnitLevel(C5)],NT[4])
call CreateNUnitsAtLoc(1,OZ[GetRandomInt(1,6)],Player(10),NT[4],bj_UNIT_FACING)
call SetHeroLevelBJ(GetLastCreatedUnit(),GetUnitLevel(C5)*6,false)
call UnitAddAbilityBJ(M9[GetRandomInt(1,17)],GetLastCreatedUnit())
call UnitAddAbilityBJ(M9[GetRandomInt(1,17)],GetLastCreatedUnit())
call IssueTargetOrder(GetLastCreatedUnit(),"attack",Dz)
endif
if Gq>5 then
call UnitAddAbility(ON[G5],$41304142)
call SetUnitAbilityLevel(ON[G5],$41304142,G5/3+1)
call UnitMakeAbilityPermanent(ON[G5],true,$41304142)
call UnitAddAbility(ON[G5],$41304139)
call SetUnitAbilityLevel(ON[G5],$41304139,G5/3+1)
call UnitMakeAbilityPermanent(ON[G5],true,$41304139)
call UnitAddAbility(ON[G5],$41304141)
call SetUnitAbilityLevel(ON[G5],$41304141,G5/3+1)
call UnitMakeAbilityPermanent(ON[G5],true,$41304141)
else
endif
call DisplayTimedTextToForce(GetPlayersAll(),6.,"敌主将："+GetUnitName(ON[GetUnitLevel(C5)])+"已经出现，请小心应付！")
call IssuePointOrderLoc(ON[GetUnitLevel(C5)],"attack",NT[6])
call DisableTrigger(NS)
call CreateNUnitsAtLoc(1,$6E646572,Player(PLAYER_NEUTRAL_PASSIVE),NT[4],bj_UNIT_FACING)
set OV=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(180.,$4245666E,OV)
call RemoveLocation(NT[0])
call RemoveLocation(NT[4])
call RemoveLocation(NT[6])
if Gq>=7 or DzAPI_Map_GetMatchType()==1006 or DzAPI_Map_GetMatchType()==2006 or IN==true then
if GetUnitTypeId(ON[G5])==$486D6272 then
call ShowUnitShow(E0)
call SetUnitPosition(E0,-6122.,-4715.)
call ShowUnitShow(Er)
call SetUnitPosition(Er,5350.,-1380.)
else
if GetUnitTypeId(ON[G5])==$4F746872 then
call ShowUnitShow(El)
call SetUnitPosition(El,-1230.,7800.)
else
if GetUnitTypeId(ON[G5])==$55746963 then
call ShowUnitShow(E1)
call SetUnitPosition(E1,-6122.,-4715.)
else
if GetUnitTypeId(ON[G5])==$4564656D then
call ShowUnitShow(Ee)
call SetUnitPosition(Ee,-6122.,-4715.)
else
if GetUnitTypeId(ON[G5])==$4E304352 then
call ShowUnitShow(E2)
call SetUnitPosition(E2,-6122.,-4715.)
call ShowUnitShow(FI)
call SetUnitPosition(FI,4325.,-3000.)
call ShowUnitShow(En)
call SetUnitPosition(En,5350.,-1800.)
else
if GetUnitTypeId(ON[G5])==$4F676C64 then
call ShowUnitShow(EM)
call SetUnitPosition(EM,-6122.,-4715.)
else
if G5==22 or GetUnitTypeId(ON[G5])==$4542435A then
call ShowUnitShow(E4)
call SetUnitPosition(E4,-1230.,7800.)
call ShowUnitShow(E3)
call SetUnitPosition(E3,-6122.,-4715.)
call ShowUnitShow(Ep)
call SetUnitPosition(Ep,5350.,-1380.)
call DisplayTextToForce(GetPlayersAll(),"吴国将领吕蒙已经出现！")
call ShowUnitShow(Es)
call SetUnitPosition(Es,5350.,-1380.)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"太史慈从吴国参战")
else
if GetUnitTypeId(ON[G5])==$45657669 or GetUnitTypeId(ON[G5])==$42304C42 then
call ShowUnitShow(E5)
call SetUnitPosition(E5,-6122.,-4715.)
call ShowUnitShow(FE)
call SetUnitPosition(FE,4325.,-3000.)
call ShowUnitShow(Ev)
call SetUnitPosition(Ev,5350.,-1800.)
call ShowUnitShow(Ew)
call SetUnitPosition(Ew,5350.,-1800.)
else
if GetUnitTypeId(ON[G5])==$4E6D616E then
call ShowUnitShow(E6)
call SetUnitPosition(E6,-6122.,-4715.)
call ShowUnitShow(FK)
call SetUnitPosition(FK,4325.,-3000.)
else
if GetUnitTypeId(ON[G5])==$5563726C then
call ShowUnitShow(E7)
call SetUnitPosition(E7,-6122.,-4715.)
call ShowUnitShow(Em)
call SetUnitPosition(Em,5350.,-1800.)
else
if GetUnitTypeId(ON[G5])==$45667572 then
call ShowUnitShow(E8)
call SetUnitPosition(E8,-6122.,-4715.)
else
if GetUnitTypeId(ON[G5])==$4E706C64 then
call ShowUnitShow(FB)
call SetUnitPosition(FB,-6122.,-4715.)
call ShowUnitShow(E9)
call SetUnitPosition(E9,-6122.,-4715.)
else
if GetUnitTypeId(ON[G5])==$4F303034 then
call ShowUnitShow(FC)
call SetUnitPosition(FC,-1230.,7800.)
else
if GetUnitTypeId(ON[G5])==$4F636268 then
call ShowUnitShow(FD)
call SetUnitPosition(FD,-1230.,7800.)
else
if GetUnitTypeId(ON[G5])==$55766172 then
call ShowUnitShow(FJ)
call SetUnitPosition(FJ,-1230.,7800.)
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
if GetUnitTypeId(ON[G5])==$45777264 and G5==23 then
call ShowUnitShow(Et)
call SetUnitPosition(Et,5350.,-1800.)
call SetUnitPosition(Eu,5350.,-1800.)
call ShowUnitShow(Eu)
else
endif
if GetUnitTypeId(ON[G5])==$4F676C64 and G5==25 then
call ShowUnitShow(Ey)
call SetUnitPosition(Ey,5350.,-1800.)
call ShowUnitShow(Ex)
call SetUnitPosition(Ex,5350.,-1800.)
else
endif
endif
else
endif
call PauseTimer(G7)
call PauseTimer(G8)
call DisableTrigger(Nl)
call DisableTrigger(OJ)
endfunction
function mZ takes nothing returns nothing
set OY=CreateTrigger()
call TriggerRegisterTimerExpireEvent(OY,Fk)
call TriggerAddAction(OY,function mY)
endfunction
function ma takes nothing returns boolean
return GetUnitPointValue(GetTriggerUnit())!=9 and Gq>=7 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetOwningPlayer(GetTriggerUnit())==Player(9) or GetOwningPlayer(GetTriggerUnit())==Player(10)
endfunction
function mb takes nothing returns nothing
call EXSetUnitMoveType(GetTriggerUnit(),32)
call SetUnitPathing(GetTriggerUnit(),false)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))*1.2)
call UnitAddAbility(GetTriggerUnit(),$41425331)
call UnitAddAbility(GetTriggerUnit(),$41425330)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetUnitName(GetTriggerUnit())+"已经出现！！！！！")
endfunction
function mc takes nothing returns nothing
set Oa=CreateTrigger()
call a9(Oa,Bc)
call TriggerAddCondition(Oa,Condition(function ma))
call TriggerAddAction(Oa,function mb)
endfunction
function md takes nothing returns nothing
set M9[1]=$41436675
set M9[2]=$41736C6F
set M9[3]=$41436176
set M9[4]=$41437670
set M9[5]=$41696E66
set M9[6]=$41636874
set M9[7]=$41437463
set M9[8]=$41437231
set M9[9]=$53436165
set M9[10]=$41436374
set M9[11]=$41436168
set M9[12]=$414E736F
set M9[13]=$41436373
set M9[14]=$41436163
set M9[15]=$41436379
set M9[16]=$41776662
set M9[17]=$41436174
set M9[101]=$41303944
set M9[102]=$41303943
set M9[103]=$41303947
set M9[104]=$41303945
set M9[105]=$4130394A
set M9[106]='Ab3o'
set M9[107]='Ab3n'
set M9[200]=$414F636C
set M9[201]=$414E7367
set M9[202]=$4155736C
set M9[203]=$41486473
set M9[204]=$414E6D6F
set M9[205]=$41487462
set M9[206]=$41303447
set M9[207]=$41303452
set M9[208]=$41456572
set M9[209]=$41303342
set M9[210]=$4148627A
set M9[211]=$414E6664
set M9[212]=$414E6472
set M9[213]=$41456D62
set M9[214]=$414E6366
set M9[215]=$414E6162
set M9[216]=$414E6373
set M9[217]=$4155666E
set M9[218]=$41707267
set M9[219]=$41457366
set M9[220]=$4130355A
set M9[221]=$41303448
set M9[222]=$414E736F
set M9[223]=$4155696D
set M9[224]=$41456576
set M9[225]=$41436662
set M9[226]=$41487463
set M9[227]=$414E7362
endfunction
function me takes nothing returns nothing
set Ob=CreateTrigger()
call TriggerRegisterTimerEventSingle(Ob,2.)
call TriggerAddAction(Ob,function md)
endfunction
function mf takes nothing returns nothing
set N7[1]=$68666F6F
set N7[2]=$65617263
set N7[3]=$6E726F67
set N7[4]=$6F68756E
set N7[5]=$6F677275
set N7[6]=$6E667462
set N7[7]=$6F726169
set N7[8]=$6562616C
set N7[9]=$6E626C64
set N7[10]=$6573656E
set N7[11]=$6E773277
set N7[12]=$7562616E
set N7[13]=$68637468
set N7[14]=$6E636872
set N7[15]=$6E62616E
set N7[16]=$6E647462
set N7[17]=$6F67726B
set N7[18]=$6E627267
set N7[19]=$6F746175
set N7[20]=$68686573
set N7[21]=$6E6C7276
set N7[22]=$6E686561
set N7[23]=$6E636174
set N7[24]=$6E636867
set N7[25]=$6F776172
set N7[26]=$6E62656C
set N7[27]=$6F646B74
set N7[28]=$6F646B74
set N7[29]=$6E676831
set N7[30]=$6E676832
set N7[51]=$486D6B67
set N7[52]=$48626C6D
set N7[53]=$4F626C61
set N7[54]=$4F666172
set N7[55]=$4F746368
set N7[56]=$4F736864
set N7[61]=$6E766C6B
set N7[62]=$6E766B32
set N7[63]=$6E766C77
set N7[64]=$6E766C32
set N7[65]=$6E76696C
set OZ[1]=$486D6B67
set OZ[2]=$48626C6D
set OZ[3]=$4F626C61
set OZ[4]=$4F666172
set OZ[5]=$4F746368
set OZ[6]=$4F736864
set NU[1]=$6E766C6B
set NU[2]=$6E766B32
set NU[3]=$6E766C77
set NU[4]=$6E766C32
set NU[5]=$6E76696C
call SetPlayerStateBJ(Player(8),PLAYER_STATE_LUMBER_GATHERED,1)
set ON[1]=D5
set ON[2]=D2
set ON[3]=EN
set ON[4]=EK
set ON[5]=EL
set ON[6]=EI
set ON[7]=ED
set ON[8]=EC
set ON[9]=EG
set ON[10]=ET
set ON[11]=D4
set ON[12]=EO
set ON[13]=EB
set ON[14]=D7
set ON[15]=EP
set ON[16]=D9
set ON[17]=D8
set ON[18]=EY
set ON[19]=D6
set ON[20]=D3
set ON[21]=EF
set ON[22]=EM
set ON[23]=EJ
set ON[24]=EE
set ON[25]=EX
set G5=1
call CreateTimerDialogBJ(Fk,"")
set OX=bj_lastCreatedTimerDialog
endfunction
function mg takes nothing returns nothing
set Oc=CreateTrigger()
call TriggerRegisterTimerEventSingle(Oc,3.)
call TriggerAddAction(Oc,function mf)
endfunction
function mh takes nothing returns nothing
local integer Oe
local integer Of
local integer Og
set NT[1]=GetRectCenter(Z)
set NT[2]=GetRectCenter(a)
if GetOwningPlayer(DF)==Player(8) then
set Od[2]=GetRectCenter(w)
set Oe=1
loop
exitwhen Oe>5
call CreateUnitAtLoc(Player(9),N7[G5+1],Od[2],180.)
set Oe=Oe+1
endloop
call RemoveLocation(Od[2])
else
endif
if G5>=16 and GetOwningPlayer(Dh)!=Player(8) and IsUnitDeadBJ(CM)==false then
set NT[3]=GetRectCenter(BR)
set Of=1
loop
exitwhen Of>5
call CreateUnitAtLoc(Player(10),N7[G5+1],NT[3],180.)
set Of=Of+1
endloop
call RemoveLocation(NT[3])
else
endif
set Og=1
loop
exitwhen Og>5
call CreateUnitAtLoc(Player(9),N7[G5],NT[1],270.)
call CreateUnitAtLoc(Player(9),N7[G5+1],NT[2],270.)
set Og=Og+1
endloop
call RemoveLocation(NT[1])
call RemoveLocation(NT[2])
endfunction
function mi takes nothing returns nothing
set Nj=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Nj,G7)
call TriggerAddAction(Nj,function mh)
endfunction
function mj takes nothing returns nothing
local integer Oe
set NT[11]=GetRectCenter(BH)
set Od[4]=GetRectCenter(BC)
set Oe=1
loop
exitwhen Oe>5
call CreateUnitAtLoc(Player(9),N7[G5],NT[11],0)
call CreateUnitAtLoc(Player(9),N7[G5],Od[4],0)
set Oe=Oe+1
endloop
call RemoveLocation(NT[11])
call RemoveLocation(Od[4])
endfunction
function mk takes nothing returns nothing
set Nl=CreateTrigger()
call DisableTrigger(Nl)
call TriggerRegisterTimerEventPeriodic(Nl,15.-I2R(GetUnitAbilityLevelSwapped($41436576,C5)))
call TriggerAddAction(Nl,function mj)
endfunction
function ml takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==Player(10) and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true
endfunction
function mm takes nothing returns nothing
if GetOwningPlayer(DF)==Player(8) and GetUnitY(GetEnumUnit())>=11744. then
call IssuePointOrderById(GetEnumUnit(),851983,-6848.,12990.)
else
call IssuePointOrderById(GetEnumUnit(),851983,-1170.,-5060.)
endif
endfunction
function mn takes nothing returns nothing
local group KB
local unit KC
set Hh=ao(Bc,Condition(function ml))
call ForGroupBJ(Hh,function mm)
call IssuePointOrderById(DF,851983,-5524.,13031.)
call DestroyGroup(Hh)
call IssuePointOrder(ON[GetUnitLevel(C5)],"attack",-1170.,-5060.)
call IssuePointOrder(ON[GetUnitLevel(C5)-1],"attack",-1170.,-5060.)
call IssuePointOrder(ON[GetUnitLevel(C5)-2],"attack",-1170.,-5060.)
set KB=null
set KC=null
endfunction
function mo takes nothing returns nothing
set Oh=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(Oh,5.)
call TriggerAddAction(Oh,function mn)
endfunction
function mp takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),Player(8))==true
endfunction
function mq takes nothing returns nothing
call IssuePointOrder(GetTriggerUnit(),"attack",-1170.,-5060.)
endfunction
function mr takes nothing returns nothing
set Oi=CreateTrigger()
call a9(Oi,Z)
call a9(Oi,b)
call a9(Oi,a)
call a9(Oi,g)
call a9(Oi,BH)
call a9(Oi,BR)
call a9(Oi,BC)
call TriggerAddCondition(Oi,Condition(function mp))
call TriggerAddAction(Oi,function mq)
endfunction
function ms takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),Player(8))==true
endfunction
function mt takes nothing returns nothing
call IssuePointOrder(GetTriggerUnit(),"attack",-6688.,13000.)
call EXSetUnitCollisionType(false,GetTriggerUnit(),3)
endfunction
function mu takes nothing returns nothing
set Oj=CreateTrigger()
call a9(Oj,w)
call TriggerAddCondition(Oj,Condition(function ms))
call TriggerAddAction(Oj,function mt)
endfunction
function mv takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())==Player(8)
endfunction
function mw takes nothing returns nothing
call IssuePointOrder(GetTriggerUnit(),"move",-1170.,-5060.)
endfunction
function mx takes nothing returns nothing
set Ok=CreateTrigger()
call a9(Ok,t)
call TriggerAddCondition(Ok,Condition(function mv))
call TriggerAddAction(Ok,function mw)
endfunction
function my takes nothing returns nothing
set NT[5]=GetRandomLocInRect(b)
set Ol=CreateUnitAtLoc(Player(10),OZ[GetRandomInt(1,6)],NT[5],270.)
call SetHeroLevel(Ol,G5*3,false)
call UnitAddAbility(Ol,M9[GetRandomInt(1,17)])
call UnitAddAbility(Ol,M9[GetRandomInt(1,17)])
call RemoveLocation(NT[5])
if ModuloInteger(G5,3)==0 then
set NT[10]=GetRandomLocInRect(g)
set Ol=CreateUnitAtLoc(Player(10),OZ[GetRandomInt(1,6)],NT[10],0.)
call SetHeroLevel(Ol,G5*3,false)
call UnitAddAbility(Ol,M9[GetRandomInt(1,15)])
call UnitAddAbility(Ol,M9[GetRandomInt(1,15)])
call IssuePointOrderByIdLoc(Ol,851983,Om)
call RemoveLocation(NT[10])
else
endif
endfunction
function mz takes nothing returns nothing
set Nk=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Nk,G8)
call TriggerAddAction(Nk,function my)
endfunction
function m0 takes nothing returns nothing
set Od[3]=GetRectCenter(w)
set Ol=CreateUnitAtLoc(Player(10),N7[GetRandomInt(51,56)],Od[3],270.)
call SetHeroLevel(Ol,G5*3,false)
call UnitAddAbility(Ol,M9[GetRandomInt(1,15)])
call UnitAddAbility(Ol,M9[GetRandomInt(1,15)])
call RemoveLocation(Od[3])
endfunction
function m1 takes nothing returns nothing
set OJ=CreateTrigger()
call DisableTrigger(OJ)
call TriggerRegisterTimerEventPeriodic(OJ,25.)
call TriggerAddAction(OJ,function m0)
endfunction
function m2 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()==ON[GetUnitLevel(C5)]
endfunction
function m3 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
if ModuloInteger(G5,3)==0 then
set NT[10]=GetRandomLocInRect(g)
else
set NT[10]=GetRandomLocInRect(b)
endif
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Ol=CreateUnitAtLoc(Player(10),OZ[GetRandomInt(1,6)],NT[5],270.)
call SetHeroLevel(Ol,G5*3,false)
call UnitAddAbility(Ol,M9[GetRandomInt(1,17)])
call UnitAddAbility(Ol,M9[GetRandomInt(1,17)])
call IssuePointOrderByIdLoc(Ol,851983,Om)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call RemoveLocation(NT[10])
endfunction
function m4 takes nothing returns nothing
set On=CreateTrigger()
call a9(On,b)
call a9(On,BH)
call TriggerAddCondition(On,Condition(function m2))
call TriggerAddAction(On,function m3)
endfunction
function m5 takes nothing returns boolean
return GetUnitLevel(C5)==16
endfunction
function m6 takes nothing returns nothing
call ShowUnitShow(CM)
call ShowUnitShow(EQ)
call ShowUnitShow(ER)
call ShowUnitShow(ES)
call DisplayTextToForce(GetPlayersAll(),"吴国背弃盟约,展开进攻!")
endfunction
function m7 takes nothing returns nothing
set Oo=CreateTrigger()
call TriggerRegisterUnitEvent(Oo,C5,EVENT_UNIT_HERO_LEVEL)
call TriggerAddCondition(Oo,Condition(function m5))
call TriggerAddAction(Oo,function m6)
endfunction
function m8 takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function m9 takes nothing returns nothing
if IsUnitEnemy(GetTriggerUnit(),Player(8))==true then
if GetUnitPointValue(GetTriggerUnit())!=9 and GetUnitAbilityLevel(GetTriggerUnit(),$41425353)==0 then
call UnitAddAbility(GetTriggerUnit(),$41425353)
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+G5*(G5+1+0)*20,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+G5*10,true)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+G5*30,true)
else
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+G5*20,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+G5*10,true)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+G5*20,true)
endif
else
endif
endfunction
function nB takes nothing returns nothing
set Sa=CreateTrigger()
call DisableTrigger(Sa)
call a9(Sa,Bc)
call TriggerAddCondition(Sa,Condition(function m8))
call TriggerAddAction(Sa,function m9)
endfunction
function nC takes nothing returns nothing
endfunction
function nD takes nothing returns nothing
endfunction
function nE takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72776174
endfunction
// 小黑屋进入方法
function nF takes nothing returns nothing
if false and DzAPI_Map_HasMallItem(GetOwningPlayer(GetTriggerUnit()),"ZGGG")==true or RequestExtraBooleanData(50,GetOwningPlayer(GetTriggerUnit()),null,null,false,0,0,0)==true or Hg[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==GetObjectName($65303130) then
call fn(GetTriggerUnit(),$926BED59)
call EnableTrigger(Oq)
if IsUnitHiddenBJ(Dw)==true then
call ShowUnit(Dw,true)
else
endif
else
call fn(GetTriggerUnit(),$F8DC6245)
endif
endfunction
function nG takes nothing returns nothing
set Op=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Op,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Op,Condition(function nE))
call TriggerAddAction(Op,function nF)
endfunction
function nH takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function nI takes nothing returns nothing
call fn(GetTriggerUnit(),$CDE5E70A)
endfunction
function nJ takes nothing returns nothing
set Os=CreateTrigger()
call a9(Os,e)
call TriggerAddCondition(Os,Condition(function nH))
call TriggerAddAction(Os,function nI)
endfunction
function nK takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function nL takes nothing returns nothing
call fn(GetTriggerUnit(),1)
endfunction
function nM takes nothing returns nothing
set Ot=CreateTrigger()
call a9(Ot,Bi)
call TriggerAddCondition(Ot,Condition(function nK))
call TriggerAddAction(Ot,function nL)
endfunction
function nN takes nothing returns nothing
local integer Oe
set G4=ap(Bh,Player(9))
if CountUnitsInGroup(G4)<15 then
set Oe=1
loop
exitwhen Oe>11
call CreateUnit(Player(9),N7[G5],-11900.,15240.,bj_UNIT_FACING)
set Oe=Oe+1
endloop
call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE),$6E716234,-11900.,15240.,bj_UNIT_FACING)
call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE),$6E716234,-11900.,15240.,bj_UNIT_FACING)
call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE),$6E716234,-11900.,15240.,bj_UNIT_FACING)
call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE),$6E716234,-11900.,15240.,bj_UNIT_FACING)
else
endif
call GroupClear(G4)
call DestroyGroup(G4)
endfunction
function nO takes nothing returns nothing
set Oq=CreateTrigger()
call DisableTrigger(Oq)
call TriggerRegisterTimerEventPeriodic(Oq,3.)
call TriggerAddAction(Oq,function nN)
endfunction
function nP takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72737064
endfunction
function nQ takes nothing returns nothing
set NT[12]=GetRectCenter(i)
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),NT[12],0)
call SetUnitPositionLoc(GetTriggerUnit(),NT[12])
call EnableTrigger(Ov)
call RemoveLocation(NT[12])
endfunction
function nR takes nothing returns nothing
set Ou=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ou,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Ou,Condition(function nP))
call TriggerAddAction(Ou,function nQ)
endfunction
function nS takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())!=Player(10)
endfunction
function nT takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(8))==true
endfunction
function nU takes nothing returns nothing
set G6=ao(i,Condition(function nT))
if CountUnitsInGroup(G6)<1 then
call DisableTrigger(Ov)
else
endif
call GroupClear(G6)
call DestroyGroup(G6)
set NT[13]=GetRectCenter(f)
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(),NT[13],0)
call SetUnitPositionLoc(GetTriggerUnit(),NT[13])
call RemoveLocation(NT[13])
endfunction
function nV takes nothing returns nothing
set Ow=CreateTrigger()
call a9(Ow,h)
call TriggerAddCondition(Ow,Condition(function nS))
call TriggerAddAction(Ow,function nU)
endfunction
// boss房挑战事件
function nW takes nothing returns nothing
set G6=ap(i,Player(10))
if CountUnitsInGroup(G6)<5 then
set Ox=CreateUnit(Player(10),N7[GetRandomInt(51,56)],1345.,-7225.,90.)
call SetHeroLevel(Ox,G5*3,false)
call UnitAddAbility(Ox,M9[GetRandomInt(1,15)])
else
endif
call GroupClear(G6)
call DestroyGroup(G6)
endfunction
function nX takes nothing returns nothing
set Ov=CreateTrigger()
call DisableTrigger(Ov)
call TriggerRegisterTimerEventPeriodic(Ov,5.)
call TriggerAddAction(Ov,function nW)
endfunction
function nY takes nothing returns nothing
set NT[10]=GetRectCenter(c)
if GetItemTypeId(GetManipulatedItem())==$676F6D6E then
call CreateNUnitsAtLoc(1,$68686F75,GetOwningPlayer(GetTriggerUnit()),NT[10],bj_UNIT_FACING)
else
endif
if GetItemTypeId(GetManipulatedItem())==$67757669 then
call CreateNUnitsAtLoc(1,$68616C74,GetOwningPlayer(GetTriggerUnit()),NT[10],bj_UNIT_FACING)
else
endif
call RemoveLocation(NT[10])
endfunction
function nZ takes nothing returns nothing
set Oy=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Oy,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(Oy,function nY)
endfunction
function na takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72686533
endfunction
function nb takes nothing returns nothing
local integer gambleTime=0
set gambleUnit=GetTriggerUnit()
set gambleTime=gamblePlayerGroup[GetPlayerId(GetOwningPlayer(gambleUnit))]+1
set gamblePlayerGroup[GetPlayerId(GetOwningPlayer(gambleUnit))] =gambleTime
if GetRandomInt(1,4)==3 then
call AdjustPlayerStateBJ(10000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"你赢得了双倍金钱的奖励！")
else
if GetRandomInt(1,8)==5 then
call AdjustPlayerStateBJ(15000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"你赢得了三倍金钱的奖励！")
else
if GetRandomInt(1,28)==28 then
call AdjustPlayerStateBJ(50000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"|Cff00ff00恭喜，你赢得了十倍金钱的奖励！")
else
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"你输得一败涂地...")
endif
endif
endif
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+"当前赌博次数："+I2S(gambleTime))+" 次")
if ModuloInteger(gambleTime,10)==0 then
call ModifyHeroStat(bj_HEROSTAT_STR,gambleUnit,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,gambleUnit,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_INT,gambleUnit,bj_MODIFYMETHOD_SUB,10)
call KillUnit(gambleUnit)
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+":魏国大军来势汹汹，尔等还在沉迷赌博！丞相震怒，下令其处死，并扣除10点全属性！"))
endif
// 如果触发者是姜维
if gambleTime==20 and GetUnitTypeId(GetTriggerUnit())==$486B616C or GetUnitTypeId(GetTriggerUnit())==$484A5731 then
call ModifyHeroStat(bj_HEROSTAT_STR,gambleUnit,bj_MODIFYMETHOD_SUB,20)
call ModifyHeroStat(bj_HEROSTAT_AGI,gambleUnit,bj_MODIFYMETHOD_SUB,20)
call ModifyHeroStat(bj_HEROSTAT_INT,gambleUnit,bj_MODIFYMETHOD_SUB,20)
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+":伯约，汝辜负丞相栽培，额外扣除20点全属性！"))
call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00姜维获得觉醒技能：志继！ |cffff0000当姜维修炼到100级时，保留所有属性自动回退到1级，并额外获得50射程和20法术强度，每次重修经验获取增加5%并减少0.03攻击间隔")
call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00姜维额外获得20%经验获取！")
call SetPlayerHandicapXPBJ(GetOwningPlayer(gambleUnit),100)
set isJWawake=true
endif
if gambleTime==50 then
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+":丞相喟叹：有如此恒心者，若是全力伐贼，岂不能早日实现北伐夙愿！"))
call SetItemInvulnerable(CreateItem($69743063,-1220.,-5240.),true)
endif
endfunction
// 赌博事件
function nc takes nothing returns nothing
set Oz=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Oz,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Oz,Condition(function na))
call TriggerAddAction(Oz,function nb)
endfunction
function nd takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72726532
endfunction
function ne takes nothing returns nothing
local integer gambleTime=0
set gambleUnit=GetTriggerUnit()
set gambleTime=gamblePlayerGroup[GetPlayerId(GetOwningPlayer(gambleUnit))]+1
set gamblePlayerGroup[GetPlayerId(GetOwningPlayer(gambleUnit))] =gambleTime
if GetRandomInt(1,4)==2 then
call UnitAddItemByIdSwapped(ChooseRandomItemExBJ(GetRandomInt(3,8),ITEM_TYPE_PERMANENT),GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),30,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("通过赌博获得了："+GetItemName(GetLastCreatedItem())))
else
if GetRandomInt(1,18)==18 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(1,41)],GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),30,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("通过赌博获得了："+GetItemName(GetLastCreatedItem())))
else
if GetRandomInt(1,40)==30 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(43,63)],GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),30,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("通过赌博获得了："+GetItemName(GetLastCreatedItem())))
else
call DisplayTimedTextToForce(GetPlayersAll(),30,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"你什么也没得到！")
endif
endif
endif
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+"当前赌博次数："+I2S(gambleTime))+" 次")
if ModuloInteger(gambleTime,10)==0 then
call ModifyHeroStat(bj_HEROSTAT_STR,gambleUnit,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,gambleUnit,bj_MODIFYMETHOD_SUB,10)
call ModifyHeroStat(bj_HEROSTAT_INT,gambleUnit,bj_MODIFYMETHOD_SUB,10)
call KillUnit(gambleUnit)
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+":魏国大军来势汹汹，尔等还在沉迷赌博！丞相震怒，下令其处死，并扣除10点全属性！"))
endif
// 如果触发者是姜维
if gambleTime==20 and GetUnitTypeId(GetTriggerUnit())==$486B616C or GetUnitTypeId(GetTriggerUnit())==$484A5731 then
call ModifyHeroStat(bj_HEROSTAT_STR,gambleUnit,bj_MODIFYMETHOD_SUB,20)
call ModifyHeroStat(bj_HEROSTAT_AGI,gambleUnit,bj_MODIFYMETHOD_SUB,20)
call ModifyHeroStat(bj_HEROSTAT_INT,gambleUnit,bj_MODIFYMETHOD_SUB,20)
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+":伯约，汝莫要辜负丞相栽培！额外扣除你20点全属性！"))
call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00姜维获得觉醒技能：志继！ |cffff0000当姜维修炼到100级时，保留所有属性自动回退到1级，并额外获得50射程和20法术强度，每次重修经验获取增加5%并减少0.03攻击间隔")
call DisplayTextToForce(GetPlayersAll(),GetUnitName(gambleUnit)+"|Cff00ff00姜维额外获得20%经验获取！")
call SetPlayerHandicapXPBJ(GetOwningPlayer(gambleUnit),100)
set isJWawake=true
endif
if gambleTime==50 then
call DisplayTextToForce(GetPlayersAll(),"|cffff0000"+(GetUnitName(gambleUnit)+":丞相喟叹：有如此恒心者，若是全力伐贼，岂不能早日实现北伐夙愿！"))
call SetItemInvulnerable(CreateItem($69743063,-1220.,-5240.),true)
endif
endfunction
function nf takes nothing returns nothing
set O0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(O0,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(O0,Condition(function nd))
call TriggerAddAction(O0,function ne)
endfunction
// 武器练级事件
function ng takes nothing returns nothing
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF亮银枪（一级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36)))+"/150"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36))>=150 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A36))
call UnitAddItemByIdSwapped($72656A34,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的亮银枪已升至二级")
else
endif
elseif bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF亮银枪（二级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34)))+"/350"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34))>=350 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72656A34))
call UnitAddItemByIdSwapped($676F626D,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的亮银枪已升至三级")
else
endif
endif
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF青缸剑（一级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764)))+"/25"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764))>=25 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726764))
call UnitAddItemByIdSwapped($736F7236,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的青缸剑已升至二级")
else
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF青缸剑（二级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236)))+"/75"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236))>=75 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7236))
call UnitAddItemByIdSwapped($736F7239,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的青缸剑已升至三级")
else
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF青缸剑（三级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239)))+"/75"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239))>=75 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7239))
call UnitAddItemByIdSwapped($66726867,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的青缸剑已升至四级")
else
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF青缸剑（四级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867)))+"/90"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867))>=90 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$66726867))
call UnitAddItemByIdSwapped($6A64726E,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的青缸剑已升至终级")
else
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D))+4)
else
endif

call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF方天画戟（一级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D)))+"/100"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D))>=100 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$6B6C6D6D))
call UnitAddItemByIdSwapped($736F7261,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的方天画戟已升至二级")
else
endif

else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF方天画戟（二级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261)))+"/150"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261))>=150 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736F7261))
call UnitAddItemByIdSwapped($6D6E7366,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的方天画戟已升至终级")
else
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF雌雄一对剑（一级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761)))+"/60"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761))>=60 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$73747761))
call UnitAddItemByIdSwapped($736B7368,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的雌雄一对剑已升至二级")
else
call DoNothing()
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF雌雄一对剑（二级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368)))+"/150"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368))>=150 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$736B7368))
call UnitAddItemByIdSwapped($6C6E726E,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|Cffffff00恭喜！你的雌雄一对剑已升至终级")
else
call DoNothing()
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF李广之弓（一级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31)))+"/160"))
if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31))>=160 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$72616D31))
call UnitAddItemByIdSwapped($75666C67,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的李广之弓已升至二级")
else
call DoNothing()
endif
else
if bC(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67))+1)
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
call SetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67),GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67))+4)
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF李广之弓（二级）："+(I2S(GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67)))+"/250"))

if GetItemUserData(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67))>=250 then
call RemoveItem(aj(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$75666C67))
call UnitAddItemByIdSwapped($666C6167,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|Cffffff00恭喜！你的李广之弓已升至终级！")
else
call DoNothing()
endif

else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function nh takes nothing returns nothing
set O1=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(O1,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(O1,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(O1,Player(PLAYER_NEUTRAL_AGGRESSIVE),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(O1,function ng)
endfunction
function ni takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72616D31
endfunction
function nj takes nothing returns nothing
call EnableTrigger(O3)
endfunction
function nk takes nothing returns nothing
set O2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(O2,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(O2,Condition(function ni))
call TriggerAddAction(O2,function nj)
endfunction
function nl takes nothing returns boolean
return IsUnitType(GetKillingUnitBJ(),UNIT_TYPE_HERO)==true or IsUnitIllusionBJ(GetKillingUnitBJ())==true or GetUnitAbilityLevel(GetKillingUnitBJ(),$4176756C)>0 or GetUnitAbilityLevel(GetKillingUnitBJ(),$416C6F63)>0
endfunction
function nm takes nothing returns nothing
endfunction
function nn takes nothing returns nothing
set O3=CreateTrigger()
call DisableTrigger(O3)
call TriggerRegisterAnyUnitEventBJ(O3,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(O3,Condition(function nl))
call TriggerAddAction(O3,function nm)
endfunction
function no takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$49303047
endfunction
function np takes nothing returns nothing
call EnableTrigger(O5)
endfunction
function nq takes nothing returns nothing
set O4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(O4,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(O4,Condition(function no))
call TriggerAddAction(O4,function np)
endfunction
function nr takes nothing returns boolean
return bC(GetKillingUnitBJ(),$49303047)==true
endfunction
function ns takes nothing returns nothing
set Fa[8]=Fa[8]+1
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
set Fa[8]=Fa[8]+4
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF鼎文杖（一级）："+(I2S(Fa[8])+"/80"))
if Fa[8]>=80 and IsUnitType(GetKillingUnitBJ(),UNIT_TYPE_HERO)==true then
call EnableTrigger(O6)
call RemoveItem(aj(GetKillingUnitBJ(),$49303047))
call UnitAddItemByIdSwapped($49303048,GetKillingUnitBJ())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"你的鼎文杖已升至二级")
else
call DoNothing()
endif
endfunction
function nt takes nothing returns nothing
set O5=CreateTrigger()
call DisableTrigger(O5)
call TriggerRegisterAnyUnitEventBJ(O5,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(O5,Condition(function nr))
call TriggerAddAction(O5,function ns)
endfunction
function nu takes nothing returns boolean
return bC(GetKillingUnitBJ(),$49303048)==true
endfunction
function nv takes nothing returns nothing
set Fa[8]=Fa[8]+1
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
set Fa[8]=Fa[8]+4
else
endif
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF鼎文杖（二级）："+(I2S(Fa[8])+"/180"))
if Fa[8]>=180 and IsUnitType(GetKillingUnitBJ(),UNIT_TYPE_HERO)==true and bC(GetKillingUnitBJ(),$49303048)==true then
call RemoveItem(aj(GetKillingUnitBJ(),$49303048))
call UnitAddItemByIdSwapped($49303046,GetKillingUnitBJ())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetKillingUnitBJ()))+"|Cffffff00恭喜！你的鼎文杖已升至终级")
else
call DoNothing()
endif
endfunction
function nw takes nothing returns nothing
set O6=CreateTrigger()
call DisableTrigger(O6)
call TriggerRegisterAnyUnitEventBJ(O6,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(O6,Condition(function nu))
call TriggerAddAction(O6,function nv)
endfunction
function nx takes nothing returns nothing
local item O8=GetManipulatedItem()
if GetItemTypeId(GetManipulatedItem())==$6573617A then
call SetItemUserData(GetManipulatedItem(),GetItemUserData(GetManipulatedItem())+1)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffB366FF七星灯（一级）："+(I2S(GetItemUserData(GetManipulatedItem()))+"/20"))
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+1000.)
if GetItemUserData(GetManipulatedItem())>=20 then
call SetItemCharges(GetManipulatedItem(),1)
call RemoveItem(aj(GetTriggerUnit(),$6573617A))
call UnitAddItem(GetTriggerUnit(),CreateItem($6776736D,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call SetItemPosition(O8,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"你的七星灯已升至二级")
else
endif
else
if GetItemTypeId(GetManipulatedItem())==$6776736D then
call SetItemUserData(GetManipulatedItem(),GetItemUserData(GetManipulatedItem())+1)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffB366FF七星灯（二级）："+(I2S(GetItemUserData(GetManipulatedItem()))+"/30"))
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+2000.)
if GetItemUserData(GetManipulatedItem())>=30 then
call SetItemCharges(GetManipulatedItem(),1)
call RemoveItem(aj(GetTriggerUnit(),$6776736D))
call UnitAddItem(GetTriggerUnit(),CreateItem($7372746C,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call SetItemPosition(O8,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"恭喜！你的七星灯已升至终级")
else
endif
else
if GetItemTypeId(GetManipulatedItem())==$7372746C then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+5000.)
else
endif
endif
endif
set O8=null
endfunction
function ny takes nothing returns nothing
set O7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(O7,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddAction(O7,function nx)
endfunction
function nz takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$736F7231
endfunction
function n0 takes nothing returns nothing
call EnableTrigger(PB)
endfunction
function n1 takes nothing returns nothing
set O9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(O9,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(O9,Condition(function nz))
call TriggerAddAction(O9,function n0)
endfunction
function n2 takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$736F7231)==true
endfunction
function n3 takes nothing returns nothing
set Fa[5]=Fa[5]+1
if ModuloInteger(Fa[5],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"龙鳞铠甲(一级):"+(I2S(Fa[5])+"/500"))
else
endif
if Fa[5]>=500 then
call EnableTrigger(PC)
call RemoveItem(aj(GetTriggerUnit(),$736F7231))
call UnitAddItemByIdSwapped($6F6C6967,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"你的龙鳞铠甲已升至二级")
else
call DoNothing()
endif
endfunction
function n4 takes nothing returns nothing
set PB=CreateTrigger()
call DisableTrigger(PB)
call TriggerRegisterAnyUnitEventBJ(PB,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PB,Condition(function n2))
call TriggerAddAction(PB,function n3)
endfunction
function n5 takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$6F6C6967)==true
endfunction
function n6 takes nothing returns nothing
set Fa[5]=Fa[5]+1
if ModuloInteger(Fa[5],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"龙鳞铠甲(二级):"+(I2S(Fa[5])+"/1200"))
else
endif
if Fa[5]>=1200 then
call RemoveItem(aj(GetTriggerUnit(),$6F6C6967))
call UnitAddItemByIdSwapped($6F6C6932,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"|Cffffff00恭喜！你的龙鳞铠甲已升至终级")
else
call DoNothing()
endif
endfunction
function n7 takes nothing returns nothing
set PC=CreateTrigger()
call DisableTrigger(PC)
call TriggerRegisterAnyUnitEventBJ(PC,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PC,Condition(function n5))
call TriggerAddAction(PC,function n6)
endfunction
function n8 takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$746D6D74
endfunction
function n9 takes nothing returns nothing
call EnableTrigger(PE)
endfunction
function oB takes nothing returns nothing
set PD=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(PD,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(PD,Condition(function n8))
call TriggerAddAction(PD,function n9)
endfunction
function oC takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$746D6D74)==true
endfunction
function oD takes nothing returns nothing
set Fa[6]=Fa[6]+1
if ModuloInteger(Fa[6],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"燕翎金甲(一级):"+(I2S(Fa[6])+"/500"))
else
endif
if Fa[6]>=500 then
call RemoveItem(aj(GetTriggerUnit(),$746D6D74))
call UnitAddItemByIdSwapped($73686474,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"你的燕岭金甲已升至二级")
call EnableTrigger(PF)
else
call DoNothing()
endif
endfunction
function oE takes nothing returns nothing
set PE=CreateTrigger()
call DisableTrigger(PE)
call TriggerRegisterAnyUnitEventBJ(PE,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PE,Condition(function oC))
call TriggerAddAction(PE,function oD)
endfunction
function oF takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$73686474)==true
endfunction
function oG takes nothing returns nothing
set Fa[6]=Fa[6]+1
if ModuloInteger(Fa[6],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"燕翎金甲(二级):"+(I2S(Fa[6])+"/1200"))
else
endif
if Fa[6]>=1200 then
call RemoveItem(aj(GetTriggerUnit(),$73686474))
call UnitAddItemByIdSwapped($72756D70,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"|Cffffff00恭喜！你的燕岭金甲已升至终级")
else
call DoNothing()
endif
endfunction
function oH takes nothing returns nothing
set PF=CreateTrigger()
call DisableTrigger(PF)
call TriggerRegisterAnyUnitEventBJ(PF,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PF,Condition(function oF))
call TriggerAddAction(PF,function oG)
endfunction
function oI takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$686F726C
endfunction
function oJ takes nothing returns nothing
call EnableTrigger(PH)
endfunction
function oK takes nothing returns nothing
set PG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(PG,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(PG,Condition(function oI))
call TriggerAddAction(PG,function oJ)
endfunction
function oL takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$686F726C)==true
endfunction
function oM takes nothing returns nothing
set Fa[7]=Fa[7]+1
if ModuloInteger(Fa[7],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"的卢马(一级):"+(I2S(Fa[7])+"/300"))
else
endif
if Fa[7]>=300 then
call RemoveItem(aj(GetTriggerUnit(),$686F726C))
call UnitAddItemByIdSwapped($6173626C,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"你的的卢马已升至二级")
call EnableTrigger(PI)
else
call DoNothing()
endif
endfunction
function oN takes nothing returns nothing
set PH=CreateTrigger()
call DisableTrigger(PH)
call TriggerRegisterAnyUnitEventBJ(PH,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PH,Condition(function oL))
call TriggerAddAction(PH,function oM)
endfunction
function oO takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$6173626C)==true
endfunction
function oP takes nothing returns nothing
set Fa[7]=Fa[7]+1
if ModuloInteger(Fa[7],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"的卢马(二级):"+(I2S(Fa[7])+"/600"))
else
endif
if Fa[7]>=600 then
call RemoveItem(aj(GetTriggerUnit(),$6173626C))
call UnitAddItemByIdSwapped($69776272,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"你的的卢马已升至三级")
call EnableTrigger(PJ)
else
call DoNothing()
endif
endfunction
function oQ takes nothing returns nothing
set PI=CreateTrigger()
call DisableTrigger(PI)
call TriggerRegisterAnyUnitEventBJ(PI,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PI,Condition(function oO))
call TriggerAddAction(PI,function oP)
endfunction
function oR takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$69776272)==true
endfunction
function oS takes nothing returns nothing
set Fa[7]=Fa[7]+1
if ModuloInteger(Fa[7],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"的卢马(三级):"+(I2S(Fa[7])+"/1000"))
else
endif
if Fa[7]>=1000 then
call RemoveItem(aj(GetTriggerUnit(),$69776272))
call UnitAddItemByIdSwapped($616E6667,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"你的的卢马已升至四级")
call EnableTrigger(PK)
else
call DoNothing()
endif
endfunction
function oT takes nothing returns nothing
set PJ=CreateTrigger()
call DisableTrigger(PJ)
call TriggerRegisterAnyUnitEventBJ(PJ,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PJ,Condition(function oR))
call TriggerAddAction(PJ,function oS)
endfunction
function oU takes nothing returns boolean
return bC(GetAttackedUnitBJ(),$616E6667)==true
endfunction
function oV takes nothing returns nothing
set Fa[7]=Fa[7]+1
if ModuloInteger(Fa[7],10)==0 then
call DisplayTextToPlayer(GetOwningPlayer(GetAttackedUnitBJ()),0,0,"的卢马(四级):"+(I2S(Fa[7])+"/2000"))
else
endif
if Fa[7]>=2000 then
call RemoveItem(aj(GetTriggerUnit(),$616E6667))
call UnitAddItemByIdSwapped($6B67616C,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"|Cffffff00恭喜！你的的卢马已升至终级")
else
call DoNothing()
endif
endfunction
function oW takes nothing returns nothing
set PK=CreateTrigger()
call DisableTrigger(PK)
call TriggerRegisterAnyUnitEventBJ(PK,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(PK,Condition(function oU))
call TriggerAddAction(PK,function oV)
endfunction
function oX takes nothing returns nothing
local integer CC=GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))
if Hn[CC]!=777 and bC(GetKillingUnitBJ(),$72656A34)==true or bC(GetKillingUnitBJ(),$72656A36)==true then
set Hn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=Hn[CC]+1
if IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==true then
set Hn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=Hn[CC]+4
else
endif
if Hn[CC]>150 then
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF亮银枪（二级）："+(I2S(Hn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"/350"))
else
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,"|cffB366FF亮银枪（一级）："+(I2S(Hn[CC])+"/150"))
endif
if Hn[CC]>=150 and Hn[CC]<350 and IsUnitType(GetKillingUnitBJ(),UNIT_TYPE_HERO)==true and bC(GetKillingUnitBJ(),$72656A36)==true then
call RemoveItem(aj(GetKillingUnitBJ(),$72656A36))
call UnitAddItemByIdSwapped($72656A34,GetKillingUnitBJ())
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetKillingUnitBJ())+"你的亮银枪已升至二级")
else
if Hn[CC]>=350 and bC(GetKillingUnitBJ(),$72656A34)==true and IsUnitType(GetKillingUnitBJ(),UNIT_TYPE_HERO)==true then
call RemoveItem(aj(GetKillingUnitBJ(),$72656A34))
call UnitAddItemByIdSwapped($676F626D,GetKillingUnitBJ())
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetKillingUnitBJ())+"你的亮银枪已升至终级")
set Hn[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=777
else
endif
endif
else
endif
endfunction
function oY takes nothing returns nothing
set PL=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(PL,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PL,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PL,Player(PLAYER_NEUTRAL_AGGRESSIVE),EVENT_PLAYER_UNIT_DEATH)
// call TriggerAddAction(PL,function oX)
endfunction
function oZ takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$49303153 or GetItemTypeId(GetManipulatedItem())==$49303154 or GetItemTypeId(GetManipulatedItem())==$49303155 or GetItemTypeId(GetManipulatedItem())==$49303152
endfunction
function oa takes nothing returns nothing
call SetItemUserData(GetManipulatedItem(),GetItemUserData(GetManipulatedItem())+1)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetItemName(GetManipulatedItem())+(I2S(GetItemUserData(GetManipulatedItem())*5)+" %"))
if GetItemUserData(GetManipulatedItem())>=20 then
if GetItemTypeId(GetManipulatedItem())==$49303152 then
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped($49303153,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"恭喜你的成长飞刀得到提升")
else
if GetItemTypeId(GetManipulatedItem())==$49303153 then
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped($49303154,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"恭喜你的成长飞刀得到提升")
else
if GetItemTypeId(GetManipulatedItem())==$49303154 then
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped($49303155,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"恭喜你的成长飞刀得到提升")
else
if GetItemTypeId(GetManipulatedItem())==$49303155 then
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped($49303156,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetTriggerPlayer())+"恭喜你的成长飞刀得到提升")
else
endif
endif
endif
endif
else
endif
endfunction
function ob takes nothing returns nothing
set PM=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(PM,EVENT_PLAYER_UNIT_USE_ITEM)
call TriggerAddCondition(PM,Condition(function oZ))
call TriggerAddAction(PM,function oa)
endfunction
function oc takes nothing returns nothing
endfunction
function od takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetTriggerUnit())!=$4E74696E
endfunction
function oe takes nothing returns nothing
local integer LevelSZ = 0   //申明变量 改动1
local integer VU=ModuloInteger(GetItemLevel(GetManipulatedItem()),10)
local integer VV=GetItemLevel(GetManipulatedItem())/10
set Fb[GetConvertedPlayerId(GetTriggerPlayer())]=0
set Fc[GetConvertedPlayerId(GetTriggerPlayer())]=GetItemLevel(GetManipulatedItem())
// 领马
if GetItemTypeId(GetManipulatedItem())==$49303051 or GetItemTypeId(GetManipulatedItem())==$49303050 or GetItemTypeId(GetManipulatedItem())==$4930304D or GetItemTypeId(GetManipulatedItem())==$49303244 then
if Fe[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false and HG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true or DzAPI_Map_GetMapLevel(GetOwningPlayer(GetTriggerUnit()))>=50 or Hg[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=="大男人Abin" or DzAPI_Map_IsBlueVIP(GetOwningPlayer(GetTriggerUnit()))==true then
set HG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
set Fe[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00领取成功，马匹只可以领取一次")

if GetItemTypeId(GetManipulatedItem())==$49303051 then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($49303039,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
return
else
if GetItemTypeId(GetManipulatedItem())==$49303050 then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($626C6261,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
return
else
if GetItemTypeId(GetManipulatedItem())==$4930304D then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($736F7232,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
return
else
endif
endif
endif
else
if GetItemTypeId(GetManipulatedItem())==$49303244 and LoadInteger(Ia,$C27B93C6,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))>0 then
call RemoveItem(GetManipulatedItem())
call SaveInteger(Ia,$C27B93C6,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),LoadInteger(Ia,$C27B93C6,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())))-1)
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+10,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+10,true)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+10,true)
call UnitAddItem(GetTriggerUnit(),CreateItem(LJ[GetRandomInt(81,84)],GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
return
else
call RemoveItem(GetManipulatedItem())
return
endif
endif
else
endif
// 领马
call SetItemPlayer(GetManipulatedItem(),GetOwningPlayer(GetTriggerUnit()),false)
// and VU!=3去掉3的等级限制，让3类物品也只能带一件
if VU!=0 and VU!=1 and VU!=2 and VU!=3 then
set Fd=1
loop
exitwhen Fd>6
if ModuloInteger(GetItemLevel(UnitItemInSlotBJ(GetTriggerUnit(),Fd)),10)==VU then
set Fb[GetConvertedPlayerId(GetTriggerPlayer())]=Fb[GetConvertedPlayerId(GetTriggerPlayer())]+1
else
call DoNothing()
endif
set Fd=Fd+1
endloop
else
endif

if Fb[GetConvertedPlayerId(GetTriggerPlayer())]>1 then
call V1(GetTriggerUnit(),GetManipulatedItem())
call DisplayTextToForce(ai(GetTriggerPlayer()),"|cffffcc00你已经有一件同类的装备了|r
|cff0080FF每个英雄只能装备“武器，铠甲，头盔，座骑，宝物”各一件。|r")
return
else
call DoNothing()
endif
if GetOwningPlayer(GetTriggerUnit())==Player(8) then
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$616E6B68),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$49303234),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$49303257),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$49303254),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$7468646D),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$77746C67),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$746C756D),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$69743034),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),$69743038),GetTriggerUnit())
call UnitRemoveItemSwapped(aj(GetTriggerUnit(),'it0s'),GetTriggerUnit())
else
endif
if GetItemTypeId(GetManipulatedItem())==$656E6773 then
if IN==true then
call UnitAddAbility(GetTriggerUnit(),$41304641)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304641)
else
call UnitAddAbility(GetTriggerUnit(),$41304657)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304657)
endif
call UnitAddAbility(GetTriggerUnit(),$4130464D)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130464D)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.2)
else
endif
if GetItemTypeId(GetManipulatedItem())==$49303044 or GetItemTypeId(GetManipulatedItem())==$49303045 and bC(GetTriggerUnit(),$49303044)==true and bC(GetTriggerUnit(),$49303045)==true then
call UnitAddAbilityBJ($41303347,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00玄铁套装")
else
call DoNothing()
endif
// 朱雀护腕和朱雀头冠
// and GetOwningPlayer(GetTriggerUnit())!=Player(8)
if bC(GetTriggerUnit(),$6F666972)==true or bC(GetTriggerUnit(),$63726474)==true  then
if GetItemTypeId(GetManipulatedItem())==$49303143 and bC(GetTriggerUnit(),$49303143)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00朱雀套装")
else
if GetItemTypeId(GetManipulatedItem())==$6F666972 or GetItemTypeId(GetManipulatedItem())==$63726474 or GetItemTypeId(GetManipulatedItem())==$62726167 and bC(GetTriggerUnit(),$62726167)==true then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$62726167))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303143,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00朱雀套装")
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
else
if GetItemTypeId(GetManipulatedItem())==$49303143 and GetOwningPlayer(GetTriggerUnit())==Player(8) or bC(GetTriggerUnit(),$6F666972)==false or bC(GetTriggerUnit(),$63726474)==false then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($62726167,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
endif
// 鬼神套判定
// 如果有方天鬼戟幽冥赤兔
if bC(GetTriggerUnit(),$49303147)==true and bC(GetTriggerUnit(),$49303146)==true then
if GetItemTypeId(GetManipulatedItem())==$6974306A and bC(GetTriggerUnit(),$6974306A)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00鬼神套装")
else
if GetItemTypeId(GetManipulatedItem())==$49303147 or GetItemTypeId(GetManipulatedItem())==$49303146 or GetItemTypeId(GetManipulatedItem())==$72756D70 and bC(GetTriggerUnit(),$72756D70)==true then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$72756D70))
call UnitAddItem(GetTriggerUnit(),CreateItem($6974306A,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, GetPlayerName(GetOwningPlayer(GetTriggerUnit())) + "恭喜！你集齐了 |Cff00ff00鬼神套装|r")
call EnableTrigger(GetTriggeringTrigger())
if GetItemTypeId(GetManipulatedItem())==$6974306A and bC(GetTriggerUnit(),$49303147)==false or bC(GetTriggerUnit(),$49303146)==false then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($49303033,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
endif
endif
endif
// 魔神套判定
// 如果有魔神之翼、魔神甲
if bC(GetTriggerUnit(),$49303036)==true and bC(GetTriggerUnit(),$70737064)==true then
    // 如果触发物品是魔魂盔I01E且有魔魂盔-套装技能版
if GetItemTypeId(GetManipulatedItem())==$49303145 and bC(GetTriggerUnit(),$49303145)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00魔神套装")
else
    // 移除没有技能的魔魂盔,加有技能的魔魂亏
if GetItemTypeId(GetManipulatedItem())==$49303036 or GetItemTypeId(GetManipulatedItem())==$70737064 or GetItemTypeId(GetManipulatedItem())==$49303033 and bC(GetTriggerUnit(),$49303033)==true then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$49303033))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303145,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00魔神套装")
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
else
if GetItemTypeId(GetManipulatedItem())==$49303145 and bC(GetTriggerUnit(),$49303036)==false or bC(GetTriggerUnit(),$70737064)==false then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($49303033,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
endif

if bC(GetTriggerUnit(),$49303255)==true and bC(GetTriggerUnit(),$49303256)==true then
if GetItemTypeId(GetManipulatedItem())==$49303257 and bC(GetTriggerUnit(),$49303257)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00霸王套装")
else
if GetItemTypeId(GetManipulatedItem())==$49303256 or GetItemTypeId(GetManipulatedItem())==$49303255 or GetItemTypeId(GetManipulatedItem())==$49303254 and bC(GetTriggerUnit(),$49303254)==true then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$49303254))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303257,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00霸王套装")
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
else
if GetItemTypeId(GetManipulatedItem())==$49303257 and bC(GetTriggerUnit(),$49303255)==false or bC(GetTriggerUnit(),$49303256)==false then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($49303254,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
endif


if IsUnitAlly(GetTriggerUnit(),Player(8))==true and bC(GetTriggerUnit(),$49303234)==true and bC(GetTriggerUnit(),$49303236)==true and bC(GetTriggerUnit(),$49303235)==true then
if (GetItemTypeId(GetManipulatedItem())==$49303245 and bC(GetTriggerUnit(),$49303245)==true) or (GetItemTypeId(GetManipulatedItem())==$49303341 and bC(GetTriggerUnit(),$49303341)==true) then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00上古魔神套装")
else
if GetItemTypeId(GetManipulatedItem())==$49303235 or GetItemTypeId(GetManipulatedItem())==$49303234 or GetItemTypeId(GetManipulatedItem())==$49303236 or GetItemTypeId(GetManipulatedItem())==$49303238 and bC(GetTriggerUnit(),$49303238)==true or GetItemTypeId(GetManipulatedItem())==$49303341 then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$49303238))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303341,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00上古魔神套装")
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
else
if IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetItemTypeId(GetManipulatedItem())==$49303245 or GetItemTypeId(GetManipulatedItem())==$49303341 and bC(GetTriggerUnit(),$49303234)==false or bC(GetTriggerUnit(),$49303236)==false or bC(GetTriggerUnit(),$49303235)==false then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($49303238,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
endif


if GetItemTypeId(GetManipulatedItem())==$49303142 or GetItemTypeId(GetManipulatedItem())==$62747374 or GetItemTypeId(GetManipulatedItem())==$73747067 or GetItemTypeId(GetManipulatedItem())==$726F7473 and bC(GetTriggerUnit(),$49303142)==true and bC(GetTriggerUnit(),$62747374)==true and bC(GetTriggerUnit(),$726F7473)==true and bC(GetTriggerUnit(),$73747067)==true then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了|Cff00ff00自然套装")
call UnitAddAbilityBJ($4130444D,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130444D)
else
call DoNothing()
endif

if bC(GetTriggerUnit(),$736F7238)==true then
if GetItemTypeId(GetManipulatedItem())==$49303343 and bC(GetTriggerUnit(),$49303343)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00青龙套装")
else
if GetItemTypeId(GetManipulatedItem())==$736F7237 or GetItemTypeId(GetManipulatedItem())==$736F7238 and bC(GetTriggerUnit(),$736F7237)==true then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(aj(GetTriggerUnit(),$736F7237))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303343,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00青龙套装")
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
else
if GetItemTypeId(GetManipulatedItem())==$49303343 and bC(GetTriggerUnit(),$736F7238)==false then
call RemoveItem(GetManipulatedItem())
call UnitAddItem(GetTriggerUnit(),CreateItem($736F7237,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
endif

if GetItemTypeId(GetManipulatedItem())==$72616D32 or GetItemTypeId(GetManipulatedItem())==$68627468 or GetItemTypeId(GetManipulatedItem())==$72646530 and bC(GetTriggerUnit(),$68627468)==true and bC(GetTriggerUnit(),$72616D32)==true and bC(GetTriggerUnit(),$72646530)==true then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了|Cff00ff00战神套装")
call UnitAddAbilityBJ($41303052,GetTriggerUnit())
call UnitAddAbilityBJ($41497332,GetTriggerUnit())
call UnitAddAbilityBJ($4149746C,GetTriggerUnit())
call UnitAddAbilityBJ($41304232,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304232)
else
call DoNothing()
endif

if GetItemTypeId(GetManipulatedItem())==$6F76656E or GetItemTypeId(GetManipulatedItem())==$72616D34 and bC(GetTriggerUnit(),$6F76656E)==true and bC(GetTriggerUnit(),$72616D34)==true then
call UnitAddAbilityBJ($41303055,GetTriggerUnit())
call UnitAddAbilityBJ($41303330,GetTriggerUnit())
call UnitAddAbilityBJ($41497436,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00后羿套装")
else
call DoNothing()
endif

if GetItemTypeId(GetManipulatedItem())==$67736F75 or GetItemTypeId(GetManipulatedItem())==$636F736C and bC(GetTriggerUnit(),$636F736C)==true and bC(GetTriggerUnit(),$67736F75)==true then
call UnitAddAbility(GetTriggerUnit(),$41303142)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303142)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41303142,false)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00刑天套装")
else
call DoNothing()
endif

if GetItemTypeId(GetManipulatedItem())==$49303031 or GetItemTypeId(GetManipulatedItem())==$49303032 and bC(GetTriggerUnit(),$49303032)==true and bC(GetTriggerUnit(),$49303031)==true then
call UnitAddAbilityBJ($41303149,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00镇魂套装")
else
call DoNothing()
endif

if GetItemTypeId(GetManipulatedItem())==$6C656467 and bC(GetTriggerUnit(),$6C656467)==true then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你获得了 |Cff00ff00三国志")
else
call DoNothing()
endif

if GetItemTypeId(GetManipulatedItem())==$7368656E or GetItemTypeId(GetManipulatedItem())==$6667756E or GetItemTypeId(GetManipulatedItem())==$6F666C67 and bC(GetTriggerUnit(),$7368656E)==true and bC(GetTriggerUnit(),$6667756E)==true and bC(GetTriggerUnit(),$6F666C67)==true then
call UnitAddAbilityBJ($4130374E,GetTriggerUnit())
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$4130374E,false)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"恭喜！你集齐了 |Cff00ff00玄武套装")
else
endif

if GetUnitTypeId(GetTriggerUnit())==$48767368 and GetItemTypeId(GetManipulatedItem())==$49303057 and bC(GetTriggerUnit(),$49303057)==true then
if GetUnitAbilityLevel(GetTriggerUnit(),$41303555)<1 then
call UnitAddAbilityBJ($41303555,GetTriggerUnit())
else
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41303555,true)
endif
else
call DoNothing()
endif

if Gq==7 or IN==true then
if GetItemTypeId(GetManipulatedItem())==$676C736B or GetItemTypeId(GetManipulatedItem())==$676F7072 or GetItemTypeId(GetManipulatedItem())==$6B336D33 or GetItemTypeId(GetManipulatedItem())==$6B336D32 then
if bC(GetTriggerUnit(),$676C736B)==true and bC(GetTriggerUnit(),$6B336D32)==true and bC(GetTriggerUnit(),$676F7072)==true and bC(GetTriggerUnit(),$6B336D33)==true then
call RemoveItem(aj(GetTriggerUnit(),$676C736B))
call RemoveItem(aj(GetTriggerUnit(),$6B336D32))
call RemoveItem(aj(GetTriggerUnit(),$676F7072))
call RemoveItem(aj(GetTriggerUnit(),$6B336D33))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303059,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+" |Cff00ff00合成了麒麟戒指！！！")
else
endif
else
endif
else
endif

if GetItemTypeId(GetManipulatedItem())==$6A64726E or GetItemTypeId(GetManipulatedItem())==$6D6E7366 or GetItemTypeId(GetManipulatedItem())==$49303251 or GetItemTypeId(GetManipulatedItem())==$6D6C7374 or GetItemTypeId(GetManipulatedItem())==$6D67746B or GetItemTypeId(GetManipulatedItem())==$49303342 or GetItemTypeId(GetManipulatedItem())==$666C6167 or GetItemTypeId(GetManipulatedItem())==$676F626D or GetItemTypeId(GetManipulatedItem())==$49303233 or GetItemTypeId(GetManipulatedItem())==$49303344 or GetItemTypeId(GetSpellTargetItem())==$73747067 or GetItemTypeId(GetSpellTargetItem())==$6F636F72 or GetItemTypeId(GetSpellTargetItem())==$49303147 then
if GetItemCharges(GetManipulatedItem())>0 then
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+120.*I2R(GetItemCharges(GetManipulatedItem())))
else
endif
else
endif
// 如果捡起的是心之钢
if GetItemTypeId(GetManipulatedItem()) == $69743069 and LoadReal(FS, GetHandleId(GetTriggerUnit()), $130B62E5) != GetUnitState(GetTriggerUnit(), ConvertUnitState(22))  then
call UnitRemoveItemSwapped(GetManipulatedItem(),GetTriggerUnit())
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffFF0000无法携带多个心之钢！|r")
else
endif
// 其他人捡起落宝铜钱
if GetItemTypeId(GetManipulatedItem())==$69743065 and GetTriggerUnit()!=sunQian  then
call UnitRemoveItemSwapped(GetManipulatedItem(),GetTriggerUnit())
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffFF0000你没有这个气运！|r")
else
endif
// 其他人捡起金箍棒
if GetItemTypeId(GetManipulatedItem())==$6D67746B and (GetUnitTypeId(GetTriggerUnit())!=$51544453 and GetUnitTypeId(GetTriggerUnit())!=$48303051) then
call UnitRemoveItemSwapped(GetManipulatedItem(),GetTriggerUnit())
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffFF0000无法承受之重！！|r")
else
endif
// 其他人捡起小李飞刀
if GetItemTypeId(GetManipulatedItem())==$69743066 and GetTriggerUnit()!=zhuiSuiZhe  then
call UnitRemoveItemSwapped(GetManipulatedItem(),GetTriggerUnit())
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffFF0000你没有这个实力！|r")
else
endif
// 混元霹雳手
if GetItemTypeId(GetManipulatedItem())==$69743061  then
// call UnitRemoveAbility(GetTriggerUnit(),$41304639)
// call UnitAddAbility(GetTriggerUnit(),$41304639)
// call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304639)
else
endif
if GetItemTypeId(GetManipulatedItem())==$4930324E  then
call RemoveItem(GetManipulatedItem())
call CreateUnit(GetOwningPlayer(GetTriggerUnit()),$65454C44,GetUnitX(Dz),GetUnitY(Dz),bj_UNIT_FACING)
else
if GetItemTypeId(GetManipulatedItem())==$4930324B  then
call RemoveItem(GetManipulatedItem())
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)+15000.)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(32),GetUnitState(GetTriggerUnit(),ConvertUnitState(32))+150.)
else
    // 战鼓
if  GetItemTypeId(GetManipulatedItem())==$4930324A then
call RemoveItem(GetManipulatedItem())
call UnitAddAbility(GetTriggerUnit(),$41304538)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304538)
else
    // 智力强化+360
if  GetItemTypeId(GetManipulatedItem())==$4930324C then
call RemoveItem(GetManipulatedItem())
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+360,true)
else
    // 属性强化三维+100
if  GetItemTypeId(GetManipulatedItem())==$4930324D then
call RemoveItem(GetManipulatedItem())
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+150,true)
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+150,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+150,true)
else
endif
endif
endif
endif
endif
//顶部多加两个endif  改动3
endfunction
function of takes nothing returns nothing
set VT=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(VT,Player(0),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(1),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(2),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(3),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(4),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(5),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(6),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(7),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(8),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(9),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(10),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(11),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(12),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(13),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(14),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VT,Player(15),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(VT,Condition(function od))
call TriggerAddAction(VT,function oe)
endfunction
function og takes nothing returns nothing
endfunction
function oh takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())!=$4E74696E
endfunction
function oi takes nothing returns nothing
local integer levelNumber = 0   //申明变量 改动1
local unit Iv=GetTriggerUnit()
// 混元霹雳手
if GetItemTypeId(GetManipulatedItem())==$69743061  then
// call UnitRemoveAbility(GetTriggerUnit(),$41304639)
// call UnitAddAbility(GetTriggerUnit(),$41304639)
// call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304639)
else
endif

if GetItemTypeId(GetManipulatedItem())==$49303157 then
call SetItemVisible(GetManipulatedItem(),false)
else
endif
if IsItemHiddenBJ(GetManipulatedItem())==false then
call SetItemPlayer(GetManipulatedItem(),Player(PLAYER_NEUTRAL_PASSIVE),false)
else
endif
if GetItemTypeId(GetManipulatedItem())==$63726474 or GetItemTypeId(GetManipulatedItem())==$6F666972 or GetItemTypeId(GetManipulatedItem())==$49303143 and bC(GetTriggerUnit(),$63726474)==true and bC(GetTriggerUnit(),$6F666972)==true and bC(GetTriggerUnit(),$49303143)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cffff0000你失去了 |Cff00ff00朱雀套装|Cffff0000所附加的属性。")
if Hs[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
if GetItemTypeId(GetManipulatedItem())!=$49303143 then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(VT)
call RemoveItem(aj(GetTriggerUnit(),$49303143))
call UnitAddItem(GetTriggerUnit(),CreateItem($62726167,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call EnableTrigger(VT)
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
endif
else
endif
// 魔神套丢失判定
if GetItemTypeId(GetManipulatedItem())==$49303036 or GetItemTypeId(GetManipulatedItem())==$70737064 or GetItemTypeId(GetManipulatedItem())==$49303145 and bC(GetTriggerUnit(),$70737064)==true and bC(GetTriggerUnit(),$49303036)==true and bC(GetTriggerUnit(),$49303145)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cffff0000你失去了 |Cff00ff00魔神套装|Cffff0000所附加的属性。")
if Hs[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
if GetItemTypeId(GetManipulatedItem())!=$49303145 then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(VT)
call RemoveItem(aj(GetTriggerUnit(),$49303145))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303033,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call EnableTrigger(VT)
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
endif
else
endif
// 鬼神套丢失判定
if GetItemTypeId(GetManipulatedItem())==$49303147 or GetItemTypeId(GetManipulatedItem())==$49303146 or GetItemTypeId(GetManipulatedItem())==$6974306A and bC(GetTriggerUnit(),$49303146)==true and bC(GetTriggerUnit(),$49303147)==true and bC(GetTriggerUnit(),$6974306A)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cffff0000你失去了 |Cff00ff00鬼神套装|Cffff0000所附加的属性。")


if Hs[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
if GetItemTypeId(GetManipulatedItem())!=$6974306A then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(VT)
set levelNumber = GetUnitAbilityLevel(GetTriggerUnit(),$41304738)
if levelNumber>0 then
call UnitRemoveAbility(GetTriggerUnit(),$41304738)
// call UnitAddAbility(GetTriggerUnit(),$414C4234)
// call SetUnitAbilityLevel(GetTriggerUnit(),$414C4234,levelNumber)
endif
// call UnitRemoveAbilityBJ($41304739,GetTriggerUnit())
call RemoveItem(aj(GetTriggerUnit(),$6974306A))
call UnitAddItem(GetTriggerUnit(),CreateItem($72756D70,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
// 移除被动技能 414C4234
call EnableTrigger(VT)
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
endif
else
endif
if GetItemTypeId(GetManipulatedItem())==$49303256 or GetItemTypeId(GetManipulatedItem())==$49303255 or GetItemTypeId(GetManipulatedItem())==$49303257 and bC(GetTriggerUnit(),$49303255)==true and bC(GetTriggerUnit(),$49303256)==true and bC(GetTriggerUnit(),$49303257)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cffff0000你失去了 |Cff00ff00霸王套装|Cffff0000所附加的属性。")
if Hs[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
if GetItemTypeId(GetManipulatedItem())!=$49303257 then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(VT)
call RemoveItem(aj(GetTriggerUnit(),$49303257))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303254,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call EnableTrigger(VT)
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
endif
else
endif
if GetItemTypeId(GetManipulatedItem())==$49303235 or GetItemTypeId(GetManipulatedItem())==$49303234 or GetItemTypeId(GetManipulatedItem())==$49303236 or GetItemTypeId(GetManipulatedItem())==$49303245 or GetItemTypeId(GetManipulatedItem())==$49303341 and bC(GetTriggerUnit(),$49303235)==true and bC(GetTriggerUnit(),$49303234)==true and bC(GetTriggerUnit(),$49303236)==true and bC(GetTriggerUnit(),$49303245)==true or bC(GetTriggerUnit(),$49303341)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cffff0000你失去了 |Cff00ff00上古魔神套装|Cffff0000所附加的属性。")
if Hs[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
if GetItemTypeId(GetManipulatedItem())!=$49303245 and GetItemTypeId(GetManipulatedItem())!=$49303341 then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(VT)
call RemoveItem(aj(GetTriggerUnit(),$49303245))
call RemoveItem(aj(GetTriggerUnit(),$49303341))
call UnitAddItem(GetTriggerUnit(),CreateItem($49303238,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call EnableTrigger(VT)
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
endif
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$49303142 or GetItemTypeId(GetManipulatedItem())==$62747374 or GetItemTypeId(GetManipulatedItem())==$73747067 or GetItemTypeId(GetManipulatedItem())==$726F7473 and bC(GetTriggerUnit(),$49303142)==true and bC(GetTriggerUnit(),$62747374)==true and bC(GetTriggerUnit(),$726F7473)==true and bC(GetTriggerUnit(),$73747067)==true then
call UnitRemoveAbilityBJ($4130444D,GetTriggerUnit())
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$49303343 or GetItemTypeId(GetManipulatedItem())==$736F7238 and bC(GetTriggerUnit(),$49303343)==true and bC(GetTriggerUnit(),$736F7238)==true then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cffff0000你失去了 |Cff00ff00青龙套装|Cffff0000所附加的属性。")
if Hs[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
if GetItemTypeId(GetManipulatedItem())!=$49303343 then
call DisableTrigger(GetTriggeringTrigger())
call DisableTrigger(VT)
call RemoveItem(aj(GetTriggerUnit(),$49303343))
call UnitAddItem(GetTriggerUnit(),CreateItem($736F7237,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call EnableTrigger(VT)
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
endif
else
endif
if GetItemTypeId(GetManipulatedItem())==$72616D32 or GetItemTypeId(GetManipulatedItem())==$68627468 or GetItemTypeId(GetManipulatedItem())==$72646530 and bC(GetTriggerUnit(),$68627468)==true and bC(GetTriggerUnit(),$72616D32)==true and bC(GetTriggerUnit(),$72646530)==true then
call UnitRemoveAbilityBJ($41303052,GetTriggerUnit())
call UnitRemoveAbilityBJ($4149746C,GetTriggerUnit())
call UnitRemoveAbilityBJ($41497332,GetTriggerUnit())
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$6F76656E or GetItemTypeId(GetManipulatedItem())==$72616D34 and bC(GetTriggerUnit(),$6F76656E)==true and bC(GetTriggerUnit(),$72616D34)==true then
call UnitRemoveAbilityBJ($41303055,GetTriggerUnit())
call UnitRemoveAbilityBJ($41497436,GetTriggerUnit())
call UnitRemoveAbilityBJ($41303330,GetTriggerUnit())
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$67736F75 or GetItemTypeId(GetManipulatedItem())==$636F736C and bC(GetTriggerUnit(),$636F736C)==true and bC(GetTriggerUnit(),$67736F75)==true then
call UnitRemoveAbility(GetTriggerUnit(),$41303142)
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$49303031 or GetItemTypeId(GetManipulatedItem())==$49303032 and bC(GetTriggerUnit(),$49303032)==true and bC(GetTriggerUnit(),$49303031)==true then
call UnitRemoveAbilityBJ($41303149,GetTriggerUnit())
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$49303044 or GetItemTypeId(GetManipulatedItem())==$49303045 and bC(GetTriggerUnit(),$49303044)==true and bC(GetTriggerUnit(),$49303045)==true then
call UnitRemoveAbilityBJ($41303347,GetTriggerUnit())
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$7368656E or GetItemTypeId(GetManipulatedItem())==$6667756E or GetItemTypeId(GetManipulatedItem())==$6F666C67 and bC(GetTriggerUnit(),$7368656E)==true and bC(GetTriggerUnit(),$6667756E)==true and bC(GetTriggerUnit(),$6F666C67)==true then
call UnitRemoveAbilityBJ($4130374E,GetTriggerUnit())
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$49303057 and bC(GetTriggerUnit(),$49303057)==true and GetUnitTypeId(GetTriggerUnit())==$48767368 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41303555,false)
else
call DoNothing()
endif
if GetItemTypeId(GetManipulatedItem())==$6A64726E or GetItemTypeId(GetManipulatedItem())==$6D6E7366 or GetItemTypeId(GetManipulatedItem())==$49303251 or GetItemTypeId(GetManipulatedItem())==$6D6C7374 or GetItemTypeId(GetManipulatedItem())==$6D67746B or GetItemTypeId(GetManipulatedItem())==$49303342 or GetItemTypeId(GetManipulatedItem())==$666C6167 or GetItemTypeId(GetManipulatedItem())==$676F626D or GetItemTypeId(GetManipulatedItem())==$49303233 or GetItemTypeId(GetManipulatedItem())==$49303344 or GetItemTypeId(GetSpellTargetItem())==$73747067 or GetItemTypeId(GetSpellTargetItem())==$6F636F72 or GetItemTypeId(GetSpellTargetItem())==$49303147 then
if GetItemCharges(GetManipulatedItem())>0 then
call SetUnitState(Iv,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(18))-120.*I2R(GetItemCharges(GetManipulatedItem())))
else
endif
else
endif
set Iv=null
endfunction
function oj takes nothing returns nothing
set VW=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(VW,Player(0),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(1),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(2),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(3),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(4),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(5),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(6),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(7),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(8),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(9),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(10),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(11),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(12),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(13),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(14),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VW,Player(15),EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(VW,Condition(function oh))
call TriggerAddAction(VW,function oi)
endfunction
function ok takes nothing returns nothing
endfunction
function ol takes nothing returns nothing
if CheckItemcodeStatus(GetItemTypeId(GetManipulatedItem()),bj_ITEMCODE_STATUS_POWERUP)==true and GetItemType(GetManipulatedItem())==ITEM_TYPE_POWERUP then
call SetWidgetLife(GetManipulatedItem(),500.)
call RemoveItem(GetManipulatedItem())
else
if GetItemType(GetManipulatedItem())==ITEM_TYPE_CHARGED and GetItemCharges(GetManipulatedItem())<=GetHeroLevel(GetTriggerUnit()) then
set GL=1
loop
exitwhen GL>6
if GetManipulatedItem()!=UnitItemInSlotBJ(GetTriggerUnit(),GL) and GetItemTypeId(GetManipulatedItem())==GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(),GL)) then
call SetItemCharges(UnitItemInSlotBJ(GetTriggerUnit(),GL),GetItemCharges(UnitItemInSlotBJ(GetTriggerUnit(),GL))+GetItemCharges(GetManipulatedItem()))
call RemoveItem(GetManipulatedItem())
else
endif
set GL=GL+1
endloop
else
endif
endif
endfunction
function om takes nothing returns nothing
set VS=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(VS,Player(0),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(1),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(2),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(3),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(4),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(5),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(6),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(7),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(8),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(9),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(10),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(11),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(12),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(13),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(14),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerRegisterPlayerUnitEventSimple(VS,Player(15),EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(VS,function ol)
endfunction
function on takes nothing returns nothing
endfunction
function oo takes nothing returns nothing
if bC(GetTriggerUnit(),$49303343) or bC(GetTriggerUnit(),$736F7237)==true and bC(GetTriggerUnit(),$736F7238)==true and bC(GetTriggerUnit(),$73666F67)==true and GetUnitTypeId(GetTriggerUnit())==$4F677268 or GetUnitTypeId(GetTriggerUnit())==$4F706768 or GetUnitAbilityLevel(GetTriggerUnit(),$41304136)>0 then
if GetRandomInt(1,80)==2 then
call DisableTrigger(GetTriggeringTrigger())
set Jd[3]=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLoc(1,$7561626F,GetOwningPlayer(GetTriggerUnit()),Jd[3],bj_UNIT_FACING)
set P3[2]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(30.,$42544C46,P3[2])
call TransmissionFromUnitTypeWithNameBJ(GetPlayersAll(),Player(8),$7561626F,"关羽（魂）",GetUnitLoc(GetTriggerUnit()),null,"关云长在此，休伤吾儿！",bj_TIMETYPE_ADD,0,true)
call RemoveLocation(Jd[3])
else
call DoNothing()
endif
else
endif
endfunction
function op takes nothing returns nothing
set PO=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(PO,Player(0),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(1),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(2),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(3),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(4),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(5),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(6),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(7),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(8),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(9),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(10),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(11),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(12),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(13),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(14),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(PO,Player(15),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(PO,function oo)
endfunction
function oq takes nothing returns nothing
endfunction
function os takes nothing returns nothing
if GetUnitTypeId(GetTriggerUnit())==$7561626F then
call EnableTrigger(PO)
else
endif
endfunction
function ot takes nothing returns nothing
set PN=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(PN,Player(0),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(1),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(2),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(3),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(4),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(5),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(6),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(7),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(8),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(11),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(12),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(13),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(14),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(PN,Player(15),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(PN,function os)
endfunction
function ou takes nothing returns boolean
return GetSpellAbilityId()==$414E6874 or GetSpellAbilityId()==$415A4657
endfunction
function ov takes nothing returns nothing
call UnitDamageTarget(MX[8000],GetEnumUnit(),I2R(R2I(GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE))*2),false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function ow takes nothing returns nothing
call UnitDamageTarget(MX[8000],GetEnumUnit(),I2R(R2I(GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE))*2),false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endfunction
function ox takes nothing returns nothing
local group KB
local unit KC
local unit Iv=GetTriggerUnit()
local integer JS=GetUnitAbilityLevel(Iv,GetSpellAbilityId())
local real JT=bk(GetTriggerUnit(),1,JS)
if IsUnitAlly(Iv,Player(8))==true then
if GetUnitAbilityLevel(Iv,$4130385A)>0 or bC(Iv,$726E7370)==true then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cFFFF66FF张苞：燕人张苞在此！！！")
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(Iv),GetUnitY(Iv),880.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitEnemy(KC,GetOwningPlayer(Iv))==true and KC!=Iv and IsUnitType(KC,UNIT_TYPE_STRUCTURE)==false then
call UnitDamageTarget(Iv,KC,JT*2,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
if IsUnitType(KC,UNIT_TYPE_HERO)==false and GetUnitPointValue(KC)!=55 and GetUnitPointValue(KC)!=50 and GetUnitState(KC,UNIT_STATE_LIFE)>.405 then
call GroupAddUnit(Hx[0],KC)
else
endif
else
endif
endloop
call DestroyGroup(KB)
set Hx[1]=e7(JS,Hx[0])
set MX[8000]=Iv
call ForGroupBJ(Hx[1],function ow)
else
if GetRandomInt(1,3)==1 then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cFFFF66FF张苞：燕人张苞在此！！！")
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(Iv),GetUnitY(Iv),512,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitEnemy(KC,GetOwningPlayer(Iv))==true and IsUnitType(KC,UNIT_TYPE_STRUCTURE)==false and KC!=Iv then
call UnitDamageTarget(Iv,KC,JT*2,false,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
if IsUnitType(KC,UNIT_TYPE_HERO)==false and GetUnitPointValue(KC)!=55 and GetUnitPointValue(KC)!=50 and GetUnitState(KC,UNIT_STATE_LIFE)>.405 then
call GroupAddUnit(Hx[0],KC)
else
endif
else
endif
endloop
call DestroyGroup(KB)
set Hx[1]=e7(JS,Hx[0])
set MX[8000]=Iv
call ForGroupBJ(Hx[1],function ov)
else
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),880.,JT*.5,3,0)
endif
endif
if GetSpellAbilityId()==$415A4657 then
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41353030,3,GetUnitX(Iv),GetUnitY(Iv),bj_UNIT_FACING,1),852127)
else
endif
else
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550.,JT*.3,3,0)
endif
call GroupClear(Hx[0])
call GroupClear(Hx[1])
call DestroyGroup(Hx[1])
set Iv=null
set KB=null
set KC=null
endfunction
function oy takes nothing returns nothing
set PP=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(PP,Player(0),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(1),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(2),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(3),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(4),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(5),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(6),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(7),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(8),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(9),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(10),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(11),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(12),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(13),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(14),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PP,Player(15),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(PP,Condition(function ou))
call TriggerAddAction(PP,function ox)
endfunction
function oz takes nothing returns boolean
return GetSpellAbilityId()==$414E6662
endfunction
function o0 takes nothing returns nothing
if bC(GetTriggerUnit(),$72616D33)==true or huntingFinish==true then
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true)*(GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())+3)),false,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroAgi(GetTriggerUnit(),true)*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())),false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
endfunction
function o1 takes nothing returns nothing
set PS=CreateTrigger()
call TriggerRegisterUnitEvent(PS,DK,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(PS,Condition(function oz))
call TriggerAddAction(PS,function o0)
endfunction
function o2 takes nothing returns boolean
return GetSpellAbilityId()==$41304731 or GetSpellAbilityId()==$41425351
endfunction
function o3 takes nothing returns nothing
if GetSpellAbilityId()==$41304731 then
if IsUnitType(GetSpellTargetUnit(), UNIT_TYPE_HERO) == false and bC(GetTriggerUnit(), $7368746D) == true  and GetUnitPointValue(GetSpellTargetUnit()) != 56 and (GetRandomInt(1, 4) == 4 or GetUnitAbilityLevel(GetTriggerUnit(), $41304731) >= 9) then
call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("捕获了："+GetUnitName(GetSpellTargetUnit())))
// 如果是小血狼
if GetUnitTypeId(GetSpellTargetUnit())==$6E777766 then
   call CreateItem($73636C70,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call CreateUnit( GetOwningPlayer(GetTriggerUnit()), $6E777766, GetUnitX(GetSpellTargetUnit()), GetUnitY(GetSpellTargetUnit()), 0 )
endif
call UnitRemoveAbility(GetSpellTargetUnit(),$41706976)
call UnitRemoveAbility(GetSpellTargetUnit(),$4167686F)
else
if IsUnitType(GetSpellTargetUnit(), UNIT_TYPE_HERO) == false and (GetRandomInt(1,10)==10 or GetUnitAbilityLevel(GetTriggerUnit(), $41304731) >= 9) and GetUnitPointValue(GetSpellTargetUnit())!=56 then
call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)
// 如果是小血狼
if GetUnitTypeId(GetSpellTargetUnit())==$6E777766 then
    call CreateItem($73636C70,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))

call CreateUnit( GetOwningPlayer(GetTriggerUnit()), $6E777766, GetUnitX(GetSpellTargetUnit()), GetUnitY(GetSpellTargetUnit()), 0 )
endif
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+("捕获了："+GetUnitName(GetSpellTargetUnit())))
call UnitRemoveAbility(GetSpellTargetUnit(),$41706976)
call UnitRemoveAbility(GetSpellTargetUnit(),$4167686F)
else
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(GetTriggerUnit())),0,$41304732,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),bj_UNIT_FACING,10.),852480,GetSpellTargetUnit())
endif
endif
else
if GetSpellAbilityId()==$41425351 then
if IsUnitType(GetSpellTargetUnit(), UNIT_TYPE_HERO) == false and IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true and GetUnitPointValue(GetSpellTargetUnit())!=56 then
call UnitRemoveAbility(GetSpellTargetUnit(),$41706976)
call UnitRemoveAbility(GetSpellTargetUnit(),$4167686F)
call UnitRemoveAbility(GetSpellTargetUnit(),$42656E61)
call UnitRemoveAbility(GetSpellTargetUnit(),$42656E67)
call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+("捕获了"+GetUnitName(GetSpellTargetUnit())))
else
endif
else
endif
endif
endfunction
function o4 takes nothing returns nothing
set K5=CreateTrigger()
call TriggerAddCondition(K5,Condition(function o2))
call TriggerAddAction(K5,function o3)
endfunction
function o5 takes nothing returns boolean
return GetSpellAbilityId()==$414F6673
endfunction
function o6 takes nothing returns nothing
set PU[2]=GetTriggerUnit()
set PV[4]=GetSpellTargetLoc()
set PV[5]=GetUnitLoc(PU[2])
set GB[2]=AngleBetweenPoints(PV[5],PV[4])
set HF=0
call StartTimerBJ(GW,true,.01)
endfunction
function o7 takes nothing returns nothing
set PT=CreateTrigger()
call TriggerRegisterUnitEvent(PT,DR,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(PT,Condition(function o5))
call TriggerAddAction(PT,function o6)
endfunction
function o8 takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(PU[2]))==true
endfunction
function o9 takes nothing returns nothing
call UnitDamageTarget(PU[2],GetEnumUnit(),I2R(GetHeroStr(PU[2],true))*15.,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function pB takes nothing returns boolean
return IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(PU[2]))==true
endfunction
function pC takes nothing returns nothing
call UnitDamageTarget(PU[2],GetEnumUnit(),I2R(GetHeroStr(PU[2],true))*10.,true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endfunction
function pD takes nothing returns nothing
local group KB
local unit KC
set PV[5]=GetUnitLoc(PU[2])
set PV[6]=PolarProjectionBJ(PV[5],30.,GB[2])
call SetUnitPositionLoc(PU[2],PV[6])
set PV[7]=GetUnitLoc(PU[2])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",PV[6]))
set HF=HF+1
if HF>=200 or DistanceBetweenPoints(PV[6],PV[7])>15. or DistanceBetweenPoints(PV[7],PV[4])<=30. then
call PauseTimer(GW)
call SetUnitPositionLoc(PU[2],PV[5])
set bj_wantDestroyGroup=true
if bC(PU[2],$6D6C7374)==true or bC(PU[2],$49303055)==true then
call ForGroupBJ(an(400.,PV[5],Condition(function o8)),function o9)
else
call ForGroupBJ(an(300.,PV[5],Condition(function pB)),function pC)
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(PU[2]),GetUnitY(PU[2])))
call RemoveLocation(PV[4])
else
endif
call RemoveLocation(PV[5])
call RemoveLocation(PV[6])
call RemoveLocation(PV[7])
set KB=null
set KC=null
endfunction
function pE takes nothing returns nothing
set PW=CreateTrigger()
call TriggerRegisterTimerExpireEvent(PW,GW)
call TriggerAddAction(PW,function pD)
endfunction
function pF takes nothing returns boolean
return GetSpellAbilityId()==$41303830
endfunction
function pG takes nothing returns nothing
local integer KW
local group KB
local unit KC
local unit Ig=GetTriggerUnit()
local unit Pa=GetSpellTargetUnit()
local real JV=0
if bC(GetTriggerUnit(),$6D6C7374)==true or bC(GetTriggerUnit(),$49303034)==true then
set KW=1
loop
exitwhen KW>1+GetUnitAbilityLevel(Ig,$41303830)/2
call UnitAddItemByIdSwapped($66676668,Ig)
set KW=KW+1
endloop
else
set KW=1
loop
exitwhen KW>GetRandomInt(1,GetUnitAbilityLevel(Ig,$41303830)/3+1)
call UnitAddItemByIdSwapped($66676668,Ig)
set KW=KW+1
endloop
endif
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(Ig),GetUnitY(Ig),1100.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if GetUnitTypeId(KC)==GetUnitTypeId(Ig) and KC!=Ig then
call SetUnitPosition(KC,GetUnitX(Pa),GetUnitY(Pa))
call IssueTargetOrderById(KC,851983,Pa)
set JV=JV+1
else
endif
endloop
call DestroyGroup(KB)
call UnitDamageTarget(Ig,Pa,I2R(GetHeroStr(Ig,true))*(1.*JV),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
set Ig=null
set Pa=null
set KB=null
set KC=null
endfunction
function pH takes nothing returns nothing
set PZ=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(0),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(1),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(2),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(3),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(4),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(5),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(6),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(7),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(8),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(9),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(10),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(11),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(12),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(13),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(14),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(PZ,Player(15),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(PZ,Condition(function pF))
call TriggerAddAction(PZ,function pG)
endfunction
function pI takes nothing returns boolean
return bC(Ct,$6E737069)==true and IsUnitAlly(GetEventDamageSource(),GetOwningPlayer(Ct))==false
endfunction
function pJ takes nothing returns nothing
if GetUnitLifePercent(Ct)<=10. and GetRandomInt(1,10)==5 then
call SetUnitLifePercentBJ(Ct,GetUnitLifePercent(Ct)+50.)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",Ct,"overhead"))
else
endif
endfunction
function pK takes nothing returns nothing
set Pb=CreateTrigger()
call TriggerRegisterUnitEvent(Pb,Ct,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(Pb,Condition(function pI))
call TriggerAddAction(Pb,function pJ)
endfunction
function pL takes nothing returns boolean
return GetAttacker()!=null and DI!=null
endfunction
function pM takes nothing returns nothing
if IsUnitAlly(GetAttackedUnitBJ(),GetOwningPlayer(GetAttacker()))==false and GetAttacker()==DI and RAbsBJ(GetUnitFacing(DI)-GetUnitFacing(GetTriggerUnit()))<=50. or RAbsBJ(GetUnitFacing(GetTriggerUnit())-GetUnitFacing(DI))<=50. and GetUnitAbilityLevel(GetAttacker(),$4130344F)>=1 then
if bC(DI,$6A64726E)==true then
if UnitHasBuffBJ(DI,$424F776B)==true then
call UnitDamageTargetBJ(DI,GetAttackedUnitBJ(),I2R(GetHeroAgi(DI,true))*(I2R(GetUnitAbilityLevelSwapped($4130344F,DI))+6.),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
call CreateTextTagUnitBJ("暗杀成功",GetAttackedUnitBJ(),1.,10,60.,0.,100,0)
call SetTextTagVelocity(bj_lastCreatedTextTag,0.,.15)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.)
else
call UnitDamageTarget(DI,GetAttackedUnitBJ(),I2R(GetHeroAgi(DI,true))*5.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
else
if UnitHasBuffBJ(DI,$424F776B)==true then
call UnitDamageTargetBJ(DI,GetAttackedUnitBJ(),I2R(GetHeroAgi(DI,true))*(I2R(GetUnitAbilityLevelSwapped($4130344F,DI))+3.),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
call CreateTextTagUnitBJ("暗杀成功",GetAttackedUnitBJ(),1.,10,60.,0.,100,0)
call SetTextTagVelocity(bj_lastCreatedTextTag,0.,.15)
call SetTextTagPermanent(GetLastCreatedTextTag(),false)
call SetTextTagLifespan(GetLastCreatedTextTag(),1.)
else
call UnitDamageTarget(DI,GetAttackedUnitBJ(),I2R(GetHeroAgi(DI,true))*3.,true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
endif
else
endif
endfunction
function pN takes nothing returns nothing
set VQ=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(VQ,Player(9),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(VQ,Player(10),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterPlayerUnitEventSimple(VQ,Player(PLAYER_NEUTRAL_AGGRESSIVE),EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(VQ,Condition(function pL))
call TriggerAddAction(VQ,function pM)
endfunction
function pO takes nothing returns nothing
endfunction
function pP takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$7067696E and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetTriggerUnit())!=$4E74696E
endfunction
function pQ takes nothing returns nothing
set Pd=GetTriggerUnit()
set NL[2]=GetManipulatedItem()
call EnableTrigger(Pe)
endfunction
function pR takes nothing returns nothing
set Pc=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Pc,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Pc,Condition(function pP))
call TriggerAddAction(Pc,function pQ)
endfunction
function pS takes nothing returns boolean
return bC(Pd,$7067696E)==true and IsUnitAliveBJ(Pd)==true
endfunction
function pT takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Pd))==false and (IsUnitType(GetFilterUnit(),UNIT_TYPE_ATTACKS_GROUND)==true and IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)
endfunction
function pU takes nothing returns nothing
call GroupRemoveUnit(Fq,GetEnumUnit())
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-.3)
if GetUnitLifePercent(GetEnumUnit())<=.5 then
call UnitDamageTarget(Pd,GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-.3)
endif
endfunction
function pV takes nothing returns nothing
local group KB
local unit KC
set Pf=GetUnitLoc(Pd)
set Fq=an(1000.,GetUnitLoc(Pd),Condition(function pT))
call ForGroupBJ(Fq,function pU)
call DestroyGroup(Fq)
call RemoveLocation(Pf)
set KB=null
set KC=null
endfunction
// 东皇钟事件 7067696E 是东皇钟
function pW takes nothing returns nothing
set Pe=CreateTrigger()
call DisableTrigger(Pe)
call TriggerRegisterTimerEventPeriodic(Pe,.5)
call TriggerAddCondition(Pe,Condition(function pS))
call TriggerAddAction(Pe,function pV)
endfunction
function pX takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$7067696E and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitTypeId(GetTriggerUnit())!=$4E74696E
endfunction
function pY takes nothing returns nothing
call DisableTrigger(Pe)
endfunction
function pZ takes nothing returns nothing
set Pg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Pg,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(Pg,Condition(function pX))
call TriggerAddAction(Pg,function pY)
endfunction

// 竭心光环事件
function loss_life_cond takes nothing returns boolean
return  IsUnitAlly(GetFilterUnit(),GetOwningPlayer(maliang))==false and (IsUnitType(GetFilterUnit(),UNIT_TYPE_ATTACKS_GROUND)==true and IsUnitType(GetFilterUnit(),UNIT_TYPE_DEAD)==false)
endfunction

function loss_life takes nothing returns nothing
// call DisplayTextToPlayer(GetOwningPlayer(maliang), 0, 0, GetUnitName(GetEnumUnit()) + " 的生命正在流失：" + R2S(GetUnitLifePercent(GetEnumUnit()))) 

call GroupRemoveUnit(life_loss_group,GetEnumUnit())
// 防止boss还没出就先被烫死
if GetOwningPlayer(GetEnumUnit())==Player(PLAYER_NEUTRAL_PASSIVE)  then
call SetUnitLifePercentBJ(GetEnumUnit(), GetUnitLifePercent(GetEnumUnit()) -(.02 *GetUnitAbilityLevel(maliang, 'Ab2m')))
else
call SetUnitLifePercentBJ(GetEnumUnit(), GetUnitLifePercent(GetEnumUnit()) -(.01 *GetUnitAbilityLevel(maliang, 'Ab2m')))
endif

if GetUnitLifePercent(GetEnumUnit())<=1 then
call UnitDamageTarget(maliang,GetEnumUnit(),GetUnitState(GetEnumUnit(),UNIT_STATE_MAX_LIFE),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
call SetUnitLifePercentBJ(GetEnumUnit(),GetUnitLifePercent(GetEnumUnit())-(.01 *GetUnitAbilityLevel(maliang, 'Ab2m')))
endif
endfunction

function life_loss_action takes nothing returns nothing
local group KB
local unit KC

set loss_loc=GetUnitLoc(maliang)
set life_loss_group = an(3000 *GetUnitAbilityLevel(maliang, 'Ab2m'), GetUnitLoc(maliang), Condition(function loss_life_cond))
call ForGroupBJ(life_loss_group,function loss_life)
call DestroyGroup(life_loss_group)
call RemoveLocation(loss_loc)
set KB=null
set KC=null
endfunction

function life_loss_condition takes nothing returns boolean
return maliang != null and GetUnitAbilityLevel(maliang, 'Ab2m') >0 and IsUnitAliveBJ(maliang) == true
endfunction

function init_life_loss takes nothing returns nothing
set trig_lifeLoss=CreateTrigger()
// call DisableTrigger(trig_lifeLoss)
call TriggerRegisterTimerEventPeriodic(trig_lifeLoss,1)
call TriggerAddCondition(trig_lifeLoss,Condition(function life_loss_condition))
call TriggerAddAction(trig_lifeLoss,function life_loss_action)
endfunction

function pa takes nothing returns boolean
    // 如果带了无字天书、落宝铜钱、混元霹雳手
return bC(GetTriggerUnit(),$72656A32)==true or bC(GetTriggerUnit(),$69743065)==true or bC(GetTriggerUnit(),$69743061)==true and GetUnitTypeId(GetTriggerUnit())!=$4E74696E
endfunction
function pb takes nothing returns boolean
return IsUnitIllusionBJ(GetFilterUnit())==true
endfunction
function pc takes nothing returns nothing
call UnitRemoveBuffs(GetTriggerUnit(),false,true)
call UnitRemoveAbility(GetTriggerUnit(),$4253544E)
call UnitRemoveAbility(GetTriggerUnit(),$42505345)
// call UnitRemoveAbility(GetTriggerUnit(),$42303054)
call UnitAddItemByIdSwapped($72646973,Di)
set Jd[33]=GetUnitLoc(Di)
set Jd[34]=GetUnitLoc(GetTriggerUnit())
set Ft=an(300.,Jd[33],Condition(function pb))
set Pi=FirstOfGroup(Ft)
call DestroyGroup(Ft)
call SetUnitPositionLoc(Pi,Jd[34])
call SetUnitInvulnerable(Pi,true)
call ShowUnitHide(Pi)
call UnitAddAbilityBJ($416C6F63,Pi)
call IssueTargetOrder(Pi,"attackonce",GetTriggerUnit())
call RemoveLocation(Jd[33])
call RemoveLocation(Jd[34])
set Pi=null
endfunction
function pd takes nothing returns nothing
set Ph=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Ph,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Ph,Condition(function pa))
call TriggerAddAction(Ph,function pc)
endfunction
function pe takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72656A32 or bC(GetTriggerUnit(),$69743065)==true or bC(GetTriggerUnit(),$69743061)==true and UnitHasBuffBJ(GetTriggerUnit(),$42303054)==true
endfunction
function pf takes nothing returns nothing
// call UnitRemoveAbility(GetTriggerUnit(),$42303054)
call UnitRemoveAbility(GetTriggerUnit(),$42505345)
endfunction
function pg takes nothing returns nothing
set Pj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Pj,EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(Pj,Condition(function pe))
call TriggerAddAction(Pj,function pf)
endfunction
function ph takes nothing returns nothing
if Hf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>0 then
if Hf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==1 then
if GetRandomReal(0.,100.)<=34. then
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,1)
else
if GetRandomReal(0.,100.)<=34. then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,1)
else
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,1)
endif
endif
else
if Hf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==2 then
if GetRandomReal(0.,100.)<=34. then
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,GetRandomInt(1,2))
else
if GetRandomReal(0.,100.)<=34. then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,GetRandomInt(1,2))
else
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,GetRandomInt(1,2))
endif
endif
else
if Hf[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>2 then
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,1)
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,1)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,1)
else
endif
endif
endif
else
endif
if WD("NAME")!="A" then
if Hg[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==WD("NAME") then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\great_lightning.mdx",GetTriggerUnit(),"origin"))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"受到来自作者对黑炭的天谴！")
call KillUnit(GetTriggerUnit())
else
endif
else
endif
if GetUnitTypeId(GetTriggerUnit())==$48574431 or GetUnitTypeId(GetTriggerUnit())==$48574432 or GetUnitTypeId(GetTriggerUnit())==$48594D31 then
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+1,true)
else
if GetUnitTypeId(GetTriggerUnit())==$484C4231 or GetUnitTypeId(GetTriggerUnit())==$484C4232 then
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+1,true)
else
endif
endif
endfunction
function pi takes nothing returns nothing
set K3=CreateTrigger()
call TriggerAddAction(K3,function ph)
endfunction
function pj takes nothing returns nothing
endfunction
function pk takes nothing returns boolean
return GetSpellAbilityId()==$534E6464
endfunction
function pl takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Pl))==false
endfunction
function pm takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl",GetEnumUnit(),"origin"))
call UnitDamageTarget(Pl,GetEnumUnit(),I2R(GetHeroStr(Pl,true)*GetRandomInt(15,30)),false,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endfunction
function pn takes nothing returns nothing
local group KB
local unit KC
set Pl=GetTriggerUnit()
set Pm=GetSpellTargetLoc()
set Pn=GetUnitLoc(Pl)
set Gg=0.
call StartTimerBJ(Gh,true,.03)
call TriggerSleepAction(.5)
call IssuePointOrderLoc(CreateUnit(GetOwningPlayer(Pl),$68303048,GetUnitX(Pl),GetUnitY(Pl),GetUnitFacing(Pl)),"clusterrockets",Pm)
call IssuePointOrderLoc(CreateUnit(GetOwningPlayer(Pl),$68303047,GetUnitX(Pl),GetUnitY(Pl),GetUnitFacing(Pl)),"clusterrockets",Pm)
call SetUnitFlyHeight(Pl,0.,1500.)
call SetUnitTimeScalePercent(Pl,100.)
call PauseUnitBJ(false,Pl)
call PauseTimer(Gh)
call TriggerSleepAction(.2)
call ForGroupBJ(an(400.,Pm,Condition(function pl)),function pm)
call RemoveLocation(Pm)
call RemoveLocation(Pn)
set KB=null
set KC=null
endfunction
function po takes nothing returns nothing
set Pk=CreateTrigger()
call TriggerRegisterUnitEvent(Pk,C0,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Pk,Condition(function pk))
call TriggerAddAction(Pk,function pn)
endfunction
function pp takes nothing returns nothing
set Pp=PolarProjectionBJ(Pn,200.,Gg)
call CreateNUnitsAtLoc(1,$6830304A,GetOwningPlayer(Pl),Pp,GetUnitFacing(Pl))
call SetUnitFlyHeight(bj_lastCreatedUnit,Gg-100.,1000000000.)
call SetUnitTimeScalePercent(bj_lastCreatedUnit,.8)
call UnitApplyTimedLifeBJ(.5,$42487765,bj_lastCreatedUnit)
set Pp=PolarProjectionBJ(Pn,200.,Gg)
call CreateNUnitsAtLoc(1,$68303049,GetOwningPlayer(Pl),Pp,100.+Gg)
call SetUnitFlyHeight(bj_lastCreatedUnit,Gg-100.,1000000000.)
call SetUnitTimeScalePercent(bj_lastCreatedUnit,.8)
call UnitApplyTimedLifeBJ(.1,$42487765,bj_lastCreatedUnit)
set Gg=Gg+20.
call RemoveLocation(Pp)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl",GetUnitX(Pl)+GetRandomReal(0,150.)*Cos(GetRandomReal(0,360.)),GetUnitY(Pl)+(GetRandomReal(0,150.)+Sin(GetRandomReal(0,360.)))))
endfunction
function pq takes nothing returns nothing
set Po=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Po,Gh)
call TriggerAddAction(Po,function pp)
endfunction
function pr takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local real P0
local group I2
local unit CE
set Gv[FN]=Gv[FN]-1
call SetUnitFlyHeight(Pw[FN],GetUnitFlyHeight(Pw[FN])+(Gv[FN]-6)*25.,0.)
if Gv[FN]<=0 then
call PauseTimer(GetExpiredTimer())
set P0=bk(Pv[FN],1,Gu[FN])
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(Pw[FN]),GetUnitY(Pw[FN]),330.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Pw[FN] and IsUnitEnemy(CE,GetOwningPlayer(Pv[FN]))==true then
call UnitDamageTarget(Pv[FN],CE,P0,false,false,I3[5],I4[2],WEAPON_TYPE_WHOKNOWS)
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Pv[FN])),$65303939,$41623071,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)

endif
endloop
call DestroyGroup(I2)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",Gx[FN],Gy[FN]))
call SetUnitFlyHeight(Pw[FN],0,0.)
if Gq<6 or IsUnitEnemy(Pw[FN],GetOwningPlayer(Pv[FN]))==false then
call SetUnitPathing(Pw[FN],false)
endif
call UnitRemoveType(Pw[FN],UNIT_TYPE_GIANT)
call UnitRemoveType(Pw[FN],UNIT_TYPE_ANCIENT)
call UnitRemoveType(Pw[FN],UNIT_TYPE_FLYING)
if IsUnitEnemy(Pw[FN],GetOwningPlayer(Pv[FN]))==true then
call UnitDamageTarget(Pv[FN],Pw[FN],P0*1.5,false,false,I3[5],I4[2],WEAPON_TYPE_WHOKNOWS)
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Pv[FN])),$65303939,$41623071,1,GetUnitX(Pw[FN]),GetUnitY(Pw[FN]),bj_UNIT_FACING,3),852095,Pw[FN])
endif
call bh(FN)
endif
set I2=null
set CE=null
endfunction
function ps takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local real P0
local real Im=G0[FN]
local group I2
local unit CE
local real It=GetUnitX(Pw[FN])
local real Iu=GetUnitY(Pw[FN])
local location LQ=Location(It*1.+100*1.*Cos(Im*1.*bj_DEGTORAD),Iu*1.+100*1.*Sin(Im*1.*bj_DEGTORAD))
if GetUnitState(Pw[FN],UNIT_STATE_LIFE)<=.403 then
call bh(FN)
elseif bI(It,Iu,Gx[FN],Gy[FN])>50  then
// 不知道是哪一行进行的路径判定，现在可以扔过墙
// elseif bI(It,Iu,Gx[FN],Gy[FN])>50 and IsTerrainPathable(GetLocationX(LQ),GetLocationY(LQ),PATHING_TYPE_WALKABILITY)==false then
call SetUnitPosition(Pw[FN],It*1.+50*1.*Cos(Im*1.*bj_DEGTORAD),Iu*1.+50*1.*Sin(Im*1.*bj_DEGTORAD))
if bI(GetUnitX(Pw[FN]),GetUnitY(Pw[FN]),Gx[FN],Gy[FN])>Gz[FN] then
call SetUnitFlyHeight(Pw[FN],GetUnitFlyHeight(Pw[FN])+100.,0.)
else
call SetUnitFlyHeight(Pw[FN],GetUnitFlyHeight(Pw[FN])-100.,0.)
endif
else
call PauseTimer(GetExpiredTimer())
set P0=bk(Pv[FN],1,Gu[FN])
// if IsTerrainPathable(GetLocationX(LQ),GetLocationY(LQ),PATHING_TYPE_WALKABILITY)==false then
// if IsTerrainPathable(GetLocationX(LQ),GetLocationY(LQ),PATHING_TYPE_WALKABILITY)==false then
// set It=Gx[FN]
// set Iu=Gy[FN]
// endif
set I2=CreateGroup()
call GroupEnumUnitsInRange(I2,It,Iu,330.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=Pw[FN] and IsUnitEnemy(CE,GetOwningPlayer(Pv[FN]))==true then
call UnitDamageTarget(Pv[FN],CE,P0,false,false,I3[5],I4[2],WEAPON_TYPE_WHOKNOWS)
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Pv[FN])),$65303939,$41623071,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)

endif
endloop
call DestroyGroup(I2)
if IsUnitEnemy(Pw[FN],GetOwningPlayer(Pv[FN]))==false or Gq<6 then
call SetUnitPathing(Pw[FN],false)
endif
call SetUnitPosition(Pw[FN],It,Iu)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",It,Iu))
call SetUnitFlyHeight(Pw[FN],0,0.)
call UnitRemoveType(Pw[FN],UNIT_TYPE_GIANT)
call UnitRemoveType(Pw[FN],UNIT_TYPE_ANCIENT)
call UnitRemoveType(Pw[FN],UNIT_TYPE_FLYING)
if IsUnitEnemy(Pw[FN],GetOwningPlayer(Pv[FN]))==true then
call UnitDamageTarget(Pv[FN],Pw[FN],P0,false,false,I3[5],I4[2],WEAPON_TYPE_WHOKNOWS)
call Trig_StunEffect_Actions(Pw[FN])
call IssueTargetOrderById(XB(0,$65303939,$41623071,1,GetUnitX(Pw[FN]),GetUnitY(Pw[FN]),bj_UNIT_FACING,3),852095,Pw[FN])

endif
call bh(FN)
endif
call RemoveLocation(LQ)
set I2=null
set CE=null
set LQ=null
endfunction
function pt takes unit Ig,unit Ps,real It,real Iu,integer Pt returns nothing
local integer FN=bf()
call UnitAddAbility(Ps,$416D7266)
call UnitRemoveAbility(Ps,$416D7266)
call UnitAddType(Ps,UNIT_TYPE_GIANT)
call UnitAddType(Ps,UNIT_TYPE_ANCIENT)
call UnitAddType(Ps, UNIT_TYPE_FLYING)
call SetUnitPathing(Ps,false)
if IsUnitEnemy(Ps,GetOwningPlayer(Ig))==true then
call EXSetUnitMoveType(Ps,0)
endif
set Pv[FN]=Ig
set Pw[FN]=Ps
set Gu[FN]=Pt
if bI(GetUnitX(Ps),GetUnitY(Ps),It,Iu)<=200 then
set Gv[FN]=12
call TimerStart(Gt[FN],.05,true,function pr)
else
set Gx[FN]=It
set Gy[FN]=Iu
set Gz[FN]=bI(GetUnitX(Ps),GetUnitY(Ps),It,Iu)/2
set G0[FN]=bH(GetUnitX(Ps),GetUnitY(Ps),It,Iu)
call TimerStart(Gt[FN],.03,true,function ps)
endif
endfunction
function pu takes nothing returns nothing
endfunction
function pv takes nothing returns boolean
return GetSpellAbilityId()==$41304752
endfunction
function pw takes nothing returns nothing
local location LQ=GetSpellTargetLoc()
local real It=GetLocationX(LQ)
local real Iu=GetLocationY(LQ)
local unit CE
local unit Pr=null
local group I2=CreateGroup()
call GroupEnumUnitsInRange(I2,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),220.,null)
loop
set CE=FirstOfGroup(I2)
call GroupRemoveUnit(I2,CE)
exitwhen CE==null
if bj(CE) and GetUnitState(CE,UNIT_STATE_LIFE)>0. and CE!=GetTriggerUnit() and Pr==null then
set Pr=CE
endif
endloop
call DestroyGroup(I2)
if IsTerrainPathable(It,Iu,PATHING_TYPE_WALKABILITY)==true or (It>=-1300. and It<=-860. and Iu>=150. and Iu<=600.) then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"不可以扔到那里！！！")
call SetUnitPosition(GetTriggerUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call PlaySoundBJ(O)
else
if Pr==null then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"附近没有可以用来丢的单位")
call SetUnitPosition(GetTriggerUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"准备扔"+GetUnitName(Pr))
call pt(GetTriggerUnit(),Pr,It,Iu,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))

endif
endif
call RemoveLocation(LQ)

endfunction
function px takes nothing returns nothing
local integer CC=0
return
set Pq=CreateTrigger()
// 投掷监听事件
call TriggerRegisterUnitEvent(Pq,Cu,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Pq,Condition(function pv))
call TriggerAddAction(Pq,function pw)
endfunction
function py takes nothing returns boolean
return GetSpellAbilityId()!=$41303659 and GetTriggerUnit()==Ct and bC(GetTriggerUnit(),$6E737069)==true and GetRandomInt(1,5)==2
endfunction
function pz takes nothing returns nothing
set Jd[24]=GetUnitLoc(GetTriggerUnit())
call CreateNUnitsAtLocFacingLocBJ(1,$65303037,GetOwningPlayer(GetTriggerUnit()),Jd[24],Jd[24])
set P3[5]=bj_lastCreatedUnit
call IssueImmediateOrder(P3[5],"stomp")
call UnitApplyTimedLifeBJ(1.,$42487765,P3[5])
call RemoveLocation(Jd[24])
set P3[5]=null
endfunction
function p0 takes nothing returns nothing
set P2=CreateTrigger()
call TriggerRegisterUnitEvent(P2,Ct,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(P2,Condition(function py))
call TriggerAddAction(P2,function pz)
endfunction
function p1 takes nothing returns boolean
return GetSpellAbilityId()==$41303743 and GetTriggerUnit()==Cv
endfunction
function p2 takes nothing returns boolean
return IsUnitAliveBJ(GetFilterUnit())==true and UnitHasBuffBJ(GetFilterUnit(),$4276756C)==false and IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(P5))==true
endfunction
function p3 takes nothing returns nothing
if bC(Cv,$6D6C7374)==true or GetUnitAbilityLevel(P5,$41303347)==1 then
call UnitDamageTarget(P5,GetEnumUnit(),I2R(GetHeroAgi(P5,true))*(I2R(GetUnitAbilityLevel(P5,$41303743))+5.),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(P5,GetEnumUnit(),I2R(GetHeroAgi(P5,true))*I2R(GetUnitAbilityLevel(P5,$41303743)),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
set Fx=Fx+1
set P6[Fx]=GetEnumUnit()
call UnitAddAbility(GetEnumUnit(),$416D7266)
call UnitRemoveAbility(GetEnumUnit(),$416D7266)
endfunction
function p4 takes nothing returns nothing
local group KB
local unit KC
set Fx=0
set Fy=-20.
set Fz=0.
set P5=GetTriggerUnit()
set F0=GetUnitX(GetTriggerUnit())
set F1=GetUnitY(GetTriggerUnit())
call SetUnitAnimation(Cv,"Spell Slam")
call CreateNUnitsAtLoc(1,$65303044,GetTriggerPlayer(),Location(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),bj_UNIT_FACING)
call KillUnit(bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,$65303045,GetTriggerPlayer(),Location(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),bj_UNIT_FACING)
call SetUnitTimeScale(bj_lastCreatedUnit,0.-2.27)
call KillUnit(bj_lastCreatedUnit)
call RemoveLocation(Location(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
call TriggerSleepAction(.1)
set bj_wantDestroyGroup=true
call ForGroupBJ(an(450.,Location(F0,F1),Condition(function p2)),function p3)
call StartTimerBJ(F2,true,.03)
set KB=null
set KC=null
endfunction
function p5 takes nothing returns nothing
set P4=CreateTrigger()
call TriggerRegisterUnitEvent(P4,Cv,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(P4,Condition(function p1))
call TriggerAddAction(P4,function p4)
endfunction
function p6 takes nothing returns nothing
if Fy<20. then
set Fy=Fy+1
set Fz=-1.5*Pow(Fy,2.)+600.
set GD=20.
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=Fx
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call SetUnitFlyHeight(P6[bj_forLoopAIndex],Fz,0.)
call fB(P6[bj_forLoopAIndex],P5,0)
set F3=GetUnitX(P6[bj_forLoopAIndex])
set F4=GetUnitY(P6[bj_forLoopAIndex])
if Fy==0. then
call SetUnitAnimation(P6[bj_forLoopAIndex],"death")
else
call DoNothing()
endif
if ModuloReal(RAbsBJ(Fy),5.)==0. then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",P6[bj_forLoopAIndex],"chest"))
else
call DoNothing()
endif
if Fy<0. then
set F6=bj_RADTODEG*Atan2(F1-F4,F0-F3)-60.
set F5=F3+40.*CosBJ(F6)
set F7=F4+40.*SinBJ(F6)
else
set F6=bj_RADTODEG*Atan2(F1-F4,F0-F3)-(130.+2.*Fy)
set F5=F3+GD*CosBJ(F6)
set F7=F4+GD*SinBJ(F6)
endif
call SetUnitPosition(P6[bj_forLoopAIndex],F5,F7)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
call PauseTimer(F2)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=Fx
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
call SetUnitFlyHeight(P6[bj_forLoopAIndex],GetUnitDefaultFlyHeight(P6[bj_forLoopAIndex]),333.)
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(P6[bj_forLoopAIndex]),GetUnitY(P6[bj_forLoopAIndex])))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endif
endfunction
function p7 takes nothing returns nothing
set P7=CreateTrigger()
call TriggerRegisterTimerExpireEvent(P7,F2)
call TriggerAddAction(P7,function p6)
endfunction
function p8 takes nothing returns boolean
return GetSpellAbilityId()==$414E7371
endfunction
function p9 takes nothing returns nothing
set Jd[2]=GetUnitLoc(GetTriggerUnit())
if GetRandomInt(1,150)<=GetHeroLevel(GetTriggerUnit()) then
call CreateNUnitsAtLoc(1,$6E303039,GetOwningPlayer(GetTriggerUnit()),Jd[2],bj_UNIT_FACING)
set P3[1]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(60,$42544C46,P3[1])
else
endif
if GetRandomInt(1,150)<=GetHeroLevel(GetTriggerUnit()) then
call CreateNUnitsAtLoc(1,$68726966,GetOwningPlayer(GetTriggerUnit()),Jd[2],bj_UNIT_FACING)
set P3[3]=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(60,$42544C46,P3[3])
else
endif
call RemoveLocation(Jd[2])
endfunction
function qB takes nothing returns nothing
set QB=CreateTrigger()
call TriggerRegisterUnitEvent(QB,Cz,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(QB,Condition(function p8))
call TriggerAddAction(QB,function p9)
endfunction
function qC takes nothing returns nothing
    // 学习技能监听
    // 如果学习的是沙场豪情
    if GetLearnedSkillBJ()== 'Ab1p' then 
        call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
    endif
// 如果学的是登神长阶
if GetLearnedSkillBJ()==$41623132 then
     call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|Cff00ff00登神长阶！" )
    if GetUnitAbilityLevel(GetTriggerUnit(), $41623132) ==6 then
        call SetUnitState(GetTriggerUnit(),ConvertUnitState(22),625)
    endif

    if GetUnitAbilityLevel(GetTriggerUnit(), $41623132) >= 16 then
        call SetUnitState(GetTriggerUnit(),ConvertUnitState(22),925)
    endif
endif
// 马良学R
if GetLearnedSkillBJ()=='Ab2m' then
// call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"|Cff00ff00愈战愈勇！")
call SetUnitAbilityLevel(GetTriggerUnit(),'Ab2l',GetUnitAbilityLevel(GetTriggerUnit(),'Ab2g'))
// call SetUnitAbilityLevel(GetTriggerUnit(),$41623263,GetUnitAbilityLevel(GetTriggerUnit(),'Ab2g'))

endif
// 阎宇学习W技能
if GetLearnedSkillBJ()=='Ab2g' then
// call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"|Cff00ff00愈战愈勇！")
call SetUnitAbilityLevel(GetTriggerUnit(),$41623061,GetUnitAbilityLevel(GetTriggerUnit(),'Ab2g'))
call SetUnitAbilityLevel(GetTriggerUnit(),$41623263,GetUnitAbilityLevel(GetTriggerUnit(),'Ab2g'))

endif

    // 如果学习的是孤军奋战
if GetLearnedSkillBJ()==$41623062 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"|Cff00ff00孤军奋战！")
call SetUnitAbilityLevel(GetTriggerUnit(),$41623061,GetUnitAbilityLevel(GetTriggerUnit(),$41623062))
call SetUnitAbilityLevel(GetTriggerUnit(),$41623063,GetUnitAbilityLevel(GetTriggerUnit(),$41623062))
// call IncUnitAbilityLevelSwapped($41623061,GetTriggerUnit())
// call IncUnitAbilityLevelSwapped($41623063,GetTriggerUnit())
endif
if GetLearnedSkill()==$414E6963 and GetUnitAbilityLevel(GetTriggerUnit(),$41304639)>0 then
call UnitRemoveAbility(GetTriggerUnit(),$41304639)
call UnitAddAbility(GetTriggerUnit(),$41304639)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304639)
else
endif
if GetLearnedSkillBJ()==$415A4645 or GetLearnedSkillBJ()==$41304458 then
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.02)
else
endif
if GetLearnedSkillBJ()==$41505436 then
if GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill())==1 then
call UnitAddAbility(GetTriggerUnit(),$41505433)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41505433)
else
endif
call XX(GetTriggerUnit(),$41505433,1,108,I2R(GetHeroInt(GetTriggerUnit(),true)*2*GetUnitAbilityLevel(GetTriggerUnit(),$41505436)+GetUnitAbilityLevel(GetTriggerUnit(),$41505436)*200))
call XY(GetTriggerUnit(),$41505433,1,218,"向周围弹射火焰，造成（|cff22ff66"+(I2S(R2I(I2R(GetHeroInt(GetTriggerUnit(),true)*2*GetUnitAbilityLevel(GetTriggerUnit(),$41505436)+GetUnitAbilityLevel(GetTriggerUnit(),$41505436)*200)))+"|r）伤害。"))
else
endif
if GetLearnedSkillBJ()==$41304157 then
call SetPlayerTechResearchedSwap($5265736D,GetUnitAbilityLevelSwapped($41304157,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
endif
if GetLearnedSkillBJ()==$41534A32 then
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.05)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(81),GetUnitState(GetTriggerUnit(),ConvertUnitState(81))+.1)
else
endif
if GetLearnedSkillBJ()==$414A5333 then
call SetUnitState(GetTriggerUnit(),ConvertUnitState(81),GetUnitState(GetTriggerUnit(),ConvertUnitState(81))+.1)
if GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill())==1 then
call UnitAddAbility(GetTriggerUnit(),$41534A33)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41534A33)
else
endif
else
endif
if GetLearnedSkillBJ()==$41303859 then
call SetPlayerTechResearchedSwap($52656D67,GetUnitAbilityLevelSwapped($41303859,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
endif
if GetLearnedSkillBJ()==$41303846 then
call SetPlayerTechResearchedSwap($52756766,GetUnitAbilityLevelSwapped($41303846,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))
else
endif
// 高翔E
if GetLearnedSkillBJ() == $41623163 and GetUnitAbilityLevel(GetTriggerUnit(), $41623163) == 1 then
call cP(GetTriggerUnit())
else
endif
// 烈焰护体
if GetLearnedSkillBJ()==$41444433 and GetUnitAbilityLevel(GetTriggerUnit(),$41444433)==1 then
call cP(GetTriggerUnit())
else
endif
if GetLearnedSkillBJ()==$41594C34 then
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+9,true)
else
endif
if GetLearnedSkillBJ()==$41415331 then
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),$41415351,true)
else
endif
if GetLearnedSkillBJ()==$41575133 and GetUnitAbilityLevel(GetTriggerUnit(),$41575133)==1 then
call TriggerRegisterUnitEvent(QD,GetTriggerUnit(),EVENT_UNIT_ISSUED_ORDER)
else
endif
endfunction
function qD takes nothing returns nothing
set QC=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(QC,Player(0),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(1),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(2),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(3),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(4),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(5),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(6),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(7),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(8),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(9),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(10),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(11),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(12),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(13),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(14),EVENT_PLAYER_HERO_SKILL)
call TriggerRegisterPlayerUnitEventSimple(QC,Player(15),EVENT_PLAYER_HERO_SKILL)
call TriggerAddAction(QC,function qC)
endfunction
function qE takes nothing returns boolean
return GetSpellAbilityId()==$41457368
endfunction
function qF takes nothing returns nothing
if bC(GetTriggerUnit(),$6D6C7374)==true or bC(GetTriggerUnit(),$7664646C)==true then
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),bk(GetTriggerUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())+3),false,false,K,N,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),bk(GetTriggerUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())),false,false,K,N,WEAPON_TYPE_WHOKNOWS)
endif
set QF[0]=GetSpellTargetUnit()
call CreateTextTagUnitBJ(I2S(GetHeroAgi(Co,true)*GetUnitAbilityLevel(Co,$41457368)),QF[0],0,10,25.,100,75.,15.)
set Jc[0]=GetLastCreatedTextTag()
call SetTextTagLifespan(Jc[0],2.)
call SetTextTagVelocityBJ(Jc[0],64,90)
call SetTextTagPermanent(Jc[0],false)
set GY=1
loop
exitwhen GY>10
call TriggerSleepAction(.3)
call UnitDamageTargetBJ(Co,QF[0],I2R(GetHeroAgi(Co,true)*2),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
call CreateTextTagUnitBJ(I2S(GetHeroAgi(Co,true)*2),QF[0],0,10,25.,100,75.,15.)
set Jc[1]=GetLastCreatedTextTag()
call SetTextTagLifespan(Jc[1],2.)
call SetTextTagVelocityBJ(Jc[1],64,90)
call SetTextTagPermanent(Jc[1],false)
set GY=GY+1
endloop
endfunction
function qG takes nothing returns nothing
set QE=CreateTrigger()
call TriggerRegisterUnitEvent(QE,Co,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(QE,Condition(function qE))
call TriggerAddAction(QE,function qF)
endfunction
function qH takes nothing returns boolean
return GetSpellAbilityId()==$41303738
endfunction
function qI takes nothing returns nothing
call cW(GetTriggerUnit(),GetSpellTargetUnit())
endfunction
function qJ takes nothing returns nothing
set QG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(QG,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(QG,Condition(function qH))
call TriggerAddAction(QG,function qI)
endfunction
function qK takes nothing returns boolean
return GetSpellAbilityId()==$41656E73
endfunction
function qL takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Cu))==false
endfunction
function qM takes nothing returns nothing
if bC(QQ,$6D6C7374)==true or bC(QQ,$726E7370)==true then
call UnitDamageTarget(QQ,GetEnumUnit(),(I2R(GetHeroStr(QQ,true))+500.)*I2R(GetUnitAbilityLevelSwapped($41656E73,QQ)),true,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(QQ,GetEnumUnit(),(I2R(GetHeroStr(QQ,true))+400.)*I2R(GetUnitAbilityLevelSwapped($41656E73,QQ)),true,false,ATTACK_TYPE_SIEGE,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
endfunction
// 野蛮撞击触发函数
function qN takes nothing returns nothing
local group KB
local unit KC
set QQ=GetTriggerUnit()
set QR=GetSpellTargetUnit()
call SetUnitPathing(QQ,false)
call SetUnitInvulnerable(QQ,true)
call PauseUnitBJ(true,QR)
call TriggerSleepAction(.1)
set bj_wantDestroyGroup=true
call ForGroupBJ(an(500.,GetUnitLoc(QR),Condition(function qL)),function qM)
call SetUnitX(QQ,GetUnitX(QR))
call SetUnitY(QQ,GetUnitY(QR))
call SetUnitAnimation(QR,"Death")
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(QQ),GetUnitY(QQ)))
call SetUnitInvulnerable(QQ,false)
call SetUnitPathing(QQ,true)
call PauseUnitBJ(false,QR)
call PauseUnitBJ(false,QQ)
call ResetUnitAnimation(QR)
call SelectUnitAddForPlayer(QQ,GetOwningPlayer(QQ))
set QQ=null
set QR=null
set KB=null
set KC=null
endfunction
function qO takes nothing returns nothing
set QP=CreateTrigger()
call TriggerRegisterUnitEvent(QP,Cu,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(QP,Condition(function qK))
call TriggerAddAction(QP,function qN)
endfunction
function qP takes nothing returns boolean
return GetSpellAbilityId()==$41303046
endfunction
function qQ takes nothing returns boolean
return IsUnitIllusionBJ(GetFilterUnit())==true
endfunction
function qR takes nothing returns nothing
call UnitAddItemByIdSwapped($72646973,DN)
set Jd[25]=GetUnitLoc(DN)
set Jd[26]=GetUnitLoc(GetTriggerUnit())
set Ft=an(300.,Jd[25],Condition(function qQ))
set Pi=FirstOfGroup(Ft)
call DestroyGroup(Ft)
call SetUnitPositionLoc(Pi,Jd[26])
call SetUnitInvulnerable(Pi,true)
call ShowUnitHide(Pi)
call UnitAddAbilityBJ($416C6F63,Pi)
call IssueTargetOrder(Pi,"attackonce",GetTriggerUnit())
call RemoveLocation(Jd[25])
call RemoveLocation(Jd[26])
set Pi=null
endfunction
function qS takes nothing returns nothing
set QS=CreateTrigger()
call TriggerRegisterUnitEvent(QS,DI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(QS,Condition(function qP))
call TriggerAddAction(QS,function qR)
endfunction
function qT takes nothing returns boolean
return GetSpellAbilityId()==$41303848
endfunction
function qU takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Pl=GetTriggerUnit()
set QU[0]=GetUnitLoc(GetTriggerUnit())
set QU[1]=GetSpellTargetLoc()
set QV=CreateUnit(GetOwningPlayer(GetTriggerUnit()),$65303057,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),AngleBetweenPoints(QU[0],QU[1]))
call StartTimerBJ(Gi,true,.02)
call ShowUnit(C0,false)
call TriggerSleepAction(1.)
call PauseTimer(Gi)
call RemoveUnit(QV)
call RemoveLocation(QU[0])
call RemoveLocation(QU[1])
call ShowUnit(C0,true)
call SelectUnitAddForPlayer(C0,GetOwningPlayer(C0))
call EnableTrigger(GetTriggeringTrigger())
endfunction
function qV takes nothing returns nothing
set QT=CreateTrigger()
call TriggerRegisterUnitEvent(QT,C0,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(QT,Condition(function qT))
call TriggerAddAction(QT,function qU)
endfunction
function qW takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(Pl))==false
endfunction
function qX takes nothing returns nothing
call UnitDamageTarget(C0,GetEnumUnit(),I2R(GetHeroStr(C0,true)*1),true,false,ATTACK_TYPE_MAGIC,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endfunction
function qY takes nothing returns nothing
local group KB
local unit KC
set QU[2]=GetUnitLoc(QV)
set QU[3]=PolarProjectionBJ(QU[2],50.,AngleBetweenPoints(QU[0],QU[1]))
call SetUnitX(QV,RMinBJ(RMaxBJ(GetLocationX(QU[3])*1.,QJ),QK))
call SetUnitY(QV,RMinBJ(RMaxBJ(GetLocationY(QU[3])*1.,QM),QN))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetLocationX(QU[3]),GetLocationY(QU[3])))
set bj_wantDestroyGroup=true
call ForGroupBJ(an(200.,QU[3],Condition(function qW)),function qX)
call RemoveLocation(QU[2])
call RemoveLocation(QU[3])
set KB=null
set KC=null
endfunction
function qZ takes nothing returns nothing
set QW=CreateTrigger()
call TriggerRegisterTimerExpireEvent(QW,Gi)
call TriggerAddAction(QW,function qY)
endfunction
function qa takes nothing returns boolean
return GetSpellAbilityId()==$41303658
endfunction
function qb takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call PauseTimer(GX)
call SetUnitInvulnerable(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D),false)
endfunction
function qc takes nothing returns nothing
local timer MG
local integer QY=LoadInteger(FT,GetHandleId(GetTriggeringTrigger()),$CFDE6C76)
set QY=QY+3
call SaveInteger(FT,GetHandleId(GetTriggeringTrigger()),$CFDE6C76,QY)
call SaveInteger(FT,GetHandleId(GetTriggeringTrigger()),$ECE825E7,QY)
call DisplayTextToForce(GetPlayersAll(),"常山赵子龙在此！！！")
set QZ=GetTriggerUnit()
set Qa=GetSpellTargetUnit()
call SetUnitInvulnerable(QZ,true)
call bv(QZ,bk(QZ,2,GetUnitAbilityLevel(QZ,$41303658)),bN(QZ,Qa),bO(QZ,Qa),220)
call SetUnitAnimation(QZ,"attack")
call StartTimerBJ(GX,true,.01)
set MG=CreateTimer()
call SaveUnitHandle(FT,GetHandleId(MG),$C303079D,QZ)
call TimerStart(MG,.5,false,function qb)
call FlushChildHashtable(FT,GetHandleId(GetTriggeringTrigger())*QY)
set MG=null
endfunction
function qd takes nothing returns nothing
set QX=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(QX,Player(0),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(1),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(2),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(3),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(4),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(5),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(6),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(7),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(8),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(9),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(10),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(11),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(12),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(13),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(14),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(QX,Player(15),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(QX,Condition(function qa))
call TriggerAddAction(QX,function qc)
endfunction
function qe takes nothing returns nothing
local real JT=0.
set Qc[1]=GetUnitLoc(Qa)
set Qc[3]=GetUnitLoc(QZ)
set Qc[2]=PolarProjectionBJ(Qc[3],100.,AngleBetweenPoints(Qc[3],Qc[1]))
if DistanceBetweenPoints(Qc[3],Qc[1])>=150. and DistanceBetweenPoints(Qc[3],Qc[1])<=2500. then
call SetUnitX(QZ,GetLocationX(Qc[2]))
call SetUnitY(QZ,GetLocationY(Qc[2]))
call CreateNUnitsAtLoc(1,$65303035,GetOwningPlayer(QZ),Qc[2],AngleBetweenPoints(Qc[3],Qc[1]))
set Qd=GetLastCreatedUnit()
call UnitApplyTimedLifeBJ(.5,$42487765,Qd)
call SetUnitTimeScale(Qd,2.)
call SetUnitAnimation(GetLastCreatedUnit(),"attack")
call SetUnitColor(Qd,Qe[GetRandomInt(1,8)])
set Qd=null
else
call PauseTimer(GX)
set JT=bk(QZ,2,GetUnitAbilityLevel(QZ,$41303658))
if bC(QZ,$676F626D)==true or bC(C8,$6D6C7374)==true then
set JT=JT*1.5
else
endif
call bs(QZ,GetUnitX(QZ),GetUnitY(QZ),330,JT,1,2)
call SetUnitInvulnerable(QZ,false)
endif
call RemoveLocation(Qc[1])
call RemoveLocation(Qc[2])
call RemoveLocation(Qc[3])
endfunction
function qf takes nothing returns nothing
set Qb=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Qb,GX)
call TriggerAddAction(Qb,function qe)
endfunction
function qg takes nothing returns boolean
return GetSpellAbilityId()==$4130414B
endfunction
function qh takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set GO=I2R(GetHeroAgi(GetTriggerUnit(),true)*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))*1.5
set Qg=GetSpellTargetUnit()
set Qh=GetUnitLoc(J8)
set Qi=GetUnitLoc(Qg)
set Qj=PolarProjectionBJ(Qh,GP/2.,GQ)
set GP=DistanceBetweenPoints(Qh,Qi)
set GQ=AngleBetweenPoints(Qh,Qi)
set GR=AngleBetweenPoints(Qi,Qh)
call PauseUnitBJ(true,J8)
call PauseUnitBJ(true,Qg)
call SetUnitAnimationByIndex(J8,2)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",Qj))
call EnableTrigger(Qk)
call RemoveLocation(Qh)
call RemoveLocation(Qi)
call RemoveLocation(Qj)
endfunction
function qi takes nothing returns nothing
set Qf=CreateTrigger()
call TriggerRegisterUnitEvent(Qf,C4,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Qf,Condition(function qg))
call TriggerAddAction(Qf,function qh)
endfunction
function qj takes nothing returns nothing
if GS>=10 then
set GS=0
call DisableTrigger(GetTriggeringTrigger())
call SetUnitAnimationByIndex(J8,3)
call TriggerSleepAction(.1)
call EnableTrigger(Ql)
else
set GS=GS+1
set Qh=GetUnitLoc(J8)
set Qi=PolarProjectionBJ(Qh,GP/15.,GR)
call SetUnitPositionLocFacingBJ(J8,Qi,GQ)
call RemoveLocation(Qh)
call RemoveLocation(Qi)
endif
endfunction
function qk takes nothing returns nothing
set Qk=CreateTrigger()
call DisableTrigger(Qk)
call TriggerRegisterTimerEventPeriodic(Qk,.02)
call TriggerAddAction(Qk,function qj)
endfunction
function ql takes nothing returns nothing
if GS>=10 then
set GS=0
call DisableTrigger(GetTriggeringTrigger())
call IssuePointOrder(CreateUnit(GetOwningPlayer(J8),$6530304D,GetUnitX(J8),GetUnitY(J8),0),"shockwave",GetUnitX(Qg),GetUnitY(Qg))
call UnitDamageTarget(C4,Qg,I2R((GetHeroStr(C4,true)+GetHeroAgi(C4,true))*10),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call bv(C4,bk(C4,0,3),bN(C4,Qg),800,220)
call SetUnitAnimation(Qg,"death")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",Qg,"chest"))
call EnableTrigger(Qm)
else
set GS=GS+1
set Qh=GetUnitLoc(J8)
set Qi=PolarProjectionBJ(Qh,GP/15.,GQ)
call SetUnitPositionLocFacingBJ(J8,Qi,GQ)
call RemoveLocation(Qh)
call RemoveLocation(Qi)
endif
endfunction
function qm takes nothing returns nothing
set Ql=CreateTrigger()
call DisableTrigger(Ql)
call TriggerRegisterTimerEventPeriodic(Ql,.02)
call TriggerAddAction(Ql,function ql)
endfunction
function qn takes nothing returns nothing
if GS>=20 then
call DisableTrigger(GetTriggeringTrigger())
set GS=0
call ResetUnitAnimation(Qg)
call PauseUnitBJ(false,Qg)
call PauseUnitBJ(false,J8)
set Qg=null
call EnableTrigger(Qf)
else
set GS=GS+1
set Qh=GetUnitLoc(Qg)
set Qi=PolarProjectionBJ(Qh,GP/15.,GQ)
call SetUnitPositionLocFacingBJ(Qg,Qi,GR)
call RemoveLocation(Qh)
call RemoveLocation(Qi)
endif
endfunction
function qo takes nothing returns nothing
set Qm=CreateTrigger()
call DisableTrigger(Qm)
call TriggerRegisterTimerEventPeriodic(Qm,.02)
call TriggerAddAction(Qm,function qn)
endfunction
function qp takes nothing returns boolean
return GetSpellAbilityId()==$41303744
endfunction
function qq takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Qo=DI
call UnitAddAbilityBJ($41436573,Qo)
set Qp=GetSpellTargetUnit()
set Qq[1]=GetUnitLoc(Qo)
set Qq[2]=GetUnitLoc(Qp)
set F8=0.
set F9=AngleBetweenPoints(Qq[1],Qq[2])
call SetUnitTimeScale(Qo,5.)
call StartTimerBJ(GU,true,.01)
call TriggerSleepAction(3.)
call UnitRemoveAbility(DI,$41436573)
endfunction
function qr takes nothing returns nothing
set Qn=CreateTrigger()
call TriggerRegisterUnitEvent(Qn,DI,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Qn,Condition(function qp))
call TriggerAddAction(Qn,function qq)
endfunction
function qs takes nothing returns nothing
set F8=F8+10.
set Qq[3]=PolarProjectionBJ(Qq[2],150.,180.+F9+F8)
call SetUnitPositionLocFacingLocBJ(Qo,Qq[3],Qq[2])
call RemoveLocation(Qq[3])
if F8>=180. then
call PauseTimer(GU)
call IssueTargetOrder(Qo,"attack",Qp)
if bC(DI,$6D6C7374)==true or bC(DI,$49303057)==true then
call UnitDamageTarget(DI,Qp,I2R(GetHeroAgi(DI,true))*(I2R(GetUnitAbilityLevel(DI,$41303744))+3.),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(DI,Qp,I2R(GetHeroAgi(DI,true))*I2R(GetUnitAbilityLevel(DI,$41303744)),true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
call RemoveLocation(Qq[1])
call RemoveLocation(Qq[2])
call SetUnitPathing(Qo,true)
call TriggerSleepAction(.2)
call SetUnitTimeScale(Qo,1.)
set Qo=null
set Qp=null
call EnableTrigger(Qn)
else
endif
endfunction
function qt takes nothing returns nothing
set Qr=CreateTrigger()
call TriggerRegisterTimerExpireEvent(Qr,GU)
call TriggerAddAction(Qr,function qs)
endfunction
function qu takes nothing returns nothing
endfunction
function qv takes nothing returns nothing
endfunction
function qw takes nothing returns boolean
return GetSpellAbilityId()==$41303747
endfunction
function qx takes nothing returns nothing
local real JT=bk(GetTriggerUnit(),3,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
local location Qt=GetSpellTargetLoc()
local real It=GetLocationX(Qt)
local real Iu=GetLocationY(Qt)
call DisableTrigger(GetTriggeringTrigger())
set Qu=GetSpellTargetLoc()
set GC=0
set Qv=PolarProjectionBJ(Qu,200.,0)
set Qw=PolarProjectionBJ(Qu,200.,180.)
set Qx=PolarProjectionBJ(Qu,200.,135.)
set Qy=PolarProjectionBJ(Qu,200.,315.)
call bs(GetTriggerUnit(),It,Iu,550,JT,5,0)
set GM=1
loop
exitwhen GM>36
set GC=GC+10
set Qz[0]=PolarProjectionBJ(Qu,400.,I2R(GC))
call CreateNUnitsAtLocFacingLocBJ(1,$65303046,GetOwningPlayer(GetTriggerUnit()),Qz[0],Qu)
call UnitApplyTimedLife(bj_lastCreatedUnit,$42487765,1.)
call SetUnitFlyHeight(bj_lastCreatedUnit,0.,600.)
call RemoveLocation(Qz[0])
set Qz[1]=PolarProjectionBJ(Qx,70.,I2R(GC))
call CreateNUnitsAtLocFacingLocBJ(1,$65303046,GetOwningPlayer(GetTriggerUnit()),Qz[1],Qu)
call UnitApplyTimedLife(bj_lastCreatedUnit,$42487765,1.)
call SetUnitFlyHeight(bj_lastCreatedUnit,0.,600.)
call RemoveLocation(Qz[1])
set Qz[2]=PolarProjectionBJ(Qy,70.,I2R(GC))
call CreateNUnitsAtLocFacingLocBJ(1,$65303046,GetOwningPlayer(GetTriggerUnit()),Qz[2],Qu)
call UnitApplyTimedLife(bj_lastCreatedUnit,$42487765,1.)
call SetUnitFlyHeight(bj_lastCreatedUnit,0.,600.)
call RemoveLocation(Qz[2])
set GM=GM+1
endloop
set GM=1
loop
exitwhen GM>9
set GC=GC+20
set Qz[3]=PolarProjectionBJ(Qv,200.,I2R(GC))
call CreateNUnitsAtLocFacingLocBJ(1,$65303046,GetOwningPlayer(GetTriggerUnit()),Qz[3],Qu)
call UnitApplyTimedLife(bj_lastCreatedUnit,$42487765,1.)
call SetUnitFlyHeight(bj_lastCreatedUnit,0.,600.)
call RemoveLocation(Qz[3])
set Qz[4]=PolarProjectionBJ(Qw,200.,I2R(GC)+180.)
call CreateNUnitsAtLocFacingLocBJ(1,$65303046,GetOwningPlayer(GetTriggerUnit()),Qz[4],Qu)
call UnitApplyTimedLife(bj_lastCreatedUnit,$42487765,1.)
call SetUnitFlyHeight(bj_lastCreatedUnit,0.,600.)
call RemoveLocation(Qz[4])
set GM=GM+1
endloop
call RemoveLocation(Qt)
set Qt=null
call RemoveLocation(Qu)
call RemoveLocation(Qv)
call RemoveLocation(Qw)
call RemoveLocation(Qw)
call RemoveLocation(Qy)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function qy takes nothing returns nothing
set Qs=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(0),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(1),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(2),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(3),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(4),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(5),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(6),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(7),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(8),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(9),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(10),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(11),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(12),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(13),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(14),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Qs,Player(15),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Qs,Condition(function qw))
call TriggerAddAction(Qs,function qx)
endfunction
function qz takes nothing returns boolean
return GetSpellAbilityId()==$41303936
endfunction
function q0 takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetTriggerUnit()) and (GetUnitPointValue(GetFilterUnit())!=50 and GetOwningPlayer(GetFilterUnit())!=Player(8))
endfunction
function q1 takes nothing returns nothing
call SetUnitPosition(GetEnumUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endfunction
// 木鹿大王传送
function q2 takes nothing returns nothing
local group KB
local unit KC
call DisableTrigger(GetTriggeringTrigger())
// and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false
if RectContainsUnit(d,GetTriggerUnit())==false and RectContainsUnit(BI,GetTriggerUnit())==false and RectContainsUnit(i,GetTriggerUnit())==false and GetOwningPlayer(GetTriggerUnit())!=Player(8) and GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit()) and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_USER and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false then
if GetSpellTargetUnit()==Cx then
set bj_wantDestroyGroup=true
call ForGroupBJ(ao(GetPlayableMapRect(),Condition(function q0)),function q1)
else
call SetUnitPosition(GetSpellTargetUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
endif
else
endif
call EnableTrigger(GetTriggeringTrigger())
set KB=null
set KC=null
endfunction
function q3 takes nothing returns nothing
set Q0=CreateTrigger()
call TriggerRegisterUnitEvent(Q0,Cx,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Q0,Condition(function qz))
call TriggerAddAction(Q0,function q2)
endfunction
function q4 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit()))==true and Gq>=5
endfunction
function q5 takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),GetUnitState(GetTriggerUnit(),ConvertUnitState(21)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL)
endfunction
function q6 takes nothing returns nothing
set Q1=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(Q1,Player(9),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerUnitEventSimple(Q1,Player(10),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Q1,Condition(function q4))
call TriggerAddAction(Q1,function q5)
endfunction
function q7 takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function q8 takes nothing returns nothing
local unit Iv=GetTriggerUnit()
// 切换皮肤后更换变量
if GetUnitTypeId(Iv) == 'HA05' and Iv !=zongyu then
set zongyu = Iv
endif   

if GetUnitTypeId(Iv) == 'HA06' and Iv !=jingwei then
set jingwei = Iv
endif  

// 英雄升级解锁大招
if GetUnitTypeId(Iv)==$48595030 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41595052)<1 then
call UnitAddAbility(Iv,$41595052)
// call SetHeroStr(Iv,GetHeroStr(Iv,false)+150,true)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00放逐之锋！")
// call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00获得艾欧尼亚的祝福！获得额外的150点力量！")
endif
if GetUnitAbilityLevel(Iv,$41595052)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevel(Iv,$41595052)
// call SetHeroStr(Iv,GetHeroStr(Iv,false)+150,true)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00放逐之锋的等级已经提升了！")
// call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00获得艾欧尼亚的祝福！获得额外的150点力量！")
endif
if GetUnitAbilityLevel(Iv,$41595052)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevel(Iv,$41595052)
// call SetHeroStr(Iv,GetHeroStr(Iv,false)+150,true)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00放逐之锋的等级已经提升了！")
// call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00获得艾欧尼亚的祝福！获得额外的150点力量！")
endif
elseif GetUnitTypeId(Iv)==$48475930 or GetUnitTypeId(Iv)==$48475931 or GetUnitTypeId(Iv)==$48475932 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41475952)<1 then
call UnitAddAbility(Iv,$41475952)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00水淹七军！")
endif
if GetUnitAbilityLevel(Iv,$41475952)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevel(Iv,$41475952)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00水淹七军的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41475952)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevel(Iv,$41475952)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00水淹七军的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48594A30 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41594A35)<1 then
call UnitAddAbility(Iv,$41594A35)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00法天象地！")
endif
if GetUnitAbilityLevel(Iv,$41594A35)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevel(Iv,$41594A35)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00法天象地的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41594A35)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevel(Iv,$41594A35)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00法天象地的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv) == $485A4747 and GetUnitTypeId(zhuiSuiZhe) == $48303031 then
if GetHeroLevel(Iv)>= 10 and GetUnitAbilityLevel(zhuiSuiZhe, $41303648) < 1 then
call UnitAddAbility(zhuiSuiZhe,$41303648)
call UnitMakeAbilityPermanent(zhuiSuiZhe,true,$41303648)
else
endif
if GetHeroLevel(Iv) >= 20 and GetUnitAbilityLevel(zhuiSuiZhe, $41436365) < 2 then
call UnitAddAbility(zhuiSuiZhe,$41436365)
// 孤军奋战
call UnitAddAbility(zhuiSuiZhe,'A0FY')
call IncUnitAbilityLevel(zhuiSuiZhe,$41436365)
call IncUnitAbilityLevel(zhuiSuiZhe,$41303648)
else
endif
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(zhuiSuiZhe,$41304357)<1 then
call UnitAddAbility(zhuiSuiZhe,$41304357)
call UnitMakeAbilityPermanent(zhuiSuiZhe,true,$41304357)
call IncUnitAbilityLevel(zhuiSuiZhe,$41303648)
else
endif
if GetHeroLevel(Iv) >= 40 and GetUnitAbilityLevel(zhuiSuiZhe, $41436365) < 3 then
call IncUnitAbilityLevel(zhuiSuiZhe,$41436365)
// 提升吸血等级
call IncUnitAbilityLevel(zhuiSuiZhe,$41303648)
// 提升攻击等级到2
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv)>=50 and GetUnitAbilityLevel(zhuiSuiZhe,$41304358)<1 then
call UnitAddAbility(zhuiSuiZhe,$41304358)
call UnitMakeAbilityPermanent(zhuiSuiZhe,true,$41304358)
call IncUnitAbilityLevel(zhuiSuiZhe,$41303648)
else
endif
if GetHeroLevel(Iv) >= 60 and GetUnitAbilityLevel(zhuiSuiZhe, $41436365) < 4 then
call IncUnitAbilityLevel(zhuiSuiZhe,$41436365)
call IncUnitAbilityLevel(zhuiSuiZhe,$41303648)
// 提升攻击等级到3
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv)>=70 and GetUnitAbilityLevel(zhuiSuiZhe,$41303659)<1 then
call UnitAddAbility(zhuiSuiZhe,$41303659)
call UnitMakeAbilityPermanent(zhuiSuiZhe,true,$41303659)
call IncUnitAbilityLevel(zhuiSuiZhe,$41303648)
else
endif
if GetHeroLevel(Iv) >= 80 and GetUnitAbilityLevel(zhuiSuiZhe,'A0FY')<4 then
// 提升攻击等级到4
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv) >= 100 and GetUnitAbilityLevel(zhuiSuiZhe,'A0FY')<5 then
// 提升攻击等级到5
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv) >= 120 and GetUnitAbilityLevel(zhuiSuiZhe,'A0FY')<6 then
// 提升攻击等级到6
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv) >= 140 and GetUnitAbilityLevel(zhuiSuiZhe,'A0FY')<7 then
// 提升攻击等级到7
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv) >= 160 and GetUnitAbilityLevel(zhuiSuiZhe,'A0FY')<8 then
// 提升攻击等级到8
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv) >= 180 and GetUnitAbilityLevel(zhuiSuiZhe,'A0FY')<9 then
// 提升攻击等级到9
call IncUnitAbilityLevel(zhuiSuiZhe,'A0FY')
else
endif
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41474831)<1 then
call UnitAddAbility(Iv,$41474831)
call UnitMakeAbilityPermanent(Iv,true,$41474831)
call UnitAddAbility(Iv,$41474836)
call UnitMakeAbilityPermanent(Iv,true,$41474836)
call UnitAddAbility(Iv,$41474833)
call UnitMakeAbilityPermanent(Iv,true,$41474833)
call UnitAddAbility(Iv,$41304359)
call UnitMakeAbilityPermanent(Iv,true,$41304359)
call UnitAddAbility(Iv,$41474834)
call UnitMakeAbilityPermanent(Iv,true,$41474834)
call UnitAddAbility(Iv,$41474835)
call UnitMakeAbilityPermanent(Iv,true,$41474835)
call UnitAddAbility(Iv,$41474830)
call UnitMakeAbilityPermanent(Iv,true,$41474830)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00普度众生！")
endif
if GetUnitAbilityLevel(Iv,$41474831)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevel(Iv,$41474831)
call IncUnitAbilityLevel(Iv,$41474836)
call IncUnitAbilityLevel(Iv,$41474833)
call IncUnitAbilityLevel(Iv,$41304359)
call IncUnitAbilityLevel(Iv,$41474834)
call IncUnitAbilityLevel(Iv,$41474835)
call IncUnitAbilityLevel(Iv,$41474830)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00普度众生的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41474831)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevel(Iv,$41474831)
call IncUnitAbilityLevel(Iv,$41474836)
call IncUnitAbilityLevel(Iv,$41474833)
call IncUnitAbilityLevel(Iv,$41304359)
call IncUnitAbilityLevel(Iv,$41474834)
call IncUnitAbilityLevel(Iv,$41474835)
call IncUnitAbilityLevel(Iv,$41474830)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00普度众生的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$484A5330 or GetUnitTypeId(Iv)==$484A5331 or GetUnitTypeId(Iv)==$484A5332 or GetUnitTypeId(Iv)==$484A5333 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41534A35)<1 then
call UnitAddAbility(Iv,$41534A35)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00剑侍！")
endif
if GetUnitAbilityLevel(Iv,$41534A35)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevel(Iv,$41534A35)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00剑侍的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41534A35)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevel(Iv,$41534A35)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00剑侍的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48575930 or GetUnitTypeId(Iv)==$4E30304D or GetUnitTypeId(Iv)==$48575932 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41575935)<1 then
call UnitAddAbility(Iv,$41575935)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00不灭意志！")
else
endif
if GetUnitAbilityLevel(Iv,$41575935)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevel(Iv,$41575935)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00不灭意志的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41575935)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevel(Iv,$41575935)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00不灭意志的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48475330 or GetUnitTypeId(Iv)==$48475332 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41475335,Iv)<1 then
call UnitAddAbilityBJ($41475335,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00魔神降临！")
endif
if GetUnitAbilityLevelSwapped($41475335,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41475335,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00魔神降临的等级已经提升了！")
endif
if GetUnitAbilityLevelSwapped($41475335,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41475335,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00魔神降临的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$4F303036 or GetUnitTypeId(Iv)==$4841484E then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($4130414C,Iv)<1 then
call UnitAddAbilityBJ($4130414C,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00无尽怒火！")
elseif GetUnitAbilityLevelSwapped($4130414C,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($4130414C,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00无尽怒火的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($4130414C,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($4130414C,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00无尽怒火的等级已经提升了！")
endif
// 请切换吕布和张苞大招41304C30
elseif GetUnitAbilityLevel(Iv,$41304C30)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($414C4235,Iv)<1 then
call UnitAddAbilityBJ($414C4235,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00怒战群雄！")
call ModifyHeroStat(bj_HEROSTAT_STR,Iv,bj_MODIFYMETHOD_ADD,100)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00获得霸王项羽的祝福！获得额外的100点力量！")
elseif GetUnitAbilityLevelSwapped($414C4235,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($414C4235,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00怒战群雄的等级已经提升了！")
call ModifyHeroStat(bj_HEROSTAT_STR,Iv,bj_MODIFYMETHOD_ADD,100)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00获得霸王项羽的祝福！获得额外的100点力量！")
elseif GetUnitAbilityLevelSwapped($414C4235,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($414C4235,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00怒战群雄的等级已经提升了！")
call ModifyHeroStat(bj_HEROSTAT_STR,Iv,bj_MODIFYMETHOD_ADD,100)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00获得霸王项羽的祝福！获得额外的100点力量！")
endif
elseif Iv==DH then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41445335,Iv)<1 then
call UnitAddAbilityBJ($41445335,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00斗战胜佛！")
elseif GetUnitAbilityLevelSwapped($41445335,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41445335,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00斗战胜佛的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41445335,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41445335,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00斗战胜佛的等级已经提升了！")
endif
// 绝命枪技能
elseif GetUnitTypeId(Iv)==$48594C30 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41594C35,Iv)<1 then
call UnitAddAbilityBJ($41594C35,Iv)
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)+50,true)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00绝命枪！")
elseif GetUnitAbilityLevelSwapped($41594C35,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41594C35,Iv)
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)+50,true)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00绝命枪的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41594C35,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41594C35,Iv)
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)+50,true)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00绝命枪的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48505430 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($4130304F,Iv)<1 then
call UnitAddAbilityBJ($4130304F,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00凤舞九天！")
elseif GetUnitAbilityLevelSwapped($4130304F,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($4130304F,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00凤舞九天的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($4130304F,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($4130304F,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00凤舞九天的等级已经提升了！")
endif
elseif GetUnitAbilityLevel(Iv,$41574430)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41574436,Iv)<1 then
call UnitAddAbilityBJ($41574436,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00寒冰箭阵！")
elseif GetUnitAbilityLevelSwapped($41574436,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41574436,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00寒冰箭阵的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41574436,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41574436,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00寒冰箭阵的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48444430 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41304D48,Iv)<1 then
call UnitAddAbilityBJ($41304D48,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00杀神附体！")
elseif GetUnitAbilityLevelSwapped($41304D48,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41304D48,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00杀神附体的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41304D48,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41304D48,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00杀神附体的等级已经提升了！")
endif
elseif GetUnitAbilityLevel(Iv,$41304C32)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($4130384F,Iv)<1 then
call UnitAddAbilityBJ($4130384F,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00三十六路长恨枪！")
elseif GetUnitAbilityLevelSwapped($4130384F,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($4130384F,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00三下六路长恨枪的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($4130384F,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($4130384F,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00三十六路长恨枪的等级已经提升了！")
endif
elseif GetUnitAbilityLevel(Iv,$41304C34)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41485A52,Iv)<1 then
call UnitAddAbilityBJ($41485A52,Iv)
call UnitMakeAbilityPermanent(Iv,true,$41485A52)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00烈焰之矢！")
elseif GetUnitAbilityLevelSwapped($41485A52,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41485A52,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00烈焰之矢的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41485A52,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41485A52,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00烈焰之矢的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$4530305A or GetUnitTypeId(Iv)==$48303059 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41304151,Iv)<1 then
call UnitAddAbilityBJ($41304151,Iv)
call UnitMakeAbilityPermanent(Iv,true,$41304151)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00狂暴！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41304151,Iv)==1 then
call IncUnitAbilityLevel(Iv,$41304151)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00狂暴的等级已经提升至2级！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41304151,Iv)==2 then
call IncUnitAbilityLevel(Iv,$41304151)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00狂暴的等级已经提升至3级！")
endif
// 赵云
elseif GetUnitAbilityLevel(Iv,$41304C31)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303439,Iv)<1 then
call UnitAddAbilityBJ($41303439,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00浴血奋战！")
elseif GetUnitAbilityLevelSwapped($41303439,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303439,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00浴血奋战的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41303439,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303439,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00浴血奋战的等级已经提升了！")
endif
// 赵统
elseif GetUnitAbilityLevel(Iv,$41303658)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303439,Iv)<1 then
call UnitAddAbilityBJ($41303439,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00浴血奋战！")
elseif GetUnitAbilityLevelSwapped($41303439,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303439,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00浴血奋战的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41303439,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303439,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00浴血奋战的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48444430 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41304D48,Iv)<1 then
call UnitAddAbilityBJ($41304D48,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00杀神附体！")
elseif GetUnitAbilityLevelSwapped($41304D48,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41304D48,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00杀神附体的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41304D48,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41304D48,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00杀神附体的等级已经提升了！")
endif
elseif Iv==DI or GetUnitTypeId(Iv)==$4842534E then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303046,Iv)<1 then
call UnitAddAbilityBJ($41303046,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00神佑！")
elseif GetUnitAbilityLevelSwapped($41303046,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303046,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00神佑的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41303046,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303046,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00神佑的等级已经提升了！")
endif
elseif Iv==DM then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($414E656E,Iv)<1 then
call UnitAddAbilityBJ($414E656E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00残影式！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($414E656E,Iv)==1 then
call IncUnitAbilityLevelSwapped($414E656E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00残影式的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($414E656E,Iv)==2 then
call IncUnitAbilityLevelSwapped($414E656E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00残影式的等级已经提升了！")
endif
elseif Iv==DQ then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303435,Iv)<1 then
call UnitAddAbilityBJ($41303435,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00火烧赤壁！")
elseif GetUnitAbilityLevelSwapped($41303435,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303435,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00火烧赤壁的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41303435,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303435,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00火烧赤壁的等级已经提升了！")
endif
elseif Iv==Co then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303741,Iv)<1 then
call UnitAddAbilityBJ($41303741,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00飞轮海！")
elseif GetUnitAbilityLevelSwapped($41303741,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303741,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00飞轮海的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41303741,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303741,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00飞轮海的等级已经提升了！")
endif
elseif Iv==Cx then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($414F6C73,Iv)<1 then
call UnitAddAbilityBJ($414F6C73,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00飞沙走石！")
elseif GetUnitAbilityLevelSwapped($414F6C73,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($414F6C73,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00飞沙走石的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($414F6C73,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($414F6C73,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00飞沙走石的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$484A5731 or GetUnitTypeId(Iv)==$486B616C then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($534E696E,Iv)<1 then
call UnitAddAbilityBJ($41737068,Iv)
call UnitAddAbilityBJ($534E696E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00破军阵法！")
elseif GetUnitAbilityLevelSwapped($534E696E,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($534E696E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00破军阵法的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($534E696E,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($534E696E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00破军阵法的等级已经提升了！")
elseif GetHeroLevel(Iv)>=100 and isJWawake then
    set awakeStr=GetHeroStr(Iv,false)
    set awakeAgi=GetHeroAgi(Iv,false)
    set awakeInt=GetHeroInt(Iv,false)
    call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"重修前属性：|Cff00ff00力量："+I2S(awakeStr)+"--敏捷："+I2S(awakeAgi)+"--智力"+I2S(awakeInt)+"--")
    call SetHeroLevelBJ(Iv,1,false)
    call SetHeroStr(Iv,awakeAgi,true)
    call SetHeroAgi(Iv,awakeAgi,true)
    call SetHeroInt(Iv,awakeInt,true)
    set awakeTime=awakeTime+1
    call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00已重修："+I2S(awakeTime)+" 次")
    call SetUnitState(Iv,ConvertUnitState(22),700+awakeTime*50)
    call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.03)
    call SetUnitAcquireRange(Iv,700+awakeTime*50)
    call SetPlayerHandicapXPBJ(GetOwningPlayer(gambleUnit),100+awakeTime*5)
    call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cff00ff00当前经验获得率为"+(I2S(100+awakeTime*5)+"%"))
    // call SetUnitAcquireRange(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],S2R(udg_SLzfc))
endif
elseif GetUnitTypeId(Iv)==$48584842 or Iv==Cr then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($414E696E,Iv)<1 then
call UnitAddAbilityBJ($414E696E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00如来神掌！")
elseif GetUnitAbilityLevelSwapped($414E696E,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($414E696E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00如来神掌的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($414E696E,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($414E696E,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00如来神掌的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48485959 or GetUnitTypeId(Iv)==$486A6169 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303759,Iv)<1 then
call UnitAddAbilityBJ($41303759,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00领悟了终级技能：天降甘霖！")
elseif GetUnitAbilityLevelSwapped($41303759,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303759,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00天降甘霖的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41303759,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303759,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00天降甘霖的等级已经提升了！")
endif
// 请切换张苞和吕布大招41304335
elseif GetUnitAbilityLevel(Iv,$41304335)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41486176,Iv)<1 then
call UnitAddAbilityBJ($41486176,Iv)

call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00力拔山兮气盖世！")

elseif GetUnitAbilityLevelSwapped($41486176,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41486176,Iv)

call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00力拔山兮气盖世的等级已经提升了！")


elseif GetUnitAbilityLevelSwapped($41486176,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41486176,Iv)

call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00力拔山兮气盖世的等级已经提升了！")


endif
elseif Iv==Cy or GetUnitTypeId(Iv)==$485A4731 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303049,Iv)<1 then
call UnitAddAbilityBJ($41303049,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00混沌箭阵！")
elseif GetUnitAbilityLevelSwapped($41303049,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303049,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00混沌箭阵的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41303049,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303049,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00混沌箭阵的等级已经提升了！")
endif
elseif GetUnitAbilityLevel(Iv,$41304136)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($4130304B,Iv)<1 then
call UnitAddAbilityBJ($4130304B,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00真实残像！")
elseif GetUnitAbilityLevelSwapped($4130304B,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($4130304B,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00真实残像的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($4130304B,Iv)==2 then
call IncUnitAbilityLevelSwapped($4130304B,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00真实残像的等级已经提升了！")
endif
elseif Iv==Cz or GetUnitTypeId(Iv)==$48575031 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($414E7371,Iv)<1 then
call UnitAddAbilityBJ($414E7371,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00援军令！")
elseif GetUnitAbilityLevelSwapped($414E7371,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($414E7371,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00援军令的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($414E7371,Iv)==2 then
call IncUnitAbilityLevelSwapped($414E7371,Iv)
call SetPlayerTechResearchedSwap($5268616E,1,GetOwningPlayer(Iv))
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00援军令的等级已经提升了！")
endif
elseif Iv==Cw then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($4130314B,Iv)<1 then
call UnitAddAbilityBJ($4130314B,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00星辰爆！")
elseif GetUnitAbilityLevelSwapped($4130314B,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($4130314B,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00星辰爆的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($4130314B,Iv)==2 then
call IncUnitAbilityLevelSwapped($4130314B,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00星辰爆的等级已经提升了！")
endif
elseif Iv==Cs then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303131,Iv)<1 then
call ModifyHeroStat(bj_HEROSTAT_STR,Cs,bj_MODIFYMETHOD_ADD,100)
call UnitAddAbilityBJ($41303131,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00天生蛮力！获得额外的100点力量！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41303131,Iv)==1 then
call ModifyHeroStat(bj_HEROSTAT_STR,Cs,bj_MODIFYMETHOD_ADD,100)
call IncUnitAbilityLevelSwapped($41303131,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00天生蛮力的等级已经提升了！获得额外的100点力量！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41303131,Iv)==2 then
call ModifyHeroStat(bj_HEROSTAT_STR,Cs,bj_MODIFYMETHOD_ADD,100)
call IncUnitAbilityLevelSwapped($41303131,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00天生蛮力的等级已经提升了！获得额外的100点力量！")
endif
elseif Iv==Cv or GetUnitTypeId(Iv)==$4F303033 or GetUnitTypeId(Iv)==$4F303035 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303130,Iv)<1 then
call UnitAddAbilityBJ($41303130,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00圣灵护体！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41303130,Iv)==1 then
call IncUnitAbilityLevelSwapped($41303130,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00圣灵护体的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41303130,Iv)==2 then
call IncUnitAbilityLevelSwapped($41303130,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00圣灵护体的等级已经提升了！")
endif
elseif Iv==C2 or GetUnitTypeId(Iv)==$484D5331 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303750,Iv)<1 then
call UnitAddAbilityBJ($41303750,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00狂雷天牢！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41303750,Iv)==1 then
call IncUnitAbilityLevelSwapped($41303750,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00狂雷天牢的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41303750,Iv)==2 then
call IncUnitAbilityLevelSwapped($41303750,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00狂雷天牢的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$4861706D then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($534E6464,Iv)<1 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00冰龙破！")
call UnitAddAbilityBJ($534E6464,Iv)
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($534E6464,Iv)==1 then
call IncUnitAbilityLevelSwapped($534E6464,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00冰龙破的等级提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($534E6464,Iv)==2 then
call IncUnitAbilityLevelSwapped($534E6464,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00冰龙破的等级提升了！")
endif
elseif Iv==C3 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303731,Iv)<1 then
call UnitAddAbilityBJ($41303731,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00五行八卦·奇门遁甲术！")
elseif GetUnitAbilityLevelSwapped($41303731,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41303731,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00五行八卦·奇门遁甲术！")
elseif GetUnitAbilityLevelSwapped($41303731,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41303731,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00五行八卦·奇门遁甲术！")
endif
elseif Iv==DL then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($414F7366,Iv)<1 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00召唤火凤凰！")
call UnitAddAbilityBJ($414F7366,Iv)
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($414F7366,Iv)==1 then
call IncUnitAbilityLevelSwapped($414F7366,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00召唤火凤凰的等级提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($414F7366,Iv)==2 then
call IncUnitAbilityLevelSwapped($414F7366,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00火凤凰的等级提升了！")
endif
elseif Iv==DE or GetUnitTypeId(Iv)==$48303054 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($4130305A,Iv)<1 then
call UnitAddAbilityBJ($4130305A,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00火焰刀！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($4130305A,Iv)==1 then
call IncUnitAbilityLevelSwapped($4130305A,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00火焰刀的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($4130305A,Iv)==2 then
call IncUnitAbilityLevelSwapped($4130305A,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00火焰刀的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$45696C6C then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($414E6567,Iv)<1 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00西凉骑术！")
call UnitAddAbilityBJ($414E6567,Iv)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($414E6567,Iv)==1 then
call IncUnitAbilityLevelSwapped($414E6567,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00西凉骑术的等级提升了！")
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
elseif GetUnitAbilityLevelSwapped($414E6567,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($414E6567,Iv)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00西凉骑术的等级提升了！")
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
endif
elseif GetUnitAbilityLevel(Iv,$41303652)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41303653,Iv)<1 then
call UnitAddAbilityBJ($41303653,Iv)
call UnitAddAbilityBJ($41303654,Iv)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call UnitMakeAbilityPermanent(Iv,true,$41457669)
call UnitMakeAbilityPermanent(Iv,true,$41303654)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00武神！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41303653,Iv)==1 then
call IncUnitAbilityLevel(Iv,$41303653)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00武神的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41303653,Iv)==2 then
call IncUnitAbilityLevel(Iv,$41303653)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00武神的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48594D30 or GetUnitTypeId(Iv)==$48594D31 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41594D35,Iv)<1 then
call UnitAddAbilityBJ($41594D35,Iv)
call UnitAddAbilityBJ($41304354,Iv)
call UnitMakeAbilityPermanent(Iv,true,$41304354)
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)+100,true)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00苍穹炽*灼炎胤！")
elseif GetUnitAbilityLevelSwapped($41594D35,Iv)==1 and GetHeroLevel(Iv)>=50 then
call IncUnitAbilityLevelSwapped($41594D35,Iv)
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)+100,true)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00苍穹炽*灼炎胤的等级已经提升了！")
elseif GetUnitAbilityLevelSwapped($41594D35,Iv)==2 and GetHeroLevel(Iv)>=70 then
call IncUnitAbilityLevelSwapped($41594D35,Iv)
call SetHeroAgi(Iv,GetHeroAgi(Iv,false)+100,true)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00苍穹炽*灼炎胤的等级已经提升了！")
endif
elseif GetUnitAbilityLevel(Iv, 'S002') >0 or GetUnitAbilityLevel(Iv, 'AZF0') >0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$415A4635)<1 then
call UnitAddAbilityBJ($415A4635,Iv)
call SetUnitState(Iv,ConvertUnitState(1),GetUnitState(Iv,ConvertUnitState(1))+2000)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00万夫莫敌！")
endif
if GetUnitAbilityLevel(Iv,$415A4635)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevelSwapped($415A4635,Iv)
call SetUnitState(Iv,ConvertUnitState(1),GetUnitState(Iv,ConvertUnitState(1))+2000)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00万夫莫敌的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$415A4635)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevelSwapped($415A4635,Iv)
call SetUnitState(Iv,ConvertUnitState(1),GetUnitState(Iv,ConvertUnitState(1))+2000)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00万夫莫敌的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$484C4C51 or GetUnitTypeId(Iv)==$484C5131 or GetUnitTypeId(Iv)==$484C5132 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41304451)<1 then
call UnitAddAbility(Iv,$41304451)
call UnitAddAbility(Iv,$41304452)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00贪狼咒*魔女阿修罗！")
endif
if GetUnitAbilityLevel(Iv,$41304451)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevel(Iv,$41304451)
call IncUnitAbilityLevel(Iv,$41304452)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00贪狼咒*魔女阿修罗的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41304451)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevel(Iv,$41304451)
call IncUnitAbilityLevel(Iv,$41304452)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00贪狼咒*魔女阿修罗的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48575931 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41413046)<1 then
call UnitAddAbility(Iv,$41413046)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00隔岸观火！")
endif
if GetUnitAbilityLevel(Iv,$41413046)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevel(Iv,$41413046)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00隔岸观火的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41413046)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevel(Iv,$41413046)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00隔岸观火的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48584330 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41584346)<1 then
call UnitAddAbility(Iv,$41584346)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00末日星陨！")
endif
if GetUnitAbilityLevel(Iv,$41584346)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevel(Iv,$41584346)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00末日星陨的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41584346)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevel(Iv,$41584346)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00末日星陨的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$4E303050 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41304645)<1 then
call UnitAddAbility(Iv,$41304645)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00势如破竹！")
endif
if GetUnitAbilityLevel(Iv,$41304645)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevel(Iv,$41304645)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00势如破竹的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41304645)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevel(Iv,$41304645)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00势如破竹的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$485A4330 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$414A5335)<1 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00咕嘎护法！")
call b4(Iv)
endif
elseif GetUnitTypeId(Iv)==$484A5230 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$414A5246)<1 then
call UnitAddAbility(Iv,$414A5246)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00F！")
endif
if GetUnitAbilityLevel(Iv,$414A5246)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevel(Iv,$414A5246)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00F的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$414A5246)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevel(Iv,$414A5246)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00F的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48415330 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41415352)<1 then
call UnitAddAbility(Iv,$41415352)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00狂风绝息斩！")
endif
if GetUnitAbilityLevel(Iv,$41415352)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevel(Iv,$41415352)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00狂风绝息斩的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41415352)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevel(Iv,$41415352)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00狂风绝息斩的等级已经提升了！")
endif
elseif GetUnitTypeId(Iv)==$48575130 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevel(Iv,$41575135)<1 then
call UnitAddAbility(Iv,$41575135)
call SaveInteger(Ia,GetHandleId(Iv),$41575135,0)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00碎瓜娃！")
endif
if GetUnitAbilityLevel(Iv,$41575135)==1 and GetHeroLevel(GetTriggerUnit())>=50 then
call IncUnitAbilityLevel(Iv,$41575135)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00碎瓜娃的等级已经提升了！")
endif
if GetUnitAbilityLevel(Iv,$41575135)==2 and GetHeroLevel(GetTriggerUnit())>=70 then
call IncUnitAbilityLevel(Iv,$41575135)
call SetUnitState(Iv,ConvertUnitState(37),GetUnitState(Iv,ConvertUnitState(37))-.05)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00碎瓜娃的等级已经提升了！")
endif
// 孙乾大招
elseif GetUnitAbilityLevel(Iv,$41623075)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41623074,Iv)<1 then
call UnitAddAbilityBJ($41623074,Iv)
call UnitMakeAbilityPermanent(Iv,true,$41457669)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00偷天换日！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41623074,Iv)==1 then
call IncUnitAbilityLevel(Iv,$41623074)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00偷天换日的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41623074,Iv)==2 then
call IncUnitAbilityLevel(Iv,$41623074)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00偷天换日的等级已经提升了！")
endif
// 天使大招
elseif GetUnitAbilityLevel(Iv,$41623132)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41623134,Iv)<1 then
call UnitAddAbilityBJ($41623134,Iv)
call UnitMakeAbilityPermanent(Iv,true,$41457669)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00圣裁之刻！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41623134,Iv)==1 then
call IncUnitAbilityLevel(Iv,$41623134)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00圣裁之刻的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41623134,Iv)==2 then
call IncUnitAbilityLevel(Iv,$41623134)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00圣裁之刻的等级已经提升了！")
elseif GetHeroLevel(Iv) >= 90 and GetUnitAbilityLevel(Iv, 'Ab4e') ==0 then
   call UnitAddAbilityBJ('Ab4e',Iv) 
   call UnitMakeAbilityPermanent(Iv,true,'Ab4e')
else 
endif
// 高翔大招
elseif GetUnitAbilityLevel(Iv,$41623165)>0 then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped($41623166,Iv)<1 then
call UnitAddAbilityBJ($41623166,Iv)
call UnitMakeAbilityPermanent(Iv,true,$41457669)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00坚定意志！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped($41623166,Iv)==1 then
call IncUnitAbilityLevel(Iv,$41623166)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00坚定意志的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped($41623166,Iv)==2 then
call IncUnitAbilityLevel(Iv,$41623166)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00坚定意志的等级已经提升了！")
endif
// 陈到大招
elseif GetUnitAbilityLevel(Iv,'Ab1p')>0 then
    // 陈到被动
    if GetHeroLevel(Iv)>=10 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<2 then
        call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
    elseif GetHeroLevel(Iv)>=20 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<3 then
    call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
      elseif GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<4 then
    call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
      elseif GetHeroLevel(Iv)>=40 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<5 then
    call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
      elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<6 then
    call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
      elseif GetHeroLevel(Iv)>=60 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<7 then
    call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
      elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<8 then
    call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
      elseif GetHeroLevel(Iv)>=80 and GetUnitAbilityLevelSwapped('Ab1p',Iv)<9 then
    call IncUnitAbilityLevel(Iv,'Ab1p')
    call SetUnitState(GetTriggerUnit(), ConvertUnitState(32), GetUnitState(GetTriggerUnit(), ConvertUnitState(32)) +10)
    
endif
// 大招效果
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped('Ab29',Iv)<1 then
call UnitAddAbilityBJ('Ab29',Iv)
call UnitMakeAbilityPermanent(Iv,true,'Ab29')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00拳出如龙！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped('Ab29',Iv)==1 then
call IncUnitAbilityLevel(Iv,'Ab29')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00拳出如龙的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped('Ab29',Iv)==2 then
call IncUnitAbilityLevel(Iv,'Ab29')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00拳出如龙的等级已经提升了！")
endif

// 宗预大招
elseif GetUnitAbilityLevel(Iv,'Ab26')>0  and Iv == zongyu then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped('Ab28',Iv)<1 then
call UnitAddAbilityBJ('Ab28',Iv)
// call SetUnitAbilityLevel(Iv, 'Ab28',7)
call UnitMakeAbilityPermanent(Iv,true,'Ab28')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00怒拳破！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped('Ab28',Iv)==1 then
call IncUnitAbilityLevel(Iv,'Ab28')
// call SetUnitAbilityLevel(Iv, 'Ab28',7)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00怒拳破的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped('Ab28',Iv)==2 then
call IncUnitAbilityLevel(Iv,'Ab28')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00怒拳破的等级已经提升了！")
endif
// 阎宇大招
elseif Iv == yanyu then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped('Ab2f',Iv)<1 then
call UnitAddAbilityBJ('Ab2f',Iv)
call UnitMakeAbilityPermanent(Iv,true,'Ab2f')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00心中无剑！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped('Ab2f',Iv)==1 then
call IncUnitAbilityLevel(Iv,'Ab2f')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00心中无剑的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped('Ab2f',Iv)==2 then
call IncUnitAbilityLevel(Iv,'Ab2f')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00心中无剑的等级已经提升了！")
endif
// 马良大招
elseif Iv == maliang then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped('Ab2o',Iv)<1 then
call UnitAddAbilityBJ('Ab2o',Iv)
call UnitMakeAbilityPermanent(Iv,true,'Ab2o')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00扭曲虚空！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped('Ab2o',Iv)==1 then
call IncUnitAbilityLevel(Iv,'Ab2o')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00扭曲虚空的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped('Ab2o',Iv)==2 then
call IncUnitAbilityLevel(Iv,'Ab2o')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00扭曲虚空的等级已经提升了！")
endif
// 精卫大招
elseif Iv == jingwei then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped('Ab3c',Iv)<1 and GetUnitAbilityLevelSwapped('Ab3i',Iv)<1 then
call UnitAddAbilityBJ('Ab3c',Iv)
call UnitMakeAbilityPermanent(Iv,true,'Ab3c')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00神灭斩！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped('Ab3c',Iv)==1 then
call IncUnitAbilityLevel(Iv,'Ab3c')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00神灭斩的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped('Ab3c',Iv)==2 then
call IncUnitAbilityLevel(Iv,'Ab3c')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00神灭斩的等级已经提升了！")
endif
// 张角大招
elseif Iv == zhangjiao then
if GetHeroLevel(Iv)>=30 and GetUnitAbilityLevelSwapped('Ab3v',Iv)<1  then
call UnitAddAbilityBJ('Ab3v',Iv)
call UnitMakeAbilityPermanent(Iv,true,'Ab3v')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"领悟了终级技能：|Cff00ff00万雷天牢！")
elseif GetHeroLevel(Iv)>=50 and GetUnitAbilityLevelSwapped('Ab3v',Iv)==1 then
call IncUnitAbilityLevel(Iv,'Ab3v')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00万雷天牢的等级已经提升了！")
elseif GetHeroLevel(Iv)>=70 and GetUnitAbilityLevelSwapped('Ab3v',Iv)==2 then
call IncUnitAbilityLevel(Iv,'Ab3v')
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(Iv))+"|Cff00ff00万雷天牢的等级已经提升了！")
endif


endif
set Iv=null
endfunction
function q9 takes nothing returns nothing
local integer JV
set VR=CreateTrigger()
set JV=0
loop
call TriggerRegisterPlayerUnitEvent(VR,Player(JV),EVENT_PLAYER_HERO_LEVEL,null)
set JV=JV+1
exitwhen JV==8
endloop
call TriggerAddCondition(VR,Condition(function q7))
call TriggerAddAction(VR,function q8)
endfunction
function rB takes nothing returns nothing
endfunction
function rC takes nothing returns boolean
return GetSpellAbilityId()==$41303759
endfunction
function rD takes nothing returns nothing
call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN,4.,"war3mapImported\\BTNhyy.blp",100.,100.,100.,25.)
set Q3=GetTriggerUnit()
set Jd[55]=GetUnitLoc(Q3)
call CreateNUnitsAtLoc(1,$6530304C,GetOwningPlayer(GetTriggerUnit()),Jd[55],0.)
set Q4=bj_lastCreatedUnit
call EnableTrigger(Q5)
endfunction
function rE takes nothing returns nothing
set Q2=CreateTrigger()
call TriggerRegisterUnitEvent(Q2,Cp,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Q2,Condition(function rC))
call TriggerAddAction(Q2,function rD)
endfunction
function rF takes nothing returns boolean
    // 技能ID是否是天降甘霖
return GetSpellAbilityId()==$41303759
endfunction
function rG takes nothing returns nothing
call DisableTrigger(Q5)
call RemoveUnit(Q4)
call RemoveLocation(Jd[55])
endfunction
function rH takes nothing returns nothing
set Q6=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Q6,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(Q6,Condition(function rF))
call TriggerAddAction(Q6,function rG)
endfunction
function rI takes nothing returns nothing
local group KB
local unit KC
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(Q3),GetUnitY(Q3),1100.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitEnemy(KC,GetOwningPlayer(Q3))==true then
call UnitDamageTargetBJ(Q3,KC,I2R(GetHeroInt(Cp,true)*(GetUnitAbilityLevel(Cp,$41303759)+3)),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
else
endif
endloop
call DestroyGroup(KB)
set KB=null
set KC=null
endfunction
function rJ takes nothing returns nothing
set Q5=CreateTrigger()
call DisableTrigger(Q5)
call TriggerRegisterTimerEventPeriodic(Q5,.5)
call TriggerAddAction(Q5,function rI)
endfunction
function rK takes nothing returns boolean
return GetSpellAbilityId()==$4130314B
endfunction
function rL takes nothing returns nothing
call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN,4.,"war3mapImported\\BTNluboyan.blp",100.,100.,100.,25.)
set Q8=GetTriggerUnit()
set Jd[53]=GetUnitLoc(Q8)
call EnableTrigger(Q9)
endfunction
function rM takes nothing returns nothing
set Q7=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Q7,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(Q7,Condition(function rK))
call TriggerAddAction(Q7,function rL)
endfunction
function rN takes nothing returns boolean
return GetSpellAbilityId()==$4130314B
endfunction
function rO takes nothing returns nothing
call DisableTrigger(Q9)
call RemoveLocation(Jd[53])
endfunction
function rP takes nothing returns nothing
set RB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RB,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(RB,Condition(function rN))
call TriggerAddAction(RB,function rO)
endfunction
function rQ takes nothing returns nothing
local group KB
local unit KC
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(Q8),GetUnitY(Q8),1100.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitEnemy(KC,GetOwningPlayer(Q8))==true then
call UnitDamageTargetBJ(Q8,KC,I2R(GetHeroInt(Cw,true)*((GetUnitAbilityLevel(Cw,$4130314B)+2)*2)),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
else
endif
endloop
call DestroyGroup(KB)
set KB=null
set KC=null
endfunction
function rR takes nothing returns nothing
set Q9=CreateTrigger()
call DisableTrigger(Q9)
call TriggerRegisterTimerEventPeriodic(Q9,.5)
call TriggerAddAction(Q9,function rQ)
endfunction
function rS takes nothing returns boolean
return GetSpellAbilityId()==$414E656E
endfunction
function rT takes nothing returns nothing
set RD=GetTriggerUnit()
set RE=GetSpellTargetUnit()
call SetUnitPathing(RD,false)
call SetUnitInvulnerable(RD,true)
call SetUnitTimeScalePercent(RD,400.)
call PauseUnitBJ(true,RD)
call PauseUnitBJ(true,RE)
call TriggerSleepAction(.3)
set Fm=1
loop
exitwhen Fm>6
if IsUnitAliveBJ(RE)==true then
set Fp=400.
call ShowUnitHide(RD)
call StartTimerBJ(Ga,true,.01)
call TriggerSleepAction(.4)
call PauseTimer(Ga)
call SetUnitPositionLocFacingLocBJ(RD,PolarProjectionBJ(GetUnitLoc(RE),-128.,120.*I2R(Fm)),GetUnitLoc(RE))
call ShowUnitShow(RD)
call SetUnitAnimation(RD,"Attack")
if bC(DM,$6D6C7374)==true or bC(DM,$49303034)==true then
call UnitDamageTargetBJ(RD,RE,I2R(GetHeroStr(RD,true))*(I2R(GetUnitAbilityLevelSwapped($414E656E,RD))*8.),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
else
call UnitDamageTargetBJ(RD,RE,I2R(GetHeroStr(RD,true))*(I2R(GetUnitAbilityLevelSwapped($414E656E,RD))*5.),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
endif
call SetUnitAnimation(RE,"Death")
call TriggerSleepAction(.3)
if IsUnitAliveBJ(RE)==true then
call ResetUnitAnimation(RE)
else
call DoNothing()
endif
else
endif
set Fm=Fm+1
endloop
call SetUnitTimeScalePercent(RD,100.)
call PauseUnitBJ(false,RD)
call SetUnitInvulnerable(RD,false)
call SetUnitPathing(RD,true)
call PauseUnitBJ(false,RE)
call SelectUnitAddForPlayer(RD,GetOwningPlayer(RD))
endfunction
function rU takes nothing returns nothing
set RC=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RC,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(RC,Condition(function rS))
call TriggerAddAction(RC,function rT)
endfunction
function rV takes nothing returns nothing
set Fp=Fp-25.
set RG=PolarProjectionBJ(GetUnitLoc(RE),Fp,120.*I2R(Fm))
call CreateNUnitsAtLocFacingLocBJ(1,$68303037,GetOwningPlayer(RD),RG,GetUnitLoc(RE))
call RemoveLocation(RG)
call SetUnitVertexColorBJ(GetLastCreatedUnit(),100,100,100,85.)
call UnitApplyTimedLifeBJ(.15,$42487765,GetLastCreatedUnit())
endfunction
function rW takes nothing returns nothing
set RF=CreateTrigger()
call TriggerRegisterTimerExpireEvent(RF,Ga)
call TriggerAddAction(RF,function rV)
endfunction
function rX takes nothing returns boolean
return GetUnitTypeId(GetDyingUnit())==$68303037 or GetUnitTypeId(GetDyingUnit())==$65303037 or GetUnitTypeId(GetDyingUnit())==$65303035 or GetUnitTypeId(GetDyingUnit())==$65303036 or GetUnitPointValue(GetTriggerUnit())==399
endfunction
function rY takes nothing returns nothing
call RemoveUnit(GetDyingUnit())
endfunction
function rZ takes nothing returns nothing
set RH=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RH,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(RH,Condition(function rX))
call TriggerAddAction(RH,function rY)
endfunction
function ra takes nothing returns boolean
return GetSpellAbilityId()==$4130384F
endfunction
function rb takes nothing returns nothing
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DR,"马超",null,"西凉马超在此，快快上来送死！吾乃西凉锦马超，威震西羌，何人敢来应战? 无知小儿，安敢如此，某特来取汝首级！",bj_TIMETYPE_ADD,2.,false)
set RJ=GetTriggerUnit()
set RK=GetSpellTargetUnit()
set RL[1]=GetUnitLoc(RK)
call SetUnitPathing(RJ,false)
call SetUnitInvulnerable(RJ,true)
call PauseUnitBJ(true,RK)
call TriggerSleepAction(.1)
call SetUnitAnimation(DR,"Spell")
call UnitAddAbilityBJ($41737031,DR)
call TriggerSleepAction(.5)
call SetUnitTimeScalePercent(GetSpellTargetUnit(),1.)
call SetUnitTimeScalePercent(GetTriggerUnit(),300.)
call SetUnitAnimation(DR,"Spell Attack")
call StartTimerBJ(GZ,true,.01)
endfunction
function rc takes nothing returns nothing
set RI=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RI,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(RI,Condition(function ra))
call TriggerAddAction(RI,function rb)
endfunction
function rd takes nothing returns nothing
set RL[0]=GetUnitLoc(DR)
set RL[2]=PolarProjectionBJ(RL[0],20.,AngleBetweenPoints(RL[0],RL[1]))
if DistanceBetweenPoints(RL[0],RL[1])>=150. then
call SetUnitX(DR,GetLocationX(RL[2]))
call SetUnitY(DR,GetLocationY(RL[2]))
call RemoveLocation(RL[0])
call RemoveLocation(RL[2])
else
call PauseTimer(GZ)
call RemoveLocation(RL[0])
call RemoveLocation(RL[2])
call SetUnitTimeScalePercent(DR,300.)
call SetUnitAnimation(DR,"Spell Attack")
call TriggerExecute(RN)
endif
endfunction
function re takes nothing returns nothing
set RM=CreateTrigger()
call TriggerRegisterTimerExpireEvent(RM,GZ)
call TriggerAddAction(RM,function rd)
endfunction
function rf takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),GetOwningPlayer(RJ))==false
endfunction
function rg takes nothing returns nothing
    // 长恨枪技能伤害计算
call UnitDamageTargetBJ(DR,GetEnumUnit(),I2R(GetHeroStr(RJ,true))*I2R(GetUnitAbilityLevel(RJ,$4130384F))*32.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
endfunction
function rh takes nothing returns nothing
local group KB
local unit KC
set GV=1
loop
exitwhen GV>10
call TriggerSleepAction(.1)
if GetRandomInt(1,3)==1 then
call SetUnitAnimation(DR,"Attack 1")
else
endif
if GetRandomInt(2,3)==2 then
call SetUnitAnimation(DR,"Spell Attack")
else
call SetUnitAnimation(DR,"Attack Slam 2")
endif
call UnitDamageTargetBJ(DR,RK,I2R((GetUnitAbilityLevel(RJ,$4130384F)+4)*GetHeroStr(RJ,true)),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
call SetUnitAnimation(RK,"death")
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl",GetUnitX(RK),GetUnitY(RK)))
set GV=GV+1
endloop
call TriggerSleepAction(.5)
call ResetUnitAnimation(RK)
call SetUnitAnimation(DR,"Spell Slam")
call SetUnitTimeScalePercent(DR,100.)
call SetUnitTimeScalePercent(RK,30.)
set RL[0]=GetUnitLoc(DR)
call CreateNUnitsAtLoc(1,$65303036,GetOwningPlayer(DR),RL[1],AngleBetweenPoints(RL[0],RL[1]))
call UnitApplyTimedLifeBJ(.5,$42487765,GetLastCreatedUnit())
call TriggerSleepAction(.7)
call AddSpecialEffectLocBJ(RL[1],"Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
if bC(DR,$6D6C7374)==true or bC(DR,$49303055)==true then
set bj_wantDestroyGroup=true
call ForGroupBJ(an(400.,RL[0],Condition(function rf)),function rg)
else
call UnitDamageTargetBJ(DR,RK,I2R(GetHeroStr(RJ,true))*I2R(GetUnitAbilityLevel(RJ,$4130384F))*16.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ENHANCED)
endif
call RemoveLocation(RL[0])
call RemoveLocation(RL[1])
call TriggerSleepAction(.1)
call SetUnitTimeScalePercent(RK,100.)
call ResetUnitAnimation(RK)
call PauseUnitBJ(false,RK)
call SetUnitPathing(DR,true)
call SetUnitInvulnerable(RJ,false)
call ResetUnitAnimation(DR)
call UnitRemoveAbilityBJ($41737031,DR)
set KB=null
set KC=null
endfunction
function ri takes nothing returns nothing
set RN=CreateTrigger()
call TriggerAddAction(RN,function rh)
endfunction
// 击飞调用函数
function rj takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local real It=GetUnitX(Iv)+45*Cos(LoadReal(Ia,Ix,$616E6730)*bj_DEGTORAD)
local real Iu=GetUnitY(Iv)+45*Sin(LoadReal(Ia,Ix,$616E6730)*bj_DEGTORAD)
call SaveInteger(Ia,Ix,$6C6F6F70,LoadInteger(Ia,Ix,$6C6F6F70)-1)
if LoadInteger(Ia,Ix,$6C6F6F70)<=0 or GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or IsTerrainPathable(It,Iu,PATHING_TYPE_AMPHIBIOUSPATHING)==true then
call bw(Iv,LoadReal(Ia,Ix,$64656D30),bQ(Iv,LoadReal(Ia,Ix,$78303030),LoadReal(Ia,Ix,$79303030)),bP(Iv,LoadReal(Ia,Ix,$78303030),LoadReal(Ia,Ix,$79303030)),128.,20,20.,1.5)
call EXSetUnitMoveType(Iv,2)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(Iv),GetUnitY(Iv)))
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
endif
set CS=null
set Iv=null
endfunction
// 击飞函数
function rk takes unit Iv,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
call SaveInteger(Ia,Ix,$6C6F6F70,7)
call SaveReal(Ia,Ix,$616E6730,GetUnitFacing(Iv))
call SaveReal(Ia,Ix,$78303030,GetUnitX(Iv))
call SaveReal(Ia,Ix,$79303030,GetUnitY(Iv))
call SaveReal(Ia,Ix,$64656D30,bk(Iv,1,Pt))
call EXSetUnitMoveType(Iv,16)
call TimerStart(CS,.03,true,function rj)
set CS=null
endfunction
// 高翔Q击飞
// 击飞调用函数
function rangeStrikeCall takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local unit Iv=LoadUnitHandle(Ia,Ix,$6865726F)
local real It=GetUnitX(Iv)+45*Cos(LoadReal(Ia,Ix,$616E6730)*bj_DEGTORAD)
local real Iu=GetUnitY(Iv)+45*Sin(LoadReal(Ia,Ix,$616E6730)*bj_DEGTORAD)
call SaveInteger(Ia,Ix,$6C6F6F70,LoadInteger(Ia,Ix,$6C6F6F70)-1)
if LoadInteger(Ia,Ix,$6C6F6F70)<=0 or GetUnitState(Iv,UNIT_STATE_LIFE)<=.405 or IsTerrainPathable(It,Iu,PATHING_TYPE_AMPHIBIOUSPATHING)==true then
call computeStrike(Iv, LoadReal(Ia, Ix, $64656D30), bQ(Iv, LoadReal(Ia, Ix, $78303030), LoadReal(Ia, Ix, $79303030)), bP(Iv, LoadReal(Ia, Ix, $78303030), LoadReal(Ia, Ix, $79303030)), 128., 20, 20., 2.5,500)
call EXSetUnitMoveType(Iv,2)
call DestroyTimer(CS)
call FlushChildHashtable(Ia,Ix)
else
call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",GetUnitX(Iv),GetUnitY(Iv)))
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
endif
set CS=null
set Iv=null
endfunction
// 击飞函数
function rangeStrike takes unit Iv,integer Pt returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,$6865726F,Iv)
// 位移距离
call SaveInteger(Ia,Ix,$6C6F6F70,17)
call SaveReal(Ia,Ix,$616E6730,GetUnitFacing(Iv))
call SaveReal(Ia,Ix,$78303030,GetUnitX(Iv))
call SaveReal(Ia,Ix,$79303030,GetUnitY(Iv))
call SaveReal(Ia,Ix,$64656D30,bk(Iv,1,Pt))
call EXSetUnitMoveType(Iv,2)
call TimerStart(CS,.03,true,function rangeStrikeCall)
set CS=null
endfunction

function rl takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local unit Ij=MX[FN]
local unit CE=P1[FN]
local real Im=bL(GetUnitX(CE),GetUnitY(CE),GetUnitX(Ij),GetUnitY(Ij))
local real In
set Hi[FN]=Hi[FN]+1
call SetUnitPosition(CE,GetUnitX(CE)+50.*CosBJ(Im),GetUnitY(CE)+50.*SinBJ(Im))
set In=bM(GetUnitX(CE),GetUnitY(CE),GetUnitX(Ij),GetUnitY(Ij))
if Hi[FN]>=20 or In<=100 then
set MX[FN]=null
set P1[FN]=null
call bh(FN)
endif
set CE=null
set Ij=null
endfunction
function rm takes unit Ij,unit CE,integer Pt returns nothing
local integer FN
local real P0=0.
if bj(GetSpellTargetUnit()) then
set P0=bk(Ij,1,Pt)
call UnitDamageTarget(Ij,CE,P0,false,false,I3[5],I4[2],WEAPON_TYPE_WHOKNOWS)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 then
set FN=bf()
set Hi[FN]=0
set P1[FN]=CE
set MX[FN]=Ij
call TimerStart(Gt[FN],.02,true,function rl)
endif
endif
endfunction
function rn takes nothing returns nothing
endfunction
function ro takes nothing returns boolean
return GetSpellAbilityId()==$414E696E
endfunction
function rp takes nothing returns nothing
local location array RR
local real RS
local real RV
local real RW
local integer RT
local integer RU
local unit RP=GetTriggerUnit()
local player RQ=GetOwningPlayer(RP)
local real Io=GetHeroStr(GetTriggerUnit(),true)*20
set RR[0]=GetUnitLoc(RP)
set RR[17]=GetSpellTargetLoc()
set RS=AngleBetweenPoints(RR[0],RR[17])-95.
call RemoveLocation(RR[0])
set RR[0]=RR[17]
set RR[1]=PolarProjectionBJ(RR[0],241.96,-47.89+RS)
set RR[2]=PolarProjectionBJ(RR[0],258.87,-66.01+RS)
set RR[3]=PolarProjectionBJ(RR[0],263.73,-82.54+RS)
set RR[4]=PolarProjectionBJ(RR[0],238.72,-111.24+RS)
set RR[5]=PolarProjectionBJ(RR[0],219.18,-139.53+RS)
set RR[6]=PolarProjectionBJ(RR[0],220.88,-170.75+RS)
set RR[7]=PolarProjectionBJ(RR[0],237.01,159.5+RS)
set RR[8]=PolarProjectionBJ(RR[0],432.59,159.71+RS)
set RR[9]=PolarProjectionBJ(RR[0],257.35,133.15+RS)
set RR[10]=PolarProjectionBJ(RR[0],639.01,117.27+RS)
set RR[11]=PolarProjectionBJ(RR[0],238.57,104.94+RS)
set RR[12]=PolarProjectionBJ(RR[0],775.44,102.34+RS)
set RR[13]=PolarProjectionBJ(RR[0],208.18,67.62+RS)
set RR[14]=PolarProjectionBJ(RR[0],687.95,87.44+RS)
set RR[15]=PolarProjectionBJ(RR[0],208.61,-29.12+RS)
set RR[16]=PolarProjectionBJ(RR[0],521.16,65.24+RS)
call UnitAddAbilityBJ($416D7266,RP)
call UnitRemoveAbilityBJ($416D7266,RP)
call SetUnitInvulnerable(RP,true)
call SetUnitPathing(RP,false)
call SetCameraFieldForPlayer(RQ,CAMERA_FIELD_TARGET_DISTANCE,4000.,0.)
call SetUnitFlyHeight(RP,1000.,9000.)
call ay(.5)
call SetUnitPositionLoc(RP,RR[17])
call SetUnitFlyHeight(RP,0.,9000.)
set RT=1
set RU=6
loop
exitwhen RT>RU
set RR[18]=PolarProjectionBJ(RR[0],110.,60.*I2R(RT))
call CreateNUnitsAtLoc(1,$6E686566,RQ,RR[18],0)
set RT=RT+1
call RemoveLocation(RR[18])
endloop
set RT=0
set RU=16
loop
exitwhen RT>RU
call CreateNUnitsAtLoc(1,$6E686566,RQ,RR[RT],0)
set RT=RT+1
endloop
set RT=1
set RU=3
loop
exitwhen RT>RU
set RV=DistanceBetweenPoints(RR[9],RR[10])*(I2R(RT)/4.)
set RW=AngleBetweenPoints(RR[9],RR[10])
set RR[18]=PolarProjectionBJ(RR[9],RV,RW)
call CreateNUnitsAtLoc(1,$6E686566,RQ,RR[18],0)
call RemoveLocation(RR[18])
set RV=DistanceBetweenPoints(RR[13],RR[14])*(I2R(RT)/4.)
set RW=AngleBetweenPoints(RR[13],RR[14])
set RR[18]=PolarProjectionBJ(RR[13],RV,RW)
call CreateNUnitsAtLoc(1,$6E686566,RQ,RR[18],0)
call RemoveLocation(RR[18])
set RT=RT+1
endloop
set RT=1
set RU=4
loop
exitwhen RT>RU
set RV=DistanceBetweenPoints(RR[11],RR[12])*(I2R(RT)/5.)
set RW=AngleBetweenPoints(RR[11],RR[12])
set RR[18]=PolarProjectionBJ(RR[11],RV,RW)
call CreateNUnitsAtLoc(1,$6E686566,RQ,RR[18],0)
call RemoveLocation(RR[18])
set RT=RT+1
endloop
set RT=1
set RU=5
loop
exitwhen RT>RU
set RV=DistanceBetweenPoints(RR[15],RR[16])*(I2R(RT)/6.)
set RW=AngleBetweenPoints(RR[15],RR[16])
set RR[18]=PolarProjectionBJ(RR[15],RV,RW)
call CreateNUnitsAtLoc(1,$6E686566,RQ,RR[18],0)
call RemoveLocation(RR[18])
set RT=RT+1
endloop
set RV=DistanceBetweenPoints(RR[7],RR[8])/2.
set RW=AngleBetweenPoints(RR[7],RR[8])
set RR[18]=PolarProjectionBJ(RR[7],RV,RW)
call CreateNUnitsAtLoc(1,$6E686566,RQ,RR[18],0)
if bC(RX,$6D6C7374)==true or bC(RX,$73687273)==true then
set Io=Io*1.5
endif
call bs(RP,GetLocationX(RR[17]),GetLocationY(RR[17]),770.,Io,5,2)
call RemoveLocation(RR[0])
call RemoveLocation(RR[18])
call SetCameraFieldForPlayer(GetOwningPlayer(RP),CAMERA_FIELD_TARGET_DISTANCE,2500.,0.)
call ShowUnitHide(RP)
call ShowUnitShow(RP)
call ShowUnit(RP,false)
call ShowUnit(RP,true)
call SelectUnitAddForPlayer(RP,GetOwningPlayer(RP))
call SetUnitPathing(RP,true)
call SetUnitInvulnerable(RP,false)
set RT=0
set RU=17
loop
exitwhen RT>RU
call RemoveLocation(RR[RT])
set RR[RT]=null
set RT=RT+1
endloop
set RP=null
set RT=0
set RU=0
set RS=0.
set RV=0.
set RW=0.
set RQ=null
endfunction
function rq takes nothing returns nothing
set RO=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RO,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(RO,Condition(function ro))
call TriggerAddAction(RO,function rp)
endfunction
function rt takes nothing returns nothing
endfunction
function ru takes nothing returns nothing
endfunction
function rv takes nothing returns boolean
return GetIssuedOrderId()==852590 and GetUnitAbilityLevel(GetTriggerUnit(),$42575133)>0
endfunction
function rw takes nothing returns nothing
local unit Ih=GetTriggerUnit()
call UnitRemoveAbility(GetTriggerUnit(),$42575133)
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(GetTriggerUnit())),$65303939,$41333030,1,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),bj_UNIT_FACING,1),852127)
call bs(Ih,GetUnitX(Ih),GetUnitY(Ih),330,bk(Ih,0,GetUnitAbilityLevel(Ih,$41575133)),3,0)
set Ih=null
endfunction
function rx takes nothing returns nothing
set QD=CreateTrigger()
call TriggerAddCondition(QD,Condition(function rv))
call TriggerAddAction(QD,function rw)
endfunction
function ry takes nothing returns nothing
if GetSpellAbilityId()==$41415351 then
if LoadInteger(bj_lastCreatedHashtable,$41534545,GetHandleId(GetTriggerUnit()))==1 then
call SaveInteger(bj_lastCreatedHashtable,$41535151,GetHandleId(GetTriggerUnit()),1)
else
call SaveInteger(bj_lastCreatedHashtable,$41535151,GetHandleId(GetTriggerUnit()),0)
if GetOwningPlayer(GetTriggerUnit())==GetLocalPlayer() then
call DzSyncData("Mouse_x",R2S(DzGetMouseTerrainX()))
call DzSyncData("Mouse_y",R2S(DzGetMouseTerrainY()))
call DzSyncData("ASQ_pid",I2S(GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))))
else
endif
endif
else
endif
endfunction
function rz takes nothing returns nothing
set RY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(RY,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(RY,function ry)
endfunction
function r0 takes nothing returns nothing
set IQ=S2R(DzGetTriggerSyncData())
endfunction
function r1 takes nothing returns nothing
set RZ=CreateTrigger()
call DzTriggerRegisterSyncData(RZ,"Mouse_x",false)
call TriggerAddAction(RZ,function r0)
endfunction
function r2 takes nothing returns nothing
set IR=S2R(DzGetTriggerSyncData())
endfunction
function r3 takes nothing returns nothing
set Ra=CreateTrigger()
call DzTriggerRegisterSyncData(Ra,"Mouse_y",false)
call TriggerAddAction(Ra,function r2)
endfunction
function r4 takes nothing returns nothing
set Rb=CreateTrigger()
call DzTriggerRegisterSyncData(Rb,"ASQ_pid",false)
call TriggerAddAction(Rb,function cL)
endfunction
function r5 takes nothing returns nothing
endfunction
function r6 takes nothing returns nothing
endfunction
function r7 takes nothing returns nothing
endfunction
function r8 takes nothing returns nothing
endfunction
function r9 takes nothing returns nothing
endfunction
function sB takes nothing returns nothing
endfunction
function sC takes nothing returns nothing
endfunction
function sD takes nothing returns nothing
endfunction
function sG takes unit Iv,unit UW,integer Pt returns nothing
local group I2=CreateGroup()
local unit CE
local unit UV
call GroupEnumUnitsInRange(I2,GetUnitX(Iv),GetUnitY(Iv),770.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if CE!=UW and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Iv))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and IsUnitVisible(CE,GetOwningPlayer(Iv))==true and IsUnitType(CE,UNIT_TYPE_ANCIENT)==false then
set UV=CreateUnit(GetOwningPlayer(Iv),$65303939,GetUnitX(Iv),GetUnitY(Iv),0)
call UnitAddAbility(UV,$41304649)
call SetUnitAbilityLevel(UV,$41304649,Pt)
call IssueTargetOrderById(UV,852106,CE)
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
set UV=null
endfunction
function sH takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer Ix=GetHandleId(CS)
local integer FZ=0
local unit Iv=LoadUnitHandle(Ia,Ix,$68303030)
call SaveInteger(Ia,Ix,1,LoadInteger(Ia,Ix,1)-1)
call bs(Iv,LoadReal(Ia,Ix,$78303030),LoadReal(Ia,Ix,$79303030),550.,LoadReal(Ia,Ix,$64616D30),3,2)
if LoadInteger(Ia,Ix,1)<=0 then
loop
exitwhen FZ>=60
call RemoveDestructable(LoadDestructableHandle(Ia,Ix,FZ))
set FZ=FZ+1
endloop
call RemoveUnit(LoadUnitHandle(Ia,Ix,$75303030))
call FlushChildHashtable(Ia,Ix)
call DestroyTimer(CS)
endif
set CS=null
set Iv=null
endfunction
function sI takes unit Iv,integer Pt,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer Ix=GetHandleId(CS)
local integer FZ=0
local real T7=0.
local real T8=0.
loop
exitwhen FZ>=60
set T7=It*1.+500*1.*Cos(I2R(FZ)*6.*1.*bj_DEGTORAD)
set T8=Iu*1.+500*1.*Sin(I2R(FZ)*6.*1.*bj_DEGTORAD)
call SaveDestructableHandle(Ia,Ix,FZ,CreateDestructableZ($42303032,T7,T8,0.,0.,1,0))
set FZ=FZ+1
endloop
call SaveUnitHandle(Ia,Ix,$68303030,Iv)
call SaveUnitHandle(Ia,Ix,$75303030,CreateUnit(GetOwningPlayer(Iv),$65303141,It,Iu,0))
call SaveReal(Ia,Ix,$64616D30,bk(Iv,3,Pt)*.25)
call SaveReal(Ia,Ix,$78303030,It)
call SaveReal(Ia,Ix,$79303030,Iu)
call SaveInteger(Ia,Ix,1,10)
call TimerStart(CS,1.,true,function sH)
set CS=null
endfunction
function sJ takes nothing returns nothing
endfunction
function sK takes nothing returns nothing
endfunction
function sL takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer JV=Hi[FN]
local unit Ij=MX[FN]
local unit UV=P1[FN]
local unit CE=null
local group I2=CreateGroup()
set JV=JV+1
set Hi[FN]=JV
call GroupEnumUnitsInRange(I2,GetUnitX(UV),GetUnitY(UV),550,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>0 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true then
call UnitDamageTarget(Ij,CE,HO[FN],true,false,I,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
set CE=null
endloop
if JV>=15 then
call ShowUnit(Ij,true)
if GetLocalPlayer()==GetOwningPlayer(Ij) then
call ClearSelection()
call SelectUnit(Ij,true)
endif
call RemoveUnit(P1[FN])
set MX[FN]=null
set P1[FN]=null
call bh(FN)
endif
call DestroyGroup(I2)
set I2=null
set CE=null
set UV=null
set Ij=null
endfunction
function sM takes unit Iv,real It,real Iu returns nothing
local integer FN=0
set FN=bf()
set P1[FN]=CreateUnit(GetOwningPlayer(Iv),$65303137,It,Iu,0)
set Hi[FN]=0
set MX[FN]=GetTriggerUnit()
call ShowUnit(Iv,false)
set HO[FN]=bk(Iv,2,GetUnitAbilityLevel(Iv,$41564A45))*.1
call TimerStart(Gt[FN],.1,true,function sL)
endfunction
function sN takes nothing returns nothing
local integer FN=bg(GetExpiredTimer())
local integer JV=Hi[FN]
local real Im=HL[FN]
local unit Ij=MX[FN]
local unit UV=P1[FN]
local unit CE=null
local group I2=CreateGroup()
set JV=JV+1
set Hi[FN]=JV
call SetUnitX(UV,GetUnitX(UV)+50.*CosBJ(Im))
call SetUnitY(UV,GetUnitY(UV)+50.*SinBJ(Im))
call GroupEnumUnitsInRange(I2,GetUnitX(UV),GetUnitY(UV),220,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>0 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true then
set Im=bL(GetUnitX(UV),GetUnitY(UV),GetUnitX(CE),GetUnitY(CE))
call UnitDamageTarget(Ij,CE,HO[FN],false,false,I,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
set CE=null
endloop
if JV>=25 then
call RemoveUnit(P1[FN])
set MX[FN]=null
set P1[FN]=null
call bh(FN)
endif
call DestroyGroup(I2)
set I2=null
set CE=null
set UV=null
set Ij=null
endfunction
function sO takes unit Iv,real It,real Iu returns nothing
local integer FN=0
set FN=bf()
set HL[FN]=bL(GetUnitX(Iv),GetUnitY(Iv),It,Iu)
set P1[FN]=CreateUnit(GetOwningPlayer(Iv),$65303136,GetUnitX(Iv),GetUnitY(Iv),HL[FN])
set Hi[FN]=0
set MX[FN]=GetTriggerUnit()
set HO[FN]=bk(Iv,2,GetUnitAbilityLevel(Iv,$41564A57))*.5
call TimerStart(Gt[FN],.02,true,function sN)
endfunction
function sP takes nothing returns nothing
endfunction
function sQ takes nothing returns nothing
endfunction
function sR takes nothing returns nothing
endfunction
function sS takes nothing returns nothing
endfunction
function sT takes nothing returns nothing
endfunction
function sU takes nothing returns nothing
endfunction
function sV takes nothing returns nothing
local timer CS=GetExpiredTimer()
local integer FN=GetHandleId(CS)
local real UQ=GetUnitX(LoadUnitHandle(Ia,FN,1))
local real UR=GetUnitY(LoadUnitHandle(Ia,FN,1))
local real Im=LoadReal(Ia,FN,1)
local real It=UQ+LoadReal(Ia,FN,2)*Cos(bj_DEGTORAD*Im)
local real Iu=UR+LoadReal(Ia,FN,2)*Sin(bj_DEGTORAD*Im)
call SaveInteger(Ia,FN,2,LoadInteger(Ia,FN,2)-1)
if GetWidgetLife(LoadUnitHandle(Ia,FN,1))>.405 and LoadInteger(Ia,FN,2)>0 then
call SetUnitPosition(LoadUnitHandle(Ia,FN,1),It,Iu)
else
if GetWidgetLife(LoadUnitHandle(Ia,FN,1))>.405 then
endif
call PauseTimer(CS)
call FlushChildHashtable(Ia,FN)
call DestroyTimer(CS)
endif
set CS=null
endfunction
function sW takes unit Ij,integer Pt,real It,real Iu returns nothing
local timer CS=CreateTimer()
local integer FN=GetHandleId(CS)
call SaveUnitHandle(Ia,FN,1,Ij)
if LoadInteger(Ia,GetHandleId(Ij),$41594D31)<1 then
call SaveInteger(Ia,GetHandleId(Ij),$41594D31,1)
call SaveEffectHandle(Ia,GetHandleId(Ij),$30656666,AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl",Ij,"right"))
endif
call SaveInteger(Ia,FN,1,Pt)
call SaveInteger(Ia,FN,2,5)
call SaveReal(Ia,FN,1,bQ(Ij,It,Iu))
call SaveReal(Ia,FN,2,bP(Ij,It,Iu)/5)
call TimerStart(CS,.01,true,function sV)
set CS=null
endfunction
function sX takes nothing returns nothing
endfunction
function sY takes nothing returns boolean
return GetSpellAbilityId()==$41594D32
endfunction
function sZ takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call PauseTimer(Hy)
set SE[0]=null
set SE[1]=null
endfunction
function sa takes nothing returns nothing
local timer MG
local real JT=bk(GetTriggerUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
set SE[0]=GetTriggerUnit()
set SE[1]=GetSpellTargetUnit()
set GB[13]=JT/2
if bC(GetTriggerUnit(),$72616D33)==true or GetUnitAbilityLevel(GetTriggerUnit(),$41304245)>0 then
set JT=JT*1.5
else
endif
call UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),JT,false,false,ATTACK_TYPE_PIERCE,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
if GetUnitState(SE[1],UNIT_STATE_LIFE)<=.2 then
set MG=null
return
else
endif
call bb(GetSpellTargetUnit(),3.)
set PV[10]=GetUnitLoc(SE[0])
set PV[11]=GetUnitLoc(SE[1])
set JJ=CreateUnit(GetOwningPlayer(SE[0]),$6530304D,GetUnitX(SE[1]),GetUnitY(SE[1]),0)
call SetUnitAbilityLevel(JJ,$41436666,GetUnitAbilityLevel(SE[0],$41594D32))
call IssueTargetOrderById(JJ,852149,SE[1])
set GB[10]=AngleBetweenPoints(PV[10],PV[11])
set PV[12]=PolarProjectionBJ(PV[11],20.,GB[10])
set GB[11]=DistanceBetweenPoints(PV[11],PV[12])
call RemoveLocation(PV[10])
call RemoveLocation(PV[11])
call RemoveLocation(PV[12])
call StartTimerBJ(Hy,true,.01)
set MG=CreateTimer()
call TimerStart(MG,.15,false,function sZ)
set MG=null
endfunction
function sb takes nothing returns nothing
set SD=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(SD,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(SD,Condition(function sY))
call TriggerAddAction(SD,function sa)
endfunction
function sc takes nothing returns nothing
set PV[11]=GetUnitLoc(SE[1])
set PV[12]=PolarProjectionBJ(PV[11],30.,GB[10])
call SetUnitPositionLoc(SE[1],PV[12])
set PV[13]=GetUnitLoc(SE[1])
call AddSpecialEffectLocBJ(PV[12],"Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
if IsTerrainPathableBJ(PV[12],PATHING_TYPE_WALKABILITY)==true or DistanceBetweenPoints(PV[12],PV[13])>15. then
call SetUnitPositionLoc(SE[1],PV[11])
call PauseTimer(Hy)
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(SE[0])),$65303939,$41333030,1,GetUnitX(SE[1]),GetUnitY(SE[1]),bj_UNIT_FACING,1),852127)
call bs(SE[0],GetUnitX(SE[1]),GetUnitY(SE[1]),440,GB[13],2,2)
else
endif
call RemoveLocation(PV[10])
call RemoveLocation(PV[11])
call RemoveLocation(PV[12])
endfunction
function sd takes nothing returns nothing
set SF=CreateTrigger()
call TriggerRegisterTimerExpireEvent(SF,Hy)
call TriggerAddAction(SF,function sc)
endfunction
function se takes nothing returns nothing
endfunction
function sf takes nothing returns nothing
endfunction
function sg takes nothing returns nothing
endfunction
function sh takes nothing returns boolean
return $41575932==GetLearnedSkill()
endfunction
function si takes nothing returns nothing
call SetUnitState(GetTriggerUnit(),ConvertUnitState(32),GetUnitState(GetTriggerUnit(),ConvertUnitState(32))+10.)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",0,0))
endfunction
function sj takes nothing returns nothing
set SG=CreateTrigger()
call TriggerRegisterUnitEvent(SG,DB,EVENT_UNIT_HERO_SKILL)
call TriggerRegisterUnitEvent(SG,Dr,EVENT_UNIT_HERO_SKILL)
call TriggerAddCondition(SG,Condition(function sh))
call TriggerAddAction(SG,function si)
endfunction
function sk takes nothing returns nothing
endfunction
function sl takes nothing returns boolean
return GetSpellAbilityId()==$41574432
endfunction
function sm takes nothing returns nothing
local integer KW
local unit Iv=GetTriggerUnit()
local real Im=bQ(Iv,GetSpellTargetX(),GetSpellTargetY())
local unit CE
set KW=1
loop
exitwhen KW>8
set CE=XB(GetPlayerId(GetOwningPlayer(Iv)),$65303155,0,0,GetUnitX(Iv),GetUnitY(Iv),Im-60.+15*I2R(KW),1.26)
call XL(CE,GetUnitFacing(CE),1500.,1.25,.02,128,bk(Iv,2,GetUnitAbilityLevel(Iv,GetSpellAbilityId())),Iv,0,true,true,true,"","")
set KW=KW+1
endloop
set Iv=null
set CE=null
endfunction
function sn takes nothing returns nothing
set LB=CreateTrigger()
call TriggerAddCondition(LB,Condition(function sl))
call TriggerAddAction(LB,function sm)
endfunction
function so takes nothing returns nothing
endfunction
function sp takes nothing returns nothing
endfunction
function sq takes nothing returns boolean
return GetIssuedOrderId()==852100
endfunction
function sr takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveBuffsEx(GetTriggerUnit(),false,true,false,false,false,false,true)
call IssueImmediateOrderById(GetTriggerUnit(),852100)
call EnableTrigger(GetTriggeringTrigger())
endfunction
function ss takes nothing returns nothing
set K9=CreateTrigger()
call TriggerAddCondition(K9,Condition(function sq))
call TriggerAddAction(K9,function sr)
endfunction
function st takes nothing returns nothing
endfunction
function su takes nothing returns boolean
return GetSpellAbilityId()==$41304138
endfunction
function sv takes nothing returns nothing
local real JT=bk(GetTriggerUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))
local real It=GetSpellTargetX()
local real Iu=GetSpellTargetY()
local unit Iv=GetTriggerUnit()
if bC(Iv,$6F6C6932)==true or bC(Iv,$6D6C7374)==true then
set JT=JT*1.5
else
endif
if GetSpellTargetUnit()!=null then
set It=GetUnitX(GetSpellTargetUnit())
set Iu=GetUnitY(GetSpellTargetUnit())
if IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl",GetSpellTargetUnit(),"overhead"))
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),0,$41304144,3,It,Iu,0,1),852095,GetSpellTargetUnit())
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",GetSpellTargetUnit(),"overhead"))
call SetUnitLifeBJ(GetSpellTargetUnit(),GetUnitState(GetSpellTargetUnit(),UNIT_STATE_LIFE)+I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304138)*(GetHeroAgi(GetTriggerUnit(),true)*2)))
call SetUnitLifeBJ(GetTriggerUnit(),GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+I2R(GetUnitAbilityLevel(GetTriggerUnit(),$41304138)*1000))
endif
else
endif
if GetTerrainType(It,Iu)!=$634F6331 and IsTerrainPathable(It,Iu,PATHING_TYPE_WALKABILITY)==false then
call SetUnitX(Iv,It)
call SetUnitY(Iv,Iu)
call bs(Iv,It,Iu,330,JT,4,0)
else
endif
set Iv=null
endfunction
function sw takes nothing returns nothing
set T3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(T3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(T3,Condition(function su))
call TriggerAddAction(T3,function sv)
endfunction
function sx takes nothing returns nothing
endfunction
function sy takes nothing returns nothing
local integer FZ
local real JT=0.
if GetSpellAbilityId()==$4130414D then
set JT=bk(GetTriggerUnit(),2,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))*.5
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GF[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"温柔地对"+GetUnitName(GetSpellTargetUnit())+"说：“弟弟乖，跟哥哥走，哥哥给你买糖吃。”")
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cffffff00卖出"+(GetUnitName(GetSpellTargetUnit())+("  你获得了："+(I2S(300*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))+("金钱以及 "+(I2S(100*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))+"点经验。"))))))
call AdjustPlayerStateBJ(300*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call AddHeroXP(GetTriggerUnit(),100*GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()),false)
call bs(GetTriggerUnit(),GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),330,JT,2,0)
else
endif
if GetSpellAbilityId()==$4130414E and GetUnitAbilityLevel(GetTriggerUnit(),$41304150)>0 then
set FZ=GetUnitAbilityLevel(GetTriggerUnit(),$41304150)
call UnitRemoveAbility(GetTriggerUnit(),$41304150)
call UnitAddAbility(GetTriggerUnit(),$41304150)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304150)
call SetUnitAbilityLevel(GetTriggerUnit(),$41304150,FZ)
else
endif
endfunction
function sz takes nothing returns nothing
set SH=CreateTrigger()
call TriggerRegisterUnitEvent(SH,DJ,EVENT_UNIT_SPELL_EFFECT)
call TriggerAddAction(SH,function sy)
endfunction
function s0 takes nothing returns nothing
endfunction
function s1 takes nothing returns boolean
return $41445334==GetLearnedSkill()
endfunction
function s2 takes nothing returns nothing
call SetUnitState(GetTriggerUnit(),ConvertUnitState(32),GetUnitState(GetTriggerUnit(),ConvertUnitState(32))+5.)
endfunction
function s3 takes nothing returns nothing
set SI=CreateTrigger()
call TriggerRegisterUnitEvent(SI,DH,EVENT_UNIT_HERO_SKILL)
call TriggerAddCondition(SI,Condition(function s1))
call TriggerAddAction(SI,function s2)
endfunction
function s4 takes nothing returns nothing
endfunction
function s5 takes nothing returns nothing
endfunction
function s6 takes nothing returns nothing
call SaveInteger(FT,GetHandleId(GetExpiredTimer()),$9A2F6BAB,LoadInteger(FT,GetHandleId(GetExpiredTimer()),$9A2F6BAB)-1)
call SetUnitAnimation(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),"Spell")
if Z9(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D))>=150. then
call SetUnitPosition(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),GetUnitX(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D)),GetUnitY(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D)))
else
endif
if LoadInteger(FT,GetHandleId(GetExpiredTimer()),$9A2F6BAB)<=0 or GetUnitState(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D),UNIT_STATE_LIFE)<.405 then
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
if GetUnitState(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D),UNIT_STATE_LIFE)>.405 and Z9(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D))<=200. then
call UnitDamageTarget(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D),GetUnitState(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),UNIT_STATE_MAX_LIFE)*.3,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D)),GetUnitY(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D))))
call bs(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),GetUnitX(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D)),GetUnitY(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D)),330,LoadReal(FT,GetHandleId(GetExpiredTimer()),$7B0498D8),5,0)
else
endif
call IssueTargetOrderById(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),851983,LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D))
else
call UnitDamageTarget(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$C303079D),I2R(GetUnitAbilityLevel(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),$41304437)*GetHeroAgi(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),true))*1.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\0347.mdx",LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$9F0C6E00),"chest"))
endif
endfunction
function s7 takes nothing returns nothing
local timer MG
local group KB
local unit KC
local integer QY=LoadInteger(FT,GetHandleId(GetTriggeringTrigger()),$CFDE6C76)
set QY=QY+3
call SaveInteger(FT,GetHandleId(GetTriggeringTrigger()),$CFDE6C76,QY)
call SaveInteger(FT,GetHandleId(GetTriggeringTrigger()),$ECE825E7,QY)
if GetSpellAbilityId()==$4130464A then
call SaveReal(FT,GetHandleId(GetTriggeringTrigger())*QY,$A26FA440,GetUnitX(GetTriggerUnit())*1.+120*1.*Cos(GetUnitFacing(GetTriggerUnit())*1.*bj_DEGTORAD))
call SaveReal(FT,GetHandleId(GetTriggeringTrigger())*QY,$EE6E0494,GetUnitY(GetTriggerUnit())*1.+120*1.*Sin(GetUnitFacing(GetTriggerUnit())*1.*bj_DEGTORAD))
call SaveUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010,GetTriggerUnit())
call IssueImmediateOrderById(XB(GetPlayerId(GetOwningPlayer(GetTriggerUnit())),$65303131,$41303430,1,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),bj_UNIT_FACING,1),852127)
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010)),GetUnitY(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010)),550.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitAliveBJ(KC)==true and IsUnitEnemy(KC,GetOwningPlayer(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010)))==true and IsUnitType(KC,UNIT_TYPE_STRUCTURE)==false then
call SetUnitPosition(KC,LoadReal(FT,GetHandleId(GetTriggeringTrigger())*QY,$A26FA440),LoadReal(FT,GetHandleId(GetTriggeringTrigger())*QY,$EE6E0494))
if GetUnitAbilityLevel(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010),$4130424F)>0 then
call UnitDamageTarget(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010),KC,I2R(GetUnitAbilityLevel(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010),$4130464A)*GetHeroAgi(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010),true))*3.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010),KC,I2R(GetUnitAbilityLevel(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010),$4130464A)*GetHeroAgi(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$72741010),true))*2.,false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
else
endif
endloop
call DestroyGroup(KB)
else
if GetSpellAbilityId()==$41304437 then
call bb(GetSpellTargetUnit(),4.)
set MG=CreateTimer()
call SaveUnitHandle(FT,GetHandleId(MG),$9F0C6E00,GetTriggerUnit())
call SaveUnitHandle(FT,GetHandleId(MG),$C303079D,GetSpellTargetUnit())
call SaveInteger(FT,GetHandleId(MG),$9A2F6BAB,5)
call SaveReal(FT,GetHandleId(MG),$7B0498D8,I2R(GetHeroAgi(GetTriggerUnit(),true)*GetUnitAbilityLevel(GetTriggerUnit(),$41304437)))
call TimerStart(MG,.2,true,function s6)
else
endif
endif
call FlushChildHashtable(FT,GetHandleId(GetTriggeringTrigger())*QY)
set MG=null
set KB=null
set KC=null
endfunction
function s8 takes nothing returns nothing
set LC=CreateTrigger()
call TriggerAddAction(LC,function s7)
endfunction
function s9 takes nothing returns nothing
endfunction
function tB takes nothing returns nothing
local integer Ix=bg(GetExpiredTimer())
local real Im=HL[Ix]
local group I2=CreateGroup()
local unit CE
set HM[Ix]=HM[Ix]-1
if GetUnitState(MX[Ix],ConvertUnitState(0))<=.405 or HM[Ix]<=0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl",MX[Ix],"origin"))
call DestroyGroup(HN[Ix])
call SetUnitTimeScale(MX[Ix],1.)
call IssuePointOrderById(MX[Ix],851983,GetUnitX(MX[Ix]),GetUnitY(MX[Ix]))
set HN[Ix]=null
call bh(Ix)
else
call bV(MX[Ix],GetUnitX(MX[Ix]),GetUnitY(MX[Ix]),Im,100)
loop
set CE=FirstOfGroup(HN[Ix])
exitwhen CE==null
call GroupRemoveUnit(HN[Ix],CE)
if IsUnitEnemy(CE,GetOwningPlayer(MX[Ix]))==true and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl",CE,"chest"))
call UnitDamageTarget(MX[Ix],CE,HO[Ix],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
endif
endloop
call GroupEnumUnitsInRange(I2,GetUnitX(MX[Ix]),GetUnitY(MX[Ix]),220.,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if IsUnitEnemy(CE,GetOwningPlayer(MX[Ix]))==true and GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call GroupAddUnit(HN[Ix],CE)
endif
endloop
endif
endfunction
function tC takes unit Ij,real It,real Iu returns nothing
local integer Ix=bf()
local real In=bI(GetUnitX(Ij),GetUnitY(Ij),It,Iu)
set HN[Ix]=CreateGroup()
set HL[Ix]=bQ(Ij,It,Iu)
set MX[Ix]=Ij
set HO[Ix]=bk(Ij,1,GetUnitAbilityLevel(Ij,$41304C4E))
set HM[Ix]=R2I(bI(GetUnitX(Ij),GetUnitY(Ij),It,Iu)/100)
call SetUnitTimeScale(Ij,10.)
call SetUnitAnimationByIndex(Ij,12)
call TimerStart(Gt[Ix],.02,true,function tB)
endfunction
function tD takes nothing returns nothing
endfunction
function tE takes nothing returns boolean
return GetLearnedSkill()==$41304C4C
endfunction
function tF takes nothing returns nothing
call SetUnitX(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$58339142),GetUnitX(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$84F3E160))-0.)
call SetUnitY(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$58339142),GetUnitY(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$84F3E160)))
call SetUnitAnimationByIndex(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$58339142),HK[GetConvertedPlayerId(GetOwningPlayer(LoadUnitHandle(FT,GetHandleId(GetExpiredTimer()),$84F3E160)))]/2+2)
endfunction
function tG takes nothing returns nothing
local timer MG
local integer QY=LoadInteger(FT,GetHandleId(GetTriggeringTrigger()),$CFDE6C76)
set QY=QY+3
call SaveInteger(FT,GetHandleId(GetTriggeringTrigger()),$CFDE6C76,QY)
call SaveInteger(FT,GetHandleId(GetTriggeringTrigger()),$ECE825E7,QY)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+30.)
if LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$58339142)==null then
set MG=CreateTimer()
call SaveUnitHandle(FT,GetHandleId(MG),$58339142,CreateUnit(GetOwningPlayer(GetTriggerUnit()),$65303154,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0))
call SaveUnitHandle(FT,GetHandleId(MG),$84F3E160,GetTriggerUnit())
call SetUnitTimeScale(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$58339142),100.)
call SetUnitAnimationByIndex(LoadUnitHandle(FT,GetHandleId(GetTriggeringTrigger())*QY,$58339142),2)
call TimerStart(MG,.03,true,function tF)
else
endif
call FlushChildHashtable(FT,GetHandleId(GetTriggeringTrigger())*QY)
set MG=null
endfunction
function tH takes nothing returns nothing
set K8=CreateTrigger()
call TriggerAddCondition(K8,Condition(function tE))
call TriggerAddAction(K8,function tG)
endfunction
function tI takes nothing returns boolean
return IsUnitIllusionBJ(GetFilterUnit())==true and IsUnitAlly(GetFilterUnit(),GetOwningPlayer(GetTriggerUnit()))==false
endfunction
function tJ takes nothing returns nothing
call UnitDamageTargetBJ(GetTriggerUnit(),GetEnumUnit(),100000000.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
endfunction

function tK takes nothing returns nothing
local group KB
local unit KC
local unit Iv=GetTriggerUnit()
local integer KX=GetPlayerId(GetOwningPlayer(Iv))+1
local boolean success =false
// 孙乾偷东西-偷天换日
if GetSpellAbilityId()==$41623074  then
    // 如果没有 专属
    if bC(Iv, $69743065) == false then
 // 偷非英雄单位
    if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==false then
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"你怎么忍心对这么穷的小兵下手呢？当然是什么都没偷到啊")
    return
    endif
    // 偷钱
    if GetRandomInt(GetUnitAbilityLevel(Iv, $41623074),5)==5 then
    call AdjustPlayerStateBJ(GetUnitLevel(GetSpellTargetUnit())*100,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了："+(I2S(GetUnitLevel(GetSpellTargetUnit())*100)+"钱")))
    set success =true    
    endif
    // 一阶段偷装备
    if GetRandomInt(GetUnitAbilityLevel(Iv, $41623074) * 10, 50) > 45 then
    call UnitAddItemByIdSwapped(LJ[GetRandomInt(1,22)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了一般宝物："+GetItemName(GetLastCreatedItem())))
    set success =true
    endif
    // 二阶段偷装备
    if GetRandomInt(GetUnitAbilityLevel(Iv, $41623074) *20, 100) > 90 then
    call UnitAddItemByIdSwapped(LJ[GetRandomInt(23,59)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|Cff00ff00从"+GetUnitName(GetSpellTargetUnit())+("|Cff00ff00身上偷到了稀有宝物："+GetItemName(GetLastCreatedItem())))
    set success =true
    endif
    // 三阶段偷装备
    if GetUnitAbilityLevel(Iv, $41623074) > 1 and GetRandomInt(GetUnitAbilityLevel(Iv, $41623074) * 30, 150) > 140 then
    call UnitAddItemByIdSwapped(LJ[GetRandomInt(71,84)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffffcc00从"+GetUnitName(GetSpellTargetUnit())+("|cffffcc00身上偷到了珍稀宝物："+GetItemName(GetLastCreatedItem())))
    set success =true
    endif
     // 四阶段偷装备
    if GetUnitAbilityLevel(Iv, $41623074) == 4 and GetRandomInt(1, 50) == 2 then
    call UnitAddItemByIdSwapped(hight_level_item_pool[GetRandomInt(99,132)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000从"+GetUnitName(GetSpellTargetUnit())+("|cffff0000身上偷到了极品宝物："+GetItemName(GetLastCreatedItem())))
    // 如果偷到的装备是追日靴
    if GetItemTypeId(GetLastCreatedItem()) == $49303030 then
    call UnitAddAbility(Iv,$4130344D)
    call UnitMakeAbilityPermanent(Iv,true,$4130344D)
    call SetItemUserData(GetLastCreatedItem() ,288)
    endif
    set success =true
    endif

    if success !=true then
    call DisplayTimedTextToForce(GetPlayersAll(), 6., "今天脸太黑了，什么都没偷到，捡个石头换" + I2S(200 * GetUnitAbilityLevel(Iv, $41623074)) +"两黄金算了！")
    call AdjustPlayerStateBJ(200 * GetUnitAbilityLevel(Iv, $41623074), GetOwningPlayer(Iv), PLAYER_STATE_RESOURCE_GOLD)
    endif
    else
        // 如果有专属  
        // 偷非英雄单位
 if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==false then
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"你怎么忍心对这么穷的小兵下手呢？当然是什么都没偷到啊")
    return
    endif
    // 偷钱
    if GetRandomInt(GetUnitAbilityLevel(Iv, $41623074), 7) < 7 then
    call AdjustPlayerStateBJ(GetUnitLevel(GetSpellTargetUnit())*100,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了："+(I2S(GetUnitLevel(GetSpellTargetUnit())*100)+"钱")))
    set success =true    
    endif
    // 一阶段偷装备
    if GetRandomInt(GetUnitAbilityLevel(Iv, $41623074) * 10, 50) > 42 then
    call UnitAddItemByIdSwapped(LJ[GetRandomInt(1,22)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了一般宝物："+GetItemName(GetLastCreatedItem())))
    set success =true
    endif
    // 二阶段偷装备
    if GetRandomInt(GetUnitAbilityLevel(Iv, $41623074) *20, 100) > 85 then
    call UnitAddItemByIdSwapped(LJ[GetRandomInt(23,59)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|Cff00ff00从"+GetUnitName(GetSpellTargetUnit())+("|Cff00ff00身上偷到了稀有宝物："+GetItemName(GetLastCreatedItem())))
    set success =true
    endif
    // 三阶段偷装备
    if GetUnitAbilityLevel(Iv, $41623074) > 1 and GetRandomInt(GetUnitAbilityLevel(Iv, $41623074) * 30, 150) > 140 then
    call UnitAddItemByIdSwapped(LJ[GetRandomInt(71,84)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffffcc00从"+GetUnitName(GetSpellTargetUnit())+("|cffffcc00身上偷到了珍稀宝物："+GetItemName(GetLastCreatedItem())))
    set success =true
    endif
     // 四阶段偷装备
    if GetUnitAbilityLevel(Iv, $41623074) == 4 and GetRandomInt(1, 50) < 5 then
    call UnitAddItemByIdSwapped(LJ[GetRandomInt(99,127)],GetTriggerUnit())
    call DisplayTimedTextToForce(GetPlayersAll(),6.,"|cffff0000从"+GetUnitName(GetSpellTargetUnit())+("|cffff0000身上偷到了极品宝物："+GetItemName(GetLastCreatedItem())))
    set success =true
    endif

    if success !=true then
    call DisplayTimedTextToForce(GetPlayersAll(), 6., "今天脸太黑了，什么都没偷到，捡个璞玉也能当!" + I2S(2000 * GetUnitAbilityLevel(Iv, $41623074)) +"两黄金了")
    call AdjustPlayerStateBJ(2000 * GetUnitAbilityLevel(Iv, $41623074), GetOwningPlayer(Iv), PLAYER_STATE_RESOURCE_GOLD)
    endif
        
    endif
   
endif
// 诸葛果追随者
if GetSpellAbilityId()==$414A5338 then
call SetUnitPosition(zhuiSuiZhe,GetUnitX(Iv),GetUnitY(Iv))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",GetUnitX(zhuiSuiZhe),GetUnitY(zhuiSuiZhe)))
else
endif
if GetSpellAbilityId()==$414A5335 then
call SetUnitPosition(LoadUnitHandle(Ia,GetHandleId(Iv),$5A484747),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
if GetSpellAbilityId()==$4164726F then
if GetUnitTypeId(GetTriggerUnit())==$686D7474 then
call SetUnitMoveSpeed(GetTriggerUnit(),200.)
call UnitRemoveAbilityBJ($41726570,GetTriggerUnit())
call UnitRemoveAbilityBJ($41303556,GetTriggerUnit())
else
endif
else
endif
if GetSpellAbilityId()==$41303159 then
set Mt[6]=GetUnitLoc(GetTriggerUnit())
if GetUnitTypeId(GetTriggerUnit())==$68706878 then
call CreateItemLoc($6B336D33,Mt[6])
else
if GetUnitTypeId(GetTriggerUnit())==$6E677264 then
call CreateItemLoc($6B336D32,Mt[6])
set NL[0]=bj_lastCreatedItem
else
if GetUnitTypeId(GetTriggerUnit())==$6E777764 then
call CreateItemLoc($676C736B,Mt[6])
else
if GetUnitTypeId(GetTriggerUnit())==$6E747264 then
call CreateItemLoc($676F7072,Mt[6])
else
endif
endif
endif
endif
call RemoveUnit(GetTriggerUnit())
call RemoveLocation(Mt[6])
set KB=null
set KC=null
return
else
endif
if GetSpellAbilityId()==$4149726C then
if GetOwningPlayer(GetSpellTargetUnit())==Player(8) and GetUnitTypeId(GetSpellTargetUnit())==$6E303035 or GetUnitTypeId(GetSpellTargetUnit())==$6E303034 or GetUnitTypeId(GetSpellTargetUnit())==$6E303033 or GetUnitTypeId(GetSpellTargetUnit())==$6E777766 or GetUnitTypeId(GetSpellTargetUnit())==$6E777767 then
call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)
else
if GetOwningPlayer(GetSpellTargetUnit())==GetOwningPlayer(GetTriggerUnit()) and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true then
set T2=GetSpellTargetUnit()
set Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetSpellTargetUnit()
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"更改切换背包英雄为："+GetUnitName(GetSpellTargetUnit()))
call SetUnitOwner(GetSpellTargetUnit(),Player(8),true)
call SetUnitOwner(T2,ConvertedPlayer(KX),true)
else
if GetOwningPlayer(GetSpellTargetUnit())==Player(8) and GetUnitAbilityLevelSwapped($41303239,GetSpellTargetUnit())==1 and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true then
set T2=GetSpellTargetUnit()
call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)
call UnitRemoveAbilityBJ($41303239,T2)
else
if GetUnitTypeId(GetSpellTargetUnit())==$6E777766 or GetUnitTypeId(GetSpellTargetUnit())==$6E777767 or GetUnitTypeId(GetSpellTargetUnit())==$6E303033 or GetUnitTypeId(GetSpellTargetUnit())==$6E303034 or GetUnitTypeId(GetSpellTargetUnit())==$6E303035 and GetOwningPlayer(GetSpellTargetUnit())==Player(8) or GetPlayerSlotState(GetOwningPlayer(GetSpellTargetUnit()))==PLAYER_SLOT_STATE_LEFT then
call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)
call SetUnitOwner(Iv,Player(8),true)
call SetUnitOwner(Iv,ConvertedPlayer(KX),true)
else
endif
endif
endif
endif
else
endif
if GetSpellAbilityId()==$4143656E then
if GetRandomInt(1,5)==2 then
call AdjustPlayerStateBJ(GetUnitLevel(GetSpellTargetUnit())*100,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了："+(I2S(GetUnitLevel(GetSpellTargetUnit())*100)+"钱")))
else
if GetRandomInt(1,7)==3 then
call UnitAddItemByIdSwapped(ChooseRandomItemExBJ(GetRandomInt(2,3),ITEM_TYPE_CHARGED),GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了："+GetItemName(GetLastCreatedItem())))
else
if IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_HERO)==true and GetRandomInt(1,15)==3 then
call UnitAddItemByIdSwapped(ChooseRandomItemExBJ(GetRandomInt(3,8),ITEM_TYPE_PERMANENT),GetTriggerUnit())
else
if GetHeroLevel(GetSpellTargetUnit())>=25 and GetRandomInt(1,30)==3 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(1,35)],GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了："+GetItemName(GetLastCreatedItem())))
else
if GetHeroLevel(GetSpellTargetUnit())>=50 and GetRandomInt(1,75)==4 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(36,59)],GetTriggerUnit())
call DisplayTimedTextToForce(GetPlayersAll(),6.,"从"+GetUnitName(GetSpellTargetUnit())+("身上偷到了："+GetItemName(GetLastCreatedItem())))
else
endif
endif
endif
endif
endif
else
if GetSpellAbilityId()==$41303249 then
if GetRandomInt(1,6)==2 then
call UnitAddItemByIdSwapped(ChooseRandomItemExBJ(GetRandomInt(2,3),ITEM_TYPE_CHARGED),GetTriggerUnit())
else
if GetRandomInt(1,18)==5 then
call UnitAddItemByIdSwapped(ChooseRandomItemExBJ(1,ITEM_TYPE_CHARGED),GetTriggerUnit())
else
endif
endif
else
if GetSpellAbilityId()==$41303039 then
set Jd[11]=GetUnitLoc(GetTriggerUnit())
call AddHeroXPSwapped(GetUnitLevel(GetTriggerUnit())*2,GetTriggerUnit(),true)
call CreateTextTagLocBJ(I2S(GetUnitLevel(GetSpellTargetUnit())),Jd[11],1.,15.,25.,100,25.,10.)
set Jc[6]=GetLastCreatedTextTag()
call SetTextTagVelocityBJ(Jc[6],64,90)
call SetTextTagPermanent(Jc[6],false)
call SetTextTagLifespan(Jc[6],2.)
call RemoveLocation(Jd[11])
else
if GetSpellAbilityId()==$41646973 then
set Jd[29]=GetSpellTargetLoc()
set Fs[1]=an(800.,Jd[29],Condition(function tI))
call ForGroupBJ(Fs[1],function tJ)
call DestroyGroup(Fs[1])
call RemoveLocation(Jd[29])
else
if GetSpellAbilityId()==$41303842 then
if bC(GetTriggerUnit(),$6D6C7374)==true or bC(GetTriggerUnit(),$6E737069)==true then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*2.*I2R(GetUnitAbilityLevelSwapped($41303842,GetTriggerUnit())),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
else
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*1.5*I2R(GetUnitAbilityLevelSwapped($41303842,GetTriggerUnit())),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
endif
else
if GetSpellAbilityId()==$41303841 then
call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroStatBJ(bj_HEROSTAT_STR,GetTriggerUnit(),true))*1.2*I2R(GetUnitAbilityLevelSwapped($41303841,GetTriggerUnit())),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL)
else
if GetSpellAbilityId()==$4130374A and GetOwningPlayer(GetSpellTargetUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE) and GetUnitTypeId(GetSpellTargetUnit())==$6E777766 then
call SetUnitOwner(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)
else
endif
endif
endif
endif
endif
endif
endif
set Iv=null
set KB=null
set KC=null
endfunction
function tL takes nothing returns nothing
set T1=CreateTrigger()
call TriggerAddAction(T1,function tK)
endfunction
function tM takes nothing returns nothing
endfunction
function tN takes unit Ij,real It,real Iu,real Ii returns nothing
local unit CE
local group I2=CreateGroup()
call GroupEnumUnitsInRange(I2,It,Iu,660,null)
loop
set CE=FirstOfGroup(I2)
exitwhen CE==null
call GroupRemoveUnit(I2,CE)
if GetUnitState(CE,UNIT_STATE_LIFE)>.405 and IsUnitEnemy(CE,GetOwningPlayer(Ij))==true and IsUnitType(CE,UNIT_TYPE_STRUCTURE)==false and GetUnitTypeId(CE) != GetUnitTypeId(she)  then
call UnitDamageTarget(Ij,CE,Ii,false,false,I,N,WEAPON_TYPE_WHOKNOWS)
if GetUnitState(CE,UNIT_STATE_LIFE)>0 then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",CE,"overhead"))
endif
endif
endloop
set CE=null
call DestroyGroup(I2)
set I2=null
endfunction
function anying_zhenfa takes nothing returns nothing
endfunction

function shifa_finish_action takes nothing returns nothing
local timer CS
local integer Ix=0
local unit Iv=GetTriggerUnit()
local unit CE=GetSpellTargetUnit()
local real Ii=0.
local real UQ=0.
local real UR=0.
local real T7=0.
local real T8=0.
local integer FZ=0
local integer JZ=GetSpellAbilityId()
local integer JS=GetUnitAbilityLevel(GetTriggerUnit(),JZ)
local integer touzi=0
// 蝎子Q
if  GetSpellAbilityId()=='Ab2u' then
if GetRandomInt(1,2)==1 then
call SetUnitX(Iv, LoadReal(FS,GetHandleId(Iv),$140B6201) + 1)
else
call SetUnitX(Iv,LoadReal(FS,GetHandleId(Iv),$140B6201) -1)
endif
call SetUnitY(Iv,LoadReal(FS,GetHandleId(Iv),$140B6202) )
set Ii=bk(Iv,2,GetUnitAbilityLevel(Iv,GetSpellAbilityId()))
if IsUnitAlly(Iv,Player(8))==true then
call UnitDamageTarget(Iv,GetSpellTargetUnit(),Ii,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),280,Ii,5,2)
endif
endif
// 张角Q
if GetSpellAbilityId()=='Ab3r' then
// call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cffff0000风暴残影！")
call zhangjiao_Q(Iv)
endif
endfunction

// 释放技能前摇时触发函数
function tO takes nothing returns nothing
local timer CS
local integer Ix=0
local unit Iv=GetTriggerUnit()
local unit CE=GetSpellTargetUnit()
local real Ii=0.
local real UQ=0.
local real UR=0.
local real T7=0.
local real T8=0.
local location LQ
local integer FZ=0
local integer JZ=GetSpellAbilityId()
local integer JS=GetUnitAbilityLevel(GetTriggerUnit(),JZ)
local integer touzi=0
local real It=0.
local real Iu=0.
local unit Pr=null
local group I2=CreateGroup()

if GetUnitTypeId(CE) == GetUnitTypeId(she) and GetUnitState(she, UNIT_STATE_LIFE) >1 then
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cffff0000八岐化蛇不受法术影响！")
call UnitRemoveBuffs(CE,false,true)
call UnitRemoveAbility(CE,$4253544E)
call UnitRemoveAbility(CE,$42505345)
// call UnitRemoveAbility(CE,$42303054)
return
endif

if CE != Iv and IsUnitAlly(CE, GetOwningPlayer(Iv)) ==false and(UnitHasBuffBJ(CE, $42303054) == true or GetUnitAbilityLevel(CE, 'A06Y') > 0) and GetSpellAbilityId() != 'A0DA' then
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cffff0000目标单位拥有抵抗！")
return
endif
// 张角E被动效果
if (GetSpellAbilityId() == 'Ab3u' or GetSpellAbilityId() == 'Ab3r' or GetSpellAbilityId() == 'Ab3v') and GetUnitAbilityLevel(Iv, 'Ab3s') > 0 then
// call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cffff0000超负荷被动！")
call UnitAddAbility(Iv,'Ab3y')
endif

if GetSpellAbilityId()=='Ab3u' then
// call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cffff0000电光留影！")
call zhangjiao_R(Iv)
endif

if GetSpellAbilityId()=='Ab3v' then
// call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cffff0000万雷天牢！")
call zhangjiao_F(Iv)
endif

// call db(Iv)
// 精卫Q
if GetSpellAbilityId() == 'Ab38' then
call jingwei_Q(Iv)
endif

if GetSpellAbilityId() == 'Ab39' then
call jingwei_w(Iv)
endif
// 精卫E
if GetSpellAbilityId() == 'Ab3m' then
    
// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "火神：" + GetUnitName(GetLastCreatedUnit())) 
call jingwei_E(Iv)
endif
// 精卫R
if GetSpellAbilityId() == 'Ab3c' then
set Ii = bk(Iv, 3, GetUnitAbilityLevel(Iv, GetSpellAbilityId())) *3 
if LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F) == 4 and bC(Iv, 'it0r') == true then
set Ii = Ii *1.5
endif
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "神灭斩当前面板伤害：" + R2S(Ii))
call UnitDamageTarget(Iv,GetSpellTargetUnit(),Ii,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif

if GetSpellAbilityId() == 'Ab3i' then
set Ii = bk(Iv, 3, GetUnitAbilityLevel(Iv, GetSpellAbilityId()) +2) * 3 + LoadReal(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $68746D64) * 1000
if LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F) == 4 and bC(Iv, 'it0r') == true then
set Ii = Ii *1.5
endif
call UnitDamageTarget(Iv,GetSpellTargetUnit(),Ii,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "强化神灭斩当前面板伤害：" + R2S(Ii))
call TriggerSleepAction(0.2)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, GetUnitName(CE) + ":" + R2S(GetUnitState(CE, ConvertUnitState(1))))

if GetUnitState(CE, ConvertUnitState(0)) < 10 and GetUnitLevel(CE) >100 then
call SaveReal(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $68746D64, LoadReal(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $68746D64) +1) 
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "当前神灭斩额外层数：" + R2S(LoadReal(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $68746D64)))
endif
endif

// 精卫E眩晕效果
if Iv == jingwei and LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F) > 3 and CE != Iv and IsUnitEnemy(CE, GetOwningPlayer(Iv)) == true then
// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"嗜火眩晕") 
call SaveInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F, 0)
call UnitRemoveAbility(Iv,'Ab3f')
// 避免眩晕自己
if Iv == CE then
    return
endif

if CE !=null then
    if bC(Iv, 'it0r') == true then
    call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623261,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)
    else
    call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623071,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)
    endif
else 
set LQ=GetSpellTargetLoc()
set It=GetLocationX(LQ)
set Iu=GetLocationY(LQ)
call range_stunEffect(Iv, It, Iu, 330, 3,true)
call RemoveLocation(LQ)
// set LQ=null
// set It=null
// set Iu=null
endif

endif

if Iv == jingwei and GetUnitAbilityLevel(Iv, 'Ab3a') > 0 and JZ != 'Ab23' and JZ != 'Ab47' then
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F, LoadInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F) + 1)
if LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F) > 3 then
    call UnitAddAbility(Iv,'Ab3f')
endif
// call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "嗜火开始累计:" + I2S(LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $7368686F))) 
endif

// 投掷
if  GetSpellAbilityId()=='A0GR' then
set LQ=GetSpellTargetLoc()
set It=GetLocationX(LQ)
set Iu=GetLocationY(LQ)
// set I2=CreateGroup()
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"开始投掷！")

call GroupEnumUnitsInRange(I2,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),220.,null)
loop
set CE=FirstOfGroup(I2)
call GroupRemoveUnit(I2,CE)
exitwhen CE==null
if bj(CE) and GetUnitState(CE,UNIT_STATE_LIFE)>0. and CE!=GetTriggerUnit() and Pr==null then
set Pr=CE
endif
endloop
call DestroyGroup(I2)
if IsTerrainPathable(It,Iu,PATHING_TYPE_WALKABILITY)==true or (It>=-1300. and It<=-860. and Iu>=150. and Iu<=600.) then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"不可以扔到那里！！！")
call SetUnitPosition(GetTriggerUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
call PlaySoundBJ(O)
else
if Pr==null then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"附近没有可以用来丢的单位")
call SetUnitPosition(GetTriggerUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"准备扔"+GetUnitName(Pr))
call pt(GetTriggerUnit(),Pr,It,Iu,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))

endif
endif
call RemoveLocation(LQ)
set LQ=null
set I2=null
set Pr=null
endif

if GetSpellAbilityId()=='Ab2u' then
   call SaveReal(FS,GetHandleId(Iv),$140B6201,GetLocationX(GetSpellTargetLoc()))
   call SaveReal(FS,GetHandleId(Iv),$140B6202,GetLocationY(GetSpellTargetLoc()))

endif


// 吞噬升级
if GetSpellAbilityId()=='Ab2r' then
call SaveInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8, LoadInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8) + 1)
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000成长进度：" + I2S(LoadInteger(FS,GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8)) + "/25")
if LoadInteger(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)), $110B62E8) > 24 or LoadBoolean(FS, GetConvertedPlayerId(GetOwningPlayer(Iv)),$120B62E8) then
call pet_evolution(Iv)
endif
endif
// 奇趣蛋
if GetSpellAbilityId()=='Ab2p' then
    // call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv), 'n104', 0, 0, 0), GetUnitX(Iv), GetUnitY(Iv))

call SetUnitPosition(CreateUnit(GetOwningPlayer(Iv), pet_egg[GetRandomInt(1,6)], 0, 0, 0), GetUnitX(Iv), GetUnitY(Iv))
call SetPlayerHandicapXPBJ(GetOwningPlayer(Iv), GetPlayerHandicapXPBJ(GetOwningPlayer(Iv)) +25)
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|cffff0000孵化成功！经验获取率增加25%！当前经验率:" + R2S(GetPlayerHandicapXPBJ(GetOwningPlayer(Iv))))

endif
// 马良Q
if GetSpellAbilityId()=='Ab2j' then
set Ii = bk(Iv, 3, GetUnitAbilityLevel(Iv, GetSpellAbilityId())) *0.5
call TriggerSleepAction(1)
call UnitDamageTarget(Iv,GetSpellTargetUnit(),Ii,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
// 马良W
if GetSpellAbilityId()=='Ab2k' then
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "暗影阵法、" )
call bs(GetTriggerUnit(), GetLocationX(GetSpellTargetLoc()), GetLocationY(GetSpellTargetLoc()), 550, bk(GetTriggerUnit(),3,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId())), 5, 0)
// call SaveUnitHandle(Ia, GetHandleId(maliang), 0, Iv)
// call SaveEffectHandle(Ia, GetHandleId(maliang), $65666667, AddSpecialEffectLoc("war3mapImported\\anyingW.mdx", GetSpellTargetLoc()))

call maliangW_Start(GetSpellTargetLoc())
endif
// 马良E
if GetSpellAbilityId()=='A0BX' then
call SaveReal(Ia,GetHandleId(Iv),$30304844,GetHeroInt(Iv, true)*I2R(GetUnitAbilityLevel(Iv,'A0BX')))
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00获得护盾！" + R2S(GetHeroInt(Iv, true)*I2R(GetUnitAbilityLevel(Iv,'A0BX'))))
call UnitAddAbility(Iv,$41304844)
if HaveSavedInteger(FS,GetHandleId(Iv),$130B62EC)==true then
if LoadReal(FS,GetHandleId(Iv),$A9F08262)<=0. then
// call SaveEffectHandle(FS,GetHandleId(Iv),$3706D225,AddSpecialEffectTarget("war3mapImported\\RW_E.mdx",Iv,"chest"))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.1,true,function ev)
else
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
endif
else
// call SaveEffectHandle(FS,GetHandleId(Iv),$3706D225,AddSpecialEffectTarget("war3mapImported\\RW_E.mdx",Iv,"chest"))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.1,true,function ev)
endif
endif

// 马良R
// if GetSpellAbilityId()=='A0BX' then
    
// endif

// yanyuR
if GetSpellAbilityId()=='Ab2b' then
// call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "实际伤害：" + R2S(bk(Iv,2,GetUnitAbilityLevel(Iv,$Ab2b))))
call cb(Iv, bk(Iv, 2, GetUnitAbilityLevel(Iv, $Ab2b)) *5, 30)
call SaveEffectHandle(Ia,GetHandleId(Iv),$65666666,AddSpecialEffectTarget("war3mapImported\\jsQ.mdx",Iv,"origin"))
endif

// 无敌斩
if GetSpellAbilityId()=='Ab2f' then
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"|cffff0000无敌斩！")
   call UnitAddAbilityBJ($4176756C,Iv)
// call UnitAddItem(Iv,CreateItem($49303053,GetUnitX(Iv),GetUnitY(Iv)))

call huk_action(Iv, CE, JS * 4 +5)
endif
// 阎宇Q
if GetSpellAbilityId()=='Ab2e' then
if GetRandomInt(1,2)==1 then
call SetUnitX(Iv,GetUnitX(CE)+1)
else
call SetUnitX(Iv,GetUnitX(CE)-1)
endif
call SetUnitY(Iv,GetUnitY(CE))
set Ii=bk(Iv,2,GetUnitAbilityLevel(Iv,GetSpellAbilityId()))
if IsUnitAlly(Iv,Player(8))==true then
call UnitDamageTarget(Iv,GetSpellTargetUnit(),Ii,false,false,ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),280,Ii,5,2)
endif
endif
// 宗预大招
if GetSpellAbilityId() == 'Ab28' then
    call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "怒拳破！当前技能等级：" + I2S(GetUnitAbilityLevel(Iv, 'Ab28')))
if  LoadReal(Ia,GetHandleId(Iv),$30304845) == 0 then
        // call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "存储当前攻速：" + R2S(LoadReal(Ia,GetHandleId(Iv),$30304845)))

call SaveReal(Ia,GetHandleId(Iv),$30304845,GetUnitState(Iv, ConvertUnitState(37)))
endif

if GetUnitState(Iv, ConvertUnitState(37)) <0.5 then
call SetUnitState(Iv, ConvertUnitState(37), LoadReal(Ia,GetHandleId(Iv),$30304845)) 
else
call SaveReal(Ia,GetHandleId(Iv),$30304845,GetUnitState(Iv, ConvertUnitState(37)))
endif

call SetUnitState(Iv, ConvertUnitState(37),0.4)  
endif
// 高翔大招
if GetSpellAbilityId() == $41623166 then
call taughtAttack(Iv, 4 + GetUnitAbilityLevel(Iv, $41623166) *2)
endif
// 高翔R护盾
if GetSpellAbilityId() == $41623165 and CE !=null then
call SetUnitState(CE, UNIT_STATE_LIFE,GetUnitState(CE,UNIT_STATE_LIFE)+ GetUnitAbilityLevel(Iv, $41623165) *1000)
call SaveReal(Ia,GetHandleId(CE),$30304844,GetUnitState(Iv,ConvertUnitState(1))*I2R(GetUnitAbilityLevel(Iv,$41623165))*I2R(GetUnitAbilityLevel(Iv,$41623165))*.1)
call DisplayTextToPlayer(GetOwningPlayer(CE), 0, 0, "|Cff00ff00高翔对你使用了慈悲度魂落！获得护盾！" + R2S(GetUnitState(Iv, ConvertUnitState(1)) * I2R(GetUnitAbilityLevel(Iv, $41623165)) * I2R(GetUnitAbilityLevel(Iv, $41623165)) * .1))
call UnitAddAbility(CE,$41304844)
if HaveSavedInteger(FS,GetHandleId(CE),$130B62EC)==true then
if LoadReal(FS,GetHandleId(CE),$A9F08262)<=0. then
call SaveReal(FS,GetHandleId(CE),$130B62EC,5.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,CE)
call TimerStart(CS,.1,true,function gaoxiangSheild)
else
call SaveReal(FS,GetHandleId(CE),$130B62EC,5.)
endif
else
call SaveReal(FS,GetHandleId(CE),$130B62EC,5.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,CE)
call TimerStart(CS,.1,true,function gaoxiangSheild)
endif
call PauseUnit(Iv,true)
call TriggerSleepAction(1.5)
call SetUnitPosition(Iv,GetUnitX(CE),GetUnitY(CE))
call PauseUnit(Iv,false)
endif

// 高翔W护盾
if GetSpellAbilityId()==$41623162 then
    // call rk(Iv,JS)
call SaveReal(Ia,GetHandleId(Iv),$30304844,GetUnitState(Iv,ConvertUnitState(1))*I2R(GetUnitAbilityLevel(Iv,$41623162)))
call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00获得护盾！" + R2S(GetUnitState(Iv,ConvertUnitState(1))*I2R(GetUnitAbilityLevel(Iv,$41623162))*I2R(GetUnitAbilityLevel(Iv,$41623162))*.02))
call UnitAddAbility(Iv,$41304844)
if HaveSavedInteger(FS,GetHandleId(Iv),$130B62EC)==true then
if LoadReal(FS,GetHandleId(Iv),$A9F08262)<=0. then
// call SaveEffectHandle(FS,GetHandleId(Iv),$3706D225,AddSpecialEffectTarget("war3mapImported\\RW_E.mdx",Iv,"chest"))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.1,true,function gaoxiangSheild)
else
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
endif
else
// call SaveEffectHandle(FS,GetHandleId(Iv),$3706D225,AddSpecialEffectTarget("war3mapImported\\RW_E.mdx",Iv,"chest"))
call SaveReal(FS,GetHandleId(Iv),$130B62EC,4.)
set CS=CreateTimer()
set Ix=GetHandleId(CS)
call SaveUnitHandle(Ia,Ix,0,Iv)
call TimerStart(CS,.1,true,function gaoxiangSheild)
endif
endif

// 高翔Q技能
if GetSpellAbilityId()==$41623161 then
    // call rk(Iv,JS)
call rangeStrike(Iv,JS)
endif
// 天使R
if GetSpellAbilityId()==$41623134 then
if GetUnitAbilityLevel(GetSpellTargetUnit(),$4176756C)<1 then
if GetUnitAbilityLevel(GetSpellTargetUnit(),$41496E76)<1 then
call UnitAddAbility(CE,$41496E76)
call UnitAddItem(CE,CreateItem($49303053,GetUnitX(CE),GetUnitY(CE)))
call UnitRemoveAbility(CE,$41496E76)
else
call UnitAddItem(CE,CreateItem($49303053,GetUnitX(CE),GetUnitY(CE)))
endif
endif
if CE != Iv and GetUnitAbilityLevel(Iv, $41623134) >2 and GetUnitAbilityLevel(Iv,$4176756C)<1 then
    call UnitAddItem(Iv,CreateItem($49303053,GetUnitX(Iv),GetUnitY(Iv)))
endif
endif
// 天使Q
 if GetSpellAbilityId() == $41623130 and Iv == juFu and CE != Dz then
call UnitDamageTarget(Iv, CE, bk(Iv, 3, GetUnitAbilityLevel(Iv, $41623130)) *0.5, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
 endif
//  天使W
if GetSpellAbilityId() == $41623131 and Iv == juFu  then
call SetUnitState(CE, UNIT_STATE_LIFE,GetUnitState(CE,UNIT_STATE_LIFE)+ GetUnitAbilityLevel(Iv, $41623131) *1000)

// call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623135,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)
// call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623135,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)
endif
//乾坤一掷
 if GetSpellAbilityId() == $41623077 and Iv == sunQian and CE != Dz then
    set touzi =GetRandomInt(1,6)
   call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00乾坤一掷！造成伤害：" + R2S((bk(Iv, 3, GetUnitAbilityLevel(Iv, $41623077)) *0.5 + GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) * .05) * touzi))
    // call (bk(Iv, 3, GetUnitAbilityLevel(Iv, $41623077)) +GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)*.05) * touzi
    call bs(Iv,GetUnitX(CE),GetUnitY(CE),330,(bk(Iv, 3, GetUnitAbilityLevel(Iv, $41623077)) *0.4 + GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) * .01) * touzi,5,0)
    // call UnitDamageTarget(Iv, CE, (bk(Iv, 3, GetUnitAbilityLevel(Iv, $41623077)) *0.3 + GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD) * .03) * touzi, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
    if touzi == 6 then
    call DisplayTextToPlayer(GetOwningPlayer(Iv), 0, 0, "|Cff00ff00乾坤一掷，好运连连！" )
    call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41623071,1,GetUnitX(CE),GetUnitY(CE),bj_UNIT_FACING,3),852095,CE)
    endif
endif

// 宝珠四射
if GetSpellAbilityId()==$4162306B and GetUnitTypeId(zhuiSuiZhe) == $48303031 then
call bs(Iv, GetUnitX(Iv), GetUnitY(Iv), 1000, bk(Iv, 3, GetUnitAbilityLevel(Iv, $4162306B)) *.5, 4, 0)
call range_stunEffect(Iv, GetUnitX(Iv), GetUnitY(Iv), 1000, 3,true)
endif

// 多情剑客无情剑
if GetSpellAbilityId()==$4162306C and GetUnitTypeId(zhuiSuiZhe) == $48303031 then
if GetRandomInt(1,4)==1 then
call ct(zhuiSuiZhe,CE,JS)
elseif GetRandomInt(1,4)==2 then
call cq(zhuiSuiZhe,CE,JS)
elseif GetRandomInt(1,4)==3 then
call cn(zhuiSuiZhe,CE,JS)
else
call ck(zhuiSuiZhe,CE,JS)
endif
endif
if IsUnitType(Iv,UNIT_TYPE_HERO)==true and JZ!=$41303050 and JZ!=$41303732 and JZ!=$41305744 and JZ!=$41575936 and JZ!=$4130384B and JZ!=$414A5337 and JZ!=$41575936 and JZ!=$41415352 then
set Jd[12]=GetUnitLoc(Iv)
call CreateTextTagLocBJ(GetObjectName(JZ),Jd[12],1.,20.,GetRandomReal(0,100),100,GetRandomReal(0,100),20.)
set Jc[2]=GetLastCreatedTextTag()
call SetTextTagVelocityBJ(Jc[2],64,90)
call SetTextTagPermanent(Jc[2],false)
call SetTextTagLifespan(Jc[2],2.)
call RemoveLocation(Jd[12])
if GetUnitAbilityLevel(Iv,$41303231)>0 then
call SetUnitState(Iv,ConvertUnitState(0),GetUnitState(Iv,ConvertUnitState(1))*.2+GetUnitState(Iv,ConvertUnitState(0)))
endif
endif
if IsUnitType(Iv,UNIT_TYPE_HERO)==true then

if GetSpellAbilityId()==$414E636C then
call Wz()
elseif GetSpellAbilityId()==$414A5331 then
call el(Iv,CE,JS)
elseif GetSpellAbilityId()==$414A5332 then
set Ii=bk(Iv,2,JS)
call bp(Iv,I2R(JS)*99,10)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550,Ii,4,0)
elseif GetSpellAbilityId()==$414A5334 then
set Ii=bk(Iv,2,JS)
call SaveEffectHandle(Ia,GetHandleId(Iv),$30656666,AddSpecialEffectTarget("Abilities\\Weapons\\WaterElementalMissile\\WaterElementalMissile.mdl",Iv,"weapon"))
call bv(Iv,Ii,GetUnitFacing(Iv),200,110)
call bR(Iv,GetUnitFacing(Iv),200)
call IssuePointOrderById(Iv,851983,GetUnitX(Iv),GetUnitY(Iv))
call DestroyEffect(LoadEffectHandle(Ia,GetHandleId(Iv),$30656666))
elseif GetSpellAbilityId()==$41594C32 then
set Ii=bk(Iv,2,JS)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550,Ii,4,0)
call SetUnitState(Iv,ConvertUnitState(0),GetUnitState(Iv,ConvertUnitState(1)))
elseif GetSpellAbilityId()==$41594C31 then
if GetRandomInt(1,10)==7 then
set Ii=bk(Iv,2,JS)+GetUnitState(CE,ConvertUnitState(0))*.33
else
set Ii=bk(Iv,2,JS)
endif
call dl(Iv,CE,Ii)
elseif GetSpellAbilityId()==$414C4231 then
call di(GetTriggerUnit(),GetSpellTargetUnit())
elseif GetSpellAbilityId()==$414C4232 then
set Ii=GetUnitState(GetTriggerUnit(),ConvertUnitState(21))*5
call dj(GetTriggerUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),550,Ii)
elseif GetSpellAbilityId()==$414C4235 then
call br(GetTriggerUnit(),1,JS*100+200,30)
call dg(GetTriggerUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),550)
elseif GetSpellAbilityId()==$41304C4C then
call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+250.*I2R(JS)+I2R(HK[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1]*50))
set HK[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1]=0
elseif GetSpellAbilityId()==$41304C4D then
set Ii=bk(GetTriggerUnit(),1,5)
call bs(GetTriggerUnit(),GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),550.,Ii,1,2)
elseif GetSpellAbilityId()==$41304C4E then
call tC(GetTriggerUnit(),GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41444431 then
call bv(Iv,GetUnitState(Iv,ConvertUnitState(21))*4,bQ(Iv,GetSpellTargetX(),GetSpellTargetY()),1000,220)
elseif GetSpellAbilityId()==$41304D48 then
call cN(Iv)
elseif GetSpellAbilityId()==$41575931 then
call et(Iv,CE)
// 魏延W，天使R+无敌效果
elseif GetSpellAbilityId()==$41575932  then
if GetUnitAbilityLevel(GetSpellTargetUnit(),$4176756C)<1 then
if GetUnitAbilityLevel(GetSpellTargetUnit(),$41496E76)<1 then
call UnitAddAbility(CE,$41496E76)
call UnitAddItem(CE,CreateItem($49303053,GetUnitX(CE),GetUnitY(CE)))
call UnitRemoveAbility(CE,$41496E76)
else
call UnitAddItem(CE,CreateItem($49303053,GetUnitX(CE),GetUnitY(CE)))
endif
endif
elseif GetSpellAbilityId()==$41575933 then
if GetUnitState(Iv,ConvertUnitState(0))/GetUnitState(Iv,ConvertUnitState(1))>.21 then
if GetUnitAbilityLevel(Iv,$41304333)>0 and GetRandomReal(0.,100.)<=30. then
call ep(Iv,(JS*50+100)*2)
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"                           |cffffcc00触发奇谋效果！！！")
else
call ep(Iv,JS*50+100)
endif
else
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"                           |cffff0000生命不足20%，无法施展技能！！！")
endif
elseif GetSpellAbilityId()==$41575935 then
call UnitRemoveBuffs(Iv,false,true)
elseif GetSpellAbilityId()==$41594D31 then
call sW(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41574431 then
call dP(Iv)
elseif GetSpellAbilityId()==$41574433 then
call dR(Iv,JS)
elseif GetSpellAbilityId()==$41574436 then
call dN(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41445331 then
call d0(GetTriggerUnit(),$41445331,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41445332 then
set UT[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=1
call d2(GetTriggerUnit(),$41445332)
elseif GetSpellAbilityId()==$41475335 then
call cZ(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$416D6C73 then
call dY(Iv,JS)
elseif GetSpellAbilityId()==$41304649 then
call sG(Iv,CE,JS)
elseif GetSpellAbilityId()==$41505431 then
call dv(Iv,JS)
elseif GetSpellAbilityId()==$41505439 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505439,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41505431,true)
if GetTerrainType(GetUnitX(LoadUnitHandle(Ia,GetHandleId(Iv),$41505431)),GetUnitY(LoadUnitHandle(Ia,GetHandleId(Iv),$41505431)))!=$634F6331 then
call SetUnitPosition(Iv,GetUnitX(LoadUnitHandle(Ia,GetHandleId(Iv),$41505431)),GetUnitY(LoadUnitHandle(Ia,GetHandleId(Iv),$41505431)))
endif
elseif GetSpellAbilityId()==$41505432 then
if IsUnitType(CE,UNIT_TYPE_ETHEREAL) then
call UnitDamageTarget(Iv,CE,bk(Iv,3,JS),false,false,F,N,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Iv,CE,bk(Iv,3,JS),false,false,K,N,WEAPON_TYPE_WHOKNOWS)
endif
elseif GetSpellAbilityId()==$41505433 then
call XX(Iv,$41505433,1,108,bk(Iv,3,GetUnitAbilityLevel(Iv,$41505436)))
call XY(Iv,$41505433,1,218,"向周围弹射火焰，造成（|cff22ff66"+(R2S(bk(Iv,3,GetUnitAbilityLevel(Iv,$41505436)))+"|r）伤害。"))
elseif GetSpellAbilityId()==$41505434 then
if IsUnitEnemy(Iv,GetOwningPlayer(CE))==true then
call dt(Iv,CE,bk(Iv,3,JS))
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41304337,1,GetUnitX(Iv),GetUnitY(Iv),0.,1),852486,CE)
else
call dt(Iv,CE,-1)
call IssueTargetOrderById(XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41304338,1,GetUnitX(Iv),GetUnitY(Iv),0.,1),852486,CE)
endif
// 无形剑效果
elseif GetSpellAbilityId()==$41303342 then
call bv(Iv,bk(Iv,2,GetUnitAbilityLevel(Iv,$41303342)),bQ(Iv,GetSpellTargetX(),GetSpellTargetY()),800,330)
elseif GetSpellAbilityId()==$41303651 then
call dL(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41436362 then
if bC(GetTriggerUnit(),$6D6C7374)==true or bC(GetTriggerUnit(),$666C6167)==true then
call UnitDamageTarget(Iv,GetSpellTargetUnit(),bk(Iv,2,JS+3),false,false,ATTACK_TYPE_CHAOS,N,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Iv,GetSpellTargetUnit(),bk(Iv,2,JS),false,false,ATTACK_TYPE_CHAOS,N,WEAPON_TYPE_WHOKNOWS)
endif
elseif GetSpellAbilityId()==$414E7362 then
if bC(GetTriggerUnit(),$6D6C7374)==true or bC(GetTriggerUnit(),$6F636F72)==true then
call UnitDamageTarget(Iv,GetSpellTargetUnit(),bk(Iv,1,JS+3),false,false,ATTACK_TYPE_CHAOS,N,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Iv,GetSpellTargetUnit(),bk(Iv,1,JS),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_COLD,WEAPON_TYPE_WHOKNOWS)
endif
// 幻影斩
elseif GetSpellAbilityId()==$41487462 then
if GetRandomInt(1,2)==1 then
call SetUnitX(Iv,GetUnitX(CE)+1)
else
call SetUnitX(Iv,GetUnitX(CE)-1)
endif
call SetUnitY(Iv,GetUnitY(CE))
set Ii=bk(Iv,2,GetUnitAbilityLevel(Iv,GetSpellAbilityId()))
if IsUnitAlly(Iv,Player(8))==true then
call UnitDamageTarget(Iv,GetSpellTargetUnit(),Ii,false,false,K,M,WEAPON_TYPE_WHOKNOWS)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),280,Ii,5,2)
else
call UnitDamageTarget(Iv,GetSpellTargetUnit(),I2R(GetHeroAgi(Iv,true)*GetUnitAbilityLevel(Iv,$41487462)),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_COLD,WEAPON_TYPE_WHOKNOWS)
endif


// 地裂脚
elseif GetSpellAbilityId()==$414F7773 then
set Ii=bk(Iv,1,JS)
if bC(GetTriggerUnit(),$6D6C7374)==true or bC(GetTriggerUnit(),$726E7370)==true then
call bs(Iv,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),500.,Ii*2,3,0)
else
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),500.,I2R(GetHeroStr(Iv,true)*GetUnitAbilityLevel(Iv,$414F7773)),3,3)
endif
elseif GetSpellAbilityId()==$41487463 and IsUnitAlly(GetTriggerUnit(),Player(8))==true then
if IsUnitEnemy(Iv,Player(8))==false then
set Ii=bk(Iv,1,JS)
if bC(GetTriggerUnit(),$6D6C7374)==true or bC(GetTriggerUnit(),$49303055)==true then
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550.,Ii*1.3,4,0)
else
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550.,Ii,4,0)
endif
else
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),500.,I2R(GetHeroStr(Iv,true)*GetUnitAbilityLevel(Iv,$41487463))*.3,4,3)
endif
elseif GetSpellAbilityId()==$4130344E then
if bC(GetTriggerUnit(),$6D6C7374)==true or GetUnitAbilityLevel(Iv,$41304545)>0 then
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),500.,I2R(GetHeroAgi(Iv,true)*12),4,0)
else
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),500.,I2R(GetHeroAgi(Iv,true)*GetUnitAbilityLevel(Iv,$4130344E)),4,0)
endif
elseif GetSpellAbilityId()==$4130314A and IsUnitAlly(GetTriggerUnit(),Player(8))==true then
call bs(Iv,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),600.,I2R(GetHeroInt(Iv,true)*10),5,0)
elseif GetSpellAbilityId()==$41303550 or GetSpellAbilityId()==$41303449 then
call fI(GetTriggerUnit(),JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41304642 then
call fK(GetTriggerUnit())
elseif GetSpellAbilityId()==$41303435 then
call fM(GetTriggerUnit(),GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$414F6878 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO) then
call dW(Iv,CE,bk(Iv,3,GetUnitAbilityLevel(Iv,GetSpellAbilityId())+1))
elseif GetSpellAbilityId()==$41707267 then
set Ii=bk(Iv,3,JS)
call UnitDamageTarget(Iv,CE,Ii,false,false,L,N,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41425330 then
call cU(Iv,GetUnitX(Iv),GetUnitY(Iv))
elseif GetSpellAbilityId()==$41425331 then
call cS(Iv,GetUnitX(Iv),GetUnitY(Iv))
elseif GetSpellAbilityId()==$41304234 then
call SetUnitPosition(GetSpellTargetUnit(),GetUnitX(Iv),GetUnitY(Iv))
elseif GetSpellAbilityId()==$41304430 then
call dF(Iv,GetSpellTargetX(),GetSpellTargetY())
// 灵魂锁链
elseif GetSpellAbilityId()==$41474732 then
set LQ=GetSpellTargetLoc()
call bb(CE,3)
call dp(Iv,LQ,$6530425A,$65474732,2000,35,bk(Iv,3,GetUnitAbilityLevel(Iv,$41474732))*3,.03)
call RemoveLocation(LQ)
elseif GetSpellAbilityId()==$41474733 then
call dD(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41474734 then
set Ii=GetUnitState(Iv,ConvertUnitState(2))*2+bk(Iv,3,GetUnitAbilityLevel(Iv,$41474734))*.5
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\0098.mdl",Iv,"chest"))
call SetUnitState(Iv,UNIT_STATE_MANA,0)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),800.,Ii,4,0)
elseif GetSpellAbilityId()==$41594A31 then
if GetWidgetLife(LE)>1 then
call fF(Iv,CE,JS)
else
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"            |cffff0000宠物已经死亡，无法施展|r")
endif
elseif GetSpellAbilityId()==$41594A39 then
if GetWidgetLife(LE)>1 then
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41594A39,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$41594A31,true)
call SetUnitPosition(Iv,GetUnitX(LE),GetUnitY(LE))
call SetUnitAbilityLevel(Iv,$41594A39,1)
call IssuePointOrderById(Iv,851983,GetUnitX(LE),GetUnitY(LE))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(Iv),GetUnitY(Iv)))
set Ii=bk(Iv,0,JS)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550,Ii,1,0)
else
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"            |cffff0000宠物已经死亡，无法施展|r")
endif
elseif GetSpellAbilityId()==$41594A32 then
if GetWidgetLife(LE)>1 then
set Ii=bk(Iv,0,GetUnitAbilityLevel(Iv,$41594A31))
call bv(Iv,Ii,bN(Iv,LE),bO(Iv,LE),275)
call SetUnitPosition(LE,GetUnitX(Iv),GetUnitY(Iv))
call IssuePointOrderById(LE,851983,GetUnitX(Iv),GetUnitY(Iv))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(Iv),GetUnitY(Iv)))
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550,Ii,1,0)
set JJ=XB(GetPlayerId(GetOwningPlayer(Iv)),$65303939,$41353030,4,GetUnitX(Iv),GetUnitY(Iv),0,1)
call IssueImmediateOrderById(JJ,852127)
else
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"            |cffff0000宠物已经死亡，无法施展|r")
endif
elseif GetSpellAbilityId()==$41594A35 then
if GetWidgetLife(LE)>1 then
call fD(Iv)
else
call SetUnitPosition(Iv,GetUnitX(Iv),GetUnitY(Iv))
call DisplayTextToPlayer(GetOwningPlayer(Iv),0,0,"            |cffff0000宠物已经死亡，无法施展|r")
endif
elseif GetSpellAbilityId()==$41595057 or GetSpellAbilityId()==$41595045 or GetSpellAbilityId()==$41595052 or GetSpellAbilityId()==$41595037 then
call ey(Iv,JZ)
elseif GetSpellAbilityId()==$41595051 or GetSpellAbilityId()==$41595039 or GetSpellAbilityId()==$41595038 then
call e6(Iv,JZ)
elseif GetSpellAbilityId()==$41305744 then
call UnitAddItem(Iv,CreateItem($49303053,GetUnitX(Iv),GetUnitY(Iv)))
elseif GetSpellAbilityId()==$4130364E and IsUnitAlly(Iv,Player(8))==true then
call UnitAddItem(Iv,CreateItem($4930324F,GetUnitX(Iv),GetUnitY(Iv)))
elseif GetSpellAbilityId()==$415A5951 then
call fa(Iv,CE)
elseif GetSpellAbilityId()==$415A5931 then
call SetUnitAbilityLevel(Iv,$415A5931,1)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5931,false)
call SetPlayerAbilityAvailable(GetOwningPlayer(Iv),$415A5951,true)
if LoadUnitHandle(Ia,GetHandleId(Iv),$9BF1033F)!=null then
call SetUnitX(Iv,GetUnitX(LoadUnitHandle(Ia,GetHandleId(Iv),$9BF1033F)))
call SetUnitY(Iv,GetUnitY(LoadUnitHandle(Ia,GetHandleId(Iv),$9BF1033F)))
endif
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(Iv),GetUnitY(Iv)))
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),220,bk(Iv,0,GetUnitAbilityLevel(Iv,$415A5951)),1,0)
if GetUnitState(LoadUnitHandle(Ia,GetHandleId(Iv),$9BF1033F),ConvertUnitState(0))>.405 then
call IssueTargetOrderById(Iv,851983,LoadUnitHandle(Ia,GetHandleId(Iv),$9BF1033F))
endif
elseif GetSpellAbilityId()==$415A5957 then
call SaveInteger(Ia,GetHandleId(Iv),$415A5957,0)
elseif GetSpellAbilityId()==$41475951 then
call ch(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41475952 then
call cd(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41475945 then
call cb(Iv,bk(Iv,0,GetUnitAbilityLevel(Iv,$41475945)),25)
elseif GetSpellAbilityId()==$41303353 then
call cb(Iv,bk(Iv,2,GetUnitAbilityLevel(Iv,$41303353)),10)
elseif GetSpellAbilityId()==$41303746 then
if bC(Iv,$6D6C7374)==true or bC(Iv,$73686377)==true then
call dV(Iv,CE,600,bk(Iv,1,GetUnitAbilityLevel(Iv,$41303746))*1.5)
else
call dV(Iv,CE,600,bk(Iv,1,GetUnitAbilityLevel(Iv,$41303746)))
endif
elseif GetSpellAbilityId()==$41304436 then
set Ii=bk(Iv,1,GetUnitAbilityLevel(Iv,$41304436))
call SetUnitState(Iv,UNIT_STATE_LIFE,GetUnitState(Iv,UNIT_STATE_LIFE)+GetUnitState(Iv,UNIT_STATE_MAX_LIFE)*.3)
call PauseUnit(Iv,false)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),1100.,Ii,3,0)
elseif GetSpellAbilityId()==$41304835 then
call dd(Iv,GetUnitAbilityLevel(Iv,$41304835),GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41303750 then
call da(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41436662 then
set Ii=bk(Iv,3,GetUnitAbilityLevel(Iv,$41436662))
// 雷神冠落雷范围范围
if bC(Iv,$6D6C7374)==true or bC(Iv,$49303142)==true then
call bs(Iv,GetUnitX(CE),GetUnitY(CE),440.,Ii,1,0)
else
call bs(Iv,GetUnitX(CE),GetUnitY(CE),220.,Ii*.5,1,0)
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\great_lightning.mdx",CE,"origin"))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(CE),GetUnitY(CE)))
elseif GetSpellAbilityId()==$415A475A then
if GetUnitState(Iv,ConvertUnitState(2))>10 then
set UQ=GetUnitState(Iv,ConvertUnitState(0))
set UR=GetUnitState(Iv,ConvertUnitState(2))
call SetUnitState(Iv,ConvertUnitState(0),UR)
call SetUnitState(Iv,ConvertUnitState(2),UQ)
else
set UQ=GetUnitState(Iv,ConvertUnitState(0))
call SetUnitState(Iv,ConvertUnitState(0),10)
call SetUnitState(Iv,ConvertUnitState(2),UQ)
endif
elseif GetSpellAbilityId()==$41304441 then
call by(Iv,CE)
elseif GetSpellAbilityId()==$415A4651 then
    // 泰山压顶效果
call dr(Iv,GetSpellTargetX(),GetSpellTargetY(),GetUnitState(Iv,ConvertUnitState(1))*.1*I2R(JS),"war3mapImported\\slam.mdx",1)
// elseif GetSpellAbilityId()==$41304741 then

// call dr(Iv,GetSpellTargetX(),GetSpellTargetY(),GetUnitState(Iv,ConvertUnitState(1))*.1*I2R(JS),"war3mapImported\\slam.mdx",1)
elseif GetSpellAbilityId()==$41303632 then
set Ii=bk(Iv,1,JS)
if GetUnitAbilityLevel(Iv,$4130334E)>0 then
set Ii=Ii*1.5
endif
call tN(Iv,GetUnitX(Iv),GetUnitY(Iv),Ii)
elseif GetSpellAbilityId()==$41475957 then
call EXSetUnitMoveType(Iv,16)
elseif GetSpellAbilityId()==$41413057 then
call SaveReal(Ia,GetHandleId(CE),$30314844,2000*I2R(GetUnitAbilityLevel(Iv,$41413057)))
call SaveReal(Ia,GetHandleId(CE),$6864616D,bk(Iv,3,JS))
call UnitRemoveAbility(CE,$41314844)
call UnitAddAbility(CE,$41314844)
call c9(Iv,CE,$41314844,bk(Iv,3,JS))
elseif GetSpellAbilityId()==$41413051 then
set T7=GetSpellTargetX()
set T8=GetSpellTargetY()
call UnitApplyTimedLife(CreateUnit(GetOwningPlayer(Iv),$754D465A,T7,T8,270),$42487765,10)
call c3(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41413052 then
call br(CE,3,60*JS,20)
elseif GetSpellAbilityId()==$41413045 then
call bn(D1,$41413039,45)
elseif GetSpellAbilityId()==$41413046 then
call c7(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41413037 then
call c5(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41303452 then
call rm(Iv,CE,JS)

// 冲步崩拳
elseif GetSpellAbilityId()==$41303846 then
call rk(Iv,JS)
elseif GetSpellAbilityId()==$41314C54 then
if GetUnitState(Iv,ConvertUnitState(2))>=250 then
call SetUnitState(Iv,ConvertUnitState(2),GetUnitState(Iv,ConvertUnitState(2))-250)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),660.,bk(Iv,GetRandomInt(1,3),1),1,0)
endif
if GetUnitState(Iv,ConvertUnitState(2))>=500 then
call SetUnitState(Iv,ConvertUnitState(2),GetUnitState(Iv,ConvertUnitState(2))-500)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),770.,bk(Iv,0,1),1,0)
endif
if GetUnitState(Iv,ConvertUnitState(2))>=1000 then
call SetUnitState(Iv,ConvertUnitState(2),GetUnitState(Iv,ConvertUnitState(2))-1000)
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),880.,bk(Iv,0,3),1,0)
endif
elseif GetSpellAbilityId()==$41514853 then
if IsItemOwned(GetSpellTargetItem())==true then
if GetItemTypeId(GetSpellTargetItem())==$6573617A then
    //如果物品类型是七星灯一级 移除相应物品 然后添加七星灯二级
call RemoveItem(GetSpellTargetItem())
call UnitAddItem(Iv,CreateItem($6776736D,0,0))
elseif GetItemTypeId(GetSpellTargetItem())==$6776736D then
     //如果物品类型是七星灯二级 移除相应物品 然后添加七星灯三级
call RemoveItem(GetSpellTargetItem())
call UnitAddItem(Iv,CreateItem($7372746C,0,0))
elseif GetItemTypeId(GetSpellTargetItem())==$6C6E726E then
    // 如果物品是雌雄对剑lnrn，移除相应物品 然后添加雌雄I03B
call RemoveItem(GetSpellTargetItem())
call UnitAddItem(Iv,CreateItem($49303342,0,0))
// 真龙铠甲
elseif GetItemTypeId(GetSpellTargetItem())=='it0q' then
if GetUnitAbilityLevel(Iv, $41304641) > 0 or bC(Iv,$69743067) then
    // 如果拥有瞬移，则强化成功概率为装备等级：100- level*200/ ((200 + level)*2)
set FZ=R2I(I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E8))*2/(200+I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E8))*2)*100)
else
     // 否则，则强化成功概率为装备等级：100- level*500/ ((20 + level)*5)
set FZ=R2I(I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E8))*5/(20+I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E8))*5)*100)
endif
if GetRandomInt(0,100)>FZ then

// 如果有幸运币，则将幸运币的次数+1
if bC(Iv,$69743067) then
call SetItemCharges(aj(Iv, $69743067), GetItemCharges(aj(Iv, $69743067)) +1)
// 如果幸运币次数大于4，则摧毁幸运币
if GetItemCharges(aj(Iv, $69743067)) >=4 then
    call RemoveItem(aj(GetTriggerUnit(),$69743067))
    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cff808000幸运币承受不住这份因果，碎裂了")
endif
endif
call SaveInteger(Ia, GetHandleId(Iv), $130B62E8, LoadInteger(Ia, GetHandleId(Iv), $130B62E8) +1)
call SetUnitState(Iv,UNIT_STATE_MAX_LIFE,GetUnitState(Iv,UNIT_STATE_MAX_LIFE)+3000)
call SetUnitState(Iv,ConvertUnitState(32),GetUnitState(Iv,ConvertUnitState(32))+7)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00恭喜你，你成功能将装备强化！|r")
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffffcc00当前强化层数:" + I2S( LoadInteger(Ia, GetHandleId(Iv), $130B62E8)))
else
    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000强化失败！|r")

endif

// 神鬼天惊
elseif GetItemTypeId(GetSpellTargetItem())=='it0n' then
if GetUnitAbilityLevel(Iv, $41304641) > 0 or bC(Iv,$69743067) then
    // 如果拥有瞬移，则强化成功概率为装备等级：100- level*200/ ((200 + level)*2)
set FZ=R2I(I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E7))*2/(200+I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E7))*2)*100)
else
     // 否则，则强化成功概率为装备等级：100- level*500/ ((20 + level)*5)
set FZ=R2I(I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E7))*5/(20+I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E7))*5)*100)
endif
if GetRandomInt(0,100)>FZ then

// 如果有幸运币，则将幸运币的次数+1
if bC(Iv,$69743067) then
call SetItemCharges(aj(Iv, $69743067), GetItemCharges(aj(Iv, $69743067)) +1)
// 如果幸运币次数大于4，则摧毁幸运币
if GetItemCharges(aj(Iv, $69743067)) >=4 then
    call RemoveItem(aj(GetTriggerUnit(),$69743067))
    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cff808000幸运币承受不住这份因果，碎裂了")
endif
endif
call SaveInteger(Ia, GetHandleId(Iv), $130B62E7, LoadInteger(Ia, GetHandleId(Iv), $130B62E7) +1)
call SetUnitState(Iv,UNIT_STATE_MAX_LIFE,GetUnitState(Iv,UNIT_STATE_MAX_LIFE)+2000)
call SetUnitState(Iv,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(18))+60)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00恭喜你，你成功能将装备强化！|r")
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffffcc00当前强化层数:" + I2S( LoadInteger(Ia, GetHandleId(Iv), $130B62E7)))
else
    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000强化失败！|r")

endif

// 自然魂珠
elseif GetItemTypeId(GetSpellTargetItem())=='it0k' then
if GetUnitAbilityLevel(Iv, $41304641) > 0 or bC(Iv,$69743067) then
    // 如果拥有瞬移，则强化成功概率为装备等级：100- level*200/ ((200 + level)*2)
set FZ=R2I(I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E6))*2/(200+I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E6))*2)*100)
else
     // 否则，则强化成功概率为装备等级：100- level*500/ ((20 + level)*5)
set FZ=R2I(I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E6))*5/(20+I2R(LoadInteger(Ia, GetHandleId(Iv), $130B62E6))*5)*100)
endif
if GetRandomInt(0,100)>FZ then

// 如果有幸运币，则将幸运币的次数+1
if bC(Iv,$69743067) then
call SetItemCharges(aj(Iv, $69743067), GetItemCharges(aj(Iv, $69743067)) +1)
// 如果幸运币次数大于4，则摧毁幸运币
if GetItemCharges(aj(Iv, $69743067)) >=4 then
    call RemoveItem(aj(GetTriggerUnit(),$69743067))
    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cff808000幸运币承受不住这份因果，碎裂了")
endif
endif
call SaveInteger(Ia, GetHandleId(Iv), $130B62E6, LoadInteger(Ia, GetHandleId(Iv), $130B62E6) +1)
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00恭喜你，你成功能将装备强化！|r")
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, "|cffffcc00当前强化层数:" + I2S( LoadInteger(Ia, GetHandleId(Iv), $130B62E6)))
else
    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000强化失败！|r")

endif


// 自然魂珠强化结束
elseif GetItemCharges(GetSpellTargetItem())<200 or GetUnitAbilityLevel(Iv,$41304641)>0 or true then
    // 如果被强化的物品等级小于15或者拥有技能瞬间则执行
if GetItemTypeId(GetSpellTargetItem())==$49303233 or GetItemTypeId(GetSpellTargetItem())==$676F626D or GetItemTypeId(GetSpellTargetItem())==$666C6167 or GetItemTypeId(GetSpellTargetItem())==$49303342 or GetItemTypeId(GetSpellTargetItem())==$7372746C or GetItemTypeId(GetSpellTargetItem())==$6A64726E or GetItemTypeId(GetSpellTargetItem())==$6D6E7366 or GetItemTypeId(GetSpellTargetItem())==$49303251 or GetItemTypeId(GetSpellTargetItem())==$6D6C7374 or GetItemTypeId(GetSpellTargetItem())==$6D67746B or GetItemTypeId(GetSpellTargetItem())==$49303344 or GetItemTypeId(GetSpellTargetItem())==$73747067 or GetItemTypeId(GetSpellTargetItem())==$6F636F72 or GetItemTypeId(GetSpellTargetItem())==$49303147 or GetItemTypeId(GetSpellTargetItem())=='it0z' then
//如果被强化的物品是蚩尤魔刀、亮银强、李广之弓、雌雄、七星灯终级srtl（7372746C）、轻钢、方天画戟、斩蛇、轩辕、金箍棒、后羿射日、水神戟、盘古斧、方天鬼戟
if GetUnitAbilityLevel(Iv, $41304641) > 0 or bC(Iv,$69743067) then
    // 如果拥有瞬移，则强化成功概率为装备等级：100- level*200/ ((200 + level)*2)
set FZ=R2I(I2R(GetItemCharges(GetSpellTargetItem()))*2/(200+I2R(GetItemCharges(GetSpellTargetItem()))*2)*100)
else
     // 否则，则强化成功概率为装备等级：100- level*500/ ((20 + level)*5)
set FZ=R2I(I2R(GetItemCharges(GetSpellTargetItem()))*5/(20+I2R(GetItemCharges(GetSpellTargetItem()))*5)*100)
endif
if GetRandomInt(0,100)>FZ then
    // 成功和提示
call SetItemCharges(GetSpellTargetItem(),GetItemCharges(GetSpellTargetItem())+1)
// 如果有幸运币，则将幸运币的次数+1
if bC(Iv,$69743067) then
call SetItemCharges(aj(Iv, $69743067), GetItemCharges(aj(Iv, $69743067)) +1)
// 如果幸运币次数大于4，则摧毁幸运币
if GetItemCharges(aj(Iv, $69743067)) >=4 then

    call RemoveItem(aj(GetTriggerUnit(),$69743067))
    //    call DisplayTextToPlayer(GetOwningPlayer(Ih), 0, 0, "|Cff00ff00枪出如龙！造成伤害：" + "物品次数--" + I2S(GetItemCharges(bW(Ih, $676F626D))) + "实际伤害--" + R2S(bk(Ih, 2, 2) * (1. + GetItemCharges(bW(Ih, $676F626D)) * .4) ))

    call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|Cff808000幸运币承受不住这份因果，碎裂了")

endif
endif
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00恭喜你，你成功能将装备强化！|r")
if GetItemTypeId(GetSpellTargetItem())!=$7372746C  then
    // 如果被强化的物品不是七星灯，则基础攻击+100
call SetUnitState(Iv,ConvertUnitState(18),GetUnitState(Iv,ConvertUnitState(18))+120)
endif
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000强化失败！|r")
endif
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffff0000无法强化！|r")
endif
endif
endif
elseif GetSpellAbilityId()==$4155696E then
    // 伏羲琴技能触发器
set FZ=-5
set T7=GetSpellTargetX()
set T8=GetSpellTargetY()
loop
exitwhen FZ>5
set UQ=T7+I2R(FZ)*100*Cos(45*bj_DEGTORAD)
set UR=T8+I2R(FZ)*100*Sin(45*bj_DEGTORAD)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl",UQ,UR))
set UQ=T7+I2R(FZ)*100*Cos(135*bj_DEGTORAD)
set UR=T8+I2R(FZ)*100*Sin(135*bj_DEGTORAD)
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl",UQ,UR))
set FZ=FZ+1
endloop
call bs(Iv,T7,T8,550,bk(Iv,1,GetUnitAbilityLevel(Iv,$4155696E)),3,2)
elseif GetSpellAbilityId()==$41304638 then
call bs(Iv,GetUnitX(Iv),GetUnitY(Iv),550.,bk(Iv,1,JS),5,0)
elseif GetSpellAbilityId()==$41497365 then
call bs(Iv,GetSpellTargetX(),GetSpellTargetY(),250.,bk(Iv,3,1)*5,2,0)
elseif GetSpellAbilityId()==$41564A57 then
call sO(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41564A45 then
call sM(Iv,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41564A51 then
if GetUnitAbilityLevel(CE,$41304644)>0 then
call SaveInteger(Ia,GetHandleId(Iv),$41564A51,LoadInteger(Ia,GetHandleId(Iv),$41564A51)+1)
else
call UnitRemoveAbility(LoadUnitHandle(Ia,GetHandleId(Iv),$41564A55),$41304644)
call UnitAddAbility(CE,$41304644)
call SaveUnitHandle(Ia,GetHandleId(Iv),$41564A55,CE)
call SaveInteger(Ia,GetHandleId(Iv),$41564A51,0)
endif
if GetRandomInt(1,4)==4 then
call UnitDamageTarget(Iv,CE,bk(Iv,2,JS)*4,true,false,I,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Iv,CE,bk(Iv,2,JS)*2,true,false,I,DAMAGE_TYPE_ENHANCED,WEAPON_TYPE_WHOKNOWS)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedamissileDeath.mdl",CE,"origin"))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl",GetUnitX(Iv),GetUnitY(Iv)))
call SetUnitX(Iv,GetUnitX(CE))
call SetUnitY(Iv,GetUnitY(CE))
elseif GetSpellAbilityId()==$41584351 then
call fT(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41584357 then
call fS(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41584346 then
call fQ(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41304641 then
call SetUnitX(Iv,RMinBJ(RMaxBJ(GetSpellTargetX()*1.,QJ),QK))
call SetUnitY(Iv,RMinBJ(RMaxBJ(GetSpellTargetY()*1.,QM),QN))
elseif GetSpellAbilityId()==$415A4351 then
call sI(Iv,JS,GetSpellTargetX(),GetSpellTargetY())
// 剑圣Q
elseif GetSpellAbilityId()==$414A5251 then
call ct(Iv,CE,JS)
// 剑圣W
elseif GetSpellAbilityId()==$414A5257 then
call cq(Iv,CE,JS)
// 剑圣E
elseif GetSpellAbilityId()==$414A5245 then
call cn(Iv,CE,JS)
// 剑圣R
elseif GetSpellAbilityId()==$414A5252 then
call ck(Iv,CE,JS)

elseif GetSpellAbilityId()==$41303455 then
if GetUnitAbilityLevel(Iv,$41303352)>0 then
call UnitDamageTarget(Iv,CE,bk(Iv,3,JS+3),false,false,K,N,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Iv,CE,bk(Iv,3,JS),false,false,K,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
endif
elseif GetSpellAbilityId()==$41415345 then
call cJ(Iv,CE,bk(Iv,0,JS))
elseif GetSpellAbilityId()==$41415352 then
call cH(Iv)
elseif GetSpellAbilityId()==$4130355A then
call db(Iv)
elseif GetSpellAbilityId()==$41303351 then
call fc(Iv,bk(Iv,3,JS)*.04,GetSpellTargetX(),GetSpellTargetY())
elseif GetSpellAbilityId()==$41303649 then
set Ii=bk(Iv,3,JS)
if bC(Iv,$6D6C7374)==true or bC(Iv,$73747067)==true then
call bs(Iv,GetUnitX(CE),GetUnitY(CE),380.,Ii*1.3,4,0)
else
call bs(Iv,GetUnitX(CE),GetUnitY(CE),300.,Ii,4,0)
endif
elseif GetSpellAbilityId()==$414E736F then
if IsUnitAlly(Iv,Player(8)) then
call UnitDamageTarget(Iv,CE,bk(Iv,3,JS),false,false,K,N,WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(Iv,CE,I2R(GetHeroInt(Iv,true)*JS),false,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_FIRE,WEAPON_TYPE_WHOKNOWS)
endif
elseif GetSpellAbilityId()==$4130364A then
call UnitDamageTarget(Iv,CE,bk(Iv,3,JS),false,false,K,N,WEAPON_TYPE_WHOKNOWS)
elseif GetSpellAbilityId()==$41485A52 then
call dT(Iv)
elseif GetSpellAbilityId()==$41575131 then
if GetSpellTargetUnit()!=null then
if IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(GetSpellTargetUnit()))==true and IsUnitType(GetSpellTargetUnit(),UNIT_TYPE_STRUCTURE)==false and GetUnitAbilityLevel(GetSpellTargetUnit(),$4176756C)<1 then
call c0(GetTriggerUnit(),GetSpellTargetUnit(),bk(Iv,0,JS))
else
call c0(GetTriggerUnit(),GetSpellTargetUnit(),0)
endif
else
call c1(GetTriggerUnit(),GetSpellTargetItem(),0)
endif
elseif GetSpellAbilityId()==$41575132 then
call SetUnitTimeScale(GetTriggerUnit(),3.)
elseif GetSpellAbilityId()==$41575133 then
call cy(GetTriggerUnit())
endif
if GetUnitTypeId(CE)==$48616E74 and GetUnitTypeId(Iv)!=$48616E74 then
call SetUnitPathing(CE,false)
call SetUnitPosition(CE,-1174.,-5055.)
call SetUnitPathing(CE,true)
endif
if GetUnitTypeId(Iv)==$4E423035 or GetUnitTypeId(Iv)==$4E423030 then
call fO(Iv)
endif
if Ii>0 then
endif
endif
set Iv=null
set CE=null
set LQ=null
set I2=null
set Pr=null

endfunction


// 释放技能后摇结束触发
function shifa_init takes nothing returns nothing
local integer CC=0
set trig_shifa=CreateTrigger()
loop
exitwhen CC>14
call TriggerRegisterPlayerUnitEvent(trig_shifa,Player(CC),EVENT_PLAYER_UNIT_SPELL_FINISH,null)
set CC=CC+1
endloop
call TriggerAddAction(trig_shifa,function shifa_finish_action)
endfunction
// 攻击前摇事件
function attack_event takes nothing returns nothing
local unit Iv=GetAttacker()
local unit CE=GetAttackedUnitBJ()
// 双剑被动计数
if GetUnitAbilityLevel(Iv, 'Ab4f') >0 then

call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cff00ff00双剑被动+1|r")
// 卡牌骗术计数
if GetUnitAbilityLevel(Iv,$41623076) > 0 then
call SaveInteger(Ia,GetHandleId(Iv),$41623076,LoadInteger(Ia,GetHandleId(Iv),$41623076)+1)
endif
// 夺命枪计数
if GetUnitAbilityLevel(Iv,$41594C35) > 0 then
call SaveInteger(Ia,GetHandleId(Iv),$41594C35,LoadInteger(Ia,GetHandleId(Iv),$41594C35)+1)
endif
// 碎瓜娃计数
if GetUnitAbilityLevel(Iv,$41575135) > 0 then
call SaveInteger(Ia,GetHandleId(Iv),$41575135,LoadInteger(Ia,GetHandleId(Iv),$41575135)+1)
endif
// 风激电骇计数+1 
if GetUnitAbilityLevel(Iv,'Ab3y') > 0 then
call SaveInteger(Ia, GetHandleId(CE), 103, LoadInteger(Ia, GetHandleId(CE), 103) +1)
endif
call UnitDamageTarget(Iv, CE, GetUnitState(Iv, ConvertUnitState(18)), true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)

endif
endfunction
function attack_init takes nothing returns nothing
set attack_trig=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(attack_trig, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(attack_trig, function attack_event)
endfunction

// 释放技能后摇开始触发
function tP takes nothing returns nothing
local integer CC=0
set T4=CreateTrigger()
loop
exitwhen CC>14
call TriggerRegisterPlayerUnitEvent(T4,Player(CC),EVENT_PLAYER_UNIT_SPELL_EFFECT,null)
set CC=CC+1
endloop
call TriggerAddAction(T4,function tO)
endfunction
function tQ takes nothing returns nothing
endfunction
function tR takes nothing returns nothing
if RequestExtraBooleanData(50,GetOwningPlayer(GetTriggerUnit()),null,null,false,0,0,0)==true and GetUnitAbilityLevel(GetTriggerUnit(),$41304657)>0 or GetUnitAbilityLevel(GetTriggerUnit(),$4130464E)>0 then
if XR(GetTriggerUnit(),GetSpellAbilityId(),1)>=1. then
call XV(GetTriggerUnit(),GetSpellAbilityId(),1,XR(GetTriggerUnit(),GetSpellAbilityId(),1)*.5)
else
endif
else
    // 自然套CD40%
if GetUnitAbilityLevel(GetTriggerUnit(),$4130444D)>0 then
if XR(GetTriggerUnit(),GetSpellAbilityId(),1)>=2. then
call XV(GetTriggerUnit(),GetSpellAbilityId(),1,XR(GetTriggerUnit(),GetSpellAbilityId(),1)*.6)
else
endif
else
// if GetUnitAbilityLevel(GetTriggerUnit(),$4130464E)>0 then
// if XR(GetTriggerUnit(),GetSpellAbilityId(),1)>=2. then
// call XV(GetTriggerUnit(),GetSpellAbilityId(),1,XR(GetTriggerUnit(),GetSpellAbilityId(),1)*.7)
// else
// endif
// else
// endif
endif
endif
// 青囊书、孙子冰法20%CD
if GetUnitAbilityLevel(GetTriggerUnit(),$41496862)>0 or GetUnitAbilityLevel(GetTriggerUnit(),$41507361)>0 then
call XV(GetTriggerUnit(),GetSpellAbilityId(),1,XR(GetTriggerUnit(),GetSpellAbilityId(),1)*.85)
else
endif
// 极八蛇矛20%CD
if GetUnitAbilityLevel(GetTriggerUnit(),$41303042)>0  then
call XV(GetTriggerUnit(),GetSpellAbilityId(),1,XR(GetTriggerUnit(),GetSpellAbilityId(),1)*.8)
else
endif
// 烛龙刀20%CD
if GetUnitAbilityLevel(GetTriggerUnit(),$41623031)>0  then
call XV(GetTriggerUnit(),GetSpellAbilityId(),1,XR(GetTriggerUnit(),GetSpellAbilityId(),1)*.8)
else
endif
// 玄武15%cd
if GetUnitAbilityLevel(GetTriggerUnit(),$4130345A)>0  then
call XV(GetTriggerUnit(),GetSpellAbilityId(),1,XR(GetTriggerUnit(),GetSpellAbilityId(),1)*.85)
else
endif
endfunction
function tS takes nothing returns nothing
set K4=CreateTrigger()
call TriggerAddAction(K4,function tR)
endfunction
function tT takes nothing returns boolean
local integer FZ=0
local integer FN=852008
loop
exitwhen FZ>5
if GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),FZ))==$6D6C7374 or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),FZ))==$6D6F6474 or GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),FZ))==$6F66726F and GetIssuedOrderId()==FN+FZ then
call UnitRemoveBuffs(GetTriggerUnit(),false,true)
endif
set FZ=FZ+1
endloop
return false
endfunction
function tV takes nothing returns nothing
set Kz=CreateTrigger()
call TriggerAddCondition(Kz,Condition(function tT))
endfunction
function tW takes nothing returns boolean
local integer KK=1
local integer KL=0
local item O8
local integer FN=GetPlayerId(DzGetTriggerKeyPlayer())+1
local integer SM=1
local integer SL=DzGetTriggerKey()
call DzSyncData("id",I2S(FN))
call DzSyncData("dzkey",I2S(SL))
if KN[FN]==null then
loop
exitwhen KL>2
set KN[KL*10+FN]=CreateUnit(Player(15),$4E57504C,12545.,-8200.,0)
set KL=KL+1
endloop
endif
if ID[FN+100]==SL and GetUnitState(Ib[FN],UNIT_STATE_LIFE)>.405 then
set Hs[FN]=true
loop
exitwhen SM>3
loop
exitwhen KK>6
set O8=UnitItemInSlot(KN[10+FN],KK-1)
if GetItemLevel(O8)!=111 and GetItemTypeId(O8)!=$49303230 and GetItemTypeId(O8)!=$4930315A and GetItemTypeId(O8)!=$49303157 then
call UnitAddItem(KN[20+FN],O8)
endif
set O8=UnitItemInSlot(KN[FN],KK-1)
if GetItemLevel(O8)!=111 and GetItemTypeId(O8)!=$49303230 and GetItemTypeId(O8)!=$4930315A and GetItemTypeId(O8)!=$49303157 then
call UnitAddItem(KN[10+FN],O8)
endif
set O8=UnitItemInSlot(Ib[FN],KK-1)
if GetItemLevel(O8)!=111 and GetItemTypeId(O8)!=$49303230 and GetItemTypeId(O8)!=$4930315A and GetItemTypeId(O8)!=$49303157 then
call UnitAddItem(KN[FN],O8)
endif
set KK=KK+1
endloop
set KK=1
loop
exitwhen KK>6
set O8=UnitItemInSlot(KN[20+FN],KK-1)
call UnitAddItem(Ib[FN],O8)
set KK=KK+1
endloop
set SM=SM+1
endloop
set Hs[FN]=false
elseif ID[FN]==SL then
if GetUnitState(Ib[FN],UNIT_STATE_LIFE)>.405 then
call SetUnitAnimation(Ib[FN],"stand")
set Hs[FN]=true
loop
exitwhen KK>6
set O8=UnitItemInSlot(KN[10+FN],KK-1)
if GetItemLevel(O8)!=111 then
call UnitAddItem(KN[20+FN],O8)
endif
set O8=UnitItemInSlot(KN[FN],KK-1)
if GetItemLevel(O8)!=111 then
call UnitAddItem(KN[10+FN],O8)
endif
set O8=UnitItemInSlot(Ib[FN],KK-1)
if GetItemLevel(O8)!=111 then
call UnitAddItem(KN[FN],O8)
endif
set KK=KK+1
endloop
set KK=1
loop
exitwhen KK>6
set O8=UnitItemInSlot(KN[20+FN],KK-1)
call UnitAddItem(Ib[FN],O8)
set KK=KK+1
endloop
set Hs[FN]=false
endif
endif
set O8=null
return false
endfunction
function tX takes nothing returns nothing
set SK=CreateTrigger()
call TriggerAddCondition(SK,Condition(function tW))
endfunction
function tY takes nothing returns nothing
local integer SN
local integer Jk
set H9[777]=0
set H9[H9[777]]=27
set IB[H9[777]]="ESC"
set IC[27]="ESC"
set H9[777]=H9[777]+1
set H9[H9[777]]=9
set IB[H9[777]]="TAB"
set IC[9]="TAB"
set H9[777]=H9[777]+1
set H9[H9[777]]=17
set IB[H9[777]]="CTRL"
set IC[17]="CTRL"
set H9[777]=H9[777]+1
set H9[H9[777]]=10
set IB[H9[777]]="SHIFT"
set IC[10]="SHIFT"
set H9[777]=H9[777]+1
set H9[H9[777]]=18
set IB[H9[777]]="ALT"
set IC[18]="ALT"
set H9[777]=H9[777]+1
set H9[H9[777]]=90
set IB[H9[777]]="Z"
set IC[90]="Z"
set H9[777]=H9[777]+1
set H9[H9[777]]=88
set IB[H9[777]]="X"
set IC[88]="X"
set H9[777]=H9[777]+1
set H9[H9[777]]=83
set IB[H9[777]]="S"
set IC[83]="S"
set H9[777]=H9[777]+1
set H9[H9[777]]=72
set IB[H9[777]]="H"
set IC[72]="H"
set H9[777]=H9[777]+1
set H9[H9[777]]=113
set IB[H9[777]]="F2"
set IC[113]="F2"
set H9[777]=H9[777]+1
set SN=0
loop
exitwhen SN>H9[777]
call V3(SK,1,H9[SN])
set IB[77]=IB[77]+IB[SN]+" "
set SN=SN+1
endloop
set Jk=1
loop
exitwhen Jk>7
set ID[Jk]=27
set Jk=Jk+1
endloop
endfunction
function tZ takes nothing returns nothing
set Ie=CreateTrigger()
call TriggerAddAction(Ie,function tY)
endfunction
function ta takes nothing returns nothing
local integer Oe
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cffff0000开始修改背包"+""+"|r")
set ID[77]=ID[GetConvertedPlayerId(GetTriggerPlayer())]
set Oe=0
loop
exitwhen Oe>H9[777]
if SubString(StringCase(GetEventPlayerChatString(),true),2,7)==IB[Oe] then
if true then
set ID[GetConvertedPlayerId(GetTriggerPlayer())]=H9[Oe]
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cff00ff00成设置背包快捷键为:"+IB[Oe]+" 键|r")
set ID[1000]=GetConvertedPlayerId(GetTriggerPlayer())
call TriggerExecute(SO)
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cffff0000输入的信息有误!!! 和一键切包冲突"+""+"|r")
return
endif
else
endif
set Oe=Oe+1
endloop
if ID[77]==ID[GetConvertedPlayerId(GetTriggerPlayer())] then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cffff0000输入的信息有误!!!只支持: |r|cff00ff00"+IB[77]+"|r")
else
endif
endfunction
function tb takes nothing returns nothing
set Jp=CreateTrigger()
call TriggerAddAction(Jp,function ta)
endfunction
function tc takes nothing returns nothing
local integer Oe
set ID[77]=ID[GetConvertedPlayerId(GetTriggerPlayer())+100]
set Oe=0
loop
exitwhen Oe>H9[777]
if SubString(StringCase(GetEventPlayerChatString(),true),2,7)==IB[Oe] then
if ID[GetConvertedPlayerId(GetTriggerPlayer())]!=H9[Oe] then
set ID[GetConvertedPlayerId(GetTriggerPlayer())+100]=H9[Oe]
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cff00ff00成设置一键切包快捷键为:"+IB[Oe]+" 键|r")
set ID[1000]=GetConvertedPlayerId(GetTriggerPlayer())
call TriggerExecute(SO)
else
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cffff0000输入的信息有误!!! 和背包快捷键冲突"+""+"|r")
return
endif
else
endif
set Oe=Oe+1
endloop
if ID[77]==ID[GetConvertedPlayerId(GetTriggerPlayer())+100] then
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cffff0000输入的信息有误或是和背包快捷键冲突!!!只支持: |r|cff00ff00"+IB[77]+"|r")
else
endif
endfunction
function td takes nothing returns nothing
set Jq=CreateTrigger()
call TriggerAddAction(Jq,function tc)
endfunction
function te takes nothing returns nothing
local integer FZ=ID[1000]
call WQ(ConvertedPlayer(FZ),"BB",ID[FZ])
call WQ(ConvertedPlayer(FZ),"KQ",ID[FZ+100])
call DisplayTextToPlayer(ConvertedPlayer(FZ),0,0,"保存键值"+I2S(ID[FZ]))
call DisplayTextToPlayer(ConvertedPlayer(FZ),0,0,"保存键值"+I2S(ID[FZ+100]))
endfunction
function tf takes nothing returns nothing
set SO=CreateTrigger()
call TriggerAddAction(SO,function te)
endfunction
function tg takes nothing returns nothing
set IE[GetConvertedPlayerId(GetTriggerPlayer())]=S2I(SubString(GetEventPlayerChatString(),3,4))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cffffcc00修改背包数量为 |cff00ff00"+I2S(IE[GetConvertedPlayerId(GetTriggerPlayer())]))
endfunction
function th takes nothing returns nothing
set Jo=CreateTrigger()
call TriggerRegisterPlayerChatEvent(Jo, Player(0), "-pb", false)
call TriggerAddAction(Jo,function tg)
endfunction
function ti takes nothing returns nothing
if GetLocalPlayer()==DzGetTriggerKeyPlayer() then
call PanCameraToTimed(GetUnitX(Ib[GetPlayerId(DzGetTriggerKeyPlayer())+1]),GetUnitY(Ib[GetPlayerId(DzGetTriggerKeyPlayer())+1]),0)
call SetCameraQuickPosition(GetUnitX(Ib[GetPlayerId(DzGetTriggerKeyPlayer())+1]),GetUnitY(Ib[GetPlayerId(DzGetTriggerKeyPlayer())+1]))
else
endif
endfunction
function tj takes nothing returns nothing
set Jy=CreateTrigger()
call TriggerAddAction(Jy,function ti)
endfunction
function tk takes nothing returns nothing
call AdjustPlayerStateBJ(500,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function tl takes nothing returns nothing
local integer Jk
call SetUnitVertexColorBJ(EP,100,100,100,45.)
call ForForce(HQ,function tk)
if IsUnitHiddenBJ(Da)==true then
call RemoveUnit(Da)
else
endif
if IN==true then
set ON[17]=EV
set ON[22]=EU
else
endif
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"游戏介绍","|cff0080FF三国后期，魏国大举进攻蜀国；剑阁是蜀国最后的屏障，一旦失守，蜀国就将灭亡！你需要成功防守敌人的26波进攻，并且战胜最后的BOSS，才能获得胜利。每一波怪到最后都会出现一个敌方的主将（BOSS），需要消灭主将","ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"游戏群","|cff0080FF五虎将游戏群：93060345
QQ：5476802","ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"五行生克","|cff0080FF游戏中，掌握五行生克关系非常重要！
五行相生之规律:木生火,火生土,土生金,金生水,水生木。
五行相克之规律:木克土,土克水,水克火,火克金,金克木。
金系:在生克方面表现不突出，适应性强，没有突出的优点。
木","war3mapImported\\wx5.BLP")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"专署介绍","姜维：可用除斧外所有武器
马岱，赵统，关凤：可用除斧外所有近战武器
赵广：可用弓类武器
祝融夫人：可用弓类武器，部分近战武器
马谡，陆逊，黄月英，蒋琬：可用扇，杖类武器
木鹿大王：可用弓类，斧类武器
夏�","ReplaceableTextures\\CommandButtons\\BTNNecromancerMaster.blp")
// call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"历史","|cffffcc00历史|n|cffffcc00","ReplaceableTextures\\CommandButtons\\BTNSpellBookBLS.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED,"上古十神器","|cffffcc00上古十大神器分别为：轩辕剑、东皇钟、盘古斧、炼妖壶、昊天塔、伏羲琴、神农鼎、崆峒印、昆仑镜和女娲石|n在难度八以上不会掉落","ReplaceableTextures\\CommandButtons\\BTNSpellBookBLS.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "装备打造", "牛神处能造的装备有：后羿射日弓、方天鬼戟、极八蛇矛、鸩魔龙刀、玄龙偃月刀、苍龙偃月刀、盘龙偃月刀、烛龙偃月刀、霸龙偃月刀、器魂（青龙）、自然之力、神鬼天惊","ReplaceableTextures\\CommandButtons\\BTNSpellBookBLS.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "精怪横行", "在剑阁外有项羽之魂、刑天魔神、红黑夔牛、祝融之魂、蜘蛛罔象、八岐化蛇、魑魅魍魉、黑水玄蛇、蚩尤魔神、霸王项羽等鬼怪妖魔肆虐人间","ReplaceableTextures\\CommandButtons\\BTNSpellBookBLS.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "组成套装", "青龙套：青龙铠甲+青龙战靴|n
白虎套：白虎头巾+白虎铠甲+白虎护手|n
朱雀套：朱雀护腕+朱雀羽衣+朱雀头冠|n
玄武套：玄武大盾+玄武战甲+玄武头盔|n
魔神套：魔神之翼+魔魂盔+魔神甲|n
自然套：水神戟+火神盾+风神衣+雷神冠|n
鬼神套：方天鬼戟+雁翎金甲+幽冥赤兔|n
蚩尤套：蚩尤头盔+蚩尤铠甲+蚩尤护手+蚩尤战靴|n
霸王套：霸王铠+霸王靴+霸王盔|n
玄铁套：玄铁手戟+玄铁腰带|n", "ReplaceableTextures\\CommandButtons\\BTNSpellBookBLS.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "核心机制", "攻击等级：在拥有攻击等级的情况下，角色攻击造成的伤害为面板伤害*攻击等级减去敌人的护甲等减伤。不同装备的攻击等级乘法计算，50攻击等级和30攻击等级造成的伤害就是1.5*1.3
法术强度：在拥有法术强度等级的情况下，角色造成的法术实际伤害是=面板伤害*法术强度，散件的法术强度加法计算，套装的法术强度乘法计算，攻击科技可以提升法术强度
", "ReplaceableTextures\\CommandButtons\\BTNSpellBookBLS.blp")
// 主要任务
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"奋勇杀敌！","郭淮死后，任务才出现。玩家中最先杀死1000个敌人（敌将算10个），会获得30属性+3万金钱奖励。","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"假传圣旨！","张辽波以后，任务出现。因为天气的原因，大雨骤降，栈道断绝，蜀国的粮草供应不及。李严假传圣旨召孔明回师。","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"修真","击杀圣兽以后，会得到兽魂。再到复活点找大男人（牛神）完成任务。修真技能伤害跟使用次数有关，需要经常使用才能提升。","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"五虎将","杀死BOOS后会爆虎符，拿虎符走到孔明就能得到五虎官职(跟交玉玺一样)。徐晃必爆。（五虎将特点：增加一被动回复技能，增加50%生命、魔法、攻击和移动速度）切记不可以在得到五虎将技能时再去找孔明，否则后果自负。","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"孔明清包","需难度四以上,任意玩家输入QB,可清孔明身上装备。","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "游戏命令","所有玩家输入:-Q  即可清除地上物品,慎用!!!每清除一个物品可以获得100*游戏波数的金钱奖励
红色玩家输入:-TR+玩家编号  即可踢除玩家,慎用!!!
任意玩家输入:-JHYX+玩家编号  即可与对方交换英雄","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"新增佣兵","*增加诸葛弩,攻击强劲,射程远,能够搭乘单位,当搭乘南蛮苦工操作时,将会提升战斗能力.(诸葛瞻及黄月英搭乘战斗力提升的更多)
|n*增加弓骑兵,需要开启新城（必须保住孟达不死）,在新城军需官处购买马匹,安全带回剑阁,再买�","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"难度一作弊模式","[难度一]任意玩家输入：我要作弊  即可开启作弊模式
|n输入：我要钱   增加100000金钱
|n输入：我要木   增加1000木头
|n输入：一个英雄不够用   开启多英雄选择模式（游戏开始120秒后无作用）","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
// 增加任务说明
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"保护百姓","*我大汉乃仁义之师，一定要保护好在魏国进攻下逃难的百姓，每保护一个百姓都会有一定的奖励","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED,"督粮运粮","*李言奉后主之令支持北伐粮草补给，需要一位大将前往运粮并保护粮草成功抵达间隔，有一人对此非常忧虑……","ReplaceableTextures\\CommandButtons\\BTNAmbush.blp")
if GetPlayerSlotState(Player(0))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(Player(0))==MAP_CONTROL_USER then
call aw(true)
else
return
endif
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00正在选择游戏模式，请稍等。|r")
call DialogSetMessage(Fg,"请选择游戏难度: 
")
call DialogAddButtonBJ(Fg,"|cff80FFFF无名小卒（轻松）")
set SP[1]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(Fg,"|Cff00ff00初入江湖（普通）")
set SP[2]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(Fg,"|cffffdead鼎足三分（规则）")
set SP[3]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(Fg,"|Cffff0000纵横天下（困难）")
set SP[4]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(Fg,"|Cffff0000逆天行事（极难）")
set SP[5]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(Fg,"|CffB366FF地狱难度（谨慎选择）")
set SP[6]=GetLastCreatedButtonBJ()
if DzAPI_Map_HasMallItem(Player(0),"ZGGG")==true then
call XZ(EE,$41304B32,$42304C42)
else
endif
if RequestExtraBooleanData(50,Player(0),null,null,false,0,0,0)==true or DzAPI_Map_HasMallItem(Player(0),"ZGGG")==true or DzAPI_Map_HasMallItem(Player(0),"ZGGM")==true or DzAPI_Map_HasMallItem(Player(0),"DSWY")==true or DzAPI_Map_HasMallItem(Player(0),"WEIY")==true or DzAPI_Map_HasMallItem(Player(0),"CQZY")==true or DzAPI_Map_GetMapLevel(Player(0))>=50 or DzAPI_Map_IsBlueVIP(Player(0))==true then
call DialogAddButtonBJ(Fg,"|cffB366FF无间炼狱|r")
set SP[7]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(Fg,"|cffB366FF无间炼狱-全体随机|r")
set SP[8]=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(Fg,"|cffB366FF末世挽歌|r")
set SP[9]=GetLastCreatedButtonBJ()
if DzAPI_Map_IsBlueVIP(Player(0))==true then
call EnableTrigger(MH)
call EnableTrigger(MI)
call ShowUnit(Ck,true)
else
endif
else
endif
call EnableTrigger(MH)
call EnableTrigger(MI)
call ShowUnit(Ck,true)
if S2I(DzAPI_Map_GetMapConfig("JFHD"))>1 then
set Fw=S2I(DzAPI_Map_GetMapConfig("JFHD"))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"地图双倍积分活动开启：今日游戏所获积分双倍获得")
else
set Fw=1
endif
call TriggerExecute(SQ)
if DzAPI_Map_GetMatchType()==1006 or DzAPI_Map_GetMatchType()==2006 then
set ON[17]=EV
set ON[22]=EU
call TriggerExecute(SR)
else
set Jk=1
loop
exitwhen Jk>8
if GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER then
call DialogDisplayBJ(true,Fg,ConvertedPlayer(Jk))
exitwhen true
else
endif
set Jk=Jk+1
endloop
endif
endfunction
function tm takes nothing returns nothing
set J9=CreateTrigger()
call TriggerAddAction(J9,function tl)
endfunction
function tn takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call SetUnitUserData(Dz,9)
call DialogSetMessage(Gb,GetPlayerName(GetTriggerPlayer())+"请求与你交换英雄")
set Me=DialogAddButton(Gb,"同意",89)
set Mf=DialogAddButton(Gb,"拒绝",78)
set bj_lastCreatedHashtable=Ia
endfunction
function to takes nothing returns nothing
set SQ=CreateTrigger()
call TriggerAddAction(SQ,function tn)
endfunction
function tp takes nothing returns nothing
call AdjustPlayerStateBJ(500,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function tq takes nothing returns nothing
call AdjustPlayerStateBJ(1000,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function tr takes nothing returns nothing
call AdjustPlayerStateBJ(2500,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function ts takes nothing returns nothing
call PlayMusicBJ(P)
endfunction
function tt takes nothing returns nothing
call ShowUnitHide(GetEnumUnit())
endfunction
function tu takes nothing returns nothing
local integer Jk
local integer KW
local timer MG
local group KB
local unit KC
call DestroyTrigger(SR)
if GetClickedButtonBJ()==SP[1] then
set Gq=1
call FogEnable(false)
call ForForce(GetPlayersAll(),function tr)
call RemoveItem(UnitItemInSlotBJ(EX,2))
call DisplayTextToForce(GetPlayersAll(),"|cff80FFFF玩家1选择了游戏模式：无名小卒（这是最简单的难度，适合刚入门的新手玩。）")
call SetPlayerHandicapBJ(Player(9),50.)
call SetPlayerHandicapBJ(Player(10),50.)
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),50.)
call UnitAddAbilityBJ($41303037,Dz)
call RemoveItem(aj(EX,$6C656467))
call EnableTrigger(SS)
call EnableTrigger(ST)
call DestroyTrigger(SU)
else
if GetClickedButtonBJ()==SP[2] then
set Gq=2
call ForForce(GetPlayersAll(),function tq)
call RemoveItem(UnitItemInSlotBJ(EX,2))
call SetPlayerHandicapBJ(Player(9),100.)
call SetPlayerHandicapBJ(Player(10),100.)
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),80.)
call RemoveItem(aj(EX,$6C656467))
call DisplayTextToForce(GetPlayersAll(),"|Cff00ff00玩家1选择了游戏模式：英雄初上阵（在这个难度下，你可以较为轻松的进行游戏）")
call UnitAddAbilityBJ($41303036,Dz)
call RemoveUnit(CF)
else
if GetClickedButtonBJ()==SP[3] then
set Gq=3
call DisplayTextToForce(GetPlayersAll(),"|cffffdead玩家1选择了游戏难度：鼎足三分（在这个难度下，一切都是公平的，没有任何有利或不利的条件。）")
call UnitAddItemByIdSwapped($6667756E,D3)
call UnitAddItemByIdSwapped($6667756E,Eg)
call RemoveUnit(CF)
call SetPlayerHandicapBJ(Player(9),140.)
call SetPlayerHandicapBJ(Player(10),140.)
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),120.)
call ForForce(ak(Player(8)),function tp)
call aw(false)
else
if GetClickedButtonBJ()==SP[4] then
set Gq=4
call UnitAddItemByIdSwapped($49303032,EM)
call UnitAddItemByIdSwapped($68627468,EY)
call UnitAddItemByIdSwapped($6667756E,D3)
call UnitAddItemByIdSwapped($6667756E,Eg)
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000玩家1选择了游戏难度：纵横天下（在这个难度下，你将接受极严峻的考验！）")
call RemoveUnit(CF)
// call RemoveUnit(CD)
call SetPlayerHandicapBJ(Player(9),180.)
call SetPlayerHandicapBJ(Player(10),200.)
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),120.)
call SetPlayerTechResearchedSwap($52686163,1,Player(10))
call SetPlayerTechResearchedSwap($52686163,1,Player(9))
call EnableTrigger(SV)
else
if GetClickedButtonBJ()==SP[5] then
set Gq=5
call UnitAddItemByIdSwapped($49303032,EM)
call UnitAddItemByIdSwapped($68627468,EY)
call UnitAddItemByIdSwapped($6667756E,D3)
call UnitAddItemByIdSwapped($6667756E,Eg)
call UnitAddItemByIdSwapped($72616D32,Eo)
call UnitAddItemByIdSwapped($6667756E,Ek)
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000玩家1选择了游戏难度：逆天行事（在这个难度下，敌人的技能得到提高。英雄死亡后将会随机减少各项属性，你能通关才是真的强！）")
call RemoveUnit(CF)
// call RemoveUnit(CD)
call SetPlayerHandicapBJ(Player(9),200.)
call SetPlayerHandicapBJ(Player(10),250.)
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),150.)
call SetPlayerTechResearchedSwap($52686163,1,Player(10))
call SetPlayerTechResearchedSwap($52686163,1,Player(9))
call TriggerExecute(KF)
call EnableTrigger(SV)
call EnableTrigger(KD)
else
if DzAPI_Map_GetMatchType()==1006 or DzAPI_Map_GetMatchType()==2006 or GetClickedButtonBJ()==SP[6] or GetClickedButtonBJ()==SP[7] or GetClickedButtonBJ()==SP[8] or GetClickedButtonBJ()==SP[9]then
if DzAPI_Map_GetMatchType()==1006 or DzAPI_Map_GetMatchType()==2006 or GetClickedButtonBJ()==SP[6] then
set Gq=6
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000玩家1选择了游戏难度：地狱难度（与逆天行事相比，这里的敌人更加凶悍！）")
call SetPlayerHandicapBJ(Player(10),250.+20.*I2R(Ff))
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),150.)
if DzAPI_Map_GetMatchType()==2006 then
call SetHeroLevel(DT,50,false)
else
endif
else

if GetClickedButtonBJ()==SP[7] or GetClickedButtonBJ()==SP[8] then
set Gq=7
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000玩家1选择了游戏难度：无间炼狱（一般人选择不了！）")
if GetClickedButtonBJ()==SP[8] then
call SetHeroLevel(DT,50,false)
else
endif
// 难7关闭挑战镜像
// call DestroyTrigger(SW)
// call DestroyTrigger(SX)
set Jk=1
loop
exitwhen Jk>8
call SetPlayerHandicap(ConvertedPlayer(Jk),.75)
call CreateUnit(ConvertedPlayer(Jk),$65304E37,13575.,-7150.,bj_UNIT_FACING)
set Jk=Jk+1
endloop
call SetPlayerHandicapBJ(Player(10),300.+20.*I2R(Ff))
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),200.)
// 攻击科技
call SetPlayerTechResearchedSwap($52686D65,1,Player(10))
call SetPlayerTechResearchedSwap($52686D65,1,Player(9))
set KW=71
loop
exitwhen KW>79
call SetItemVisible(CreateItem(LJ[KW],12510.,-8200.),false)
set KW=KW+1
endloop
call DisplayTextToForce(GetPlayersAll(), "|Cffff0000正在设置物品:")
call SetItemVisible(CreateItem($6F736C6F,12510.,-8200.),false)
set ON[17]=EV
set ON[22]=EU
// 魔神甲
set LJ[71]=$70737064
// 魔神之翼
set LJ[72]=$49303036
// 玄光之翼
set LJ[73]=$62666872
// 魔魂盔
set LJ[74]=$49303033
// 镇魂甲
set LJ[75]=$49303032
// 镇魂杖
set LJ[76]=$49303031
// 麒麟弓
set LJ[77]=$49303144
// 刑天斧
set LJ[78]=$67736F75
// 刑天盾
set LJ[79]=$636F736C
// 绝影
set LJ[188]=$49303039
set LJ[40]=$49303039
set SY=CreateItem($49303249,13500.,-7000.)
call SetItemVisible(SY,false)
call SetItemPlayer(SY,Player(PLAYER_NEUTRAL_PASSIVE),true)
call ItemPoolAddItemType(NG,$49303042,5.)
call ItemPoolAddItemType(NG,$49303057,5.)
call UnitAddAbility(Ef,$41304532)
call EnableTrigger(MH)
call EnableTrigger(MI)
call ShowUnit(Ck,true)
call TriggerExecute(Mi)
else
endif

if GetClickedButtonBJ()==SP[9]  then
set Gq=8
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000玩家1选择了游戏难度：末日挽歌（蜀国已经山穷水尽了）")

// call SetHeroLevel(DT,50,false)
// 难7关闭挑战镜像
// call DestroyTrigger(SW)
// call DestroyTrigger(SX)
set Jk=1
loop
exitwhen Jk>8
call SetPlayerHandicap(ConvertedPlayer(Jk),.75)
call CreateUnit(ConvertedPlayer(Jk),$65304E37,13575.,-7150.,bj_UNIT_FACING)
set Jk=Jk+1
endloop
call SetPlayerHandicapBJ(Player(10),400.+20.*I2R(Ff))
call SetPlayerHandicapBJ(Player(PLAYER_NEUTRAL_AGGRESSIVE),300.)
// 攻击科技
call SetPlayerTechResearchedSwap($52686D65,2,Player(10))
call SetPlayerTechResearchedSwap($52686D65,2,Player(9))
set KW=71
loop
exitwhen KW>79
call SetItemVisible(CreateItem(LJ[KW],12510.,-8200.),false)
set KW=KW+1
endloop
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000正在设置物品")
call SetItemVisible(CreateItem($6F736C6F,12510.,-8200.),false)
set ON[17]=EV
set ON[22]=EU
// 魔神甲
set LJ[71]=$70737064
// call SetItemInvulnerable(CreateItem(LJ[71],-1220.,-5240.),true)
// 魔神之翼
set LJ[72]=$49303036
// 玄光之翼
set LJ[73]=$62666872
// 魔魂盔
set LJ[74]=$49303033
// 镇魂甲
set LJ[75]=$49303032
// 镇魂杖
set LJ[76]=$49303031
// 麒麟弓
set LJ[77]=$49303144
// 刑天斧
set LJ[78]=$67736F75
// 刑天盾
set LJ[79]=$636F736C
// 绝影
set LJ[188]=$49303039
set LJ[40]=$49303039
set SY=CreateItem($49303249,13500.,-7000.)
call SetItemVisible(SY,false)
call SetItemPlayer(SY,Player(PLAYER_NEUTRAL_PASSIVE),true)
call ItemPoolAddItemType(NG,$49303042,5.)
call ItemPoolAddItemType(NG,$49303057,5.)
call UnitAddAbility(Ef,$41304532)
call EnableTrigger(MH)
call EnableTrigger(MI)
call ShowUnit(Ck,true)
call TriggerExecute(Mi)
else
endif

endif
call UnitAddItemByIdSwapped($49303032,EM)
call UnitAddItemByIdSwapped($68627468,EY)
call UnitAddItemByIdSwapped($6667756E,D3)
call UnitAddItemByIdSwapped($6667756E,Eg)
call UnitAddItemByIdSwapped($72616D32,Eo)
call UnitAddItemByIdSwapped($6667756E,Ek)
call RemoveUnit(CF)
// call RemoveUnit(CD)
call SetPlayerHandicapBJ(Player(9),200.)
call SetPlayerTechResearchedSwap($52686163,2,Player(10))
call SetPlayerTechResearchedSwap($52686163,2,Player(9))
set SZ=CreateItemPool()
call ItemPoolAddItemType(SZ,$49303255,5.)
call ItemPoolAddItemType(SZ,$49303254,5.)
call ItemPoolAddItemType(SZ,$49303256,5.)
call TriggerExecute(KF)
call TriggerExecute(LP)
call EnableTrigger(SV)
call EnableTrigger(KD)
call EnableTrigger(Sa)
else
endif
endif
endif
endif
endif
endif
call DialogClear(Fg)
call aw(false)
call ShowUnitShow(Cm)
call SetUnitPosition(Cm,-14323.,1800.)
call TriggerExecute(Sb)
call DisplayTextToForce(GetPlayersAll(),"|Cffff0000请等待玩家1继续选择游戏模式")
if DzAPI_Map_HasMallItem(Player(0),"ZGGG")==true then
call EnableTrigger(Sc)
call DialogSetMessage(IP,"请选择游戏模式: 
")
call DialogAddButtonBJ(IP,"正常模式")
call DialogAddButtonBJ(IP,"|cffB366FF速通模式|r")
set Sd=GetLastCreatedButtonBJ()
call DialogAddButtonBJ(IP,"挖宝模式")
set potholingButton=GetLastCreatedButtonBJ()
// if Gq > 6 then

// endif
call DialogAddButtonBJ(IP,"双将模式")
set doubleHeroButton=GetLastCreatedButtonBJ()

call DialogDisplayBJ(true,IP,Player(0))
else
endif
if IN==true then
call SetMapMusic(P,false,0)
call PlayMusicBJ(P)
set MG=CreateTimer()
call TimerStart(MG,215.1,true,function ts)
else
endif
call ForGroupBJ(ao(BD,null),function tt)
set KW=1
loop
exitwhen KW>8
call CreateFogModifierRectBJ(true,ConvertedPlayer(KW),FOG_OF_WAR_VISIBLE,B1)
set KW=KW+1
endloop
call StartTimerBJ(Fk,false,150.)
call StartTimerBJ(G7,true,17.-I2R(GetUnitAbilityLevel(C5,$41436576)))
call StartTimerBJ(G8,true,24.)
call TimerStart(CreateTimer(),3.,true,function XP)
set MG=null
set KB=null
set KC=null
endfunction
function tv takes nothing returns nothing
set SR=CreateTrigger()
call TriggerRegisterDialogEvent(SR,Fg)
call TriggerAddAction(SR,function tu)
endfunction
function tw takes nothing returns nothing
    // 速通模式事件
if GetClickedButtonBJ()==Sd then
call StartTimerBJ(Fk,false,75.)
call StartTimerBJ(G7,true,8.)
call StartTimerBJ(G8,true,9.)
call UnitAddAbility(C5,$41304242)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"开启速通模式！！！")
else
endif
// 挖宝模式事件
if GetClickedButtonBJ()==potholingButton then
set choosedButton = GetClickedButtonBJ()
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"开启挖宝模式！！！")
else
endif
// 双将模式事件
if GetClickedButtonBJ()==doubleHeroButton then
set choosedButton = GetClickedButtonBJ()
call DisplayTextToPlayer(GetLocalPlayer(),0,0,"开启双将模式！！！")
else
endif
call DialogClear(IP)
endfunction
function tx takes nothing returns nothing
set Sc=CreateTrigger()
call DisableTrigger(Sc)
call TriggerRegisterDialogEvent(Sc,IP)
call TriggerAddAction(Sc,function tw)
endfunction
function ty takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function tz takes nothing returns nothing
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,3)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,3)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,3)
endfunction
function t0 takes nothing returns nothing
set SS=CreateTrigger()
call DisableTrigger(SS)
call TriggerRegisterAnyUnitEventBJ(SS,EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(SS,Condition(function ty))
call TriggerAddAction(SS,function tz)
endfunction
function t1 takes nothing returns nothing
call SetPlayerTechResearchedSwap($526F7374,2,Player(10))
call SetPlayerTechResearchedSwap($526F7374,2,Player(9))
call SetPlayerTechResearchedSwap($52686163,2,Player(10))
call SetPlayerTechResearchedSwap($52686163,2,Player(9))
call DestroyTrigger(GetTriggeringTrigger())
call EnableTrigger(Sh)
endfunction
function t2 takes nothing returns nothing
set SV=CreateTrigger()
call DisableTrigger(SV)
call TriggerRegisterUnitEvent(SV,EG,EVENT_UNIT_DEATH)
call TriggerAddAction(SV,function t1)
endfunction
function t3 takes nothing returns nothing
call SetPlayerTechResearchedSwap($526F7374,3,Player(10))
call SetPlayerTechResearchedSwap($526F7374,3,Player(9))
call SetPlayerTechResearchedSwap($52686163,3,Player(10))
call SetPlayerTechResearchedSwap($52686163,3,Player(9))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function t4 takes nothing returns nothing
set Sh=CreateTrigger()
call DisableTrigger(Sh)
call TriggerRegisterUnitEvent(Sh,Eh,EVENT_UNIT_DEATH)
call TriggerAddAction(Sh,function t3)
endfunction
function t5 takes nothing returns nothing
call CreateFogModifierRectBJ(true,GetEnumPlayer(),FOG_OF_WAR_VISIBLE,GetEntireMapRect())
endfunction
function t6 takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开启作弊模式！！")
call ForForce(ak(Player(8)),function t5)
call DisableTrigger(GetTriggeringTrigger())
call DestroyTrigger(GetTriggeringTrigger())
call EnableTrigger(Si)
call EnableTrigger(Sj)
call EnableTrigger(Sk)
endfunction
function t7 takes nothing returns nothing
set ST=CreateTrigger()
call DisableTrigger(ST)
call TriggerRegisterPlayerChatEvent(ST,Player(0),"我要作弊",true)
call TriggerRegisterPlayerChatEvent(ST,Player(1),"我要作弊",true)
call TriggerRegisterPlayerChatEvent(ST,Player(2),"我要作弊",true)
call TriggerRegisterPlayerChatEvent(ST,Player(3),"我要作弊",true)
call TriggerRegisterPlayerChatEvent(ST,Player(4),"我要作弊",true)
call TriggerRegisterPlayerChatEvent(ST,Player(5),"我要作弊",true)
call TriggerRegisterPlayerChatEvent(ST,Player(6),"我要作弊",true)
call TriggerRegisterPlayerChatEvent(ST,Player(7),"我要作弊",true)
call TriggerAddAction(ST,function t6)
endfunction
function t8 takes nothing returns nothing
call AdjustPlayerStateBJ(100000,Player(0),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100000,Player(1),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100000,Player(2),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100000,Player(3),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100000,Player(4),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100000,Player(5),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100000,Player(6),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(100000,Player(7),PLAYER_STATE_RESOURCE_GOLD)
endfunction
function t9 takes nothing returns nothing
set Si=CreateTrigger()
call DisableTrigger(Si)
call TriggerRegisterPlayerChatEvent(Si,Player(0),"我要钱",true)
call TriggerRegisterPlayerChatEvent(Si,Player(1),"我要钱",true)
call TriggerRegisterPlayerChatEvent(Si,Player(2),"我要钱",true)
call TriggerRegisterPlayerChatEvent(Si,Player(3),"我要钱",true)
call TriggerRegisterPlayerChatEvent(Si,Player(4),"我要钱",true)
call TriggerRegisterPlayerChatEvent(Si,Player(5),"我要钱",true)
call TriggerRegisterPlayerChatEvent(Si,Player(6),"我要钱",true)
call TriggerRegisterPlayerChatEvent(Si,Player(7),"我要钱",true)
call TriggerAddAction(Si,function t8)
endfunction
function uB takes nothing returns nothing
call AdjustPlayerStateBJ(1000,Player(0),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ(1000,Player(1),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ(1000,Player(2),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ(1000,Player(3),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ(1000,Player(4),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ(1000,Player(5),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ(1000,Player(6),PLAYER_STATE_RESOURCE_LUMBER)
call AdjustPlayerStateBJ(1000,Player(7),PLAYER_STATE_RESOURCE_LUMBER)
endfunction
function uC takes nothing returns nothing
set Sj=CreateTrigger()
call DisableTrigger(Sj)
call TriggerRegisterPlayerChatEvent(Sj,Player(0),"我要木",true)
call TriggerRegisterPlayerChatEvent(Sj,Player(1),"我要木",true)
call TriggerRegisterPlayerChatEvent(Sj,Player(2),"我要木",true)
call TriggerRegisterPlayerChatEvent(Sj,Player(3),"我要木",true)
call TriggerRegisterPlayerChatEvent(Sj,Player(4),"我要木",true)
call TriggerRegisterPlayerChatEvent(Sj,Player(5),"我要木",true)
call TriggerRegisterPlayerChatEvent(Sj,Player(6),"我要木",true)
call TriggerRegisterPlayerChatEvent(Sj,Player(7),"我要木",true)
call TriggerAddAction(Sj,function uB)
endfunction
function uD takes nothing returns nothing
call SetPlayerStateBJ(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP,1)
endfunction
function uE takes nothing returns nothing
set Sk=CreateTrigger()
call DisableTrigger(Sk)
call TriggerRegisterPlayerChatEvent(Sk,Player(0),"一个英雄不够用",true)
call TriggerRegisterPlayerChatEvent(Sk,Player(1),"一个英雄不够用",true)
call TriggerRegisterPlayerChatEvent(Sk,Player(2),"一个英雄不够用",true)
call TriggerRegisterPlayerChatEvent(Sk,Player(3),"一个英雄不够用",true)
call TriggerRegisterPlayerChatEvent(Sk,Player(4),"一个英雄不够用",true)
call TriggerRegisterPlayerChatEvent(Sk,Player(5),"一个英雄不够用",true)
call TriggerRegisterPlayerChatEvent(Sk,Player(6),"一个英雄不够用",true)
call TriggerRegisterPlayerChatEvent(Sk,Player(7),"一个英雄不够用",true)
call TriggerAddAction(Sk,function uD)
endfunction
function uF takes nothing returns nothing
local integer Jk
call DisableTrigger(GetTriggeringTrigger())
call CreateMultiboardBJ(6,9,"玩家信息")
call MultiboardDisplayBJ(true,GetLastCreatedMultiboard())
call au(GetLastCreatedMultiboard(),1,1,"|cffFF870F玩家姓名|r")
call au(GetLastCreatedMultiboard(),2,1,"|cffFF870F杀怪数|r")
call au(GetLastCreatedMultiboard(),3,1,"|cffFF870F斩将数|r")
call au(GetLastCreatedMultiboard(),4,1,"|cffFF870F官阶等级|r")
call au(GetLastCreatedMultiboard(),5,1,"|cffFF870F游戏积分|r")
call au(GetLastCreatedMultiboard(),6,1,"|cff00ff00玩家修真|r")
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=9
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set Fh=GetForLoopIndexA()
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=10
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
call at(GetLastCreatedMultiboard(),GetForLoopIndexB(),Fh,true,false)
call av(GetLastCreatedMultiboard(),GetForLoopIndexB(),Fh,2.)
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
call av(GetLastCreatedMultiboard(),1,Fh,10.)
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
call au(GetLastCreatedMultiboard(),1,2,"|cffFF0000"+(GetPlayerName(Player(0))+"|r"))
call au(GetLastCreatedMultiboard(),1,3,"|cff0080FF"+(GetPlayerName(Player(1))+"|r"))
call au(GetLastCreatedMultiboard(),1,4,"|cff00FFFF"+(GetPlayerName(Player(2))+"|r"))
call au(GetLastCreatedMultiboard(),1,5,"|cff8000FF"+(GetPlayerName(Player(3))+"|r"))
call au(GetLastCreatedMultiboard(),1,6,"|cFFFFFF33"+(GetPlayerName(Player(4))+"|r"))
call au(GetLastCreatedMultiboard(),1,7,"|cFFFF9933"+(GetPlayerName(Player(5))+"|r"))
call au(GetLastCreatedMultiboard(),1,8,"|cFF00FF00"+(GetPlayerName(Player(6))+"|r"))
call au(GetLastCreatedMultiboard(),1,9,"|cFFFF66FF"+(GetPlayerName(Player(7))+"|r"))
set Jk=1
loop
exitwhen Jk>8
set Jk=Jk+1
endloop
set KS=bj_lastCreatedMultiboard
call TimerDialogSetTitle(OX,""+("敌主将："+GetUnitName(ON[G5])))
if GetUnitLevel(DT)==50 then
call TriggerExecute(MV)
else
call EnableTrigger(MS)
call EnableTrigger(J6)
endif
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function uG takes nothing returns nothing
set Sb=CreateTrigger()
call TriggerAddAction(Sb,function uF)
endfunction
function uH takes nothing returns nothing
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false then
set Fi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=Fi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]+1
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ())),1),I2S(Fi[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
else
if IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true then
set Fj[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]=Fj[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]+1
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ())),2),I2S(Fj[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))]))
else
endif
endif
endfunction
function uI takes nothing returns nothing
set Sw=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(Sw,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(Sw,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(Sw,function uH)
endfunction
function uJ takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function uK takes nothing returns nothing
call fn(GetTriggerUnit(),0)
endfunction
function uL takes nothing returns nothing
set Sx=CreateTrigger()
call a9(Sx,Bs)
call a9(Sx,Bw)
call a9(Sx,Bl)
call a9(Sx,B6)
call a9(Sx,Bz)
call TriggerAddCondition(Sx,Condition(function uJ))
call TriggerAddAction(Sx,function uK)
endfunction
function uM takes nothing returns boolean
return GetOwningPlayer(DF)==Player(8) and GetRandomInt(1,150)<=GetUnitLevel(DF)/3 and IsUnitAliveBJ(DF)==true
endfunction
function uN takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),DF,"孟达",null,"如今腹背受敌,如何是好?",bj_TIMETYPE_ADD,0,true)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"吾已布下奇门遁甲之阵,以防吴国偷袭.",bj_TIMETYPE_ADD,0,true)
call SetUnitOwner(DW,Player(8),true)
call ShowUnitShow(DW)
call SetUnitOwner(Dd,Player(8),true)
call ShowUnitShow(Dd)
call SetUnitOwner(C7,Player(8),true)
call ShowUnitShow(C7)
call SetUnitOwner(De,Player(8),true)
call ShowUnitShow(De)
call SetUnitOwner(Dc,Player(8),true)
call ShowUnitShow(Dc)
call SetUnitOwner(Dg,Player(8),true)
call ShowUnitShow(Dg)
call SetUnitOwner(DU,Player(8),true)
call ShowUnitShow(DU)
call SetUnitOwner(Df,Player(8),true)
call ShowUnitShow(Df)
call SetUnitOwner(Dh,Player(8),true)
call ShowUnitShow(Dh)
call UnitAddAbilityBJ($41303733,Dh)
call UnitAddAbilityBJ($414F7232,Dh)
call RemoveUnit(CM)
call RemoveUnit(EQ)
call RemoveUnit(ER)
call RemoveUnit(ES)
if Gq>=7 then
set Sy=CreateUnit(Player(PLAYER_NEUTRAL_PASSIVE),$65305344,4340.,-1280.,270.)
call TriggerRegisterUnitEvent(Sz,Sy,EVENT_UNIT_SELL_ITEM)
call AddItemToStockBJ($4930324E,Sy,1,1)
call AddItemToStockBJ($4930324D,Sy,1,1)
call AddItemToStockBJ($4930324B,Sy,1,1)
call AddItemToStockBJ($4930324A,Sy,1,1)
call AddItemToStockBJ($4930324C,Sy,1,1)
else
endif
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function uO takes nothing returns nothing
set N8=CreateTrigger()
call DisableTrigger(N8)
call TriggerRegisterUnitEvent(N8,CQ,EVENT_UNIT_DEATH)
call TriggerAddCondition(N8,Condition(function uM))
call TriggerAddAction(N8,function uN)
endfunction
function uP takes nothing returns boolean
return IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function uQ takes nothing returns nothing
call SetUnitPosition(GetTriggerUnit(),4538.,9510.)
endfunction
function uR takes nothing returns nothing
set S0=CreateTrigger()
call a9(S0,Be)
call TriggerAddCondition(S0,Condition(function uP))
call TriggerAddAction(S0,function uQ)
endfunction
function uS takes nothing returns boolean
return IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function uT takes nothing returns nothing
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00石林")
call SetUnitPosition(GetTriggerUnit(),9856.,11520.)
endfunction
function uU takes nothing returns nothing
set S1=CreateTrigger()
call a9(S1,Bd)
call TriggerAddCondition(S1,Condition(function uS))
call TriggerAddAction(S1,function uT)
endfunction
function uV takes nothing returns boolean
return IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function uW takes nothing returns nothing
set S3[10]=GetRectCenter(l)
call SetUnitPositionLoc(GetTriggerUnit(),S3[10])
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00森林")
call RemoveLocation(S3[10])
endfunction
function uX takes nothing returns nothing
set S2=CreateTrigger()
call a9(S2,k)
call TriggerAddCondition(S2,Condition(function uV))
call TriggerAddAction(S2,function uW)
endfunction
function uY takes nothing returns boolean
return IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function uZ takes nothing returns nothing
set S3[11]=GetRectCenter(m)
call SetUnitPositionLoc(GetTriggerUnit(),S3[11])
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00广元")
call RemoveLocation(S3[11])
endfunction
function ua takes nothing returns nothing
set S4=CreateTrigger()
call a9(S4,n)
call TriggerAddCondition(S4,Condition(function uY))
call TriggerAddAction(S4,function uZ)
endfunction
function ub takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())==Player(9) or GetOwningPlayer(GetTriggerUnit())==Player(10)
endfunction
function uc takes nothing returns nothing
call SetUnitPosition(GetTriggerUnit(),-5200.,-4200.)
endfunction
function ud takes nothing returns nothing
set S5=CreateTrigger()
call a9(S5,B2)
call TriggerAddCondition(S5,Condition(function ub))
call TriggerAddAction(S5,function uc)
endfunction
function ue takes nothing returns boolean
return IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function uf takes nothing returns nothing
set S3[14]=GetRectCenter(p)
call SetUnitPositionLoc(GetTriggerUnit(),S3[14])
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00地下墓室")
call RemoveLocation(S3[14])
endfunction
function ug takes nothing returns nothing
set S6=CreateTrigger()
call a9(S6,o)
call TriggerAddCondition(S6,Condition(function ue))
call TriggerAddAction(S6,function uf)
endfunction
function uh takes nothing returns boolean
return IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function ui takes nothing returns nothing
set S3[15]=GetRectCenter(BO)
call SetUnitPositionLoc(GetTriggerUnit(),S3[15])
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00剑阁")
call RemoveLocation(S3[15])
endfunction
function uj takes nothing returns nothing
set S7=CreateTrigger()
call a9(S7,q)
call TriggerAddCondition(S7,Condition(function uh))
call TriggerAddAction(S7,function ui)
endfunction
function uk takes nothing returns boolean
return IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function ul takes nothing returns nothing
set S3[17]=GetRectCenter(W)
call SetUnitPositionLoc(GetTriggerUnit(),S3[17])
call DisplayTimedTextToForce(GetPlayersAll(),5.,"|Cff00ff00剑阁")
call RemoveLocation(S3[17])
endfunction
function um takes nothing returns nothing
set S8=CreateTrigger()
call a9(S8,BM)
call TriggerAddCondition(S8,Condition(function uk))
call TriggerAddAction(S8,function ul)
endfunction
function un takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_PASSIVE) or GetTriggerUnit()==Db
endfunction
function uo takes nothing returns nothing
call SetUnitPosition(GetTriggerUnit(),-1500.,-4600.)
endfunction
function up takes nothing returns nothing
set S9=CreateTrigger()
call a9(S9,Bg)
call TriggerAddCondition(S9,Condition(function un))
call TriggerAddAction(S9,function uo)
endfunction
function uq takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function ur takes nothing returns nothing
call fn(GetTriggerUnit(),$829190C)
endfunction
function us takes nothing returns nothing
set TB=CreateTrigger()
call a9(TB,Bk)
call TriggerAddCondition(TB,Condition(function uq))
call TriggerAddAction(TB,function ur)
endfunction
function ut takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function uu takes nothing returns nothing
call fn(GetTriggerUnit(),$D7C1D3B9)
endfunction
function uv takes nothing returns nothing
set TC=CreateTrigger()
call a9(TC,B8)
call TriggerAddCondition(TC,Condition(function ut))
call TriggerAddAction(TC,function uu)
endfunction
function uw takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function ux takes nothing returns nothing
call fn(GetTriggerUnit(),$21C1F451)
endfunction
function uy takes nothing returns nothing
set MH=CreateTrigger()
call DisableTrigger(MH)
call a9(MH,Bn)
call TriggerAddCondition(MH,Condition(function uw))
call TriggerAddAction(MH,function ux)
endfunction
function uz takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetUnitState(Cg,UNIT_STATE_LIFE)<1. and GetUnitState(Ch,UNIT_STATE_LIFE)<1. and GetUnitState(Ci,UNIT_STATE_LIFE)<1. and GetUnitState(Cj,UNIT_STATE_LIFE)<1.
endfunction
function u0 takes nothing returns nothing
if GetUnitState(Ck,UNIT_STATE_LIFE)>=5. then
call UnitAddItem(Ck,CreateItem($4930324F,0,0))
else
endif
endfunction
function u1 takes nothing returns nothing
local timer MG
call SetUnitInvulnerable(Ck,false)
call fn(GetTriggerUnit(),$324C3C80)
if IsTriggerEnabled(TD)==false then
call EnableTrigger(TD)
set MG=CreateTimer()
call TimerStart(MG,15.,true,function u0)
else
endif
set MG=null
endfunction
function u2 takes nothing returns nothing
set MI=CreateTrigger()
call DisableTrigger(MI)
call a9(MI,Bp)
call TriggerAddCondition(MI,Condition(function uz))
call TriggerAddAction(MI,function u1)
endfunction
function u3 takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function u4 takes nothing returns nothing
call fn(GetTriggerUnit(),0)
endfunction
function u5 takes nothing returns nothing
set TD=CreateTrigger()
call DisableTrigger(TD)
call a9(TD,Br)
call TriggerAddCondition(TD,Condition(function u3))
call TriggerAddAction(TD,function u4)
endfunction
function u6 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function u7 takes nothing returns nothing
call fn(GetTriggerUnit(),$17770F99)
endfunction
function u8 takes nothing returns nothing
set TE=CreateTrigger()
call a9(TE,Bv)
call TriggerAddCondition(TE,Condition(function u6))
call TriggerAddAction(TE,function u7)
endfunction
function u9 takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function vB takes nothing returns nothing
call fn(GetTriggerUnit(),$E87EF9F)
endfunction
function vC takes nothing returns nothing
set TF=CreateTrigger()
call a9(TF,B0)
call TriggerAddCondition(TF,Condition(function u9))
call TriggerAddAction(TF,function vB)
endfunction
function vD takes nothing returns boolean
return IsUnitEnemy(GetTriggerUnit(),Player(8))==true
endfunction
function vE takes nothing returns nothing
call IssuePointOrderById(GetTriggerUnit(),851983,-6688.,13099.)
endfunction
function vF takes nothing returns nothing
set TG=CreateTrigger()
call a9(TG,Bu)
call TriggerAddCondition(TG,Condition(function vD))
call TriggerAddAction(TG,function vE)
endfunction
function vG takes nothing returns nothing
if GetRandomInt(1,15)==7 then
call DestroyTrigger(GetTriggeringTrigger())
call CreateItem($49303251,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
endfunction
function vH takes nothing returns nothing
set TH=CreateTrigger()
call TriggerRegisterUnitEvent(TH,Cl,EVENT_UNIT_DEATH)
call TriggerAddAction(TH,function vG)
endfunction
function vI takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())!=$68706561 and GetUnitTypeId(GetTriggerUnit())!=$6F70656F and GetUnitTypeId(GetTriggerUnit())!=$6E677264 and GetUnitTypeId(GetTriggerUnit())!=$686D7474 and GetUnitTypeId(GetTriggerUnit())!=$6E303030 and GetUnitPointValue(GetTriggerUnit())!=277 and GetUnitPointValue(GetTriggerUnit())!=50
endfunction
function vJ takes nothing returns nothing
if IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true then
call SetUnitPosition(GetTriggerUnit(),7324.,8782.)
call fl(GetOwningPlayer(GetTriggerUnit()),7324.,8782.,0.)
else
endif
endfunction
function vK takes nothing returns nothing
set TI=CreateTrigger()
call a9(TI,B4)
call TriggerAddCondition(TI,Condition(function vI))
call TriggerAddAction(TI,function vJ)
endfunction
function vL takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())!=$68706561 and GetUnitTypeId(GetTriggerUnit())!=$6F70656F and GetUnitTypeId(GetTriggerUnit())!=$6E677264 and GetUnitTypeId(GetTriggerUnit())!=$686D7474 and GetUnitTypeId(GetTriggerUnit())!=$6E303030 and GetUnitPointValue(GetTriggerUnit())!=277 and GetUnitPointValue(GetTriggerUnit())!=50
endfunction
function vM takes nothing returns nothing
if IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(8))==true then
call SetUnitPosition(GetTriggerUnit(),6211.,7718.)
call fl(GetOwningPlayer(GetTriggerUnit()),6211.,7718.,0.)
else
endif
endfunction
function vN takes nothing returns nothing
set TJ=CreateTrigger()
call a9(TJ,B5)
call TriggerAddCondition(TJ,Condition(function vL))
call TriggerAddAction(TJ,function vM)
endfunction
function vO takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$736F7266 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitAbilityLevelSwapped($41303451,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303530,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303458,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($4130345A,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303450,GetTriggerUnit())<1 and GetUnitAbilityLevel(GetTriggerUnit(),$41304238)<1 and GetUnitAbilityLevel(GetTriggerUnit(),'Ab35')<1
endfunction
// 修真事件
function vP takes nothing returns nothing
if bC(GetTriggerUnit(),$617A6872)==true then
call RemoveItem(aj(GetTriggerUnit(),$617A6872))
call UnitAddAbilityBJ($41303530,GetTriggerUnit())
call UnitAddAbilityBJ($41305853,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305853)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303530)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$414E6232)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+100,true)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+200.)
set Hq[10+GetUnitUserData(GetTriggerUnit())]=0
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开始修真，战争之神！敏捷随修炼提升")
call MultiboardSetItemValue(MultiboardGetItem(KS,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),5),"|cff0000ff战争之神")
call TriggerRegisterUnitEvent(TL,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
return

elseif bC(GetTriggerUnit(),$63686573)==true then
call RemoveItem(aj(GetTriggerUnit(),$63686573))
call UnitAddAbilityBJ($4130345A,GetTriggerUnit())
call UnitAddAbilityBJ($41305853,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305853)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130345A)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303554)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41496438)
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+100,true)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303251)
set Hq[20+GetUnitUserData(GetTriggerUnit())]=0
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开始修真，真武大帝！力量随修炼提升")
call MultiboardSetItemValue(MultiboardGetItem(KS,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),5),"|cffffff00真武大帝")
call TriggerRegisterUnitEvent(TL,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
return

elseif bC(GetTriggerUnit(),$6B79736E)==true then
call RemoveItem(aj(GetTriggerUnit(),$6B79736E))
call UnitAddAbilityBJ($41303458,GetTriggerUnit())
call UnitAddAbilityBJ($41305853,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305853)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303458)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303252)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303048)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303431)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+10,true)
set Hq[40+GetUnitUserData(GetTriggerUnit())]=0
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开始修真，朱雀之神！智力提升随修炼提升")
call MultiboardSetItemValue(MultiboardGetItem(KS,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),5),"|cffff0000朱鸟之力")
call TriggerRegisterUnitEvent(TL,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
return

elseif bC(GetTriggerUnit(),$676D6672)==true then
call RemoveItem(aj(GetTriggerUnit(),$676D6672))
call UnitAddAbilityBJ($41303450,GetTriggerUnit())
call UnitAddAbility(GetTriggerUnit(),$41303443)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303450)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303443)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303551)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303643)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41497831)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303654)
set Hq[80+GetUnitUserData(GetTriggerUnit())]=0
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开始修真，苍龙之神！全属性随修炼提升")
call MultiboardSetItemValue(MultiboardGetItem(KS,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),5),"|cff00ff00苍龙之神")
call TriggerRegisterUnitEvent(TL,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
return
// 血狼
elseif bC(GetTriggerUnit(),$73636C70)==true then
call RemoveItem(aj(GetTriggerUnit(),$73636C70))
call UnitAddAbilityBJ($4162306A,GetTriggerUnit())
call UnitAddAbilityBJ($41303655,GetTriggerUnit())
call UnitAddAbilityBJ('Ab35',GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,'Ab35')
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303655)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,'Ab36')
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303631)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130354F)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303332)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),'Ab35',false)
set Hq[640+GetUnitUserData(GetTriggerUnit())]=0
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开始修真，狂野之神！全属性随修炼提升")
call MultiboardSetItemValue(MultiboardGetItem(KS,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),5),"|cff00ff00狂野之神")
call TriggerRegisterUnitEvent(TL,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
return

elseif bC(GetTriggerUnit(),$776F6C67)==true then
call RemoveItem(aj(GetTriggerUnit(),$776F6C67))
call UnitAddAbilityBJ($41303655,GetTriggerUnit())
call UnitAddAbilityBJ($41303451,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303451)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303655)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41647467)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303631)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130354F)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303332)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.2)
set Hq[160+GetUnitUserData(GetTriggerUnit())]=0
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开始修真，天地灵气！能力随修炼提升")
call MultiboardSetItemValue(MultiboardGetItem(KS,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),5),"|cff00ffff天地灵气")
call TriggerRegisterUnitEvent(TL,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
return

elseif GetHeroLevel(GetTriggerUnit())>=30 and GetUnitAbilityLevelSwapped('Ab35',GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303451,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303530,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303458,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($4130345A,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303450,GetTriggerUnit())<1 then
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"开始修真，修身养性！能力随修炼提升")
call UnitAddAbilityBJ($41304238,GetTriggerUnit())
call UnitAddAbilityBJ($41305853,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41305853)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304238)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304235)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304236)
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41304237)
call MultiboardSetItemValue(MultiboardGetItem(KS,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),5),"|cff808080修身养性")
set Hq[320+GetUnitUserData(GetTriggerUnit())]=0
call TriggerRegisterUnitEvent(TL,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)
return
else
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"你什么都没有就想来做修真，先去把圣兽杀了，夺取他们的兽魂吧！")
endif
endfunction
function vQ takes nothing returns nothing
set TK=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(TK,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(TK,Condition(function vO))
call TriggerAddAction(TK,function vP)
endfunction
function vR takes nothing returns boolean
return GetSpellAbilityId()==$41305853 or GetSpellAbilityId()==$41303655 or GetSpellAbilityId()==$41303443
endfunction
function vS takes nothing returns nothing
local group KB
local unit KC
local unit Iv=GetTriggerUnit()
if GetSpellAbilityId()==$41305853 then
call SetUnitLifeBJ(GetTriggerUnit(),GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+1000.+I2R(GetHeroInt(GetTriggerUnit(),true))*2.)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MANA,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)+500.+GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_MANA)*.1)
else
endif
if GetUnitAbilityLevelSwapped($41303530,GetTriggerUnit())==1 and Hq[10+GetUnitUserData(GetTriggerUnit())]<200 then
set Hq[10+GetUnitUserData(GetTriggerUnit())]=Hq[10+GetUnitUserData(GetTriggerUnit())]+1
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+("|cFF0000FF元神(战神)"+(I2S(Hq[10+GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+" /200")))
if Hq[10+GetUnitUserData(GetTriggerUnit())]<=160 then
if ModuloInteger(Hq[10+GetUnitUserData(GetTriggerUnit())],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+("|cFF0000FF元神(战神)修炼至"+Hr[Hq[10+GetUnitUserData(GetTriggerUnit())]/20]))
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[10+GetUnitUserData(GetTriggerUnit())]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFF0000FF你的元神(战神)修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($4130345A,GetTriggerUnit())==1 and Hq[20+GetUnitUserData(GetTriggerUnit())]<200 then
set Hq[20+GetUnitUserData(GetTriggerUnit())]=Hq[20+GetUnitUserData(GetTriggerUnit())]+1
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetHeroProperName(GetTriggerUnit())+("|cFFFFCC00元神(真武)"+(I2S(Hq[20+GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+" /200")))
if Hq[20+GetUnitUserData(GetTriggerUnit())]<=160 then
if ModuloInteger(Hq[20+GetUnitUserData(GetTriggerUnit())],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+("|cFFFFCC00元神(真武)修炼至"+Hr[Hq[20+GetUnitUserData(GetTriggerUnit())]/20]))
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[20+GetUnitUserData(GetTriggerUnit())]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFFFFCC00元神(真武)你的元神修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($41303458,GetTriggerUnit())==1 and Hq[40+GetUnitUserData(GetTriggerUnit())]<200 then
set Hq[40+GetUnitUserData(GetTriggerUnit())]=Hq[40+GetUnitUserData(GetTriggerUnit())]+1
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetHeroProperName(GetTriggerUnit())+("|cFFFF0000元神(朱鸟)"+(I2S(Hq[40+GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+" /200")))
if Hq[40+GetUnitUserData(GetTriggerUnit())]<=160 then
if ModuloInteger(Hq[40+GetUnitUserData(GetTriggerUnit())],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+("|cFFFF0000你的元神(朱鸟)修炼至"+Hr[Hq[40+GetUnitUserData(GetTriggerUnit())]/20]))
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
else
endif
else
if Hq[40+GetUnitUserData(GetTriggerUnit())]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFFFF0000你的元神(朱鸟)元神修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($41303450,GetTriggerUnit())==1 and Hq[80+GetUnitUserData(GetTriggerUnit())]<200 then
set Hq[80+GetUnitUserData(GetTriggerUnit())]=Hq[80+GetUnitUserData(GetTriggerUnit())]+1
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetHeroProperName(GetTriggerUnit())+("|cFF1FBF00元神(苍龙)"+(I2S(Hq[80+GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+" /200")))
if Hq[80+GetUnitUserData(GetTriggerUnit())]<=160 then
if ModuloInteger(Hq[80+GetUnitUserData(GetTriggerUnit())],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+("|cFF1FBF00你的元神(苍龙)修炼至"+Hr[Hq[80+GetUnitUserData(GetTriggerUnit())]/20]))
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,8)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,8)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,8)
else
endif
else
if Hq[80+GetUnitUserData(GetTriggerUnit())]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFF1FBF00你的元神(苍龙)修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
else
endif
endif
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),800.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitType(KC,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(KC,GetOwningPlayer(Iv))==true and GetUnitState(KC,UNIT_STATE_LIFE)>.405 then
call UnitDamageTarget(Iv,KC,I2R(GetHeroLevel(Iv))*20.,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
endloop
call DestroyGroup(KB)
set KB=null
set KC=null
return
else
endif
if GetSpellAbilityId()==$41303655 and GetUnitAbilityLevelSwapped($41303451,GetTriggerUnit())==1 and Hq[160+GetUnitUserData(GetTriggerUnit())]<200 then
set Hq[160+GetUnitUserData(GetTriggerUnit())]=Hq[160+GetUnitUserData(GetTriggerUnit())]+1
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetHeroProperName(GetTriggerUnit())+("|cFF1FBF00天地灵气"+(I2S(Hq[160+GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+" /200")))
if Hq[160+GetUnitUserData(GetTriggerUnit())]<=160 then
if ModuloInteger(Hq[160+GetUnitUserData(GetTriggerUnit())],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+("|cFF1FBF00你的天地灵气修炼至"+Hr[Hq[160+GetUnitUserData(GetTriggerUnit())]/20]))
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,5)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,5)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[160+GetUnitUserData(GetTriggerUnit())]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFF1FBF00你的天地灵气修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,30)
else
endif
endif
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),800.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitType(KC,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(KC,GetOwningPlayer(Iv))==true and GetUnitState(KC,UNIT_STATE_LIFE)>.405 then
call UnitDamageTarget(Iv,KC,I2R(GetHeroLevel(Iv))*20.,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
endloop
call DestroyGroup(KB)
set KB=null
set KC=null
return
else
endif
if GetUnitAbilityLevelSwapped($41304238,GetTriggerUnit())==1 and Hq[320+GetUnitUserData(GetTriggerUnit())]<200 then
set Hq[320+GetUnitUserData(GetTriggerUnit())]=Hq[320+GetUnitUserData(GetTriggerUnit())]+1
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetHeroProperName(GetTriggerUnit())+("|cFF808080潜能激发："+(I2S(Hq[320+GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+" /200")))
if Hq[320+GetUnitUserData(GetTriggerUnit())]<=160 then
if ModuloInteger(Hq[320+GetUnitUserData(GetTriggerUnit())],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFF0000FF通过自身不断修行，自身潜能得到提升，全属性+10")
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+10,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+10,true)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+10,true)
else
endif
else
if Hq[320+GetUnitUserData(GetTriggerUnit())]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFF808080潜能激发修炼至顶,可以选择进入|cffffcc00仙魔")
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+50,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+50,true)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+50,true)
else
endif
endif
else
endif
// 血狼
if GetUnitAbilityLevelSwapped('Ab35',GetTriggerUnit())==1 and Hq[640+GetUnitUserData(GetTriggerUnit())]<200 then
set Hq[640+GetUnitUserData(GetTriggerUnit())]=Hq[640+GetUnitUserData(GetTriggerUnit())]+1
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetHeroProperName(GetTriggerUnit())+("|cFF808080你的元神(血狼)修炼至："+(I2S(Hq[640+GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])+" /200")))
if Hq[640+GetUnitUserData(GetTriggerUnit())]<=160 then
if ModuloInteger(Hq[640+GetUnitUserData(GetTriggerUnit())],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFF0000FF通过自身不断修行，自身潜能得到提升，全属性+10")
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+10,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+10,true)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+10,true)
else
endif
else
if Hq[640+GetUnitUserData(GetTriggerUnit())]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFF808080潜能激发修炼至顶,可以选择进入|cffffcc00仙魔")
call SetHeroStr(GetTriggerUnit(),GetHeroStr(GetTriggerUnit(),false)+50,true)
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+50,true)
call SetHeroInt(GetTriggerUnit(),GetHeroInt(GetTriggerUnit(),false)+50,true)
else
endif
endif
else
endif
set Iv=null
set KB=null
set KC=null
endfunction
function vT takes nothing returns nothing
set TL=CreateTrigger()
call TriggerAddCondition(TL,Condition(function vR))
call TriggerAddAction(TL,function vS)
endfunction
function vU takes nothing returns boolean
return GetUnitAbilityLevel(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$41303443)>0 or GetUnitAbilityLevel(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$41303655)>0 or GetUnitAbilityLevel(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],$41305853)>0 and IsUnitAlly(GetTriggerUnit(),Player(8))==false and GetOwningPlayer(GetTriggerUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE) or IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function vV takes nothing returns nothing
if GetUnitAbilityLevelSwapped($41303530,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])==1 and Hq[10+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<200 then
set Hq[10+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]=Hq[10+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF0000FF元神(战神)"+(I2S(Hq[10+GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+" /200")))
if Hq[10+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<=160 then
if ModuloInteger(Hq[10+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF0000FF元神(战神)修炼至"+Hr[Hq[10+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]/20]))
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[10+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFF0000FF你的元神(战神)修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($4130345A,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])==1 and Hq[20+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<200 then
set Hq[20+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]=Hq[20+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFFFFCC00元神(真武)"+(I2S(Hq[20+GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+" /200")))
if Hq[20+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<=160 then
if ModuloInteger(Hq[20+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFFFFCC00元神(真武)修炼至"+Hr[Hq[20+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]/20]))
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[20+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFFFFCC00元神(真武)修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($41303458,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])==1 and Hq[40+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<200 then
set Hq[40+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]=Hq[40+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFFFF0000元神(朱鸟)"+(I2S(Hq[40+GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+" /200")))
if Hq[40+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<=160 then
if ModuloInteger(Hq[40+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFFFF0000你的元神(朱鸟)修炼至"+Hr[Hq[40+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]/20]))
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[40+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFFFF0000你的元神(朱鸟)修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($41303450,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])==1 and Hq[80+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<200 then
set Hq[80+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]=Hq[80+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF1FBF00元神(苍龙)"+(I2S(Hq[80+GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+" /200")))
if Hq[80+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<=160 then
if ModuloInteger(Hq[80+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF1FBF00你的元神(苍龙)修炼至"+Hr[Hq[80+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]/20]))
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[80+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFF1FBF00你的元神(苍龙)修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($41303451,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])==1 and Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<200 then
set Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]=Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF1FBF00天地灵气"+(I2S(Hq[160+GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+" /200")))
if Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<=160 then
if ModuloInteger(Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF1FBF00你的天地灵气修炼至"+Hr[Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]/20]))
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,5)
else
endif
else
if Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFF1FBF00你的天地灵气修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
if GetUnitAbilityLevelSwapped($41304238,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])==1 and Hq[320+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<200 then
set Hq[320+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]=Hq[320+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF808080潜能激发："+(I2S(Hq[320+GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+" /200")))
if Hq[320+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<=160 then
if ModuloInteger(Hq[320+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])],20)==0 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFF0000FF通过自身不断修行，自身潜能得到提升，全属性+10")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
else
if Hq[320+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFF808080潜能激发修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
endif
else
endif
// 血狼

if GetUnitAbilityLevelSwapped('Ab35',Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])==1 and Hq[640+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<200 then
set Hq[640+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]=Hq[640+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]+1
call DisplayTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()),0,0,GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF808080你的兽魂（血狼）修炼至："+(I2S(Hq[640+GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+" /200")))
if Hq[640+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]<=160 then
if ModuloInteger(Hq[640+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])],20)==0 then
// call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+("|cFF1FBF00你的兽魂（血狼）修炼至"+Hr[Hq[160+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]/20]))
// call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFF0000FF通过自身不断修行，自身潜能得到提升，全属性+10")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,10)
else
endif
else
if Hq[640+GetUnitUserData(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])]==200 then
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))])+"|cFF808080兽魂（血狼）修炼至顶,可以选择进入|cffffcc00仙魔")
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[GetConvertedPlayerId(GetOwningPlayer(GetKillingUnitBJ()))],bj_MODIFYMETHOD_ADD,20)
else
endif
endif
else
endif


endfunction
function vW takes nothing returns nothing
set TM=CreateTrigger()
call TriggerRegisterPlayerUnitEventSimple(TM,Player(9),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(TM,Player(10),EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterPlayerUnitEventSimple(TM,Player(PLAYER_NEUTRAL_AGGRESSIVE),EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(TM,Condition(function vU))
call TriggerAddAction(TM,function vV)
endfunction
function vX takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$4930305A or GetItemTypeId(GetManipulatedItem())==$70686C74 and GetPlayerTechCountSimple($52756E65,GetOwningPlayer(GetTriggerUnit()))<1 and GetUnitAbilityLevelSwapped($4130354D,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($4130354E,GetTriggerUnit())<1
endfunction
function vY takes nothing returns nothing
if GetItemTypeId(GetManipulatedItem())==$4930305A and Hq[10+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[20+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[40+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[80+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[160+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[640+GetUnitUserData(GetTriggerUnit())]>=200 then
call DisplayTextToForce(GetPlayersAll(),"恭喜："+GetHeroProperName(GetTriggerUnit())+"已经修成半仙在生命低于60%时有一定机率回复10%生命！")
call UnitAddAbilityBJ($4130354D,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130354D)
call SetPlayerTechResearchedSwap($52756E65,1,GetOwningPlayer(GetTriggerUnit()))
call SetPlayerTechResearchedSwap($5267666F,1,GetOwningPlayer(GetTriggerUnit()))
call TriggerRegisterUnitEvent(TO,GetTriggerUnit(),EVENT_UNIT_DAMAGED)
else
endif
if GetItemTypeId(GetManipulatedItem())==$70686C74 and Hq[10+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[20+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[40+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[80+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[160+GetUnitUserData(GetTriggerUnit())]>=200 or Hq[640+GetUnitUserData(GetTriggerUnit())]>=200 then
call DisplayTextToForce(GetPlayersAll(),"恭喜："+GetHeroProperName(GetTriggerUnit())+"已经成为小魔头攻击进有一定机率附带等级*20的无视魔免防御的伤害！")
call UnitAddAbilityBJ($4130354E,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$4130354E)
call SetPlayerTechResearchedSwap($52677576,1,GetOwningPlayer(GetTriggerUnit()))
call SetPlayerTechResearchedSwap($52756E65,1,GetOwningPlayer(GetTriggerUnit()))
else
endif
endfunction
function vZ takes nothing returns nothing
set TN=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(TN,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(TN,Condition(function vX))
call TriggerAddAction(TN,function vY)
endfunction
function va takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function vb takes nothing returns nothing
call ShowUnitShow(Cc)
call TransmissionFromUnitWithNameBJ(ak(Player(8)),GetTriggerUnit(),GetHeroProperName(GetTriggerUnit()),null,"哈哈，这一定就是传说中的小人参精",bj_TIMETYPE_ADD,2.,false)
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Cd,"神秘小孩",null,"你抓不到我的........",bj_TIMETYPE_ADD,2.,false)
call RemoveUnit(Cd)
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function vc takes nothing returns nothing
set Mz=CreateTrigger()
call DisableTrigger(Mz)
call a9(Mz,BN)
call TriggerAddCondition(Mz,Condition(function va))
call TriggerAddAction(Mz,function vb)
endfunction
function vd takes nothing returns boolean
return GetRandomInt(1,10)==8 and GetEventDamage()>=10.
endfunction
function ve takes nothing returns nothing
call SetUnitLifePercentBJ(GetTriggerUnit(),GetUnitLifePercent(GetTriggerUnit())+10.)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",GetTriggerUnit(),"overhead"))
endfunction
function vf takes nothing returns nothing
set TO=CreateTrigger()
call TriggerAddCondition(TO,Condition(function vd))
call TriggerAddAction(TO,function ve)
endfunction
function vg takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72686532 and GetUnitLevel(GetTriggerUnit())>=80 and bC(GetTriggerUnit(),$6772736C)==true and IsUnitInGroup(GetTriggerUnit(),Ht)==false
endfunction
function vh takes nothing returns nothing
call GroupAddUnit(Ht,GetTriggerUnit())
call RemoveItem(aj(GetTriggerUnit(),$6772736C))
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+"学习了仙魔技能")
if GetUnitTypeId(GetTriggerUnit())==$55647265 then
call IncUnitAbilityLevelSwapped($414E656E,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4861706D then
call IncUnitAbilityLevelSwapped($534E6464,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48706232 or GetUnitTypeId(GetTriggerUnit())==$48584842 then
call IncUnitAbilityLevelSwapped($414E696E,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$486D6764 or GetUnitTypeId(GetTriggerUnit())==$48303054 then
call IncUnitAbilityLevelSwapped($4130305A,GetTriggerUnit())
else
    // 张苞大招修改41486176
if GetUnitAbilityLevel(GetTriggerUnit(),$41304C30)>0 then
call IncUnitAbilityLevelSwapped($414C4235,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48757468 or GetUnitTypeId(GetTriggerUnit())==$48575031 then
call IncUnitAbilityLevelSwapped($414E7371,GetTriggerUnit())
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41303652)>0 then
call IncUnitAbilityLevelSwapped($41303653,GetTriggerUnit())
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.05)
else
if GetUnitTypeId(GetTriggerUnit())==$4F726578 then
call IncUnitAbilityLevelSwapped($41303131,GetTriggerUnit())
call ModifyHeroStat(bj_HEROSTAT_STR,Cs,bj_MODIFYMETHOD_ADD,100)
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304C32)>0 then
call IncUnitAbilityLevelSwapped($4130384F,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4F726B6E then
call IncUnitAbilityLevelSwapped($414F6C73,GetTriggerUnit())
call UnitAddItem(GetTriggerUnit(),CreateItem('it0p',GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())))
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
if GetUnitTypeId(GetTriggerUnit())==$48767368 or GetUnitTypeId(GetTriggerUnit())==$4842534E then
call IncUnitAbilityLevelSwapped($41303046,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48767764 then
call IncUnitAbilityLevelSwapped($41303049,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4F677268 or GetUnitTypeId(GetTriggerUnit())==$4F303033 or GetUnitTypeId(GetTriggerUnit())==$4F303035 then
call IncUnitAbilityLevelSwapped($41303130,GetTriggerUnit())
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304136)==1 then
call IncUnitAbilityLevelSwapped($4130304B,GetTriggerUnit())
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304C34)>0 then
call IncUnitAbilityLevelSwapped($41485A52,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$45696C6C then
call IncUnitAbilityLevelSwapped($414E6567,GetTriggerUnit())
call UnitAddAbilityBJ($414F7265,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$45747972 then
call IncUnitAbilityLevelSwapped($41303741,GetTriggerUnit())
else
    // 赵云
if GetUnitAbilityLevel(GetTriggerUnit(),$41304C31)>0 then
call IncUnitAbilityLevelSwapped($41303439,GetTriggerUnit())
else
endif
// 赵统
if GetUnitAbilityLevel(GetTriggerUnit(),$41303439)>0 then
call IncUnitAbilityLevelSwapped($41303439,GetTriggerUnit())
else
endif
endif
endif
endif
endif
endif
endif
endif
if GetUnitTypeId(GetTriggerUnit())==$486B616C or GetUnitTypeId(GetTriggerUnit())==$484A5731 then
call IncUnitAbilityLevelSwapped($534E696E,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4867616D then
call IncUnitAbilityLevelSwapped($41303731,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$486A6169 or GetUnitTypeId(GetTriggerUnit())==$48485959 then
call IncUnitAbilityLevelSwapped($41303759,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48303034 then
call IncUnitAbilityLevelSwapped($414F7366,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4F73616D then
call IncUnitAbilityLevelSwapped($4130314B,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4F647274 or GetUnitTypeId(GetTriggerUnit())==$484D5331 then
call IncUnitAbilityLevelSwapped($41303750,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$45776172 then
call IncUnitAbilityLevelSwapped($41303435,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48575130 then
call IncUnitAbilityLevelSwapped($41575135,GetTriggerUnit())
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.05)
else
    // 孙乾大招
if GetUnitTypeId(GetTriggerUnit())==$48303032 then
call IncUnitAbilityLevelSwapped($41623074,GetTriggerUnit())
else
    // 天使大招
if GetUnitTypeId(GetTriggerUnit())==$48303035 then
call IncUnitAbilityLevelSwapped($41623134,GetTriggerUnit())
else
    // 高翔大招
if GetUnitTypeId(GetTriggerUnit())==$48303037 then
call IncUnitAbilityLevelSwapped($41623166,GetTriggerUnit())
else
    // 陈到大招
if GetUnitTypeId(GetTriggerUnit())==$48303033 then
call IncUnitAbilityLevelSwapped('Ab29',GetTriggerUnit())
else
    // 宗预大招
if GetUnitTypeId(GetTriggerUnit())==$48303038 then
call IncUnitAbilityLevelSwapped('Ab28',GetTriggerUnit())
else
    // 
if GetUnitTypeId(GetTriggerUnit())=='H009' then
call IncUnitAbilityLevelSwapped('Ab2f',GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())=='H00A' then
call IncUnitAbilityLevelSwapped('Ab2o',GetTriggerUnit())
else
    // 精卫大招
if GetUnitTypeId(GetTriggerUnit())=='HA01' then
call IncUnitAbilityLevelSwapped('Ab3c',GetTriggerUnit())
call IncUnitAbilityLevelSwapped('Ab3i',GetTriggerUnit())
else
 // 张角大招
if GetUnitTypeId(GetTriggerUnit())=='HA04' then
call IncUnitAbilityLevelSwapped('Ab3v',GetTriggerUnit())

else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
if GetUnitTypeId(GetTriggerUnit())==$51544453 then
call IncUnitAbilityLevelSwapped($41445335,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4F303036 or GetUnitTypeId(GetTriggerUnit())==$4841484E then
call IncUnitAbilityLevelSwapped($4130414C,GetTriggerUnit())
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304335)>0 then
call IncUnitAbilityLevelSwapped($41486176,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$4530305A or GetUnitTypeId(GetTriggerUnit())==$48303059 then
call IncUnitAbilityLevelSwapped($41304151,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48444430 then
call IncUnitAbilityLevelSwapped($41304D48,GetTriggerUnit())
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41574430)>0 then
call IncUnitAbilityLevelSwapped($41574436,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48475330 or GetUnitTypeId(GetTriggerUnit())==$48475332 then
call IncUnitAbilityLevelSwapped($41475335,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48575930 or GetUnitTypeId(GetTriggerUnit())==$4E30304D then
call IncUnitAbilityLevelSwapped($41575935,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48594C30 then
call IncUnitAbilityLevelSwapped($41594C35,GetTriggerUnit())
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+50,true)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(37),GetUnitState(GetTriggerUnit(),ConvertUnitState(37))-.05)
else
if GetUnitTypeId(GetTriggerUnit())==$48505430 then
call IncUnitAbilityLevelSwapped($4130304F,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$484A5330 or GetUnitTypeId(GetTriggerUnit())==$484A5331 or GetUnitTypeId(GetTriggerUnit())==$484A5332 or GetUnitTypeId(GetTriggerUnit())==$484A5333 then
call IncUnitAbilityLevelSwapped($41534A35,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$485A4747 then
call IncUnitAbilityLevel(GetTriggerUnit(),$41474831)
call IncUnitAbilityLevel(GetTriggerUnit(),$41474836)
call IncUnitAbilityLevel(GetTriggerUnit(),$41474833)
call IncUnitAbilityLevel(GetTriggerUnit(),$41304359)
call IncUnitAbilityLevel(GetTriggerUnit(),$41474834)
call IncUnitAbilityLevel(GetTriggerUnit(),$41474835)
call IncUnitAbilityLevel(GetTriggerUnit(),$41474830)
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"|Cff00ff00普度众生的等级已经提升了！")
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
if GetUnitTypeId(GetTriggerUnit())==$48594A30 then
call IncUnitAbilityLevelSwapped($41594A35,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48595030 then
call IncUnitAbilityLevelSwapped($41595052,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48594D30 or GetUnitTypeId(GetTriggerUnit())==$48594D31 then
call IncUnitAbilityLevelSwapped($41594D35,GetTriggerUnit())
call SetHeroAgi(GetTriggerUnit(),GetHeroAgi(GetTriggerUnit(),false)+100,true)
else
if GetUnitTypeId(GetTriggerUnit())==$48475930 or GetUnitTypeId(GetTriggerUnit())==$48475931 or GetUnitTypeId(GetTriggerUnit())==$48475932 then
call IncUnitAbilityLevelSwapped($41475952,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit()) == $485A4630 or GetUnitAbilityLevel(GetTriggerUnit(), 'S002') >0 then
call IncUnitAbilityLevel(GetTriggerUnit(),$415A4635)
call SetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_MAX_LIFE)+3000.)
else
if GetUnitTypeId(GetTriggerUnit())==$484C4C51 or GetUnitTypeId(GetTriggerUnit())==$484C5132 or GetUnitTypeId(GetTriggerUnit())==$484C5131 then
call IncUnitAbilityLevel(GetTriggerUnit(),$41304451)
call IncUnitAbilityLevel(GetTriggerUnit(),$41304452)
else
if GetUnitTypeId(GetTriggerUnit())==$48575931 then
call IncUnitAbilityLevel(GetTriggerUnit(),$41413046)
else
if GetUnitTypeId(GetTriggerUnit())==$4E303050 then
call IncUnitAbilityLevel(GetTriggerUnit(),$41304645)
else
if GetUnitTypeId(GetTriggerUnit())==$48584330 then
call IncUnitAbilityLevel(GetTriggerUnit(),$41584346)
else
if GetUnitTypeId(GetTriggerUnit())==$484A5230 then
call IncUnitAbilityLevel(GetTriggerUnit(),$414A5246)
else
if GetUnitTypeId(GetTriggerUnit())==$48415330 then
call IncUnitAbilityLevel(GetTriggerUnit(),$41415352)
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function vi takes nothing returns nothing
set TP=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(TP,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(TP,Condition(function vg))
call TriggerAddAction(TP,function vh)
endfunction
function vj takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function vk takes nothing returns nothing
if bC(GetTriggerUnit(),$77746C67)==true then
call UnitAddAbilityBJ($41303537,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303537)
call RemoveItem(aj(GetTriggerUnit(),$77746C67))
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+50.)
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFFFF0066被后主刘禅封为：汉寿亭侯、前将军、假节钺（袭关羽生前官职爵位）。")
call DisplayTimedTextToForce(GetPlayersAll(),30,"|cFF336699前将军：关羽。汉末才无敌，云长独出群：神威能奋武，儒雅更知文。天日 
心如镜，《春秋》义薄云。昭然垂万古，不止冠三分。人杰惟追古解良，士民争拜汉云长。桃园一日兄和弟，俎豆千秋帝与王。气挟风雷无匹敌，志垂日月有光芒。至今庙貌盈天下，古木寒鸦几夕阳。”")
call SetPlayerName(GetOwningPlayer(GetTriggerUnit()),"前将军"+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),3),GF[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call SetPlayerTechResearchedSwap($526F7374,1,GetOwningPlayer(GetTriggerUnit()))
call EnableTrigger(TQ)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function vl takes nothing returns nothing
set N4=CreateTrigger()
call a9(N4,W)
call TriggerAddCondition(N4,Condition(function vj))
call TriggerAddAction(N4,function vk)
endfunction
function vm takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetPlayerTechCountSimple($526F7374,GetOwningPlayer(GetTriggerUnit()))<1 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())<1
endfunction
function vn takes nothing returns nothing
if bC(GetTriggerUnit(),$77746C67)==true then
call RemoveItem(aj(GetTriggerUnit(),$77746C67))
call UnitAddAbilityBJ($41303536,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303536)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+50.)
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFFFF0066被后主刘禅封为：西乡侯、右将军、假节（袭张飞生前官职爵位）。")
call DisplayTimedTextToForce(GetPlayersAll(),30,"|cFF336699右将军：张飞。
安喜曾闻鞭督邮，黄巾扫尽佐炎刘。虎牢关上声先震，长坂桥边水逆流。义释严颜安蜀境，智欺张合定中州。伐吴未克身先死，秋草长遗阆地愁。")
call SetPlayerName(GetOwningPlayer(GetTriggerUnit()),"右将军"+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),3),GF[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call SetPlayerTechResearchedSwap($526F7374,1,GetOwningPlayer(GetTriggerUnit()))
call EnableTrigger(TR)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function vo takes nothing returns nothing
set TQ=CreateTrigger()
call DisableTrigger(TQ)
call a9(TQ,W)
call TriggerAddCondition(TQ,Condition(function vm))
call TriggerAddAction(TQ,function vn)
endfunction
function vp takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetPlayerTechCountSimple($526F7374,GetOwningPlayer(GetTriggerUnit()))<1 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())<1
endfunction
function vq takes nothing returns nothing
if bC(GetTriggerUnit(),$77746C67)==true then
call RemoveItem(aj(GetTriggerUnit(),$77746C67))
call UnitAddAbilityBJ($41303538,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303538)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+50.)
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFFFF0066被后主刘禅封：犛乡侯、左将军、假节（袭马超生前官职爵位）。")
call DisplayTimedTextToForce(GetPlayersAll(),30,"|cFF336699左将军：马超
朔风古径浸胡泉，荒原暮雨染秋弦。霜临渭桥船载月，雪满潼关马嘶辕。将军英伟失喷育，鲲鸿浩气啸坤乾。古冢盈香斜晚照，玉魂松骨伴清闲。朔风失啸，荒原蔽日嘶锦马。羌云独叹，凉疆浩土展雄鹰。")
call SetPlayerName(GetOwningPlayer(GetTriggerUnit()),"左将军"+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),3),GF[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call SetPlayerTechResearchedSwap($526F7374,1,GetOwningPlayer(GetTriggerUnit()))
call EnableTrigger(TS)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function vr takes nothing returns nothing
set TR=CreateTrigger()
call DisableTrigger(TR)
call a9(TR,W)
call TriggerAddCondition(TR,Condition(function vp))
call TriggerAddAction(TR,function vq)
endfunction
function vs takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetPlayerTechCountSimple($526F7374,GetOwningPlayer(GetTriggerUnit()))<1 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit())<1
endfunction
function vt takes nothing returns nothing
if bC(GetTriggerUnit(),$77746C67)==true then
call RemoveItem(aj(GetTriggerUnit(),$77746C67))
call UnitAddAbilityBJ($41303539,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303539)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+50.)
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFFFF0066被后主刘禅封为：关内侯、后将军（袭黄忠生前官职爵位）。")
call DisplayTimedTextToForce(GetPlayersAll(),30,"|cFF336699后将军：黄忠。
重披金锁甲，双挽铁胎弓。胆气惊河北，威名镇蜀中。临亡头似雪，犹自显英雄。")
call SetPlayerName(GetOwningPlayer(GetTriggerUnit()),"后将军"+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),3),GF[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call SetPlayerTechResearchedSwap($526F7374,1,GetOwningPlayer(GetTriggerUnit()))
call EnableTrigger(TT)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function vu takes nothing returns nothing
set TS=CreateTrigger()
call DisableTrigger(TS)
call a9(TS,W)
call TriggerAddCondition(TS,Condition(function vs))
call TriggerAddAction(TS,function vt)
endfunction
function vv takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetPlayerTechCountSimple($526F7374,GetOwningPlayer(GetTriggerUnit()))<1 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())<1 and GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())<1
endfunction
function vw takes nothing returns nothing
call SetPlayerStateBJ(GetEnumPlayer(),PLAYER_STATE_RESOURCE_FOOD_CAP,100)
endfunction
function vx takes nothing returns nothing
if bC(GetTriggerUnit(),$77746C67)==true then
call RemoveItem(aj(GetTriggerUnit(),$77746C67))
call UnitAddAbilityBJ($41303541,GetTriggerUnit())
call UnitMakeAbilityPermanent(GetTriggerUnit(),true,$41303541)
call SetUnitState(GetTriggerUnit(),ConvertUnitState(18),GetUnitState(GetTriggerUnit(),ConvertUnitState(18))+50.)
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"|cFFFF0066被后主刘禅封为：中护军、永昌亭侯（袭赵云生前官职爵位）。")
call DisplayTimedTextToForce(GetPlayersAll(),30,"|cFF336699中护军：赵云。
常山有虎将，智勇匹关张。汉水功勋在，当阳姓字彰。两番扶幼主，一念答先皇。青史书忠烈，应流百世芳。")
call SetPlayerName(GetOwningPlayer(GetTriggerUnit()),"中护军"+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call MultiboardSetItemValue(MultiboardGetItem(bj_lastCreatedMultiboard,GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit())),3),GF[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]+GetPlayerName(GetOwningPlayer(GetTriggerUnit())))
call SetPlayerTechResearchedSwap($526F7374,1,GetOwningPlayer(GetTriggerUnit()))
call SetHeroLevel(Dz,100,true)
call ForForce(GetPlayersAll(),function vw)
call DisplayTextToForce(GetPlayersAll(),"五虎重现,匡扶汉室有望.孔明升至100级.
")
call DisplayTextToForce(GetPlayersAll(),"五虎重现，孔明等级提升至100。")
call ShowUnitShow(DY)
call EnableTrigger(TU)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function vy takes nothing returns nothing
set TT=CreateTrigger()
call DisableTrigger(TT)
call a9(TT,W)
call TriggerAddCondition(TT,Condition(function vv))
call TriggerAddAction(TT,function vx)
endfunction
function vz takes nothing returns boolean
return IsUnitDeadBJ(D7)==true and IsUnitAlly(GetTriggerUnit(),Player(8))==true
endfunction
function v0 takes nothing returns nothing
local integer Jk
if GetRandomInt(1,500)==444 then
set Jd[15]=GetRectCenter(W)
call PanCameraToTimed(-1182.,-5055.,0)
call AddWeatherEffectSaveLast(GetPlayableMapRect(),$524C6872)
call DisplayTimedTextToForce(GetPlayersAll(),30,"|cFFFF0000因为天气的原因，大雨骤降，栈道断绝，蜀国的粮草供应不及。正当诸葛亮率部乘胜追击魏军时，中都护李严当心孔明事后责罚，便假传圣旨。孔明无奈只得退军。|cFFCC9900所有玩家退回到孔明身边。")
set Jk=1
loop
exitwhen Jk>8
call fn(Ib[Jk],0)
set Jk=Jk+1
endloop
call SetUnitInvulnerable(D0,false)
call SetUnitOwner(D0,Player(PLAYER_NEUTRAL_AGGRESSIVE),true)
call PauseUnitBJ(false,D0)
call DestroyTrigger(Na)
call DestroyTrigger(Nb)
call RemoveLocation(Jd[15])
else
endif
endfunction
function v1 takes nothing returns nothing
set N1=CreateTrigger()
call DisableTrigger(N1)
call TriggerRegisterAnyUnitEventBJ(N1,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(N1,Condition(function vz))
call TriggerAddAction(N1,function v0)
endfunction
function v2 takes nothing returns boolean
return IsUnitType(GetKillingUnitBJ(),UNIT_TYPE_HERO)==true and IsPlayerAlly(GetOwningPlayer(GetKillingUnitBJ()),Player(8))==true
endfunction
// 杀敌奖励事件
function v3 takes nothing returns nothing
local integer KW
set KW=1
loop
exitwhen KW>8
if Fi[KW]+Fj[KW]*10>=1000 and GetOwningPlayer(GetKillingUnitBJ())==ConvertedPlayer(KW) then
call QuestMessageBJ(GetPlayersAll(),bj_QUESTMESSAGE_COMPLETED,"|cFF666600奋勇杀敌（任务完成）"+("奖励"+(GetUnitName(Ib[KW])+"30点属性，30000金钱。")))
call DisplayTextToForce(GetPlayersAll(),GetUnitName(Dz)+"将军真乃虎将耶！")
call AdjustPlayerStateBJ(30000,ConvertedPlayer(KW),PLAYER_STATE_RESOURCE_GOLD)
call ModifyHeroStat(bj_HEROSTAT_STR,Ib[KW],bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ib[KW],bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_INT,Ib[KW],bj_MODIFYMETHOD_ADD,30)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
set KW=KW+1
endloop
endfunction
function v4 takes nothing returns nothing
set TV=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(TV,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(TV,Condition(function v2))
call TriggerAddAction(TV,function v3)
endfunction
function v5 takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$627A6266 and bC(GetTriggerUnit(),$6B74726D)==true
endfunction
// 三国演义兑换事件
function v6 takes nothing returns nothing
    local integer loc_random_num =0
call RemoveItem(aj(GetTriggerUnit(),$6B74726D))
if GetTriggerUnit()==zhangjiao then
set loc_random_num = GetRandomInt(1,3)
if loc_random_num == 1 then
    // 太平令
call UnitAddItemByIdSwapped('it0u',GetTriggerUnit())
elseif loc_random_num ==2 then
    // 遁甲天书
call UnitAddItemByIdSwapped('dtsb',GetTriggerUnit())
else
    // 太平要术
call UnitAddItemByIdSwapped('I005',GetTriggerUnit())
endif
endif
// 精卫-凤羽，低概率获得朱雀圣痕
if GetTriggerUnit()==jingwei then
call UnitAddItemByIdSwapped('bspd',GetTriggerUnit())
call UnitAddItemByIdSwapped('bspd',GetTriggerUnit())
call UnitAddItemByIdSwapped('bspd',GetTriggerUnit())
if GetRandomInt(1, 10) == 1 then
call UnitAddItemByIdSwapped('k3m3',GetTriggerUnit())
endif

endif
if GetTriggerUnit()==sunQian then
    // 孙乾-幸运币
call UnitAddItemByIdSwapped($69743067,GetTriggerUnit())
return
endif

if GetTriggerUnit()==zhuGeGuo then
    // 诸葛果-小李飞刀
call UnitAddItemByIdSwapped($69743066,GetTriggerUnit())
return
endif

if GetUnitTypeId(GetTriggerUnit())==$4F4C5642 or GetUnitTypeId(GetTriggerUnit())==$484C4232 then
    // 吕布-幽冥赤兔
call UnitAddItemByIdSwapped($49303146,GetTriggerUnit())
return
endif

if GetUnitTypeId(GetTriggerUnit())==$48444430 then
    // 朵思大王-魔神甲
call UnitAddItemByIdSwapped($70737064,GetTriggerUnit())
return
endif
if GetUnitTypeId(GetTriggerUnit())==$4841484E or GetUnitTypeId(GetTriggerUnit())==$4F303036 then
    // 阿会喃-昆仑镜
call UnitAddItemByIdSwapped($736F756C,GetTriggerUnit())
return
endif
if GetUnitTypeId(GetTriggerUnit())==$4530305A or GetUnitTypeId(GetTriggerUnit())==$48303059 then
    // 马忠-震天弓穿云箭
call UnitAddItemByIdSwapped($72616D34,GetTriggerUnit())
call UnitAddItemByIdSwapped($6F76656E,GetTriggerUnit())
return
endif
if GetUnitTypeId(GetTriggerUnit())==$4F303033 or GetUnitTypeId(GetTriggerUnit())==$4F303035 then
    // 关凤-赤兔
call UnitAddItemByIdSwapped($73666F67,GetTriggerUnit())
return
endif
if GetUnitTypeId(GetTriggerUnit())==$48505430 then
    // 庞统-伏羲琴
call UnitAddItemByIdSwapped($49303049,GetTriggerUnit())
return
endif
if GetUnitAbilityLevel(GetTriggerUnit(), 'S002') >0 or  GetUnitTypeId(GetTriggerUnit())=='H007' then
    // 张飞-盘古斧
call UnitAddItemByIdSwapped($6F636F72,GetTriggerUnit())
return
endif
if GetUnitTypeId(GetTriggerUnit())==$4F726578 then
    // 孟获-巨象
call UnitAddItemByIdSwapped($49303037,GetTriggerUnit())
return
endif
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(DQ) then
    // 火神盾
call UnitAddItemByIdSwapped($726F7473,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(Cr) or GetUnitTypeId(GetTriggerUnit())==$48584842 then
    // 火焰拳套
call UnitAddItemByIdSwapped($73687273,GetTriggerUnit())
return
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304C30)>0 then
    // 丈八蛇矛
call UnitAddItemByIdSwapped($726E7370,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(DM) then
    // 问天枪
call UnitAddItemByIdSwapped($49303034,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(Cx) or GetUnitTypeId(GetTriggerUnit())==$484A5731 or GetUnitTypeId(GetTriggerUnit())==$486B616C then
    // 震天弓和穿云箭
call UnitAddItemByIdSwapped($72616D34,GetTriggerUnit())
call UnitAddItemByIdSwapped($6F76656E,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(C3) then
    // 机关车
call UnitAddItemByIdSwapped($49303056,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(Cw) then
    // 魔神之翼
call UnitAddItemByIdSwapped($49303036,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(C2) or GetUnitTypeId(GetTriggerUnit())==$484D5331 then
    // 雷神管
call UnitAddItemByIdSwapped($49303142,GetTriggerUnit())
return
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304C32)>0 then
    // 天狼枪
call UnitAddItemByIdSwapped($49303055,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(DE) then
    // 倚天剑
call UnitAddItemByIdSwapped($73686377,GetTriggerUnit())
return
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304C34)>0 then
    // 养由基之弓
call UnitAddItemByIdSwapped($72616D33,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(Cp) or GetUnitTypeId(GetTriggerUnit())==$48485959 then
    // 水神戟
call UnitAddItemByIdSwapped($73747067,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(C0) then
    // 玄光之翼
call UnitAddItemByIdSwapped($62666872,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(Cz) then
    // 刑天斧和刑天盾
call UnitAddItemByIdSwapped($67736F75,GetTriggerUnit())
call UnitAddItemByIdSwapped($636F736C,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(Ct) then
    // 七星宝刀
call UnitAddItemByIdSwapped($6E737069,GetTriggerUnit())
return
else
if GetUnitAbilityLevel(GetTriggerUnit(),$41304136)>0 or GetUnitAbilityLevel(GetTriggerUnit(),$41475951)>0 then
    // 青龙刀
call UnitAddItemByIdSwapped($73666F67,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(C1) then
    // 项羽战刃
call UnitAddItemByIdSwapped($73747265,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(DL) then
    // 太平要术
call UnitAddItemByIdSwapped($49303035,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48475330 or GetUnitTypeId(GetTriggerUnit())==$48475332 and bC(GetTriggerUnit(),$49303147)==true then
    // 幽冥赤兔
call UnitAddItemByIdSwapped($49303146,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48475332 or GetUnitTypeId(GetTriggerUnit())==$48475330 then
    // 方天鬼戟
call UnitAddItemByIdSwapped($49303147,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48575930 or GetUnitTypeId(GetTriggerUnit())==$4E30304D or GetUnitTypeId(GetTriggerUnit())==$48575932 then
    // 奇谋
call UnitAddItemByIdSwapped($49303150,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$484A5330 or GetUnitTypeId(GetTriggerUnit())==$484A5331 or GetUnitTypeId(GetTriggerUnit())==$484A5332 or GetUnitTypeId(GetTriggerUnit())==$484A5333 and bC(GetTriggerUnit(),$6D6C7374)==true and HaveSavedInteger(FS,GetHandleId(GetTriggerUnit()),$E48A2A07)==false then
call SaveInteger(FS,GetHandleId(GetTriggerUnit()),$E48A2A07,1)
// 九天算尺
call UnitAddItemByIdSwapped($49303043,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$484A5330 or GetUnitTypeId(GetTriggerUnit())==$484A5331 or GetUnitTypeId(GetTriggerUnit())==$484A5332 or GetUnitTypeId(GetTriggerUnit())==$484A5333 and HaveSavedInteger(FS,GetHandleId(GetTriggerUnit()),$2B390203)==false then
call SaveInteger(FS,GetHandleId(GetTriggerUnit()),$2B390203,1)
// 轩辕剑
call UnitAddItemByIdSwapped($6D6C7374,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(Co) then
    // 日月乾坤轮
call UnitAddItemByIdSwapped($7664646C,GetTriggerUnit())
return
else
if GetUnitTypeId(GetTriggerUnit())==$4E303050 and HaveSavedInteger(FS,GetHandleId(GetTriggerUnit()),$2B390203)==false then
    // 九天算尺
call SaveInteger(FS,GetHandleId(GetTriggerUnit()),$2B390203,1)
call UnitAddItemByIdSwapped($49303043,GetTriggerUnit())
else
if GetUnitTypeId(GetTriggerUnit())==$48767368 then
    // 百避双匕
call UnitAddItemSwapped(CreateItem($49303057,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit())),GetTriggerUnit())
return
else


if GetRandomInt(1,100)==38 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(180,181)],GetTriggerUnit())
else
call UnitAddItemByIdSwapped(LJ[GetRandomInt(185,188)],GetTriggerUnit())
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function v7 takes nothing returns nothing
set SW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(SW,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(SW,Condition(function v5))
call TriggerAddAction(SW,function v6)
endfunction
function v8 takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(D0)
endfunction
function v9 takes nothing returns nothing
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),Dz,"孔明",null,"诸葛亮接到密报，十分气愤，于是给后主上了奏章，以李严弄虚作假，贻误军机等罪名，弹劾李严。八月底，后主下诏免除李严所有官职，废为庶民，流放于梓潼郡。",bj_TIMETYPE_ADD,0,true)
call DestroyTrigger(N1)
endfunction
function wB takes nothing returns nothing
set TW=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(TW,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(TW,Condition(function v8))
call TriggerAddAction(TW,function v9)
endfunction
function wC takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==$6F70656F and GetUnitAbilityLevelSwapped($41726570,GetTransportUnitBJ())<1
endfunction
function wD takes nothing returns nothing
call UnitAddAbilityBJ($41726570,GetTransportUnitBJ())
endfunction
function wE takes nothing returns nothing
set TX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(TX,EVENT_PLAYER_UNIT_LOADED)
call TriggerAddCondition(TX,Condition(function wC))
call TriggerAddAction(TX,function wD)
endfunction
function wF takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitAbilityLevelSwapped($41303556,GetTransportUnitBJ())<1 and GetUnitTypeId(GetTransportUnitBJ())==$686D7474
endfunction
function wG takes nothing returns nothing
if GetUnitTypeId(GetTriggerUnit())==$4867616D or GetUnitTypeId(GetTriggerUnit())==$486A6169 then
call SetUnitMoveSpeed(GetTransportUnitBJ(),500.)
call UnitAddAbilityBJ($41726570,GetTransportUnitBJ())
call UnitAddAbilityBJ($41303556,GetTransportUnitBJ())
call UnitAddAbilityBJ($414E6961,GetTransportUnitBJ())
else
endif
endfunction
function wH takes nothing returns nothing
set TY=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(TY,EVENT_PLAYER_UNIT_LOADED)
call TriggerAddCondition(TY,Condition(function wF))
call TriggerAddAction(TY,function wG)
endfunction
function wI takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$726D6132 and GetUnitTypeId(GetTriggerUnit())!=$48474730
endfunction
function wJ takes nothing returns nothing
local group KB
local unit KC
local integer TZ=0
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,-7161.,9888.,1100.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitAlly(KC,Player(8))==true and IsUnitType(KC,UNIT_TYPE_HERO)==true then
set TZ=TZ+1
else
endif
endloop
call DestroyGroup(KB)
if TZ<1 then
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,-7161.,9888.,1100.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitOwnedByPlayer(KC,Player(PLAYER_NEUTRAL_AGGRESSIVE))==true then
call RemoveUnit(KC)
else
endif
endloop
call DestroyGroup(KB)
call SetUnitPosition(GetTriggerUnit(),-6824.,9622.)
call fl(GetOwningPlayer(GetTriggerUnit()),-6824.,9622.,0.)
set bj_lastCreatedUnit=CreateUnit(Player(12),GetUnitTypeId(GetTriggerUnit()),-7161.,9889.,bj_UNIT_FACING)
set Ta[1]=GetTriggerUnit()
set Ta[2]=bj_lastCreatedUnit
call SetHeroLevelBJ(GetLastCreatedUnit(),GetUnitLevel(GetTriggerUnit()),false)
call ModifyHeroStat(bj_HEROSTAT_STR,GetLastCreatedUnit(),bj_MODIFYMETHOD_ADD,GetHeroStr(GetTriggerUnit(),true)*5)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetLastCreatedUnit(),bj_MODIFYMETHOD_ADD,GetHeroAgi(GetTriggerUnit(),true)*5)
call ModifyHeroStat(bj_HEROSTAT_INT,GetLastCreatedUnit(),bj_MODIFYMETHOD_ADD,GetHeroInt(GetTriggerUnit(),true)*5)
else
call DisplayTextToForce(GetPlayersAll(),"已经有人在挑战了，请耐心等待！")
call AdjustPlayerStateBJ(40000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
endif
set KB=null
set KC=null
endfunction
function wK takes nothing returns nothing
set SX=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(SX,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(SX,Condition(function wI))
call TriggerAddAction(SX,function wJ)
endfunction
function wL takes nothing returns boolean
return GetTriggerUnit()==Ta[2]
endfunction
function wM takes nothing returns nothing
set Jd[38]=GetUnitLoc(GetTriggerUnit())
call CreateItemLoc($6B74726D,Jd[38])
call SetHeroLevelBJ(Ta[1],GetUnitLevel(Ta[1])+1,true)
call DisplayTextToForce(GetPlayersAll(),GetUnitName(Ta[1])+"挑战镜像成功！")
set Ta[2]=null
set Ta[1]=null
call RemoveLocation(Jd[38])
endfunction
function wN takes nothing returns nothing
set Tb=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Tb,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Tb,Condition(function wL))
call TriggerAddAction(Tb,function wM)
endfunction
function wO takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())!=Player(8) and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) and GetUnitTypeId(GetTriggerUnit())!=$55585451 and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()!=Ta[1]
endfunction
function wP takes nothing returns nothing
local group KB
local unit KC
local integer TZ=0
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,-7161.,9888.,1100.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitAlly(KC,Player(8))==true and IsUnitType(KC,UNIT_TYPE_HERO)==true then
set TZ=TZ+1
else
endif
endloop
call DestroyGroup(KB)
if TZ>1 then
call fn(GetTriggerUnit(),0)
else
endif
set KB=null
set KC=null
endfunction
function wQ takes nothing returns nothing
set Tc=CreateTrigger()
call a9(Tc,BI)
call TriggerAddCondition(Tc,Condition(function wO))
call TriggerAddAction(Tc,function wP)
endfunction
function wR takes nothing returns boolean
return IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitLevel(Dz)>=100 and IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetPlayerTechCountSimple($526F7374,GetOwningPlayer(GetTriggerUnit()))==9
endfunction
function wS takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),"阁下莫非就是蜀国的五虎上将！可是将军不保家卫国，跑到这深山野林里来干嘛？")
if GetRandomInt(1,5)==5 then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"水镜先生：好吧，好吧，烦死我了，你在这里我根本没办法安心看书。我这里有些书籍也许对卧龙先生有点用处，拿了赶快走！")
call TriggerSleepAction(2)
call UnitRemoveItemFromSlotSwapped(1,Dz)
call UnitAddItemByIdSwapped($7363756C,Dz)
call DisplayTextToForce(GetPlayersAll(),"吾将平生所学，已著书二十四篇，计十万四千一百一十二字，内有八务、七戒、六恐、五惧之法。欲与众将同心协必，恢复中原，重兴汉室！！
|cffB366FF孔明获得兵书二十四篇")
call UnitAddAbility(Dz,$4130364F)
call DestroyTrigger(GetTriggeringTrigger())
else
call DisplayTextToForce(GetPlayersAll(),"水镜先生：既是卧龙先生让你来找我的，那他为什么不亲自来？")
endif
endfunction
function wT takes nothing returns nothing
set TU=CreateTrigger()
call DisableTrigger(TU)
call a9(TU,BK)
call TriggerAddCondition(TU,Condition(function wR))
call TriggerAddAction(TU,function wS)
endfunction
function wU takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetOwningPlayer(GetTriggerUnit())!=Player(8) and GetTriggerUnit()!=Dz and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetUnitLevel(GetTriggerUnit())>=10 and GetTriggerUnit()!=DF and GetRandomInt(1,GetUnitLevel(GetTriggerUnit())+50)==GetUnitLevel(GetTriggerUnit()) and GetTriggerUnit()!=C5 and GetUnitTypeId(GetTriggerUnit())!=$48474730
endfunction
function wV takes nothing returns boolean
return GetOwningPlayer(GetFilterUnit())==Player(PLAYER_NEUTRAL_AGGRESSIVE)
endfunction
function wW takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function wX takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(8))==true  and IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true and GetOwningPlayer(GetFilterUnit())!=Player(PLAYER_NEUTRAL_PASSIVE)  and GetUnitPointValue(GetFilterUnit())!=100
endfunction
function wY takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(), "单位附加值：" +I2S(GetUnitPointValue(GetTriggerUnit())))
if GetUnitPointValue(GetTriggerUnit()) ==100 then
return
endif
call DisplayTextToForce(GetPlayersAll(),GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"5秒后将挑战心魔")
if CountUnitsInGroup(ao(BI,Condition(function wX)))<1 then
set Jd[21]=GetRectCenter(BJ)
set Jd[22]=GetRectCenter(BI)
set bj_wantDestroyGroup=true
call ForGroupBJ(ao(BI,Condition(function wV)),function wW)
call fn(GetTriggerUnit(),$AF4698E1)
set Ta[4]=GetTriggerUnit()
call TriggerSleepAction(5.)
call CreateNUnitsAtLoc(1,GetUnitTypeId(GetTriggerUnit()),Player(PLAYER_NEUTRAL_AGGRESSIVE),Jd[22],bj_UNIT_FACING)
call SetHeroLevelBJ(GetLastCreatedUnit(),GetUnitLevel(GetTriggerUnit()),false)
call ModifyHeroStat(bj_HEROSTAT_STR,GetLastCreatedUnit(),bj_MODIFYMETHOD_ADD,GetHeroStr(GetTriggerUnit(),true)*4)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetLastCreatedUnit(),bj_MODIFYMETHOD_ADD,GetHeroAgi(GetTriggerUnit(),true)*4)
call ModifyHeroStat(bj_HEROSTAT_INT,GetLastCreatedUnit(),bj_MODIFYMETHOD_ADD,GetHeroInt(GetTriggerUnit(),true)*4)
set Ta[3]=bj_lastCreatedUnit
call RemoveLocation(Jd[22])
call RemoveLocation(Jd[21])
else
endif
endfunction
function wZ takes nothing returns nothing
set Td=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Td,EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(Td,Condition(function wU))
call TriggerAddAction(Td,function wY)
endfunction
function wa takes nothing returns boolean
return GetTriggerUnit()==Ta[3]
endfunction
function wb takes nothing returns nothing
local integer KW
set KW=1
loop
exitwhen KW>4
call SetHeroLevel(Ta[4],GetUnitLevel(Ta[4])+1,true)
set KW=KW+1
endloop
call DisplayTextToForce(GetPlayersAll(),GetUnitName(Ta[4])+"挑战心魔成功提升4级(全属性+20)！")
call UnitAddItemByIdSwapped($6B74726D,Ta[4])
call ModifyHeroStat(bj_HEROSTAT_STR,Ta[4],bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_AGI,Ta[4],bj_MODIFYMETHOD_ADD,20)
call ModifyHeroStat(bj_HEROSTAT_INT,Ta[4],bj_MODIFYMETHOD_ADD,20)
set Ta[3]=null
set Ta[4]=null
endfunction
function wc takes nothing returns nothing
set Te=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Te,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(Te,Condition(function wa))
call TriggerAddAction(Te,function wb)
endfunction
function wd takes nothing returns boolean
return GetItemTypeId(GetManipulatedItem())==$72656A35
endfunction
// 仙人赐宝
function we takes nothing returns nothing
call DisplayTextToForce(GetPlayersAll(),GetHeroProperName(GetTriggerUnit())+"大仙，看在我辛苦守卫剑阁的份上，赐我几件宝物吧。")
// 孙乾的专属
if GetTriggerUnit() == Tg and GetTriggerUnit() == sunQian and giveTongQian ==false then
    // and bC(GetTriggerUnit(), $69743067) == true
    set giveTongQian=true
    set Tg=null
    call DisplayTextToForce(GetPlayersAll(),"这是上古人族铸造的第一枚铸币，希望它能助你大业所成。")
    call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+"|cffffdead获得了落宝铜钱！")
    call UnitAddItemByIdSwapped($69743065,GetTriggerUnit())
    // call UnitAddItemByIdSwapped($69743067,GetTriggerUnit())
endif
// 心之钢
if GetTriggerUnit() == Tg and giveGang == false and GetRandomInt(1, 10) ==1 then
    // and bC(GetTriggerUnit(), $69743067) == true
    set giveGang=true
    set Tg=null
    call DisplayTextToForce(GetPlayersAll(),"这是不知从哪捡到的破烂，今天就送给你了。")
    call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+"|cffffdead获得了心之钢！")
    call UnitAddItemByIdSwapped($69743069,GetTriggerUnit())
    // call UnitAddItemByIdSwapped($69743067,GetTriggerUnit())
endif

if GetTriggerUnit() == Tg and giveTianshu ==false and bC(GetTriggerUnit(), 'it0v') == true and bC(GetTriggerUnit(), 'it0u') == true and bC(GetTriggerUnit(), 'I005') == true and bC(GetTriggerUnit(), 'I001') == true and bC(GetTriggerUnit(), 'I002') == true and bC(GetTriggerUnit(), 'I01B') == true then
 call RemoveItem(aj(GetTriggerUnit(),'it0v'))
 call RemoveItem(aj(GetTriggerUnit(),'it0u'))
 call RemoveItem(aj(GetTriggerUnit(),'I005'))
 call RemoveItem(aj(GetTriggerUnit(),'I001'))
 call RemoveItem(aj(GetTriggerUnit(),'I002'))
 call RemoveItem(aj(GetTriggerUnit(),'I01B'))
 call UnitAddItemByIdSwapped('it0t',GetTriggerUnit())
set giveTianshu = true
set Tg=null
call DisplayTextToForce(GetPlayersAll(),"罢了，我知汝事未竟，愿未了，这古卷天书便拿走吧")
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+"|cffffdead获得了天书古卷！")
endif

if GetTriggerUnit()==Tg and GetRandomInt(1,150)<=GetUnitLevel(GetTriggerUnit()) and givePaper==false then
// call DisableTrigger(GetTriggeringTrigger())
call UnitAddItemByIdSwapped($72656A32,GetTriggerUnit())
set NL[1]=bj_lastCreatedItem
call SetItemUserData(NL[1],277)
call DisplayTextToForce(GetPlayersAll(),"奥妙藏匿真无字，不要再来烦我了。")
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+"|cffffdead获得了无字天书！")
set givePaper=true
set Tg=null
call SetUnitUserData(Db,277)
// call DestroyTrigger(GetTriggeringTrigger())
elseif GetTriggerUnit()==Tg and GetRandomInt(1,250)<=GetUnitLevel(GetTriggerUnit()) and giveShield==false then
//玄光盾 
call UnitAddItemByIdSwapped($69743039,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),"铁壁如山神威重，不要再来烦我了。")
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+"|cffffdead获得了玄光盾！")
set Tg=null
set giveShield=true
elseif GetTriggerUnit()==Tg  and GetRandomInt(1,150)<=GetUnitLevel(GetTriggerUnit()) and giveGlove==false then
// 混元霹雳手
set giveGlove=true
call UnitAddItemByIdSwapped($69743061,GetTriggerUnit())
call DisplayTextToForce(GetPlayersAll(),"雷鸣霹雳映天光，不要再来烦我了。")
call DisplayTextToForce(GetPlayersAll(),GetUnitName(GetTriggerUnit())+"|cffffdead获得了混元霹雳手！")
set Tg=null
else
if GetTriggerUnit() == zhangjiao and giveTianshu==false then
call DisplayTextToForce(GetPlayersAll(), "孟凌，吾早已传天书与汝，汝莫非还想一睹古卷？")
else
call DisplayTextToForce(GetPlayersAll(),"你我无缘！！")
endif

set Tg=GetTriggerUnit()
endif
call ShowUnitHide(Db)
endfunction
function wf takes nothing returns nothing
set Tf=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Tf,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(Tf,Condition(function wd))
call TriggerAddAction(Tf,function we)
endfunction
function wg takes nothing returns nothing
set Jd[35]=GetRandomLocInRect(Bc)
if IsTerrainPathableBJ(Jd[35],PATHING_TYPE_WALKABILITY)==false and RectContainsLoc(Ba,Jd[35])==false then
call SetUnitPositionLoc(Db,Jd[35])
call StartTimerBJ(Fv,false,300.)
call DisplayTextToForce(GetPlayersAll(),"江湖传闻:有人见到仙人出没!")
call PingMinimapLocForForce(GetPlayersAll(),Jd[35],10.)
call AddItemToStockBJ($72656A35,Db,1,1)
if IsUnitHiddenBJ(Db)==true then
call ShowUnitShow(Db)
else
endif
call RemoveLocation(Jd[35])
else
call RemoveLocation(Jd[35])
call TriggerExecute(GetTriggeringTrigger())
endif
endfunction
function wh takes nothing returns nothing
set N5=CreateTrigger()
call DisableTrigger(N5)
call TriggerRegisterTimerExpireEvent(N5,Fv)
call TriggerAddAction(N5,function wg)
endfunction
function wi takes nothing returns boolean
return GetEventDamage()>=10 and GetUnitAbilityLevel(GetEventDamageSource(),$41304136)>0
endfunction
function wj takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),C4,"关兴",null,"“歹贼休走！拿命来！”",bj_TIMETYPE_ADD,0,true)
call SetUnitLifeBJ(GetTriggerUnit(),1000.)
call CreateNUnitsAtLoc(1,$7561626F,GetOwningPlayer(C4),GetUnitLoc(GetTriggerUnit()),bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,$42487765,30.)
call DisableTrigger(PO)
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function wk takes nothing returns nothing
set Th=CreateTrigger()
call TriggerRegisterUnitEvent(Th,Ek,EVENT_UNIT_DAMAGED)
call TriggerAddCondition(Th,Condition(function wi))
call TriggerAddAction(Th,function wj)
endfunction
function wl takes nothing returns nothing
call FlushChildHashtable(FT,GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call UnitRemoveAbility(CL,$4176756C)
call ReviveHero(Cf,-12125.,-7872.,false)
call SetUnitState(Cf,UNIT_STATE_MAX_LIFE,GetUnitState(Cf,UNIT_STATE_MAX_LIFE)*2.)
call SetUnitState(Cf,UNIT_STATE_LIFE,GetUnitState(Cf,UNIT_STATE_MAX_LIFE)*1.)
call SetHeroStr(Cf,GetHeroStr(Cf,false)*2,true)
call SetHeroAgi(Cf,GetHeroAgi(Cf,false)*2,true)
call EnableTrigger(Ti)
endfunction
function wm takes nothing returns nothing
local integer Jk
local timer MG
set Jk=1
loop
exitwhen Jk>8
if GetPlayerSlotState(ConvertedPlayer(Jk))==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(ConvertedPlayer(Jk))==MAP_CONTROL_USER and Gp[Jk]>=0 then
set Gp[Jk]=Gp[Jk]+Fw*5
call WQ(ConvertedPlayer(Jk),"游戏积分",Gp[Jk])
call DzAPI_Map_Stat_SetStat(ConvertedPlayer(Jk),"WHJHZHJB",I2S(Gp[Jk]))
call DzAPI_Map_Stat_SetStat(ConvertedPlayer(Jk),"WHJGX",I2S(fo(Player(Jk-1),1*Fw)))
call ay(.2)
call DisplayTextToPlayer(ConvertedPlayer(Jk),0,0,"游戏积分已更新为: "+I2S(Gp[Jk]))
else
endif
set Jk=Jk+1
endloop
if GetUnitAbilityLevel(CL,$4176756C)>0 then
set MG=CreateTimer()
call TimerStart(MG,3.,false,function wl)
else
endif
set MG=null
endfunction
function wn takes nothing returns nothing
set SU=CreateTrigger()
call TriggerRegisterUnitEvent(SU,Cf,EVENT_UNIT_DEATH)
call TriggerAddAction(SU,function wm)
endfunction
function wo takes nothing returns boolean
return Gq>=7
endfunction
function wp takes nothing returns nothing
if GetRandomInt(1,10)==7 then
call CreateItem($49303252,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))
else
endif
endfunction
function wq takes nothing returns nothing
set Ti=CreateTrigger()
call DisableTrigger(Ti)
call TriggerRegisterUnitEvent(Ti,Cf,EVENT_UNIT_DEATH)
call TriggerAddCondition(Ti,Condition(function wo))
call TriggerAddAction(Ti,function wp)
endfunction
function wr takes nothing returns nothing
if LoadInteger(Ia,GetHandleId(GetBuyingUnit()),$5BFF8734)==0 then
call SaveInteger(Ia,GetHandleId(GetBuyingUnit()),$5BFF8734,1)
if GetItemTypeId(GetSoldItem())==$4930324E then
call CreateUnit(GetOwningPlayer(GetBuyingUnit()),$65454C44,GetUnitX(GetBuyingUnit()),GetUnitY(GetBuyingUnit()),bj_UNIT_FACING)
else
if GetItemTypeId(GetSoldItem())==$4930324B then
call SetUnitState(GetBuyingUnit(),UNIT_STATE_MAX_LIFE,GetUnitState(GetBuyingUnit(),UNIT_STATE_MAX_LIFE)+5000.)
call SetUnitState(GetBuyingUnit(),ConvertUnitState(32),GetUnitState(GetBuyingUnit(),ConvertUnitState(32))+150.)
else
if GetItemTypeId(GetSoldItem())==$4930324A then
call UnitAddAbility(GetBuyingUnit(),$41304538)
call UnitMakeAbilityPermanent(GetBuyingUnit(),true,$41304538)
else
if GetItemTypeId(GetSoldItem())==$4930324C then
call SetHeroInt(GetBuyingUnit(),GetHeroInt(GetBuyingUnit(),false)+260,true)
else
if GetItemTypeId(GetSoldItem())==$4930324D then
call SetHeroInt(GetBuyingUnit(),GetHeroInt(GetBuyingUnit(),false)+100,true)
call SetHeroStr(GetBuyingUnit(),GetHeroStr(GetBuyingUnit(),false)+100,true)
call SetHeroAgi(GetBuyingUnit(),GetHeroAgi(GetBuyingUnit(),false)+100,true)
else
endif
endif
endif
endif
endif
else
call AddItemToStockBJ(GetItemTypeId(GetSoldItem()),GetSellingUnit(),1,1)
endif
call RemoveItem(GetSoldItem())
endfunction
function ws takes nothing returns nothing
set Sz=CreateTrigger()
call TriggerAddAction(Sz,function wr)
endfunction

function wt takes nothing returns boolean
return GetSpellAbilityId()==$41304646
endfunction
function wu takes nothing returns nothing
if IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==false then
set IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-7480.,7200.)
set II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetRandomReal(-8000.,14250.)
if IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]<-2192. and IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>-3830. and II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]<-6570. and II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]>-7928. then
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"图纸模糊不清,请看仔细")
else
if IsTerrainPathable(IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],PATHING_TYPE_WALKABILITY)==false then
call PingMinimapForForce(ai(GetOwningPlayer(GetTriggerUnit())),IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))],3.)
set IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=true
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00宝物所在坐标：X "+(I2S(R2I(IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))+("/ Y "+I2S(R2I(II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))))+(" |cffFF0000你当前所在坐标：X "+(I2S(R2I(GetUnitX(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))+("/ Y "+I2S(R2I(GetUnitY(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))))))
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"图纸模糊不清,请看仔细")
endif
endif
else
set found_time = found_time +1
if IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]==true and GetUnitX(GetTriggerUnit())+500.>=IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitX(GetTriggerUnit())-500.<=IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitY(GetTriggerUnit())+500.>=II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] and GetUnitY(GetTriggerUnit())-500.<=II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] then
call RemoveItem(aj(GetTriggerUnit(),$746C756D))
if GetRandomInt(1,100)==4 then
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\great_lightning.mdx",GetTriggerUnit(),"origin"))
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"妄图逆天改命，可惜未能如愿，惨遭天谴，出师未捷身先死！临死之前成功为孔明祈福！")
call SaveInteger(bj_lastCreatedHashtable,$6B6D3030,1,LoadInteger(bj_lastCreatedHashtable,$6B6D3030,1)+1)
call KillUnit(GetTriggerUnit())
else
if GetRandomInt(1,9)==1 then
call UnitAddItemByIdSwapped(LJ[GetRandomInt(1,84)],GetTriggerUnit())
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"恭喜你找到了"+GetItemName(GetLastCreatedItem()))
else
if GetRandomInt(1,20)==18 or (GetRandomInt(1,3)==3 and RequestExtraBooleanData(50,GetOwningPlayer(GetTriggerUnit()),null,null,false,0,0,0)==true) then
if potholingButton==choosedButton then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加50")
else
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,100)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,100)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,100)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加100")
endif

else
if GetRandomInt(1,15)==12 then
if potholingButton==choosedButton then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,35)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,35)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,35)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加35")
else
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加50")
endif
else
endif
if GetRandomInt(1,8)==8 then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,50)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加30")
else
if GetRandomInt(1,8)==8 then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,30)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,30)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加30")
else
if GetRandomInt(1,7)==7 then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,10)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加10")
else
if GetRandomInt(1,6)==6 then
if potholingButton==choosedButton then
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,40)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,40)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,40)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加40")
else
call ModifyHeroStat(bj_HEROSTAT_STR,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,80)
call ModifyHeroStat(bj_HEROSTAT_AGI,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,80)
call ModifyHeroStat(bj_HEROSTAT_INT,GetTriggerUnit(),bj_MODIFYMETHOD_ADD,80)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：增强体能的方法，全属性增加80")
endif
else
if GetRandomInt(1,8)==7 then
call AddHeroXP(GetTriggerUnit(),10000,true)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：兵法残页，战斗经验增加10000")
else
if GetRandomInt(1,5)==5 then
call AddHeroXP(GetTriggerUnit(),5000,true)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：兵法残页，战斗经验增加5000")
else
if GetRandomInt(1,5)==4 then
call AdjustPlayerStateBJ(20,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：稀有物资，木材增加20")
else
if GetRandomInt(1,9)==7 then
call AdjustPlayerStateBJ(30,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_LUMBER)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：稀有物资，木材增加30")
else
if GetRandomInt(1,9)==9 then
call AdjustPlayerStateBJ(10000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：黄金10000两")
else
if GetRandomInt(1,4)==2 then
call AdjustPlayerStateBJ(5000,GetOwningPlayer(GetTriggerUnit()),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：黄金5000两")
else
call AddHeroXP(GetTriggerUnit(),20000,true)
call DisplayTextToPlayer(GetLocalPlayer(),0,0,GetPlayerName(GetOwningPlayer(GetTriggerUnit()))+"使用藏宝图找到了：兵法残页，战斗经验增加20000")
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
set IG[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]=false
if GetRandomInt(1,5)==4 then
call CreateUnit(Player(PLAYER_NEUTRAL_AGGRESSIVE),$6E63656E,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),bj_UNIT_FACING)
else
call DoNothing()
endif
else
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,"|cffffcc00宝物所在坐标：X "+(I2S(R2I(IH[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))+("/ Y "+I2S(R2I(II[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))]))))+(" |cffFF0000你当前所在坐标：X "+(I2S(R2I(GetUnitX(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))+("/ Y "+I2S(R2I(GetUnitY(Ib[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))])))))))
endif
endif
endfunction
function wv takes nothing returns nothing
set Tj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(Tj,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(Tj,Condition(function wt))
call TriggerAddAction(Tj,function wu)
endfunction
function ww takes nothing returns boolean
return GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_AGGRESSIVE) and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_PASSIVE) and GetOwningPlayer(GetTriggerUnit())!=Player(9) and GetOwningPlayer(GetTriggerUnit())!=Player(10) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true
endfunction
function wx takes nothing returns nothing
call TransmissionFromUnitWithNameBJ(GetPlayersAll(),C9,"老人",null,"春风得意遇知音，桃花含笑映祭台。，报国安邦志慷慨，建功立业展雄才。",bj_TIMETYPE_ADD,0,true)
endfunction
function wy takes nothing returns nothing
set Tk=CreateTrigger()
call a9(Tk,BW)
call TriggerAddCondition(Tk,Condition(function ww))
call TriggerAddAction(Tk,function wx)
endfunction
function wz takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_PASSIVE) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()!=Tm[1] and GetTriggerUnit()!=Tm[2] and GetUnitTypeId(GetTriggerUnit())!=$55585451 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303541,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303539,GetTriggerUnit())>=1
endfunction
function w0 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Tm[0]=GetTriggerUnit()
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetUnitName(GetTriggerUnit())+"你进入了力量贡献圈，站在此圈结义，会获得力量加成。")
call IssueImmediateOrderById(GetTriggerUnit(),851972)
endfunction
function w1 takes nothing returns nothing
set Tl=CreateTrigger()
call a9(Tl,BX)
call TriggerAddCondition(Tl,Condition(function wz))
call TriggerAddAction(Tl,function w0)
endfunction
function w2 takes nothing returns boolean
return GetTriggerUnit()==Tm[0]
endfunction
function w3 takes nothing returns nothing
set Tm[0]=null
call EnableTrigger(Tl)
endfunction
function w4 takes nothing returns nothing
set Tn=CreateTrigger()
call bB(Tn,BX)
call TriggerAddCondition(Tn,Condition(function w2))
call TriggerAddAction(Tn,function w3)
endfunction
function w5 takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_PASSIVE) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()!=Tm[0] and GetTriggerUnit()!=Tm[2] and GetUnitTypeId(GetTriggerUnit())!=$55585451 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303541,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303539,GetTriggerUnit())>=1
endfunction
function w6 takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Tm[1]=GetTriggerUnit()
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetUnitName(GetTriggerUnit())+"你进入了敏捷贡献圈，站在此圈结义，会获得敏捷加成。")
call IssueImmediateOrderById(GetTriggerUnit(),851972)
endfunction
function w7 takes nothing returns nothing
set To=CreateTrigger()
call a9(To,BY)
call TriggerAddCondition(To,Condition(function w5))
call TriggerAddAction(To,function w6)
endfunction
function w8 takes nothing returns boolean
return GetTriggerUnit()==Tm[1]
endfunction
function w9 takes nothing returns nothing
set Tm[1]=null
call EnableTrigger(To)
endfunction
function xB takes nothing returns nothing
set Tp=CreateTrigger()
call bB(Tp,BY)
call TriggerAddCondition(Tp,Condition(function w8))
call TriggerAddAction(Tp,function w9)
endfunction
function xC takes nothing returns boolean
return IsUnitAlly(GetTriggerUnit(),Player(8))==true and GetOwningPlayer(GetTriggerUnit())!=Player(PLAYER_NEUTRAL_PASSIVE) and IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true and GetTriggerUnit()!=Tm[0] and GetTriggerUnit()!=Tm[1] and GetUnitTypeId(GetTriggerUnit())!=$55585451 and GetUnitAbilityLevelSwapped($41303537,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303541,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303538,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303536,GetTriggerUnit())>=1 or GetUnitAbilityLevelSwapped($41303539,GetTriggerUnit())>=1
endfunction
function xD takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Tm[2]=GetTriggerUnit()
call DisplayTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,GetUnitName(GetTriggerUnit())+"你进入了智力贡献圈，站在此圈结义，会获得智力加成。")
call IssueImmediateOrderById(GetTriggerUnit(),851972)
endfunction
function xE takes nothing returns nothing
set Tq=CreateTrigger()
call a9(Tq,BZ)
call TriggerAddCondition(Tq,Condition(function xC))
call TriggerAddAction(Tq,function xD)
endfunction
function xF takes nothing returns boolean
return GetTriggerUnit()==Tm[2]
endfunction
function xG takes nothing returns nothing
set Tm[2]=null
call EnableTrigger(Tq)
endfunction
function xH takes nothing returns nothing
set Tr=CreateTrigger()
call bB(Tr,BZ)
call TriggerAddCondition(Tr,Condition(function xF))
call TriggerAddAction(Tr,function xG)
endfunction
function xI takes nothing returns nothing
local integer KW
local integer ME=0
if Tm[0]!=null and Tm[1]!=null and Tm[2]!=null then
call DisableTrigger(GetTriggeringTrigger())
call DisplayTextToForce(GetPlayersAll(),"|cFF66CCFF念|cFFFF0000"+(GetUnitName(Tm[0])+(GetUnitName(Tm[1])+(GetUnitName(Tm[2])+"|cFF1FBF00虽然异姓，既结为兄弟，则同心协力，救困扶危；上报国家，下安黎庶。不求同年同月同日生，只愿同年同月同日死。皇天后土，实鉴此心，背义忘恩，天人共戮！"))))
call DisplayTimedTextToForce(GetPlayersAll(),30,GetUnitName(Tm[0])+(GetUnitName(Tm[1])+(GetUnitName(Tm[2])+"三人已结为异姓兄弟,增加对应的属性,并提升等级5级.虽不能同生,但必定同死!")))
set ME=GetRandomInt(5,10)
call SetHeroStr(Tm[0],GetHeroStr(Tm[0],false)+ME*10,true)
call DisplayTextToPlayer(GetOwningPlayer(Tm[0]),0,0,"结义成功，获得力量： "+I2S(ME*10)+" 点！")
set ME=GetRandomInt(5,10)
call SetHeroAgi(Tm[1],GetHeroAgi(Tm[1],false)+ME*10,true)
call DisplayTextToPlayer(GetOwningPlayer(Tm[1]),0,0,"结义成功，获得敏捷： "+I2S(ME*10)+" 点！")
set ME=GetRandomInt(5,10)
call SetHeroInt(Tm[2],GetHeroInt(Tm[2],false)+ME*10,true)
call DisplayTextToPlayer(GetOwningPlayer(Tm[2]),0,0,"结义成功，获得智力： "+I2S(ME*10)+" 点！")
set KW=0
loop
exitwhen KW>2
call SetHeroLevel(Tm[KW],GetUnitLevel(Tm[KW])+5,true)
call UnitAddAbility(Tm[KW],$41303938)
call UnitMakeAbilityPermanent(Tm[KW],true,$41303938)
call TriggerRegisterUnitEvent(Tt,Tm[KW],EVENT_UNIT_SPELL_EFFECT)
set Tu[KW]=GetUnitLoc(Tm[KW])
set KW=KW+1
endloop
call ExecuteFunc("xM")
call DestroyTrigger(Tk)
call DestroyTrigger(Tn)
call DestroyTrigger(Tp)
call DestroyTrigger(Tr)
call DestroyTrigger(GetTriggeringTrigger())
else
endif
endfunction
function xJ takes nothing returns nothing
set Ts=CreateTrigger()
call TriggerRegisterUnitEvent(Ts,C9,EVENT_UNIT_SELECTED)
call TriggerAddAction(Ts,function xI)
endfunction
function xK takes nothing returns boolean
return GetSpellAbilityId()==$41303938
endfunction
function xL takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set Tv=GetUnitLoc(GetTriggerUnit())
call SetCameraQuickPositionLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Tv)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(GetTriggerUnit()),Tv,0)
call TriggerSleepAction(.1)
if UnitHasBuffBJ(Tm[0],$42303144)==true and UnitHasBuffBJ(Tm[1],$42303144)==true and UnitHasBuffBJ(Tm[2],$42303144)==true then
call TriggerExecute(Tw)
else
call RemoveLocation(Tv)
endif
call EnableTrigger(GetTriggeringTrigger())
endfunction
function xM takes nothing returns nothing
set Tt=CreateTrigger()
call TriggerAddCondition(Tt,Condition(function xK))
call TriggerAddAction(Tt,function xL)
endfunction
function xN takes nothing returns nothing
endfunction
function xO takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
call PauseUnit(Tm[0],true)
call PauseUnit(Tm[1],true)
call PauseUnit(Tm[2],true)
call SetUnitInvulnerable(Tm[0],true)
call SetUnitInvulnerable(Tm[1],true)
call SetUnitInvulnerable(Tm[2],true)
set Tu[3]=PolarProjectionBJ(Tv,500.,0)
set Tu[4]=PolarProjectionBJ(Tv,500.,120.)
set Tu[5]=PolarProjectionBJ(Tv,500.,240.)
call UnitAddAbility(Tm[0],$416D7266)
call UnitAddAbility(Tm[1],$416D7266)
call UnitAddAbility(Tm[2],$416D7266)
call UnitRemoveAbility(Tm[0],$416D7266)
call UnitRemoveAbility(Tm[1],$416D7266)
call UnitRemoveAbility(Tm[2],$416D7266)
call SetUnitX(Tm[0],GetLocationX(Tu[3]))
call SetUnitY(Tm[0],GetLocationY(Tu[3]))
call SetUnitFlyHeight(Tm[0],500.,1000.)
call SetUnitX(Tm[1],GetLocationX(Tu[4]))
call SetUnitY(Tm[1],GetLocationY(Tu[4]))
call SetUnitFlyHeight(Tm[1],500.,1000.)
call SetUnitX(Tm[2],GetLocationX(Tu[5]))
call SetUnitY(Tm[2],GetLocationY(Tu[5]))
call SetUnitFlyHeight(Tm[2],500.,1000.)
call EnableTrigger(Tx)
call AddLightningLoc("CLPB",Tu[3],Tu[4])
call SetLightningColor(GetLastCreatedLightningBJ(),GetRandomReal(0.,1),GetRandomReal(0,1),GetRandomReal(0,1),1)
set Ty[0]=bj_lastCreatedLightning
call AddLightningLoc("CLPB",Tu[3],Tu[5])
call SetLightningColor(GetLastCreatedLightningBJ(),GetRandomReal(0.,1),GetRandomReal(0,1),GetRandomReal(0,1),1)
set Ty[1]=bj_lastCreatedLightning
call AddLightningLoc("CLPB",Tu[4],Tu[5])
call SetLightningColor(GetLastCreatedLightningBJ(),GetRandomReal(0.,1),GetRandomReal(0,1),GetRandomReal(0,1),1)
set Ty[2]=bj_lastCreatedLightning
call AddLightningLoc("AFOD",Tu[3],Tv)
call SetLightningColor(GetLastCreatedLightningBJ(),GetRandomReal(0.,1),GetRandomReal(0,1),GetRandomReal(0,1),1)
set Ty[3]=bj_lastCreatedLightning
call AddLightningLoc("AFOD",Tu[4],Tv)
call SetLightningColor(GetLastCreatedLightningBJ(),GetRandomReal(0.,1),GetRandomReal(0,1),GetRandomReal(0,1),1)
set Ty[4]=bj_lastCreatedLightning
call AddLightningLoc("AFOD",Tu[5],Tv)
call SetLightningColor(GetLastCreatedLightningBJ(),GetRandomReal(0.,1),GetRandomReal(0,1),GetRandomReal(0,1),1)
set Ty[5]=bj_lastCreatedLightning
set Fo=1
loop
exitwhen Fo>60
set Tu[6]=PolarProjectionBJ(Tv,500.,I2R(Fo)*6.)
call CreateDestructableLoc($59546662,Tu[6],GetRandomDirectionDeg(),1,0)
set Tz[Fo]=bj_lastCreatedDestructable
call RemoveLocation(Tu[6])
set Fo=Fo+1
endloop
call TriggerSleepAction(5.)
call DisableTrigger(Tx)
call SetUnitPositionLoc(Tm[0],Tv)
call SetUnitPositionLoc(Tm[1],Tv)
call SetUnitPositionLoc(Tm[2],Tv)
call SetUnitFlyHeight(Tm[0],0.,1000.)
call SetUnitFlyHeight(Tm[1],0.,1000.)
call SetUnitFlyHeight(Tm[2],0.,1000.)
call RemoveLocation(Tv)
call RemoveLocation(Tu[3])
call RemoveLocation(Tu[4])
call RemoveLocation(Tu[5])
call DestroyLightning(Ty[0])
call DestroyLightning(Ty[1])
call DestroyLightning(Ty[2])
call DestroyLightning(Ty[3])
call DestroyLightning(Ty[4])
call DestroyLightning(Ty[5])
call PauseUnit(Tm[0],false)
call PauseUnit(Tm[1],false)
call PauseUnit(Tm[2],false)
call SetUnitInvulnerable(Tm[0],false)
call SetUnitInvulnerable(Tm[1],false)
call SetUnitInvulnerable(Tm[2],false)
set Fo=1
loop
exitwhen Fo>60
call RemoveDestructable(Tz[Fo])
set Fo=Fo+1
endloop
call EnableTrigger(Tw)
endfunction
function xP takes nothing returns nothing
set Tw=CreateTrigger()
call TriggerAddAction(Tw,function xO)
endfunction
function xQ takes nothing returns boolean
return IsUnitAlly(GetFilterUnit(),Player(8))==false and UnitHasBuffBJ(GetFilterUnit(),$4276756C)==false
endfunction
function xR takes nothing returns nothing
local group KB
local unit KC
set KB=CreateGroup()
call GroupEnumUnitsInRange(KB,GetLocationX(Tv),GetLocationY(Tv),1000.,null)
loop
set KC=FirstOfGroup(KB)
exitwhen KC==null
call GroupRemoveUnit(KB,KC)
if IsUnitEnemy(KC,Player(8))==true and IsUnitType(KC,UNIT_TYPE_DEAD)==false and UnitHasBuffBJ(GetTriggerUnit(),$4276756C)==false then
call UnitDamageTarget(Tm[0],KC,I2R(GetHeroStr(Tm[0],true)),false,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(Tm[1],KC,I2R(GetHeroAgi(Tm[1],true)),false,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(Tm[2],KC,I2R(GetHeroInt(Tm[2],true)),false,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)
else
endif
endloop
call DestroyGroup(KB)
set KB=null
set KC=null
endfunction
function xS takes nothing returns nothing
local group KB
local unit KC
call SetUnitAnimation(Tm[0],"spin")
call SetUnitAnimation(Tm[1],"spin")
call SetUnitAnimation(Tm[2],"spin")
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",GetLocationX(Tv)+GetRandomReal(-500.,500.),GetLocationY(Tv)+GetRandomReal(-500.,500.)))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",GetLocationX(Tv)+GetRandomReal(-500.,500.),GetLocationY(Tv)+GetRandomReal(-500.,500.)))
call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",GetLocationX(Tv)+GetRandomReal(-500.,500.),GetLocationY(Tv)+GetRandomReal(-500.,500.)))
set bj_wantDestroyGroup=true
call ForGroupBJ(an(1000.,Tv,Condition(function xQ)),function xR)
set KB=null
set KC=null
endfunction
function xT takes nothing returns nothing
set Tx=CreateTrigger()
call DisableTrigger(Tx)
call TriggerRegisterTimerEventPeriodic(Tx,.05)
call TriggerAddAction(Tx,function xS)
endfunction
function xU takes nothing returns boolean
return GetUnitTypeId(GetTriggerUnit())==$68303043
endfunction
function xV takes nothing returns nothing
if Hg[GetConvertedPlayerId(GetTriggerPlayer())]==GetObjectName($65303130) then
call AddItemToStockBJ($656E6773,Dw,1,9)
else
endif
endfunction
function xW takes nothing returns nothing
set T0=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(0),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(1),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(2),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(3),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(4),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(5),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(6),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(7),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(8),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(9),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(10),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(11),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(12),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(13),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(14),true)
call TriggerRegisterPlayerSelectionEventBJ(T0,Player(15),true)
call TriggerAddCondition(T0,Condition(function xU))
call TriggerAddAction(T0,function xV)
endfunction
function xX takes nothing returns nothing
local integer Jk
call DisplayTextToPlayer(Player(0),0,0,"激活")
call ExecuteFunc("nB")
call ExecuteFunc("tL")
call ExecuteFunc("sw")
call ExecuteFunc("tP")
call ExecuteFunc("shifa_init")
call ExecuteFunc("attack_init")
call ExecuteFunc("g8")
call ExecuteFunc("sn")
call ExecuteFunc("jc")
call ExecuteFunc("jU")
call ExecuteFunc("pi")
call ExecuteFunc("gY")
call ExecuteFunc("gc")
call ExecuteFunc("op")
call ExecuteFunc("io")
call ExecuteFunc("ss")
call ExecuteFunc("pN")
call ExecuteFunc("q9")
call ExecuteFunc("om")
call ExecuteFunc("of")
call ExecuteFunc("oj")
call W8()
call cv()
call ej()
set Jk=1
loop
exitwhen Jk>13
call TriggerRegisterPlayerUnitEventSimple(T1,ConvertedPlayer(Jk),EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterPlayerChatEvent(Kx,ConvertedPlayer(Jk),"英雄信息",true)
set Jk=Jk+1
endloop
endfunction
function xY takes nothing returns nothing
set Id=CreateTrigger()
call TriggerAddAction(Id,function xX)
endfunction
function xZ takes nothing returns nothing
call gG()
call gH()
call gI()
call gJ()
call gK()
call gL()
call gN()
call gV()
call gZ()
call gd()
call gf()
call gh()
call gj()
call gm()
call go()
call gr()
call gt()
call gv()
call gx()
call gz()
call g0()
call g2()
call g6()
call g9()
call hD()
call hE()
call hG()
call hJ()
call hM()
call hP()
call hR()
call hS()
call hV()
call hX()
call hZ()
call hb()
call hd()
call he()
call hg()
call hi()
call hj()
call hl()
call hn()
call hq()
call hu()
call hy()
call h2()
call h5()
call h7()
call h9()
call iD()
call iF()
call iH()
call iJ()
call iL()
call iN()
call iP()
call iR()
call iT()
call iV()
call iY()
call ib()
call ie()
call ii()
call il()
call ip()
call is()
call iv()
call iy()
call i1()
call i4()
call i7()
call jB()
call jE()
call jH()
call jK()
call jN()
call jQ()
call jS()
call jV()
call jd()
call jg()
call ji()
call jm()
call jp()
call js()
call jv()
call jy()
call j0()
call j4()
call j7()
call kB()
call kF()
call kI()
call kM()
call kP()
call kS()
call kU()
call kW()
call kZ()
call kc()
call kf()
call ki()
call kl()
call ko()
call ku()
call kx()
call k0()
call k3()
call k6()
call k9()
call lD()
call lG()
call lJ()
call lM()
call lP()
call lS()
call lV()
call lY()
call lb()
call lf()
call lh()
call lj()
call ll()
call ln()
call lp()
call lr()
call lw()
call lz()
call l1()
call l4()
call l7()
call mB()
call mF()
call mJ()
call mM()
call mP()
call mV()
call mX()
call mZ()
call mc()
call me()
call mg()
call mi()
call mk()
call mo()
call mr()
call mu()
call mx()
call mz()
call m1()
call m4()
call m7()
call nC()
call nD()
call nG()
call nJ()
call nM()
call nO()
call nR()
call nV()
call nX()
call nZ()
call nc()
call nf()
call nh()
call nk()
call nn()
call nq()
call nt()
call nw()
call ny()
call n1()
call n4()
call n7()
call oB()
call oE()
call oH()
call oK()
call oN()
call oQ()
call oT()
call oW()
call oY()
call ob()
call oc()
call og()
call ok()
call on()
call oq()
call ot()
call oy()
call o1()
call o4()
call o7()
call pE()
call pH()
call pK()
call pO()
call pR()
call pW()
call pZ()
call pd()
call pg()
call pj()
call po()
call pq()
call pu()
call px()
call p0()
call p5()
call p7()
call qB()
call qD()
call qG()
call qJ()
call qO()
call qS()
call qV()
call qZ()
call qd()
call qf()
call qi()
call qk()
call qm()
call qo()
call qr()
call qt()
call qu()
call qv()
call qy()
call q3()
call q6()
call rB()
call rE()
call rH()
call rJ()
call rM()
call rP()
call rR()
call rU()
call rW()
call rZ()
call rc()
call re()
call ri()
call rn()
call rq()
call rt()
call ru()
call rx()
call rz()
call r1()
call r3()
call r4()
call r5()
call r6()
call r7()
call r8()
call r9()
call sB()
call sC()
call sD()
call sJ()
call sK()
call sP()
call sQ()
call sR()
call sS()
call sT()
call sU()
call sX()
call sb()
call sd()
call se()
call sf()
call sg()
call sj()
call sk()
call so()
call sp()
call st()
call sx()
call sz()
call s0()
call s3()
call s4()
call s5()
call s8()
call s9()
call tD()
call tH()
call tM()
call tQ()
call tS()
call tV()
call tX()
call tZ()
call tb()
call td()
call tf()
call th()
call tj()
call tm()
call to()
call tv()
call tx()
call t0()
call t2()
call t4()
call t7()
call t9()
call uC()
call uE()
call uG()
call uI()
call uL()
call uO()
call uR()
call uU()
call uX()
call ua()
call ud()
call ug()
call uj()
call um()
call up()
call us()
call uv()
call uy()
call u2()
call u5()
call u8()
call vC()
call vF()
call vH()
call vK()
call vN()
call vQ()
call vT()
call vW()
call vZ()
call vc()
call vf()
call vi()
call vl()
call vo()
call vr()
call vu()
call vy()
call v1()
call v4()
call v7()
call wB()
call wE()
call wH()
call wK()
call wN()
call wQ()
call wT()
call wZ()
call wc()
call wf()
call wh()
call wk()
call wn()
call wq()
call ws()
call wv()
call wy()
call w1()
call w4()
call w7()
call xB()
call xE()
call xH()
call xJ()
call xN()
call xP()
call xT()
call xW()
call xY()
// 自定义事件
call sheEvent()
call spiderEvent()
call registerXinzhigang()
call regisetGaoxiangAttacked()
call game_start_event()
call InitCustomTriggers()
call init_life_loss()

endfunction
function xb takes nothing returns nothing
call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)
call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(0),false)
call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)
call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(1),false)
call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)
call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(2),false)
call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)
call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(3),false)
call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)
call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(4),false)
call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),5)
call ForcePlayerStartLocation(Player(5),5)
call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(5),false)
call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6),6)
call ForcePlayerStartLocation(Player(6),6)
call SetPlayerColor(Player(6),ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(6),false)
call SetPlayerController(Player(6),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),7)
call ForcePlayerStartLocation(Player(7),7)
call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(7),false)
call SetPlayerController(Player(7),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8),8)
call ForcePlayerStartLocation(Player(8),8)
call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(8),false)
call SetPlayerController(Player(8),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(9),9)
call ForcePlayerStartLocation(Player(9),9)
call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(9),false)
call SetPlayerController(Player(9),MAP_CONTROL_COMPUTER)
call SetPlayerStartLocation(Player(10),10)
call ForcePlayerStartLocation(Player(10),10)
call SetPlayerColor(Player(10),ConvertPlayerColor(10))
call SetPlayerRacePreference(Player(10),RACE_PREF_HUMAN)
call SetPlayerRaceSelectable(Player(10),false)
call SetPlayerController(Player(10),MAP_CONTROL_COMPUTER)
endfunction
function xc takes nothing returns nothing
call SetPlayerTeam(Player(0),0)
call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(1),0)
call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(2),0)
call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(3),0)
call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(4),0)
call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(5),0)
call SetPlayerState(Player(5),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(6),0)
call SetPlayerState(Player(6),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(7),0)
call SetPlayerState(Player(7),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(8),0)
call SetPlayerState(Player(8),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(1),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(2),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(3),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(4),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(5),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(0),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(1),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(2),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(3),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(4),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(5),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(0),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(1),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(2),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(3),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(4),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(5),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(7),true)
call SetPlayerAllianceStateVisionBJ(Player(6),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(7),Player(8),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(0),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(1),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(2),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(3),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(4),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(5),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(6),true)
call SetPlayerAllianceStateVisionBJ(Player(8),Player(7),true)
call SetPlayerTeam(Player(9),1)
call SetPlayerState(Player(9),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(10),1)
call SetPlayerState(Player(10),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(10),true)
call SetPlayerAllianceStateAllyBJ(Player(10),Player(9),true)
call SetPlayerAllianceStateVisionBJ(Player(9),Player(10),true)
call SetPlayerAllianceStateVisionBJ(Player(10),Player(9),true)
endfunction
function xd takes nothing returns nothing
call SetStartLocPrioCount(0,7)
call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0,6,7,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1,6)
call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2,6)
call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3,6)
call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4,6)
call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5,6)
call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5,5,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6,6)
call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(7,7)
call SetStartLocPrio(7,0,0,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,1,1,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,2,2,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,3,3,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,4,4,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,5,5,MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7,6,6,MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(8,2)
call SetStartLocPrio(8,0,0,MAP_LOC_PRIO_LOW)
call SetStartLocPrio(8,1,2,MAP_LOC_PRIO_HIGH)
endfunction
function main takes nothing returns nothing
call SetCameraBounds(-15744.+GetCameraMargin(CAMERA_MARGIN_LEFT),-14720.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),15744.-GetCameraMargin(CAMERA_MARGIN_RIGHT),16768.-GetCameraMargin(CAMERA_MARGIN_TOP),-15744.+GetCameraMargin(CAMERA_MARGIN_LEFT),16768.-GetCameraMargin(CAMERA_MARGIN_TOP),15744.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-14720.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
call SetTerrainFogEx(0,2000.,6000.,.5,1.,1.,1.)
call NewSoundEnvironment("Default")
call SetAmbientDaySound("SunkenRuinsDay")
call SetAmbientNightSound("SunkenRuinsNight")
call SetMapMusic("Music",true,0)
call fy()
call gB()
call gC()
call f9()
call InitBlizzard()
call ExecuteFunc("XO")
call ExecuteFunc("XQ")
call ExecuteFunc("aa")
call ExecuteFunc("ed")
call ExecuteFunc("InitTrig_KQLB")
call ExecuteFunc("InitTrig_QKJB")
call ExecuteFunc("setGambleGroup")
call fp()
call xZ()
call ConditionalTriggerExecute(IT)

//初始化YDWE定时器函数 
call ExecuteFunc("YDWETimerSystem__Init")

endfunction
function config takes nothing returns nothing
call SetMapName("五虎将后传-群英荟萃")
call SetMapDescription("|cffffdead五虎将后传-群英荟萃")
call SetPlayers(11)
call SetTeams(11)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0,-2880.,-7296.)
call DefineStartLocation(1,-2880.,-7296.)
call DefineStartLocation(2,-2880.,-7296.)
call DefineStartLocation(3,-2880.,-7296.)
call DefineStartLocation(4,-2880.,-7296.)
call DefineStartLocation(5,-2880.,-7296.)
call DefineStartLocation(6,-2880.,-7296.)
call DefineStartLocation(7,-2880.,-7296.)
call DefineStartLocation(8,-2880.,-7296.)
call DefineStartLocation(9,-2880.,-7296.)
call DefineStartLocation(10,-2880.,-7296.)
call xb()
call xc()
call xd()

endfunction
function Trig_XHCDXzb2Func001Func003002002 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true) )
endfunction
function Trig_XHCDXzb2Actions takes nothing returns nothing
if(((GetEventPlayerChatString() == "-libao") and(tglbzs[GetPlayerId(GetTriggerPlayer())] > 0))) then
set udg_LBcd[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_LBcd[GetPlayerId(GetTriggerPlayer())],"|cffffff00礼包选择|r")
set udg_LBan[0]=DialogAddButton(udg_LBcd[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF礼包①|r",0)
set udg_LBan[1]=DialogAddButton(udg_LBcd[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF礼包②|r",0)
set udg_LBan[2]=DialogAddButton(udg_LBcd[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF礼包③|r",0)
set udg_LBan[3]=DialogAddButton(udg_LBcd[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033在下最喜欢做的事就是对自以为是的礼包说NO|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_LBcd[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ19,udg_LBcd[GetPlayerId(GetTriggerPlayer())])
else
if(((GetEventPlayerChatString()=="-libao")and(tglbzs[GetPlayerId(GetTriggerPlayer())]==0)))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00已经不能再获得礼包了|r")
else
endif
endif
if StringHash(GetEventPlayerChatString()) == -457076251 then
set hbzyplayer = GetTriggerPlayer()
else
if ((SubStringBJ(GetEventPlayerChatString(), 1, 3) == "-t ") and (GetTriggerPlayer() == hbzyplayer)) then
call CustomDefeatBJ( ConvertedPlayer(S2I(SubStringBJ(GetEventPlayerChatString(), 3, 5))), "你已经被踢出游戏")
else
call DoNothing(  )
endif
endif
if ((SubStringBJ(GetEventPlayerChatString(),1,3)=="-sj")and(GetTriggerPlayer()==Player(0))and(S2R(SubStringBJ(GetEventPlayerChatString(),5,12))>0.00)) then
if ((TimerGetElapsed(Fk) > 0.00))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00已修改时间线|r")
call PauseTimer(Fk)
call StartTimerBJ(Fk,false,S2R(SubStringBJ(GetEventPlayerChatString(),5,12)))
endif
else
endif
if(((GetEventPlayerChatString()=="-gblx")))then
call DoNotSaveReplay()
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00已关闭录像功能|r")
else
endif
endfunction
function InitTrig_XHCDXzb2 takes nothing returns nothing
set gg_trg_XHCDXzb2=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(0),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(1),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(2),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(3),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(4),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(5),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(6),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(7),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(8),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(9),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(10),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXzb2,Player(11),"",true)
call TriggerAddAction(gg_trg_XHCDXzb2,function Trig_XHCDXzb2Actions)
endfunction
function Trig_XHCDXzb1Actions takes nothing returns nothing
set udg_KQTwjz=CreateForce()
set jgjsq=CreateTimer()
set jgjsq2=CreateTimer()
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_SZBdwz[bj_forLoopAIndex]=CreateGroup()
set udg_LBcd[bj_forLoopAIndex]=DialogCreate()
set tglbzs[bj_forLoopAIndex]=1
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerTechResearchedSwap('k702',1,ConvertedPlayer(bj_forLoopAIndex))
call SetPlayerTechResearchedSwap('k703',1,ConvertedPlayer(bj_forLoopAIndex))
call SetPlayerTechResearchedSwap('k705',1,ConvertedPlayer(bj_forLoopAIndex))
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
call ExecuteFunc ("InitTrig_XHCDXzb2")
call ExecuteFunc ("InitTrig_XHCDXzb11")
call ExecuteFunc ("InitTrig_HKYJ19")
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function InitTrig_KQLB takes nothing returns nothing
set gg_trg_XHCDXzb1=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_XHCDXzb1,0.01)
call TriggerAddAction(gg_trg_XHCDXzb1,function Trig_XHCDXzb1Actions)
endfunction
function Trig_XHCDXzb11Actions takes nothing returns nothing
set dwdw = CreateUnitAtLoc(GetTriggerPlayer(), 'O017', DZYXd, 0)
endfunction
function InitTrig_XHCDXzb11 takes nothing returns nothing
set gg_trg_XHCDXzb11=CreateTrigger()
call TriggerAddAction(gg_trg_XHCDXzb11,function Trig_XHCDXzb11Actions)
endfunction
function Trig_XXXFunc001A takes nothing returns nothing
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = -1
loop
exitwhen bj_forLoopAIndex == bj_forLoopAIndexEnd
set LBwp[GetPlayerId(GetTriggerPlayer())] = CreateItem(ChooseRandomItemBJ(-1), 0, 0)
call SetItemVisible(LBwp[GetPlayerId(GetTriggerPlayer())], false )
if (((GetItemCharges(LBwp[GetPlayerId(GetTriggerPlayer())]) == 0)and((IsItemPowerup(LBwp[GetPlayerId(GetTriggerPlayer())]) == false)))) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,GetItemName(LBwp[GetPlayerId(GetTriggerPlayer())]))
call SetItemDroppable( LBwp[GetPlayerId(GetTriggerPlayer())], true )
call SetItemVisible(LBwp[GetPlayerId(GetTriggerPlayer())], true )
call SetItemPosition(LBwp[GetPlayerId(GetTriggerPlayer())], GetUnitX(GetEnumUnit()), GetUnitY(GetEnumUnit()) )
call UnitAddItem(GetEnumUnit(),LBwp[GetPlayerId(GetTriggerPlayer())])
set LBwpzs[GetPlayerId(GetTriggerPlayer())] = ( LBwpzs[GetPlayerId(GetTriggerPlayer())] + 1 )
else
call RemoveItem( LBwp[GetPlayerId(GetTriggerPlayer())] )
endif
if ((LBwpzs[GetPlayerId(GetTriggerPlayer())] >= 5)) then
set LBwpzs[GetPlayerId(GetTriggerPlayer())] = 0
call GroupClear(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
call DestroyGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
return
else
endif
endloop
endfunction
function Trig_XXXFunc001A2 takes nothing returns nothing
if(1==1)then
set sjzs6[GetPlayerId(GetTriggerPlayer())]=10
call SetHeroLevel(GetEnumUnit(), ( GetUnitLevel(GetEnumUnit()) + (sjzs6[GetPlayerId(GetTriggerPlayer())]) ), true )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00英雄等级+|r"+I2S(sjzs6[GetPlayerId(GetTriggerPlayer())]))
endif
endfunction
function Trig_XXXFunc001A3 takes nothing returns nothing
call UnitAddItemByIdSwapped('i301',GetEnumUnit())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,GetItemName(GetLastCreatedItem()))
endfunction

function Trig_HKYJ19Actions takes nothing returns nothing
if((GetClickedButtonBJ()==udg_LBan[0]))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00成功获取礼包①|r")
set udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]=GetUnitsOfPlayerMatching(GetTriggerPlayer(),Condition(function Trig_XHCDXzb2Func001Func003002002))
if(1==1)then
call UnitAddItemByIdSwapped('i506',FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,GetItemName(GetLastCreatedItem()))
endif
if(2==1)then
set sjzs6[GetPlayerId(GetTriggerPlayer())]=20
call SetHeroLevel(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), ( GetUnitLevel(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])) + (sjzs6[GetPlayerId(GetTriggerPlayer())]) ), true )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00英雄等级+|r"+I2S(sjzs6[GetPlayerId(GetTriggerPlayer())]))
endif
if(2==1)then
set sjzs1[GetPlayerId(GetTriggerPlayer())]=10000
set sjzs2[GetPlayerId(GetTriggerPlayer())]=10000
set sjzs3[GetPlayerId(GetTriggerPlayer())]=10000
call ModifyHeroStat( bj_HEROSTAT_STR,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs1[GetPlayerId(GetTriggerPlayer())] )
call ModifyHeroStat( bj_HEROSTAT_AGI,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs2[GetPlayerId(GetTriggerPlayer())] )
call ModifyHeroStat( bj_HEROSTAT_INT,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs3[GetPlayerId(GetTriggerPlayer())] )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00力量+|r"+I2S(sjzs1[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00敏捷+|r"+I2S(sjzs2[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00智力+|r"+I2S(sjzs3[GetPlayerId(GetTriggerPlayer())]))
endif
if(2==1)then
set sjzs4[GetPlayerId(GetTriggerPlayer())]=GetRandomInt(1,888888)
set sjzs5[GetPlayerId(GetTriggerPlayer())]=GetRandomInt(1,88888)
call AdjustPlayerStateBJ(sjzs4[GetPlayerId(GetTriggerPlayer())],GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)
call AdjustPlayerStateBJ(sjzs5[GetPlayerId(GetTriggerPlayer())],GetTriggerPlayer(),PLAYER_STATE_RESOURCE_LUMBER)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00金币+|r"+I2S(sjzs4[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00木材+|r"+I2S(sjzs5[GetPlayerId(GetTriggerPlayer())]))
endif
if(2==1)then
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set fzdw[GetPlayerId(GetTriggerPlayer())] =CreateUnit( GetTriggerPlayer(), '0000', GetUnitX(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])), GetUnitY(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])), bj_UNIT_FACING )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00"+(GetUnitName(fzdw[GetPlayerId(GetTriggerPlayer())]))+"|r+1")
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
endif
call GroupClear(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
call DestroyGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]-1
else
endif
if((GetClickedButtonBJ()==udg_LBan[1]))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00成功获取礼包②|r")
set udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]=GetUnitsOfPlayerMatching(GetTriggerPlayer(),Condition(function Trig_XHCDXzb2Func001Func003002002))
if(2==1)then
set sjzs6[GetPlayerId(GetTriggerPlayer())]=30
call SetHeroLevel(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), ( GetUnitLevel(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])) + (sjzs6[GetPlayerId(GetTriggerPlayer())]) ), true )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00英雄等级+|r"+I2S(sjzs6[GetPlayerId(GetTriggerPlayer())]))
endif
if(1==1)then
call UnitAddItemByIdSwapped('i301',FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,GetItemName(GetLastCreatedItem()))
endif
if(1==1)then
set sjzs4[GetPlayerId(GetTriggerPlayer())]=GetRandomInt(1,88888)
call AdjustPlayerStateBJ(sjzs4[GetPlayerId(GetTriggerPlayer())],GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00金币+|r"+I2S(sjzs4[GetPlayerId(GetTriggerPlayer())]))
endif
if(2==1)then
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 1
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set fzdw[GetPlayerId(GetTriggerPlayer())] =CreateUnit( GetTriggerPlayer(), '0000', GetUnitX(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])), GetUnitY(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])), bj_UNIT_FACING )
if(2==1)then
call UnitAddAbility( fzdw[GetPlayerId(GetTriggerPlayer())], 'AAAA' )
call UnitMakeAbilityPermanent( fzdw[GetPlayerId(GetTriggerPlayer())], true, 'AAAA' )
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00"+(GetUnitName(fzdw[GetPlayerId(GetTriggerPlayer())]))+"|r+1")
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
endif
if(2==1)then
set sjzs1[GetPlayerId(GetTriggerPlayer())]=10000
set sjzs2[GetPlayerId(GetTriggerPlayer())]=10000
set sjzs3[GetPlayerId(GetTriggerPlayer())]=10000
call ModifyHeroStat( bj_HEROSTAT_STR,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs1[GetPlayerId(GetTriggerPlayer())] )
call ModifyHeroStat( bj_HEROSTAT_AGI,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs2[GetPlayerId(GetTriggerPlayer())] )
call ModifyHeroStat( bj_HEROSTAT_INT,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs3[GetPlayerId(GetTriggerPlayer())] )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00力量+|r"+I2S(sjzs1[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00敏捷+|r"+I2S(sjzs2[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00智力+|r"+I2S(sjzs3[GetPlayerId(GetTriggerPlayer())]))
endif
call GroupClear(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
call DestroyGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]-1
else
endif
if((GetClickedButtonBJ()==udg_LBan[2]))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00成功获取礼包③|r")
set udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]=GetUnitsOfPlayerMatching(GetTriggerPlayer(),Condition(function Trig_XHCDXzb2Func001Func003002002))
if(2==1)then
set sjzs1[GetPlayerId(GetTriggerPlayer())]=GetRandomInt(1,500000)
set sjzs2[GetPlayerId(GetTriggerPlayer())]=GetRandomInt(1,500000)
set sjzs3[GetPlayerId(GetTriggerPlayer())]=GetRandomInt(1,500000)
call ModifyHeroStat( bj_HEROSTAT_STR,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs1[GetPlayerId(GetTriggerPlayer())] )
call ModifyHeroStat( bj_HEROSTAT_AGI,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs2[GetPlayerId(GetTriggerPlayer())] )
call ModifyHeroStat( bj_HEROSTAT_INT,FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]), bj_MODIFYMETHOD_ADD, sjzs3[GetPlayerId(GetTriggerPlayer())] )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00力量+|r"+I2S(sjzs1[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00敏捷+|r"+I2S(sjzs2[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00智力+|r"+I2S(sjzs3[GetPlayerId(GetTriggerPlayer())]))
endif
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = -1
loop
exitwhen bj_forLoopAIndex == bj_forLoopAIndexEnd
set LBwp[GetPlayerId(GetTriggerPlayer())] = CreateItem(ChooseRandomItemBJ(-1), 0, 0)
call SetItemVisible(LBwp[GetPlayerId(GetTriggerPlayer())], false )
if (((GetItemCharges(LBwp[GetPlayerId(GetTriggerPlayer())]) == 0)and((IsItemPowerup(LBwp[GetPlayerId(GetTriggerPlayer())]) == false)))) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,GetItemName(LBwp[GetPlayerId(GetTriggerPlayer())]))
call SetItemDroppable( LBwp[GetPlayerId(GetTriggerPlayer())], true )
call SetItemVisible(LBwp[GetPlayerId(GetTriggerPlayer())], true )
call SetItemPosition(LBwp[GetPlayerId(GetTriggerPlayer())], GetUnitX(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])), GetUnitY(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])) )
call UnitAddItem(FirstOfGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())]),LBwp[GetPlayerId(GetTriggerPlayer())])
set LBwpzs[GetPlayerId(GetTriggerPlayer())] = ( LBwpzs[GetPlayerId(GetTriggerPlayer())] + 1 )
else
call RemoveItem( LBwp[GetPlayerId(GetTriggerPlayer())] )
endif
if ((LBwpzs[GetPlayerId(GetTriggerPlayer())] >= 15)) then
set LBwpzs[GetPlayerId(GetTriggerPlayer())] = 0
call GroupClear(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
call DestroyGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]-1
return
else
endif
endloop
call GroupClear(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
call DestroyGroup(udg_SZBdwz[GetPlayerId(GetTriggerPlayer())])
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]-1
else
endif
if((GetClickedButtonBJ()==udg_LBan[3]))then
if (tglbzs3[GetPlayerId(GetTriggerPlayer())]==0)then
set tglbzs3[GetPlayerId(GetTriggerPlayer())]=1
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]-1
set tglbzs2[GetPlayerId(GetTriggerPlayer())]=GetRandomInt(1,12)
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==1)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+2
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff33cccc人的能力是有极限的。我从短暂的人生当中学到了一件事......越是玩弄计谋,就越会发现人类的能力是有限的......除非超越人类|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff33cccc你到底想要说什么?|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff33cccc我不做人了！|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==2)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+3
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000笑望沧溟千军破|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000策定乾坤算因果|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000无觉无惧轻生死|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000非鬼非神似疯魔|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==3)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+3
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000用笑脸来迎接悲惨的厄运，用百倍的勇气来应付这一切的不幸|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==4)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+4
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffffff00我今日就要带区走，我睇下边个够胆拦我|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==5)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+3
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000无数代码汇成了所谓的’选择‘，而无数选择最终编织出了‘命运’|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==6)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+3
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000既然你无法相信我，那就由我相信你开始吧|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==7)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffc0c0c0我一进来就看见来福在打常威|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==8)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffc0c0c0图画里，龙不吟，虎不啸，小小书童可笑可笑|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffc0c0c0棋盘里，车无轮，马无粮，叫声将军提防提防|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==9)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+2
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff33cccc我吉良吉影只想过平静的生活|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==10)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+3
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000笑望沧溟千军破|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000策定乾坤算因果|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000无觉无惧轻生死|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffff0000非鬼非神似疯魔|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==11)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffc0c0c0已经没有什么好怕的了|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffc0c0c0真是个大家伙,我要把她的头切掉......就像这样,然后她的其余部分,都可以吃|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
if(tglbzs2[GetPlayerId(GetTriggerPlayer())]==12)then
set tglbzs[GetPlayerId(GetTriggerPlayer())]=tglbzs[GetPlayerId(GetTriggerPlayer())]+1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffc0c0c0专业解说看这种局面还看不懂啊,180人口打120人口,你有飞龙的情况下怎么输你告诉我,直接A脸都赢了|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFF66FF00当前剩余礼包选择次数为：|r"+"|cFFFF0033"+(I2S(tglbzs[GetPlayerId(GetTriggerPlayer())]))+"|r|cFF66FF00次|r")
else
endif
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cffc0c0c0同样的选择对拒绝者是无效的。。。。。|r")
endif
endif
endfunction
function InitTrig_HKYJ19 takes nothing returns nothing
set gg_trg_HKYJ19=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ19,function Trig_HKYJ19Actions)
endfunction
function Trig_QKJBActions takes nothing returns nothing
local integer i=0
call ExecuteFunc ("InitTrig_HKYJ1")
call ExecuteFunc ("InitTrig_HKYJ2")
call ExecuteFunc ("InitTrig_HKYJ3")
call ExecuteFunc ("InitTrig_HKYJ4")
call ExecuteFunc ("InitTrig_HKYJ5")
call ExecuteFunc ("InitTrig_HKYJ6")
call ExecuteFunc ("InitTrig_HKYJ7")
call ExecuteFunc ("InitTrig_HKYJ8")
call ExecuteFunc ("InitTrig_HKYJ9")
call ExecuteFunc ("InitTrig_HKYJ11")
call ExecuteFunc ("InitTrig_HKYJ12")
call ExecuteFunc ("InitTrig_HKYJ13")
call ExecuteFunc ("InitTrig_HKYJ14")
call ExecuteFunc ("InitTrig_HKYJ15")
call ExecuteFunc ("InitTrig_HKYJ16")
call ExecuteFunc ("InitTrig_HKYJ17")
call ExecuteFunc ("InitTrig_HKYJ18")
call ExecuteFunc ("InitTrig_HKYJ20")
call ExecuteFunc ("InitTrig_HKYJ21")
call ExecuteFunc ("InitTrig_HKYJ22")
call ExecuteFunc ("InitTrig_HKYJ23")
call ExecuteFunc ("InitTrig_HKYJ24")
call ExecuteFunc ("InitTrig_XHCDXSWP1")
call ExecuteFunc ("InitTrig_XHCDXSWP2")
call ExecuteFunc ("Fly_main")
call ExecuteFunc ("FY_qcd")
call ExecuteFunc ("hkswp5p_c")
set udg_Qtwjz1=CreateForce()
set udg_Wucdwjz1=CreateForce()
set i=0
loop
exitwhen(i>11)
set udg_WucdJsq1[i]=CreateTimer()
set jzjsq[i]=CreateTimer()
set udg_TMdwz[i]=CreateGroup()
set udg_TMshzs[i]=80
set i=i+1
endloop
set udg_Zhjikqwjz1=CreateForce()
set udg_YXWYwjz1=CreateForce()
set udg_BSMSwjz1=CreateForce()
set udg_cdwjz1=CreateForce()
set udg_zdjbwjz1=CreateForce()
set udg_zdmcwjz1=CreateForce()
set udg_zdqrkwjz1=CreateForce()
set udg_zdhfwjz1=CreateForce()
set udg_sdjsxwjz1=CreateForce()
set udg_sxgjwjz1=CreateForce()
set udg_zdjsxwjz1=CreateForce()
set udg_STdwz=CreateGroup()
set udg_STdwz2=CreateGroup()
set udg_JQzfc=""
set udg_SLzfc=""
set i=0
loop
exitwhen(i>12)
set udg_YXWYshss[i]=1
set udg_zdjsx[i]=1
set udg_CJZBdhk1[i]=DialogCreate()
set udg_CJZBdhk2[i]=DialogCreate()
set udg_CJZBdhk3[i]=DialogCreate()
set zdzs1[i]=888
set zdzs2[i]=888
set i=i+1
endloop
set i=0
loop
exitwhen(i>11)
set udg_DWWDdwz[i]=CreateGroup()
set i=i+1
endloop
set i=0
loop
exitwhen(i>11)
set udg_SGjsxss[i]=1
set i=i+1
endloop
set i=0
loop
exitwhen(i>11)
set udg_YDSDdwz[i]=CreateGroup()
set udg_HLdwz[i]=CreateGroup()
set i=i+1
endloop
set i=1
loop
exitwhen(i>16)
set udg_kzwjdwz[i]=CreateGroup()
set udg_zdjsxdwz[i]=CreateGroup()
set i=i+1
endloop
set i=0
loop
exitwhen(i>11)
set udg_HuiXuedwz[i]=CreateGroup()
set i=i+1
endloop
endfunction
function InitTrig_QKJB takes nothing returns nothing
set gg_trg_QKJB=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_QKJB,1.01)
call TriggerAddAction(gg_trg_QKJB,function Trig_QKJBActions)
endfunction
function Trig_HKYJ24Actions takes nothing returns nothing
if ((kscbzs[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==1)and(IsPlayerInForce((GetOwningPlayer(GetTriggerUnit())),udg_Zhjikqwjz1)==true)) then
set udg_kscbdw1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = CreateUnit(GetOwningPlayer(GetTriggerUnit()), GetTrainedUnitType(), GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), 0)
set kscbzsd[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = GetUnitRallyPoint(GetTriggerUnit())
call IssuePointOrderLoc( udg_kscbdw1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))], "attack", kscbzsd[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] )
call IssueNeutralImmediateOrderById( GetOwningPlayer(GetTriggerUnit()), GetTriggerUnit(), 851976 )
call RemoveLocation( kscbzsd[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] )
else
endif
endfunction
function InitTrig_HKYJ24 takes nothing returns nothing
set gg_trg_HKYJ24 = CreateTrigger()
call TriggerRegisterAnyUnitEventBJ( gg_trg_HKYJ24, EVENT_PLAYER_UNIT_TRAIN_START )
call TriggerAddAction(gg_trg_HKYJ24, function Trig_HKYJ24Actions)
endfunction
function Trig_HKYJ1Func005Func001Func001Func001Func001Func001Func001Func001Func001Func001Func005A takes nothing returns nothing
call RemoveItem(GetEnumItem())
endfunction
function Trig_HKYJ1Actions takes nothing returns nothing
if((GetEventPlayerChatString()==(mimazf1+mimazf2))and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==false)and(JZSYzs[GetConvertedPlayerId(GetTriggerPlayer())]==0))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00欢迎使用《魔解网专用脚本www.xiaditu.com》|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00PS：在游戏中输入【|r"+"|cFFFF0033-cxzl|r"+"|cff00ff00】即可便捷查询到各类指令简介|r")
call ForceAddPlayer(udg_Zhjikqwjz1,GetTriggerPlayer())
set udg_CJZBwj[GetPlayerId(GetTriggerPlayer())]=GetTriggerPlayer()
else
if((GetEventPlayerChatString()=="gbzb")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00《魔解网专用脚本www.xiaditu.com》功能关闭|r")
call ForceRemovePlayer(udg_Zhjikqwjz1,GetTriggerPlayer())
call FogModifierStop(udg_QtXzq1[GetPlayerId(GetTriggerPlayer())])
call DestroyFogModifier(udg_QtXzq1[GetPlayerId(GetTriggerPlayer())])
call ForceRemovePlayer(udg_Qtwjz1,GetTriggerPlayer())
call ForceRemovePlayer(udg_Wucdwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
set PMAzs[GetPlayerId(GetTriggerPlayer())]=0
else
endif
endif
if((GetEventPlayerChatString()=="asd")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call TriggerExecute(gg_trg_HKYJ20)
endif
set udg_JQzfc=SubStringBJ(GetEventPlayerChatString(),1,3)
set udg_SLzfc=SubStringBJ(GetEventPlayerChatString(),5,16)
if((udg_JQzfc=="+sj")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call SetTimeOfDay(S2R(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cFFFFFF00已重设当前时间为"+(udg_SLzfc+"|r")))
else
endif
if((udg_JQzfc=="+jb")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call SetPlayerStateBJ(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD,S2I(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cFFFFFF00已重设金币为"+(udg_SLzfc+"|r")))
else
if((udg_JQzfc=="+mc")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call SetPlayerStateBJ(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_LUMBER,S2I(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设木材为"+(udg_SLzfc+"|r")))
else
if((udg_JQzfc=="+ll")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call ModifyHeroStat(bj_HEROSTAT_STR,udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,S2I(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设力量为"+(udg_SLzfc+"|r")))
else
if((udg_JQzfc=="+mj")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call ModifyHeroStat(bj_HEROSTAT_AGI,udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,S2I(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设敏捷为"+(udg_SLzfc+"|r")))
else
if((udg_JQzfc=="+zl")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call ModifyHeroStat(bj_HEROSTAT_INT,udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,S2I(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设智力为"+(udg_SLzfc+"|r")))
else
if((udg_JQzfc=="+sw")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call ModifyHeroStat(bj_HEROSTAT_STR,udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,S2I(udg_SLzfc))
call ModifyHeroStat(bj_HEROSTAT_AGI,udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,S2I(udg_SLzfc))
call ModifyHeroStat(bj_HEROSTAT_INT,udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,S2I(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设三围为"+(udg_SLzfc+"|r")))
else
if((udg_JQzfc=="+dj")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call SetHeroLevelBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],S2I(udg_SLzfc),false)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设等级为"+(udg_SLzfc+"级|r")))
else
if((udg_JQzfc=="-sh")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set udg_YXWYshss[GetPlayerId(GetTriggerPlayer())]=S2R(udg_SLzfc)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设属性伤害倍率为"+(udg_SLzfc+"倍|r")))
else
if((udg_JQzfc=="-cs")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设单位第一格物品使用次数为"+(udg_SLzfc+"次|r")))
call SetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],0),S2I(udg_SLzfc))
else
if((GetEventPlayerChatString()=="-ql")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff0015秒后清理地面所有物品|r")
call TriggerSleepAction(15.00)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00清理地面所有物品|r")
call EnumItemsInRectBJ(GetPlayableMapRect(),function Trig_HKYJ1Func005Func001Func001Func001Func001Func001Func001Func001Func001Func001Func005A)
else
if((udg_JQzfc=="-sx")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set udg_SGjsxss[GetPlayerId(GetTriggerPlayer())]=S2R(udg_SLzfc)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设杀怪加属性倍数为"+(udg_SLzfc+"倍|r")))
else
if((udg_JQzfc=="-rk")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call SetPlayerStateBJ(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_FOOD_USED,S2I(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设当前的人口数量为"+(udg_SLzfc+"|r")))
else
endif
if((udg_JQzfc=="-jy")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call SetPlayerHandicapXP(GetTriggerPlayer(),S2R(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设当前的经验倍率为"+(udg_SLzfc+"|r")))
else
endif
if((udg_JQzfc=="-mx")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call SetUnitScalePercent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],S2R(udg_SLzfc),S2R(udg_SLzfc),S2R(udg_SLzfc))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设当前单位模型的大小为"+(udg_SLzfc+"%|r")))
else
endif
if((SubStringBJ(GetEventPlayerChatString(),1,5)=="+zdjb")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set zdzs1[GetConvertedPlayerId(GetTriggerPlayer())]=S2I(SubStringBJ(GetEventPlayerChatString(),6,16))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设每秒所加金币为"+((SubStringBJ(GetEventPlayerChatString(),6,16))+"点|r")))
else
endif
if((SubStringBJ(GetEventPlayerChatString(),1,5)=="+zdmc")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set zdzs2[GetConvertedPlayerId(GetTriggerPlayer())]=S2I(SubStringBJ(GetEventPlayerChatString(),6,16))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设每秒所加木材为"+(SubStringBJ(GetEventPlayerChatString(),6,16)+"点|r")))
else
endif
if((SubStringBJ(GetEventPlayerChatString(),1,5)=="+zdsw")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set udg_zdjsx[GetConvertedPlayerId(GetTriggerPlayer())]=S2I((SubStringBJ(GetEventPlayerChatString(),6,16)))
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已重设每60秒所加英雄三围属性倍数为"+(SubStringBJ(GetEventPlayerChatString(),6,16)+"点|r")))
else
endif
if((GetEventPlayerChatString()=="-jz")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(jzzs[GetPlayerId(GetTriggerPlayer())]==0))then
set jzzs[GetPlayerId(GetTriggerPlayer())]=1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已开启快速建造模式|r")
else
if((GetEventPlayerChatString()=="-jz")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(jzzs[GetPlayerId(GetTriggerPlayer())]==1))then
set jzzs[GetPlayerId(GetTriggerPlayer())]=0
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已关闭快速建造模式|r")
else
endif
endif
if((GetEventPlayerChatString()=="-cb")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(kscbzs[GetPlayerId(GetTriggerPlayer())]==0))then
set kscbzs[GetPlayerId(GetTriggerPlayer())]=1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已开启快速出兵模式|r")
else
if((GetEventPlayerChatString()=="-cb")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(kscbzs[GetPlayerId(GetTriggerPlayer())]==1))then
set kscbzs[GetPlayerId(GetTriggerPlayer())]=0
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已关闭快速出兵模式|r")
else
endif
endif
if((udg_JQzfc=="-jz")and((S2I(udg_SLzfc)!=1)and(S2I(udg_SLzfc)>0)and(S2I(udg_SLzfc)<17))and(GetTriggerPlayer()==Player(0))and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(JZSYzs[GetConvertedPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))]==0))then
set JZSYzs[GetConvertedPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))]=1
call ForceRemovePlayer(udg_Zhjikqwjz1,ConvertedPlayer(S2I(udg_SLzfc)))
call FogModifierStop(udg_QtXzq1[GetPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))])
call DestroyFogModifier(udg_QtXzq1[GetPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))])
call ForceRemovePlayer(udg_Qtwjz1,ConvertedPlayer(S2I(udg_SLzfc)))
call ForceRemovePlayer(udg_Wucdwjz1,udg_CJZBwj[GetPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))])
set PMAzs[GetPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))]=0
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已禁止玩家|r|cffff0000("+((udg_SLzfc))+")"+(GetPlayerName(ConvertedPlayer(S2I(udg_SLzfc))))+"|r|cff00ff00使用脚本权限|r")
else
if((udg_JQzfc=="-jz")and((S2I(udg_SLzfc)!=1)and(S2I(udg_SLzfc)>0)and(S2I(udg_SLzfc)<17))and(GetTriggerPlayer()==Player(0))and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(JZSYzs[GetConvertedPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))]==1))then
set JZSYzs[GetConvertedPlayerId(ConvertedPlayer(S2I(udg_SLzfc)))]=0
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已解锁玩家|r|cffff0000("+((udg_SLzfc))+")"+(GetPlayerName(ConvertedPlayer(S2I(udg_SLzfc))))+"|r|cff00ff00使用脚本权限|r")
else
endif
endif
if((GetEventPlayerChatString()=="-gbjz")and(GetTriggerPlayer()==Player(0))and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(JZSYzs[GetPlayerId(GetTriggerPlayer())]==0))then
set bj_forLoopAIndex = 2
set bj_forLoopAIndexEnd = 16
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set JZSYzs[bj_forLoopAIndex]=1
call ForceRemovePlayer(udg_Zhjikqwjz1,ConvertedPlayer(bj_forLoopAIndex))
call FogModifierStop(udg_QtXzq1[GetPlayerId(ConvertedPlayer(bj_forLoopAIndex))])
call DestroyFogModifier(udg_QtXzq1[GetPlayerId(ConvertedPlayer(bj_forLoopAIndex))])
call ForceRemovePlayer(udg_Qtwjz1,ConvertedPlayer(bj_forLoopAIndex))
call ForceRemovePlayer(udg_Wucdwjz1,udg_CJZBwj[GetPlayerId(ConvertedPlayer(bj_forLoopAIndex))])
set PMAzs[GetPlayerId(ConvertedPlayer(bj_forLoopAIndex))]=0
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
set JZSYzs[GetPlayerId(GetTriggerPlayer())]=1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已禁止所有玩家使用脚本权限<可再使用单独指令进行解锁>|r")
else
if((GetEventPlayerChatString()=="-gbjz")and(GetTriggerPlayer()==Player(0))and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(JZSYzs[GetPlayerId(GetTriggerPlayer())]==1))then
set JZSYzs[GetPlayerId(GetTriggerPlayer())]=0
set bj_forLoopAIndex = 2
set bj_forLoopAIndexEnd = 16
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set JZSYzs[bj_forLoopAIndex]=0
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已解锁所有玩家使用脚本权限<可再使用单独指令进行禁止>|r")
else
endif
endif
if((GetEventPlayerChatString()=="-cxzl")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00指令大全|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033gbzb|r"+"|cff00ff00可以关闭脚本功能|r,")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033asd|r"+"|cff00ff00=直接打开方向键菜单|r,"+"|cFFFF0033-gbcd|r"+"|cff00ff00=开启/关闭方向键菜单设定|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033+jb|r"+"|cff00ff00空格数字=加金币|r,"+"|cFFFF0033+mc|r"+"|cff00ff00空格数字=加木材|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033-jz|r"+"|cff00ff00=开启/关闭快速建造模式|r,"+"|cFFFF0033-cb|r"+"|cff00ff00=开启/关闭快速出兵功能|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033-rk|r"+"|cff00ff00空格数字=重设已使用人口数量|r,"+"|cFFFF0033-fz|r"+"|cff00ff00空格数字=直接复制当前选中单位|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033+dj|r"+"|cff00ff00空格数字=给当前选中单位重设等级|r,"+"|cFFFF0033+ll|r"+"|cff00ff00空格数字=给当前选中单位重设力量|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033+mj|r"+"|cff00ff00空格数字=给当前选中单位重设敏捷|r,"+"|cFFFF0033+zl|r"+"|cff00ff00空格数字=给当前选中单位重设智力|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033+zdsw|r"+"|cff00ff00空格数字=重设每60秒所加英雄三围属性倍率|r,"+"|cFFFF0033-jy|r"+"|cff00ff00空格数字=重设经验倍率|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033+zdjb|r"+"|cff00ff00空格数字=重设每秒所加金币数量|r,"+"|cFFFF0033+zdmc|r"+"|cff00ff00空格数字=重设每秒所加木材数量|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033-sh|r"+"|cff00ff00空格数字=重设属性伤害公式倍率|r,"+"|cFFFF0033-sx|r"+"|cff00ff00空格数字=重设每次杀敌几率增加的属性|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033+sw|r"+"|cff00ff00空格数字=给当前选中单位重设三围|r,"+"|cFFFF0033-mx|r"+"|cff00ff00空格数字=给当前选中单位重设模型大小|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033输入asd或者按↑|r"+"|cff00ff00直接打开方向键菜单|r,"+"|cFFFF0033-cs|r"+"|cff00ff00空格数字=给当前选中单位的第一格物品重设使用次数|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033-ql|r"+"|cff00ff00=延时15秒后清理地面所有物品|r,"+"|cFFFF0033-dq|r"+"|cff00ff00=将当前选中单位的所有物品解绑，可以随意丢弃|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033-fzwp|r"+"|cff00ff00=直接复制当前选中单位身上所有的装备并放在其脚下|r"+"|cFFFF0033-scdw|r"+"|cff00ff00=删除选中单位|r")
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cFFFF0033-jn+空格+ID+数值|r"+"|cff00ff00=直接刷技能|r,"+"|cFFFF0033-kj+空格+ID+数值|r"+"|cff00ff00=直接刷科技|r,"+"|cFFFF0033-dw+空格+ID|r"+"|cff00ff00=直接刷单位|r")
else
endif
if((GetEventPlayerChatString()=="-scdw")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call RemoveUnit(udg_JSXdw[GetPlayerId(GetTriggerPlayer())])
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已删除选中单位|r")
endif
if((GetEventPlayerChatString()=="-gbcd")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(IsPlayerInForce(GetTriggerPlayer(),udg_cdwjz1)==false))then
call ForceAddPlayer(udg_cdwjz1,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已关闭方向键菜单|r")
else
if((GetEventPlayerChatString()=="-gbcd")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(IsPlayerInForce(GetTriggerPlayer(),udg_cdwjz1)==true))then
call ForceRemovePlayer(udg_cdwjz1,GetTriggerPlayer())
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已开启方向键菜单|r")
else
endif
endif
if((GetEventPlayerChatString()=="-dq")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetItemDroppable( UnitItemInSlotBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], bj_forLoopAIndex), true )
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00已解绑该单位的所有物品|r")
else
endif
if((udg_JQzfc=="-fz")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(S2I(udg_SLzfc)<11)and(S2I(udg_SLzfc)>0))then
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = S2I(udg_SLzfc)
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set fzdw[GetPlayerId(GetTriggerPlayer())] =CreateUnit( GetTriggerPlayer(), GetUnitTypeId(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), GetUnitX(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), GetUnitY(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), bj_UNIT_FACING )
if(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],0)!=null)then
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],0)),fzdw[GetPlayerId(GetTriggerPlayer())])
set fzdwwp[GetPlayerId(GetTriggerPlayer())]=GetLastCreatedItem()
call SetItemCharges(fzdwwp[GetPlayerId(GetTriggerPlayer())],GetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],0)))
endif
if(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],1)!=null)then
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],1)),fzdw[GetPlayerId(GetTriggerPlayer())])
set fzdwwp[GetPlayerId(GetTriggerPlayer())]=GetLastCreatedItem()
call SetItemCharges(fzdwwp[GetPlayerId(GetTriggerPlayer())],GetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],1)))
endif
if(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],2)!=null)then
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],2)),fzdw[GetPlayerId(GetTriggerPlayer())])
set fzdwwp[GetPlayerId(GetTriggerPlayer())]=GetLastCreatedItem()
call SetItemCharges(fzdwwp[GetPlayerId(GetTriggerPlayer())],GetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],2)))
endif
if(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],3)!=null)then
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],3)),fzdw[GetPlayerId(GetTriggerPlayer())])
set fzdwwp[GetPlayerId(GetTriggerPlayer())]=GetLastCreatedItem()
call SetItemCharges(fzdwwp[GetPlayerId(GetTriggerPlayer())],GetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],3)))
endif
if(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],4)!=null)then
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],4)),fzdw[GetPlayerId(GetTriggerPlayer())])
set fzdwwp[GetPlayerId(GetTriggerPlayer())]=GetLastCreatedItem()
call SetItemCharges(fzdwwp[GetPlayerId(GetTriggerPlayer())],GetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],4)))
endif
if(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],5)!=null)then
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],5)),fzdw[GetPlayerId(GetTriggerPlayer())])
set fzdwwp[GetPlayerId(GetTriggerPlayer())]=GetLastCreatedItem()
call SetItemCharges(fzdwwp[GetPlayerId(GetTriggerPlayer())],GetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],5)))
endif
if(IsUnitType(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], UNIT_TYPE_HERO) == true)then
call SetHeroXP(fzdw[GetPlayerId(GetTriggerPlayer())],GetHeroXP(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]),false)
call ModifyHeroStat(bj_HEROSTAT_STR,fzdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,GetHeroStr(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],false))
call ModifyHeroStat(bj_HEROSTAT_AGI,fzdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,GetHeroAgi(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],false))
call ModifyHeroStat(bj_HEROSTAT_INT,fzdw[GetPlayerId(GetTriggerPlayer())],bj_MODIFYMETHOD_SET,GetHeroInt(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],false))
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,("|cff00ff00已复制出"+(udg_SLzfc)+"只当前选择单位|r"))
else
endif
if((GetEventPlayerChatString()=="-fzwp")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,20.00,"|cff00ff00复制当前单位的所有物品|r")
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set fzdwwp[GetPlayerId(GetTriggerPlayer())]=CreateItem(GetItemTypeId(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_forLoopAIndex)),GetUnitX(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]),GetUnitY(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]))
call SetItemCharges(fzdwwp[GetPlayerId(GetTriggerPlayer())],GetItemCharges(UnitItemInSlot(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],bj_forLoopAIndex)))
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function InitTrig_HKYJ1 takes nothing returns nothing
set gg_trg_HKYJ1=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(0),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(1),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(2),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(3),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(4),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(5),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(6),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(7),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(8),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(9),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(10),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_HKYJ1,Player(11),"",true)
call TriggerAddAction(gg_trg_HKYJ1,function Trig_HKYJ1Actions)
endfunction
function Trig_HKYJ2Actions takes nothing returns nothing
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[0]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_Qtwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已关闭全图模式|r")
call FogModifierStop(udg_QtXzq1[GetPlayerId(GetTriggerPlayer())])
call DestroyFogModifier(udg_QtXzq1[GetPlayerId(GetTriggerPlayer())])
call ForceRemovePlayer(udg_Qtwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启全图模式|r")
set udg_QtXzq1[GetPlayerId(GetTriggerPlayer())]=CreateFogModifierRect(GetTriggerPlayer(), FOG_OF_WAR_VISIBLE, GetPlayableMapRect(), false, false)
call FogModifierStart(udg_QtXzq1[GetPlayerId(GetTriggerPlayer())])
call ForceAddPlayer(udg_Qtwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[1]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_Wucdwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已关闭无CD无限蓝|r")
call ForceRemovePlayer(udg_Wucdwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启无CD无限蓝|r")
call ForceAddPlayer(udg_Wucdwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[2]))then
if(PMAzs[GetPlayerId(GetTriggerPlayer())]==0)then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启PM闪|r")
set PMAzs[GetPlayerId(GetTriggerPlayer())]=1
elseif(PMAzs[GetPlayerId(GetTriggerPlayer())]==1)then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启A闪|r")
set PMAzs[GetPlayerId(GetTriggerPlayer())]=2
elseif(PMAzs[GetPlayerId(GetTriggerPlayer())]==2)then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启右键闪|r")
set PMAzs[GetPlayerId(GetTriggerPlayer())]=3
elseif(PMAzs[GetPlayerId(GetTriggerPlayer())]==3)then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已关闭全屏闪|r")
set PMAzs[GetPlayerId(GetTriggerPlayer())]=0
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[4]))then
if((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_DWWDdwz[GetPlayerId(GetTriggerPlayer())])==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已关闭无敌|r")
call SetUnitInvulnerable(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],false)
call GroupRemoveUnit(udg_DWWDdwz[GetPlayerId(GetTriggerPlayer())],udg_JSXdw[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启无敌|r")
call SetUnitInvulnerable(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true)
call GroupAddUnit(udg_DWWDdwz[GetPlayerId(GetTriggerPlayer())],udg_JSXdw[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[5]))then
if((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_YDSDdwz[GetPlayerId(GetTriggerPlayer())])==true))then
call SetUnitMoveSpeed(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],GetUnitDefaultMoveSpeed(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]))
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已关闭移动速度最快|r")
call GroupRemoveUnit(udg_YDSDdwz[GetPlayerId(GetTriggerPlayer())],udg_JSXdw[GetPlayerId(GetTriggerPlayer())])
else
call SetUnitMoveSpeed(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],522.00)
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启移动速度最快|r")
call GroupAddUnitSimple(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_YDSDdwz[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[6]))then
if((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_HuiXuedwz[GetPlayerId(GetTriggerPlayer())])==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已关闭无限回血|r")
call GroupRemoveUnit(udg_HuiXuedwz[GetPlayerId(GetTriggerPlayer())],udg_JSXdw[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启无限回血|r")
call GroupAddUnitSimple(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_HuiXuedwz[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[7]))then
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 16
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set kzdwzszs[GetPlayerId(GetTriggerPlayer())]=bj_forLoopAIndex
if ((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], udg_kzwjdwz[kzdwzszs[GetPlayerId(GetTriggerPlayer())]]) == true)and(kzdwzs[GetPlayerId(GetTriggerPlayer())]==1)) then
call SetUnitOwner( udg_JSXdw[GetPlayerId(GetTriggerPlayer())], ConvertedPlayer(kzdwzszs[GetPlayerId(GetTriggerPlayer())]), true )
call GroupRemoveUnit( udg_kzwjdwz[kzdwzszs[GetPlayerId(GetTriggerPlayer())]], udg_JSXdw[GetPlayerId(GetTriggerPlayer())] )
call ClearSelectionForPlayer( GetTriggerPlayer() )
call SelectUnitForPlayerSingle( udg_JSXdw[GetPlayerId(GetTriggerPlayer())], GetTriggerPlayer() )
set kzdwzs[GetPlayerId(GetTriggerPlayer())]=0
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已解除控制单位|r")
return
else
if(((GetConvertedPlayerId(GetOwningPlayer(udg_JSXdw[GetPlayerId(GetTriggerPlayer())])) == kzdwzszs[GetPlayerId(GetTriggerPlayer())]))and(kzdwzs[GetPlayerId(GetTriggerPlayer())]==2))then
call GroupAddUnit( udg_kzwjdwz[kzdwzszs[GetPlayerId(GetTriggerPlayer())]], udg_JSXdw[GetPlayerId(GetTriggerPlayer())] )
call SetUnitOwner( udg_JSXdw[GetPlayerId(GetTriggerPlayer())], GetTriggerPlayer(), true )
call ClearSelectionForPlayer( GetTriggerPlayer() )
call SelectUnitForPlayerSingle( udg_JSXdw[GetPlayerId(GetTriggerPlayer())], GetTriggerPlayer() )
set kzdwzs[GetPlayerId(GetTriggerPlayer())]=0
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已控制单位|r")
return
endif
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[8]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_BSMSwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已关闭必杀模式|r")
call ForceRemovePlayer(udg_BSMSwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cff00ff00已开启必杀模式|r")
call ForceAddPlayer(udg_BSMSwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
set kzdwzs[GetPlayerId(GetTriggerPlayer())]=0
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[11]))then
if((IsUnitPausedBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已恢复|r"+"|cff00ff00被暂停单位|r")
call PauseUnit(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], false )
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已暂停|r"+"|cff00ff00单位|r")
call PauseUnit(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], true )
endif
endif
if((GetClickedButtonBJ()!=udg_CJZBdhkNn1[10])and(GetClickedButtonBJ()!=udg_CJZBdhkNn1[3])and(GetClickedButtonBJ()!=udg_CJZBdhkNn1[9]))then
call TriggerExecute(gg_trg_HKYJ20)
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[3]))then
call DialogClear(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())])
set udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFFFF00魔兽技能菜单|r")
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACes')>0))then
set udg_CJZBdhkNn1[20]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF100%闪避|r",0)
else
set udg_CJZBdhkNn1[20]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF100%闪避|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'Amim')>0))then
set udg_CJZBdhkNn1[21]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF魔法免疫|r",0)
else
set udg_CJZBdhkNn1[21]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF魔法免疫|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ANca')>0))then
set udg_CJZBdhkNn1[22]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF分裂攻击|r",0)
else
set udg_CJZBdhkNn1[22]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF分裂攻击|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUts')>0))then
set udg_CJZBdhkNn1[23]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF反弹攻击|r",0)
else
set udg_CJZBdhkNn1[23]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF反弹攻击|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AIsr')>0))then
set udg_CJZBdhkNn1[24]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF魔法伤害减少|r",0)
else
set udg_CJZBdhkNn1[24]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF魔法伤害减少|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'Agyv')>0))then
set udg_CJZBdhkNn1[25]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF真实视域|r",0)
else
set udg_CJZBdhkNn1[25]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF真实视域|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'Ahrp')>0))then
set udg_CJZBdhkNn1[26]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF修理|r",0)
else
set udg_CJZBdhkNn1[26]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF修理|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AIft')>0))then
set udg_CJZBdhkNn1[27]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF霜冻攻击|r",0)
else
set udg_CJZBdhkNn1[27]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF霜冻攻击|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOcr')>0))then
set udg_CJZBdhkNn1[28]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF致命一击|r",0)
else
set udg_CJZBdhkNn1[28]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF致命一击|r",0)
endif
set udg_CJZBdhkNn1[29]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF光环技能菜单|r",0)
set udg_CJZBdhkNn1[9]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF退出菜单|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ12,udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())])
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[10]))then
call DialogClear(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())])
set udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFFFF00自动化菜单|r")
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdjbwjz1)==true))then
set udg_CJZBdhkNn1[40]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每秒自动增加金币"+"【目前："+I2S(zdzs1[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
else
set udg_CJZBdhkNn1[40]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每秒自动增加金币"+"【目前："+I2S(zdzs1[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdmcwjz1)==true))then
set udg_CJZBdhkNn1[41]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每秒自动增加木材"+"【目前："+I2S(zdzs2[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
else
set udg_CJZBdhkNn1[41]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每秒自动增加木材"+"【目前："+I2S(zdzs2[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdqrkwjz1)==true))then
set udg_CJZBdhkNn1[42]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每秒自动清空已有人口数量|r",0)
else
set udg_CJZBdhkNn1[42]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每秒自动清空已有人口数量|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdhfwjz1)==true))then
set udg_CJZBdhkNn1[43]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF战斗中下降至30%血量时,自动回满100%HPMP|r",0)
else
set udg_CJZBdhkNn1[43]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF战斗中下降至30%血量时,自动回满100%HPMP|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_sdjsxwjz1)==true))then
set udg_CJZBdhkNn1[44]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF英雄杀敌几率加属性"+"【当前倍率："+R2S(udg_SGjsxss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
else
set udg_CJZBdhkNn1[44]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF英雄杀敌几率加属性"+"【当前倍率："+R2S(udg_SGjsxss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_sxgjwjz1)==true))then
set udg_CJZBdhkNn1[45]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF英雄攻击附带属性伤害"+"【当前倍率："+R2S(udg_YXWYshss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
else
set udg_CJZBdhkNn1[45]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF英雄攻击附带属性伤害"+"【当前倍率："+R2S(udg_YXWYshss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdjsxwjz1)==true))then
set udg_CJZBdhkNn1[46]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每60秒增加英雄全属性"+"【当前增加速度："+I2S(udg_zdjsx[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
else
set udg_CJZBdhkNn1[46]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每60秒增加英雄全属性"+"【当前增加速度："+I2S(udg_zdjsx[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_YXWYwjz1)==true))then
set udg_CJZBdhkNn1[47]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF英雄死亡后立刻原地复活|r",0)
else
set udg_CJZBdhkNn1[47]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF英雄死亡后立刻原地复活|r",0)
endif
if(udg_TMzs[GetPlayerId(GetTriggerPlayer())]==1)then
set udg_CJZBdhkNn1[48]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF天魔噬魂【攻击10%几率范围伤害技】|r",0)
else
set udg_CJZBdhkNn1[48]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF天魔噬魂【攻击10%几率范围伤害技】|r",0)
endif
if(udg_STzs[GetPlayerId(GetTriggerPlayer())]==1)then
set udg_CJZBdhkNn1[49]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF时停【攻击15%几率范围控制技】|r",0)
else
set udg_CJZBdhkNn1[49]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF时停【攻击15%几率范围控制技】|r",0)
endif
if(udg_TSzs[GetPlayerId(GetTriggerPlayer())]==1)then
set udg_CJZBdhkNn1[50]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF天神护佑【被动攻击/攻击15%几率单体治+伤技】|r",0)
else
set udg_CJZBdhkNn1[50]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF天神护佑【被动攻击/攻击15%几率单体治+伤技】|r",0)
endif
set udg_CJZBdhkNn1[9]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF退出菜单|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ15,udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())])
endif
endfunction
function InitTrig_HKYJ2 takes nothing returns nothing
set gg_trg_HKYJ2=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ2,function Trig_HKYJ2Actions)
endfunction
function Trig_HKYJ12Actions takes nothing returns nothing
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[20]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF100%闪避|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF100%闪避|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ACes')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[21]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF魔法免疫|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF魔法免疫|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Amim')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[22]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF分裂攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF分裂攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ANca')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[23]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF反弹攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF反弹攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUts')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[24]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF魔法伤害减少|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF魔法伤害减少|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AIsr')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[25]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF真实视域|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF真实视域|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Agyv')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[26]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF修理|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF修理|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Ahrp')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[27]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF霜冻攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF霜冻攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AIft')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[28]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF致命一击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF致命一击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AOcr')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()!=udg_CJZBdhkNn1[29])and(GetClickedButtonBJ()!=udg_CJZBdhkNn1[9]))then
call TriggerExecute(gg_trg_HKYJ22)
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[29]))then
call DialogClear(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())])
set udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFFFF00光环技能菜单|r")
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
set udg_CJZBdhkNn1[30]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF耐久光环|r",0)
else
set udg_CJZBdhkNn1[30]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF耐久光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0))then
set udg_CJZBdhkNn1[31]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF邪恶光环|r",0)
else
set udg_CJZBdhkNn1[31]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF邪恶光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0))then
set udg_CJZBdhkNn1[32]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF吸血光环|r",0)
else
set udg_CJZBdhkNn1[32]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF吸血光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0))then
set udg_CJZBdhkNn1[33]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF强击光环|r",0)
else
set udg_CJZBdhkNn1[33]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF强击光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0))then
set udg_CJZBdhkNn1[34]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF命令光环|r",0)
else
set udg_CJZBdhkNn1[34]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF命令光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0))then
set udg_CJZBdhkNn1[35]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF荆棘光环|r",0)
else
set udg_CJZBdhkNn1[35]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF荆棘光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
set udg_CJZBdhkNn1[37]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF所有被动|r",0)
else
set udg_CJZBdhkNn1[37]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF所有被动|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
set udg_CJZBdhkNn1[38]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF所有光环|r",0)
else
set udg_CJZBdhkNn1[38]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF所有光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
set udg_CJZBdhkNn1[39]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF所有被动+光环|r",0)
else
set udg_CJZBdhkNn1[39]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF所有被动+光环|r",0)
endif
set udg_CJZBdhkNn1[36]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF返回上页菜单|r",0)
set udg_CJZBdhkNn1[9]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF退出菜单|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ13,udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())])
endif
endfunction
function InitTrig_HKYJ12 takes nothing returns nothing
set gg_trg_HKYJ12=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ12,function Trig_HKYJ12Actions)
endfunction
function Trig_HKYJ13Actions takes nothing returns nothing
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[30]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF耐久光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF耐久光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AOr2')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[31]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF邪恶光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF邪恶光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUau')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[32]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF吸血光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF吸血光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUav')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[33]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF强击光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF强击光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AEar')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[34]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF命令光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF命令光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ACac')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[35]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF荆棘光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF荆棘光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AEah')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[37]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF100%闪避|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF魔法免疫|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF分裂攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF反弹攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF魔法伤害减少|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF真实视域|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF修理|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF霜冻攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF致命一击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')
else
endif
else
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF100%闪避|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ACes')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF魔法免疫|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Amim')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF分裂攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ANca')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF反弹攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUts')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF魔法伤害减少|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AIsr')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF真实视域|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Agyv')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF修理|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Ahrp')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF霜冻攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AIft')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF致命一击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AOcr')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
endif
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[38]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF耐久光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF邪恶光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF吸血光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF强击光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF命令光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF荆棘光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')
else
endif
else
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF耐久光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AOr2')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF邪恶光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUau')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF吸血光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUav')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF强击光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AEar')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF命令光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ACac')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF荆棘光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AEah')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
endif
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[39]))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF100%闪避|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF魔法免疫|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF分裂攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF反弹攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF魔法伤害减少|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF真实视域|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF修理|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF霜冻攻击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF致命一击|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF耐久光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF邪恶光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF吸血光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF强击光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF命令光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')
else
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')>0))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已删除|r"+"|cFF00CCFF荆棘光环|r")
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')
else
endif
else
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF100%闪避|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ACes')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF魔法免疫|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Amim')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF分裂攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ANca')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF反弹攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUts')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF魔法伤害减少|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AIsr')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF真实视域|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Agyv')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF修理|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'Ahrp')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF霜冻攻击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AIft')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF致命一击|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AOcr')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF耐久光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AOr2')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOr2',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF邪恶光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUau')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUau',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF吸血光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AUav')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUav',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF强击光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AEar')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEar',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF命令光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'ACac')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACac',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')>0))then
else
if((IsUnitAliveBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已添加|r"+"|cFF00CCFF荆棘光环|r")
call UnitAddAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah')
call UnitMakeAbilityPermanent(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],true,'AEah')
call SetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AEah',100)
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00添加失败|r"+"|cFF00CCFF该单位为死亡状态|r")
endif
endif
endif
endif
if((GetClickedButtonBJ()!=udg_CJZBdhkNn1[36])and(GetClickedButtonBJ()!=udg_CJZBdhkNn1[9]))then
call TriggerExecute(gg_trg_HKYJ23)
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[36]))then
call TriggerExecute(gg_trg_HKYJ22)
else
endif
endfunction
function InitTrig_HKYJ13 takes nothing returns nothing
set gg_trg_HKYJ13=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ13,function Trig_HKYJ13Actions)
endfunction
function Trig_HKYJ15Actions takes nothing returns nothing
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[40]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdjbwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF每秒自动增加金币|r")
call ForceRemovePlayer(udg_zdjbwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF每秒自动增加金币|r")
call ForceAddPlayer(udg_zdjbwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[41]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdmcwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF每秒自动增加木材|r")
call ForceRemovePlayer(udg_zdmcwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF每秒自动增加木材|r")
call ForceAddPlayer(udg_zdmcwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[42]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdqrkwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF每秒自动清空已有人口数量|r")
call ForceRemovePlayer(udg_zdqrkwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF每秒自动清空已有人口数量|r")
call ForceAddPlayer(udg_zdqrkwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[43]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdhfwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF战斗中下降至30%血量时,自动回满100%HPMP 【全体】|r")
call ForceRemovePlayer(udg_zdhfwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF战斗中下降至30%血量时,自动回满100%HPMP 【全体】|r")
call ForceAddPlayer(udg_zdhfwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[44]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_sdjsxwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF英雄杀敌几率加属性|r")
call ForceRemovePlayer(udg_sdjsxwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF英雄杀敌几率加属性|r")
call ForceAddPlayer(udg_sdjsxwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[45]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_sxgjwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF英雄攻击附带三围属性伤害|r")
call ForceRemovePlayer(udg_sxgjwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF英雄攻击附带三围属性伤害|r")
call ForceAddPlayer(udg_sxgjwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[46]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdjsxwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF每60秒增加英雄全属性|r")
call ForceRemovePlayer(udg_zdjsxwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF每60秒增加英雄全属性|r")
call ForceAddPlayer(udg_zdjsxwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[47]))then
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_YXWYwjz1)==true))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF英雄死亡后立刻原地复活|r")
call ForceRemovePlayer(udg_YXWYwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF英雄死亡后立刻原地复活|r")
call ForceAddPlayer(udg_YXWYwjz1,udg_CJZBwj[GetPlayerId(GetTriggerPlayer())])
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[48]))then
if(udg_TMzs[GetPlayerId(GetTriggerPlayer())]==1)then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF天魔噬魂|r")
set udg_TMzs[GetPlayerId(GetTriggerPlayer())]=0
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF天魔噬魂|r")
set udg_TMzs[GetPlayerId(GetTriggerPlayer())]=1
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[49]))then
if((udg_STzs[GetPlayerId(GetTriggerPlayer())]==1))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF时停|r")
set udg_STzs[GetPlayerId(GetTriggerPlayer())]=0
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF时停|r")
set udg_STzs[GetPlayerId(GetTriggerPlayer())]=1
endif
else
endif
if((GetClickedButtonBJ()==udg_CJZBdhkNn1[50]))then
if((udg_TSzs[GetPlayerId(GetTriggerPlayer())]==1))then
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已关闭|r"+"|cFF00CCFF天神护佑|r")
set udg_TSzs[GetPlayerId(GetTriggerPlayer())]=0
else
call DisplayTimedTextToPlayer(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],0,0,20.00,"|cFF66FF00已开启|r"+"|cFF00CCFF天神护佑|r")
set udg_TSzs[GetPlayerId(GetTriggerPlayer())]=1
endif
else
endif
if((GetClickedButtonBJ()!=udg_CJZBdhkNn1[3])and(GetClickedButtonBJ()!=udg_CJZBdhkNn1[9]))then
call TriggerExecute(gg_trg_HKYJ21)
endif
endfunction
function InitTrig_HKYJ15 takes nothing returns nothing
set gg_trg_HKYJ15=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ15,function Trig_HKYJ15Actions)
endfunction
function Trig_HKYJ17Actions takes nothing returns nothing
set bj_forLoopAIndex = 0
set bj_forLoopAIndexEnd = 11
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ((GetExpiredTimer()==jzjsq[bj_forLoopAIndex])) then
call UnitSetConstructionProgress( jzdw[bj_forLoopAIndex],100)
set jzdw[bj_forLoopAIndex]=null
call PauseTimer(jzjsq[bj_forLoopAIndex])
else
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_HKYJ17 takes nothing returns nothing
set gg_trg_HKYJ17=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ17,function Trig_HKYJ17Actions)
endfunction
function Trig_HKYJ16Conditions takes nothing returns boolean
return (jzzs[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]==1)
endfunction
function Trig_HKYJ16Actions takes nothing returns nothing
set jzdw[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))] = GetTriggerUnit()
call TimerStart(jzjsq[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],0.00,false,function Trig_HKYJ17Actions)
call UnitSetUpgradeProgress(GetTriggerUnit(),100)
endfunction
function InitTrig_HKYJ16 takes nothing returns nothing
set gg_trg_HKYJ16=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ16,EVENT_PLAYER_UNIT_CONSTRUCT_START)
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ16,EVENT_PLAYER_UNIT_UPGRADE_START)
call TriggerAddCondition(gg_trg_HKYJ16,Condition(function Trig_HKYJ16Conditions))
call TriggerAddAction(gg_trg_HKYJ16,function Trig_HKYJ16Actions)
endfunction
function Trig_ui______uFunc001Func001002002 takes nothing returns boolean
return ((IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true))
endfunction
function Trig_HXHLFunc001Func001Func001002002 takes nothing returns boolean
return ((IsUnitAliveBJ(GetFilterUnit()) == true))
endfunction
function Trig_HXHLFunc001Func001Func002A takes nothing returns nothing
call SetUnitManaPercentBJ( GetEnumUnit(), 100 )
endfunction
function Trig_HXHLFunc002Func001A takes nothing returns nothing
call SetUnitLifePercentBJ( GetEnumUnit(), 100 )
endfunction
function Trig_HKYJ14Actions takes nothing returns nothing
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ((IsPlayerInForce(ConvertedPlayer(bj_forLoopAIndex),udg_zdqrkwjz1) == true)) then
call SetPlayerStateBJ( ConvertedPlayer(bj_forLoopAIndex), PLAYER_STATE_RESOURCE_FOOD_USED, 0 )
else
endif
if ((IsPlayerInForce(ConvertedPlayer(bj_forLoopAIndex),udg_zdjbwjz1) == true)) then
call AdjustPlayerStateBJ(zdzs1[bj_forLoopAIndex], ConvertedPlayer(bj_forLoopAIndex), PLAYER_STATE_RESOURCE_GOLD )
else
endif
if ((IsPlayerInForce(ConvertedPlayer(bj_forLoopAIndex),udg_zdmcwjz1) == true)) then
call AdjustPlayerStateBJ(zdzs2[bj_forLoopAIndex], ConvertedPlayer(bj_forLoopAIndex), PLAYER_STATE_RESOURCE_LUMBER )
else
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
if ((udg_STXHZS2 != 0)) then
if ((CountUnitsInGroup(udg_STdwz) > 0)) then
set bj_forLoopAIndex = udg_STXHZS1
set bj_forLoopAIndexEnd = udg_STXHZS2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ((udg_STdw[bj_forLoopAIndex] != null)) then
if ((udg_STsjzs[bj_forLoopAIndex] == 0)or((IsUnitDeadBJ(udg_STdw[bj_forLoopAIndex]) == true))) then
call PauseUnit( udg_STdw[bj_forLoopAIndex], false )
call GroupRemoveUnitSimple( udg_STdw[bj_forLoopAIndex], udg_STdwz )
set udg_STdw[bj_forLoopAIndex] = null
else
set udg_STsjzs[bj_forLoopAIndex] = ( udg_STsjzs[bj_forLoopAIndex] - 1 )
call PauseUnit( udg_STdw[bj_forLoopAIndex], true )
endif
else
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex = udg_STXHZS1
set bj_forLoopAIndexEnd = udg_STXHZS2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ((udg_STdw[bj_forLoopAIndex] != null)) then
set udg_STXHZS1 = bj_forLoopAIndex
return
else
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
else
endif
else
endif
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ((IsPlayerInForce(ConvertedPlayer(bj_forLoopAIndex),udg_Wucdwjz1) == true)) then
set udg_HLdwz[bj_forLoopAIndex] = GetUnitsOfPlayerMatching(ConvertedPlayer(bj_forLoopAIndex), Condition(function Trig_HXHLFunc001Func001Func001002002))
call ForGroupBJ( udg_HLdwz[bj_forLoopAIndex], function Trig_HXHLFunc001Func001Func002A )
call GroupClear( udg_HLdwz[bj_forLoopAIndex] )
call DestroyGroup( udg_HLdwz[bj_forLoopAIndex] )
else
endif
if  ((CountUnitsInGroup(udg_HuiXuedwz[GetPlayerId(ConvertedPlayer(bj_forLoopAIndex))]) != 0))then
call ForGroupBJ(udg_HuiXuedwz[GetPlayerId(ConvertedPlayer(bj_forLoopAIndex))], function Trig_HXHLFunc002Func001A )
else
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_HKYJ14 takes nothing returns nothing
set gg_trg_HKYJ14=CreateTrigger()
call TriggerRegisterTimerEventPeriodic( gg_trg_HKYJ14, 1.00 )
call TriggerAddAction(gg_trg_HKYJ14,function Trig_HKYJ14Actions)
endfunction
function Trig_HKYJ3Conditions takes nothing returns boolean
return ((IsUnitInForce(GetTriggerUnit(),udg_Wucdwjz1)==true))
endfunction
// 每秒加全属性事件
function Trig_ui______uFunc001Func002A takes nothing returns nothing
if ((((GetHeroStr(GetEnumUnit(), false)+udg_zdjsx[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) <= 2100000000))) then
call ModifyHeroStat( bj_HEROSTAT_STR, GetEnumUnit(), bj_MODIFYMETHOD_ADD, udg_zdjsx[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])
else
endif
if ((((GetHeroAgi(GetEnumUnit(), false)+udg_zdjsx[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) <= 2100000000))) then
call ModifyHeroStat( bj_HEROSTAT_AGI, GetEnumUnit(), bj_MODIFYMETHOD_ADD, udg_zdjsx[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])
else
endif
if ((((GetHeroInt(GetEnumUnit(), false)+udg_zdjsx[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))]) <= 2100000000))) then
call ModifyHeroStat( bj_HEROSTAT_INT, GetEnumUnit(), bj_MODIFYMETHOD_ADD, udg_zdjsx[GetConvertedPlayerId(GetOwningPlayer(GetEnumUnit()))])
else
endif
endfunction
// 每秒加全属性事件
function Trig_HKYJ18Actions takes nothing returns nothing
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if((IsPlayerInForce(ConvertedPlayer(bj_forLoopAIndex),udg_zdjsxwjz1) == true))then
set udg_zdjsxdwz[bj_forLoopAIndex] = GetUnitsOfPlayerMatching(ConvertedPlayer(bj_forLoopAIndex), Condition(function Trig_ui______uFunc001Func001002002))
call ForGroupBJ( udg_zdjsxdwz[bj_forLoopAIndex], function Trig_ui______uFunc001Func002A )
call GroupClear( udg_zdjsxdwz[bj_forLoopAIndex] )
call DestroyGroup( udg_zdjsxdwz[bj_forLoopAIndex] )
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_HKYJ18 takes nothing returns nothing
set gg_trg_HKYJ18=CreateTrigger()
call TriggerRegisterTimerEventPeriodic( gg_trg_HKYJ18, 60.00 )
call TriggerAddAction(gg_trg_HKYJ18,function Trig_HKYJ18Actions)
endfunction
function Trig_HKYJ20Actions takes nothing returns nothing
set udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFFFF00《魔解网:www.xiaditu.com》|r")
if((IsPlayerInForce(GetTriggerPlayer(),udg_Qtwjz1)==true))then
set udg_CJZBdhkNn1[0]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF全图|r",0)
else
set udg_CJZBdhkNn1[0]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF全图|r",0)
endif
if((IsPlayerInForce(GetTriggerPlayer(),udg_Wucdwjz1)==true))then
set udg_CJZBdhkNn1[1]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF无CD无限蓝|r",0)
else
set udg_CJZBdhkNn1[1]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF无CD无限蓝|r",0)
endif
if(PMAzs[GetPlayerId(GetTriggerPlayer())]==0)then
set udg_CJZBdhkNn1[2]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFFPM闪(目前为无闪)|r",0)
elseif(PMAzs[GetPlayerId(GetTriggerPlayer())]==1)then
set udg_CJZBdhkNn1[2]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFFA闪(目前为PM闪)|r",0)
elseif(PMAzs[GetPlayerId(GetTriggerPlayer())]==2)then
set udg_CJZBdhkNn1[2]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF右键闪(目前为A闪)|r",0)
elseif(PMAzs[GetPlayerId(GetTriggerPlayer())]==3)then
set udg_CJZBdhkNn1[2]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF全屏闪(目前为右键闪)|r",0)
endif
set udg_CJZBdhkNn1[10]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF自动化菜单|r",0)
set udg_CJZBdhkNn1[3]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF魔兽技能菜单|r",0)
if((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_DWWDdwz[GetPlayerId(GetTriggerPlayer())])==true))then
set udg_CJZBdhkNn1[4]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF无敌|r",0)
else
set udg_CJZBdhkNn1[4]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF无敌|r",0)
endif
if((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_YDSDdwz[GetPlayerId(GetTriggerPlayer())])==true))then
set udg_CJZBdhkNn1[5]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF移动速度最快|r",0)
else
set udg_CJZBdhkNn1[5]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF移动速度最快|r",0)
endif
if((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_HuiXuedwz[GetPlayerId(GetTriggerPlayer())])==true))then
set udg_CJZBdhkNn1[6]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF无限回血|r",0)
else
set udg_CJZBdhkNn1[6]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF无限回血|r",0)
endif
if((IsUnitPausedBJ(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) == true))then
set udg_CJZBdhkNn1[11]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[恢复]|r"+"|cFF00CCFF被暂停单位|r",0)
else
set udg_CJZBdhkNn1[11]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[暂停]|r"+"|cFF00CCFF单位|r",0)
endif
set bj_forLoopAIndex = 1
set bj_forLoopAIndexEnd = 16
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ((IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], udg_kzwjdwz[bj_forLoopAIndex]) == true)and(kzdwzs[GetPlayerId(GetTriggerPlayer())]==0)) then
set udg_CJZBdhkNn1[7]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[解除]|r"+"|cFF00CCFF被控制单位|r",0) 
set kzdwzs[GetPlayerId(GetTriggerPlayer())]=1
else
if(((GetConvertedPlayerId(GetOwningPlayer(udg_JSXdw[GetPlayerId(GetTriggerPlayer())])) == bj_forLoopAIndex))and(kzdwzs[GetPlayerId(GetTriggerPlayer())]==0)and(IsUnitInGroup(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], udg_kzwjdwz[bj_forLoopAIndex]) != true)and((GetOwningPlayer(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]) != GetTriggerPlayer())))then
set udg_CJZBdhkNn1[7]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[控制]|r"+"|cFF00CCFF单位|r",0)
set kzdwzs[GetPlayerId(GetTriggerPlayer())]=2
endif
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
if((IsPlayerInForce(GetTriggerPlayer(),udg_BSMSwjz1)==true))then
set udg_CJZBdhkNn1[8]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF必杀模式|r",0)
else
set udg_CJZBdhkNn1[8]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF必杀模式|r",0)
endif
set udg_CJZBdhkNn1[9]=DialogAddButton(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF退出菜单|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ2,udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())])
endfunction
function InitTrig_HKYJ20 takes nothing returns nothing
set gg_trg_HKYJ20=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ20,function Trig_HKYJ20Actions)
endfunction
function Trig_HKYJ21Actions takes nothing returns nothing
call DialogClear(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())])
set udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFFFF00自动化菜单|r")
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdjbwjz1)==true))then
set udg_CJZBdhkNn1[40]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每秒自动增加金币"+"【目前："+I2S(zdzs1[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
else
set udg_CJZBdhkNn1[40]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每秒自动增加金币"+"【目前："+I2S(zdzs1[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdmcwjz1)==true))then
set udg_CJZBdhkNn1[41]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每秒自动增加木材"+"【目前："+I2S(zdzs2[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
else
set udg_CJZBdhkNn1[41]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每秒自动增加木材"+"【目前："+I2S(zdzs2[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdqrkwjz1)==true))then
set udg_CJZBdhkNn1[42]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每秒自动清空已有人口数量|r",0)
else
set udg_CJZBdhkNn1[42]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每秒自动清空已有人口数量|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdhfwjz1)==true))then
set udg_CJZBdhkNn1[43]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF战斗中下降至30%血量时,自动回满100%HPMP|r",0)
else
set udg_CJZBdhkNn1[43]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF战斗中下降至30%血量时,自动回满100%HPMP|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_sdjsxwjz1)==true))then
set udg_CJZBdhkNn1[44]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF英雄杀敌几率加属性"+"【当前倍率："+R2S(udg_SGjsxss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
else
set udg_CJZBdhkNn1[44]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF英雄杀敌几率加属性"+"【当前倍率："+R2S(udg_SGjsxss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_sxgjwjz1)==true))then
set udg_CJZBdhkNn1[45]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF英雄攻击附带属性伤害"+"【当前倍率："+R2S(udg_YXWYshss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
else
set udg_CJZBdhkNn1[45]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF英雄攻击附带属性伤害"+"【当前倍率："+R2S(udg_YXWYshss[GetPlayerId(GetTriggerPlayer())])+"倍】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_zdjsxwjz1)==true))then
set udg_CJZBdhkNn1[46]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF每60秒增加英雄全属性"+"【当前增加速度："+I2S(udg_zdjsx[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
else
set udg_CJZBdhkNn1[46]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF每60秒增加英雄全属性"+"【当前增加速度："+I2S(udg_zdjsx[GetConvertedPlayerId(GetTriggerPlayer())])+"点】|r",0)
endif
if((IsPlayerInForce(udg_CJZBwj[GetPlayerId(GetTriggerPlayer())],udg_YXWYwjz1)==true))then
set udg_CJZBdhkNn1[47]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF英雄死亡后立刻原地复活|r",0)
else
set udg_CJZBdhkNn1[47]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF英雄死亡后立刻原地复活|r",0)
endif
if(udg_TMzs[GetPlayerId(GetTriggerPlayer())]==1)then
set udg_CJZBdhkNn1[48]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF天魔噬魂【攻击10%几率范围伤害技】|r",0)
else
set udg_CJZBdhkNn1[48]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF天魔噬魂【攻击10%几率范围伤害技】|r",0)
endif
if(udg_STzs[GetPlayerId(GetTriggerPlayer())]==1)then
set udg_CJZBdhkNn1[49]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF时停【攻击15%几率范围控制技】|r",0)
else
set udg_CJZBdhkNn1[49]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF时停【攻击15%几率范围控制技】|r",0)
endif
if(udg_TSzs[GetPlayerId(GetTriggerPlayer())]==1)then
set udg_CJZBdhkNn1[50]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[关]|r"+"|cFF00CCFF天神护佑【被动攻击/攻击15%几率单体治+伤技】|r",0)
else
set udg_CJZBdhkNn1[50]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[开]|r"+"|cFF00CCFF天神护佑【被动攻击/攻击15%几率单体治+伤技】|r",0)
endif
set udg_CJZBdhkNn1[9]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF退出菜单|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ15,udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())])
endfunction
function InitTrig_HKYJ21 takes nothing returns nothing
set gg_trg_HKYJ21=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ21,function Trig_HKYJ21Actions)
endfunction
function Trig_HKYJ22Actions takes nothing returns nothing
call DialogClear(udg_CJZBdhk1[GetPlayerId(GetTriggerPlayer())])
set udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFFFF00魔兽技能菜单|r")
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACes')>0))then
set udg_CJZBdhkNn1[20]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF100%闪避|r",0)
else
set udg_CJZBdhkNn1[20]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF100%闪避|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'Amim')>0))then
set udg_CJZBdhkNn1[21]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF魔法免疫|r",0)
else
set udg_CJZBdhkNn1[21]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF魔法免疫|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ANca')>0))then
set udg_CJZBdhkNn1[22]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF分裂攻击|r",0)
else
set udg_CJZBdhkNn1[22]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF分裂攻击|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUts')>0))then
set udg_CJZBdhkNn1[23]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF反弹攻击|r",0)
else
set udg_CJZBdhkNn1[23]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF反弹攻击|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AIsr')>0))then
set udg_CJZBdhkNn1[24]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF魔法伤害减少|r",0)
else
set udg_CJZBdhkNn1[24]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF魔法伤害减少|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'Agyv')>0))then
set udg_CJZBdhkNn1[25]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF真实视域|r",0)
else
set udg_CJZBdhkNn1[25]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF真实视域|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'Ahrp')>0))then
set udg_CJZBdhkNn1[26]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF修理|r",0)
else
set udg_CJZBdhkNn1[26]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF修理|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AIft')>0))then
set udg_CJZBdhkNn1[27]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF霜冻攻击|r",0)
else
set udg_CJZBdhkNn1[27]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF霜冻攻击|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOcr')>0))then
set udg_CJZBdhkNn1[28]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF致命一击|r",0)
else
set udg_CJZBdhkNn1[28]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF致命一击|r",0)
endif
set udg_CJZBdhkNn1[29]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF光环技能菜单|r",0)
set udg_CJZBdhkNn1[9]=DialogAddButton(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF退出菜单|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ12,udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())])
endfunction
function InitTrig_HKYJ22 takes nothing returns nothing
set gg_trg_HKYJ22=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ22,function Trig_HKYJ22Actions)
endfunction
function Trig_HKYJ23Actions takes nothing returns nothing
call DialogClear(udg_CJZBdhk2[GetPlayerId(GetTriggerPlayer())])
set udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())]=DialogCreate()
call DialogSetMessage(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFFFF00光环技能菜单|r")
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
set udg_CJZBdhkNn1[30]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF耐久光环|r",0)
else
set udg_CJZBdhkNn1[30]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF耐久光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0))then
set udg_CJZBdhkNn1[31]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF邪恶光环|r",0)
else
set udg_CJZBdhkNn1[31]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF邪恶光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0))then
set udg_CJZBdhkNn1[32]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF吸血光环|r",0)
else
set udg_CJZBdhkNn1[32]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF吸血光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0))then
set udg_CJZBdhkNn1[33]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF强击光环|r",0)
else
set udg_CJZBdhkNn1[33]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF强击光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0))then
set udg_CJZBdhkNn1[34]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF命令光环|r",0)
else
set udg_CJZBdhkNn1[34]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF命令光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0))then
set udg_CJZBdhkNn1[35]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF荆棘光环|r",0)
else
set udg_CJZBdhkNn1[35]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF荆棘光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0))then
set udg_CJZBdhkNn1[37]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF所有被动|r",0)
else
set udg_CJZBdhkNn1[37]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF所有被动|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
set udg_CJZBdhkNn1[38]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF所有光环|r",0)
else
set udg_CJZBdhkNn1[38]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF所有光环|r",0)
endif
if((GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AOcr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIft')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Ahrp')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Agyv')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AIsr')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'AUts')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ANca')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'Amim')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())],'ACes')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEah')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'ACac')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AEar')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUav')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AUau')>0)or(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], 'AOr2')>0))then
set udg_CJZBdhkNn1[39]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFFFF0033[删]|r"+"|cFF00CCFF所有被动+光环|r",0)
else
set udg_CJZBdhkNn1[39]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF66FF00[加]|r"+"|cFF00CCFF所有被动+光环|r",0)
endif
set udg_CJZBdhkNn1[36]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF返回上页菜单|r",0)
set udg_CJZBdhkNn1[9]=DialogAddButton(udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],"|cFF00CCFF退出菜单|r",0)
call DialogDisplay(GetTriggerPlayer(),udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())],true)
call TriggerRegisterDialogEvent(gg_trg_HKYJ13,udg_CJZBdhk3[GetPlayerId(GetTriggerPlayer())])
endfunction
function InitTrig_HKYJ23 takes nothing returns nothing
set gg_trg_HKYJ23=CreateTrigger()
call TriggerAddAction(gg_trg_HKYJ23,function Trig_HKYJ23Actions)
endfunction
function Trig_HKYJ3Actions takes nothing returns nothing
call SetUnitManaPercentBJ(GetTriggerUnit(),100)
call UnitResetCooldown(GetTriggerUnit())
set udg_Wucddw1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetTriggerUnit()
call StartTimerBJ(udg_WucdJsq1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],false,0.01)
endfunction
function InitTrig_HKYJ3 takes nothing returns nothing
set gg_trg_HKYJ3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ3,EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ3,EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ3,EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(gg_trg_HKYJ3,Condition(function Trig_HKYJ3Conditions))
call TriggerAddAction(gg_trg_HKYJ3,function Trig_HKYJ3Actions)
endfunction
function Trig_HKYJ4Actions takes nothing returns nothing
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
if((GetExpiredTimer()==udg_WucdJsq1[bj_forLoopAIndex]))then
call SetUnitManaPercentBJ(udg_Wucddw1[bj_forLoopAIndex],100)
call UnitResetCooldown(udg_Wucddw1[bj_forLoopAIndex])
call PauseTimer(udg_WucdJsq1[bj_forLoopAIndex])
call DoNothing()
exitwhen true
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_HKYJ4 takes nothing returns nothing
set gg_trg_HKYJ4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[0])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[1])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[2])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[3])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[4])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[5])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[6])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[7])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[8])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[9])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[10])
call TriggerRegisterTimerExpireEvent(gg_trg_HKYJ4,udg_WucdJsq1[11])
call TriggerAddAction(gg_trg_HKYJ4,function Trig_HKYJ4Actions)
endfunction
function Trig_HKYJ5Conditions takes nothing returns boolean
return(PMAzs[GetPlayerId(GetTriggerPlayer())]>0)
endfunction
function Trig_HKYJ5Actions takes nothing returns nothing
if((PMAzs[GetPlayerId(GetTriggerPlayer())]==1)and((GetIssuedOrderIdBJ()==String2OrderIdBJ("move"))or(GetIssuedOrderIdBJ()==String2OrderIdBJ("patrol"))))then
if((IsUnitVisible(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true))then
set udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetOrderTargetUnit())
call SetUnitPositionLoc(GetTriggerUnit(),udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
set udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetOrderPointLoc()
call SetUnitPositionLoc(GetTriggerUnit(),udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endif
else
endif
if((PMAzs[GetPlayerId(GetTriggerPlayer())]==2)and((GetIssuedOrderIdBJ()==String2OrderIdBJ("attack"))))then
if((IsUnitVisible(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true))then
set udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetOrderTargetUnit())
call SetUnitPositionLoc(GetTriggerUnit(),udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
set udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetOrderPointLoc()
call SetUnitPositionLoc(GetTriggerUnit(),udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endif
else
endif
if((PMAzs[GetPlayerId(GetTriggerPlayer())]==3)and((GetIssuedOrderIdBJ()==String2OrderIdBJ("smart"))))then
if((IsUnitVisible(GetOrderTargetUnit(),GetOwningPlayer(GetTriggerUnit()))==true))then
set udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetOrderTargetUnit())
call SetUnitPositionLoc(GetTriggerUnit(),udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
else
set udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetOrderPointLoc()
call SetUnitPositionLoc(GetTriggerUnit(),udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
call RemoveLocation(udg_Psdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endif
else
endif
endfunction
function InitTrig_HKYJ5 takes nothing returns nothing
set gg_trg_HKYJ5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ5,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ5,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(gg_trg_HKYJ5,Condition(function Trig_HKYJ5Conditions))
call TriggerAddAction(gg_trg_HKYJ5,function Trig_HKYJ5Actions)
endfunction
function Trig_HKYJ6Conditions takes nothing returns boolean
return(((IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==true)and(IsUnitInForce(GetTriggerUnit(),udg_YXWYwjz1)==true))and(IsUnitIllusionBJ(GetTriggerUnit())==false))
endfunction
function Trig_HKYJ6Actions takes nothing returns nothing
set udg_YXWYdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))]=GetUnitLoc(GetTriggerUnit())
call ReviveHeroLoc(GetTriggerUnit(),udg_YXWYdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))],true)
call RemoveLocation(udg_YXWYdian1[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))])
endfunction
function InitTrig_HKYJ6 takes nothing returns nothing
set gg_trg_HKYJ6=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ6,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_HKYJ6,Condition(function Trig_HKYJ6Conditions))
call TriggerAddAction(gg_trg_HKYJ6,function Trig_HKYJ6Actions)
endfunction
function Trig_HKYJ7Actions takes nothing returns nothing
if((IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(IsPlayerInForce(GetTriggerPlayer(),udg_cdwjz1)==false))then
call TriggerExecute(gg_trg_HKYJ20)
endif
endfunction
function InitTrig_HKYJ7 takes nothing returns nothing
set gg_trg_HKYJ7=CreateTrigger()
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(0),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(1),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(2),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(3),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(4),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(5),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(6),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(7),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(8),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(9),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(10),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerRegisterPlayerKeyEventBJ(gg_trg_HKYJ7,Player(11),bj_KEYEVENTTYPE_DEPRESS,bj_KEYEVENTKEY_UP)
call TriggerAddAction(gg_trg_HKYJ7,function Trig_HKYJ7Actions)
endfunction
function Trig_HKYJ8Actions takes nothing returns nothing
set udg_JSXdw[GetPlayerId(GetTriggerPlayer())]=GetTriggerUnit()
endfunction
function InitTrig_HKYJ8 takes nothing returns nothing
set gg_trg_HKYJ8=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(0),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(1),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(2),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(3),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(4),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(5),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(6),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(7),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(8),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(9),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(10),true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_HKYJ8,Player(11),true)
call TriggerAddAction(gg_trg_HKYJ8,function Trig_HKYJ8Actions)
endfunction
function Trig_STcf2Func002Func002002003 takes nothing returns boolean
return (((IsUnitAliveBJ(GetFilterUnit()) == true) and (IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) == true)))
endfunction
function Trig_STcf2Func002Func003A takes nothing returns nothing
call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl", GetEnumUnit(), "overhead") )
call PauseUnit( GetEnumUnit(), true )
if ((IsUnitInGroup(GetEnumUnit(), udg_STdwz) == true)) then
set bj_forLoopAIndex = udg_STXHZS1
set bj_forLoopAIndexEnd = udg_STXHZS2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ((GetEnumUnit() == udg_STdw[bj_forLoopAIndex])) then
set udg_STsjzs[bj_forLoopAIndex] = ( udg_STsjzs[bj_forLoopAIndex] + 1 )
else
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
else
set udg_STXHZS2 = ( udg_STXHZS2 + 1 )
set udg_STdw[udg_STXHZS2] = GetEnumUnit()
set udg_STsjzs[udg_STXHZS2] = ( udg_STsjzs[udg_STXHZS2] + 1 )
call GroupAddUnit( udg_STdwz, udg_STdw[udg_STXHZS2] )
endif
endfunction
function Trig_TMcf1Func001Func001Func003002003 takes nothing returns boolean
return (((IsUnitAliveBJ(GetFilterUnit()) == true) and (IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) == true)))
endfunction
function Trig_TMcf1Func001Func001Func004A takes nothing returns nothing
call DestroyEffect( AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", GetEnumUnit(), "overhead") )
call UnitDamageTargetBJ( GetAttacker(), GetEnumUnit(), ( I2R(udg_TMshzs[GetPlayerId(GetOwningPlayer(GetAttacker()))]) + ( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.02 ) ), ATTACK_TYPE_CHAOS, DAMAGE_TYPE_DIVINE )
endfunction
function Trig_TMcf1Func001Func001Func009002003 takes nothing returns boolean
return (((IsUnitAliveBJ(GetFilterUnit()) == true) and (IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(GetAttacker())) == true)))
endfunction
function Trig_TMcf1Func001Func001Func010A takes nothing returns nothing
call DestroyEffect( AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", GetEnumUnit(), "overhead") )
call UnitDamageTargetBJ( GetAttacker(), GetEnumUnit(), (( ( I2R(GetHeroStatBJ(bj_HEROSTAT_STR, GetAttacker(), true)) + ( I2R(GetHeroStatBJ(bj_HEROSTAT_AGI, GetAttacker(), true)) + I2R(GetHeroStatBJ(bj_HEROSTAT_INT, GetAttacker(), true)) ) ) * 1.00 )+( GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) * 0.01 )), ATTACK_TYPE_CHAOS, DAMAGE_TYPE_DIVINE )
endfunction
function Trig_HKYJ9Actions takes nothing returns nothing
if(((IsUnitType(GetAttacker(),UNIT_TYPE_HERO)==true)and(IsUnitInForce(GetAttacker(),udg_sxgjwjz1)==true)))then
call UnitDamageTargetBJ(GetAttacker(),GetAttackedUnitBJ(),((I2R(GetHeroStr(GetAttacker(),true))+(I2R(GetHeroAgi(GetAttacker(),true))+I2R(GetHeroInt(GetAttacker(),true))))*udg_YXWYshss[GetPlayerId(GetOwningPlayer(GetAttacker()))]),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_DIVINE)
endif
if((IsUnitInForce(GetAttacker(),udg_BSMSwjz1)==true))then
call UnitDamageTargetBJ( GetAttacker(), GetAttackedUnitBJ(), GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_LIFE), ATTACK_TYPE_CHAOS, DAMAGE_TYPE_DIVINE )
call KillUnit( GetAttackedUnitBJ() )
endif
if((IsUnitInForce(GetAttackedUnitBJ(),udg_zdhfwjz1) == true) and (( 1.00 - ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_LIFE) / GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_MAX_LIFE) ) ) >= 0.70))then
call SetUnitLifePercentBJ( GetAttackedUnitBJ(), 100 )
call SetUnitManaPercentBJ( GetAttackedUnitBJ(), 100 )
call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", GetAttackedUnitBJ(), "overhead") )
endif
if((IsUnitInForce(GetAttacker(),udg_zdhfwjz1) == true) and (( 1.00 - ( GetUnitState(GetAttacker(), UNIT_STATE_LIFE) / GetUnitState(GetAttacker(), UNIT_STATE_MAX_LIFE) ) ) >= 0.70))then
call SetUnitLifePercentBJ( GetAttacker(), 100 )
call SetUnitManaPercentBJ( GetAttacker(), 100 )
call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", GetAttacker(), "overhead") )
endif
if((IsUnitType(GetKillingUnitBJ(),UNIT_TYPE_HERO)==true)and(IsUnitIllusionBJ(GetKillingUnitBJ())==false)and(IsUnitInForce(GetKillingUnitBJ(),udg_sdjsxwjz1)==true))then
if((GetRandomInt(1,100)<=33))then
call ModifyHeroStat(bj_HEROSTAT_STR,GetKillingUnitBJ(),bj_MODIFYMETHOD_ADD,R2I(( ( ( GetUnitLevel(GetKillingUnitBJ()) * 1 )) * udg_SGjsxss[GetPlayerId(GetOwningPlayer(GetKillingUnitBJ()))] ))+R2I(( ( ( GetUnitLevel(GetKillingUnitBJ()) * (( 1.00 - (( (GetUnitState(GetKillingUnitBJ(), UNIT_STATE_LIFE)) / (GetUnitState(GetKillingUnitBJ(), UNIT_STATE_MAX_LIFE)) )) )*10) )) * udg_SGjsxss[GetPlayerId(GetOwningPlayer(GetKillingUnitBJ()))] )))
else
endif
if((GetRandomInt(1,100)<=33))then
call ModifyHeroStat(bj_HEROSTAT_AGI,GetKillingUnitBJ(),bj_MODIFYMETHOD_ADD,R2I(( ( ( GetUnitLevel(GetKillingUnitBJ()) * 1 )) * udg_SGjsxss[GetPlayerId(GetOwningPlayer(GetKillingUnitBJ()))] ))+R2I(( ( ( GetUnitLevel(GetKillingUnitBJ()) * (( 1.00 - (( (GetUnitState(GetKillingUnitBJ(), UNIT_STATE_LIFE)) / (GetUnitState(GetKillingUnitBJ(), UNIT_STATE_MAX_LIFE)) )) )*10) )) * udg_SGjsxss[GetPlayerId(GetOwningPlayer(GetKillingUnitBJ()))] )))
else
endif
if((GetRandomInt(1,100)<=33))then
call ModifyHeroStat(bj_HEROSTAT_INT,GetKillingUnitBJ(),bj_MODIFYMETHOD_ADD,R2I(( ( ( GetUnitLevel(GetKillingUnitBJ()) * 1 )) * udg_SGjsxss[GetPlayerId(GetOwningPlayer(GetKillingUnitBJ()))] ))+R2I(( ( ( GetUnitLevel(GetKillingUnitBJ()) * (( 1.00 - (( (GetUnitState(GetKillingUnitBJ(), UNIT_STATE_LIFE)) / (GetUnitState(GetKillingUnitBJ(), UNIT_STATE_MAX_LIFE)) )) )*10) )) * udg_SGjsxss[GetPlayerId(GetOwningPlayer(GetKillingUnitBJ()))] )))
else
endif
else
endif
set bj_forLoopAIndex = 0
set bj_forLoopAIndexEnd = 11
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if((IsUnitInGroup(GetAttackedUnitBJ(),udg_HuiXuedwz[bj_forLoopAIndex])==true))then
call SetUnitLifePercentBJ(GetAttackedUnitBJ(),100)
else
endif
set bj_forLoopAIndex = bj_forLoopAIndex + 1
endloop
if ((udg_STzs[GetPlayerId(GetOwningPlayer(GetAttacker()))] == 1) and (GetRandomInt(1, 100) <= 15)) then
set udg_STd = GetUnitLoc(GetAttacker())
set udg_STdwz2 = GetUnitsInRangeOfLocMatching(1000.00, udg_STd, Condition(function Trig_STcf2Func002Func002002003))
call ForGroupBJ( udg_STdwz2, function Trig_STcf2Func002Func003A )
call GroupClear( udg_STdwz2 )
call DestroyGroup( udg_STdwz2 )
call RemoveLocation( udg_STd )
else
endif
if ((udg_TMzs[GetPlayerId(GetOwningPlayer(GetAttacker()))] == 1) and (GetRandomInt(1, 100) <= 10)) then
set udg_TMshzs[GetPlayerId(GetOwningPlayer(GetAttacker()))] = ( udg_TMshzs[GetPlayerId(GetOwningPlayer(GetAttacker()))] + 8 )
if ((IsUnitType(GetAttacker(), UNIT_TYPE_HERO) == true)) then
set udg_TMd[GetPlayerId(GetOwningPlayer(GetAttacker()))] = GetUnitLoc(GetAttacker())
set udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))] = GetUnitsInRangeOfLocMatching(800.00, udg_TMd[GetPlayerId(GetOwningPlayer(GetAttacker()))], Condition(function Trig_TMcf1Func001Func001Func009002003))
call ForGroupBJ( udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))], function Trig_TMcf1Func001Func001Func010A )
call GroupClear( udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))] )
call DestroyGroup( udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))] )
else
set udg_TMd[GetPlayerId(GetOwningPlayer(GetAttacker()))] = GetUnitLoc(GetAttacker())
set udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))] = GetUnitsInRangeOfLocMatching(800.00, udg_TMd[GetPlayerId(GetOwningPlayer(GetAttacker()))], Condition(function Trig_TMcf1Func001Func001Func003002003))
call ForGroupBJ( udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))], function Trig_TMcf1Func001Func001Func004A )
call GroupClear( udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))] )
call DestroyGroup( udg_TMdwz[GetPlayerId(GetOwningPlayer(GetAttacker()))] )
endif
else
endif
if (((udg_TSzs[GetPlayerId(GetOwningPlayer(GetAttacker()))] == 1) or (udg_TSzs[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] == 1)) and (GetRandomInt(1, 100) <= 15)) then
if ((udg_TSzs[GetPlayerId(GetOwningPlayer(GetAttacker()))] == 1)) then
call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", GetAttacker(), "overhead") )
call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl", GetAttackedUnitBJ(), "overhead") )
set udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttacker()))] = ( GetUnitState(GetAttacker(), UNIT_STATE_MAX_LIFE) * 0.15 )
call SetUnitState( GetAttacker(), UNIT_STATE_LIFE, ( GetUnitState(GetAttacker(), UNIT_STATE_LIFE) + udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttacker()))] ) )
set udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttacker()))] = ( GetUnitState(GetAttacker(), UNIT_STATE_MAX_MANA) * 0.15 )
call SetUnitState( GetAttacker(), UNIT_STATE_MANA, ( GetUnitState(GetAttacker(), UNIT_STATE_MANA) + udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttacker()))] ) )
set udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttacker()))] = ( ( GetUnitState(GetAttacker(), UNIT_STATE_MAX_LIFE) * 0.15 ) + ( GetUnitState(GetAttacker(), UNIT_STATE_MAX_MANA) * 0.15 ) )
call UnitDamageTargetBJ( GetAttacker(), GetAttackedUnitBJ(), udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttacker()))], ATTACK_TYPE_CHAOS, DAMAGE_TYPE_DIVINE )
else
endif
if ((udg_TSzs[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] == 1)) then
call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", GetAttackedUnitBJ(), "overhead") )
call DestroyEffect( AddSpecialEffectTarget("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl", GetAttacker(), "overhead") )
set udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] = ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_MAX_LIFE) * 0.15 )
call SetUnitState( GetAttackedUnitBJ(), UNIT_STATE_LIFE, ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_LIFE) + udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] ) )
set udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] = ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_MAX_MANA) * 0.15 )
call SetUnitState( GetAttackedUnitBJ(), UNIT_STATE_MANA, ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_MANA) + udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] ) )
set udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))] = ( ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_MAX_LIFE) * 0.15 ) + ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_MAX_MANA) * 0.15 ) )
call UnitDamageTargetBJ( GetAttackedUnitBJ(), GetAttacker(), udg_TSshss[GetPlayerId(GetOwningPlayer(GetAttackedUnitBJ()))], ATTACK_TYPE_CHAOS, DAMAGE_TYPE_DIVINE )
else
endif
else
endif
endfunction
function InitTrig_HKYJ9 takes nothing returns nothing
set gg_trg_HKYJ9=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ9,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerRegisterAnyUnitEventBJ(gg_trg_HKYJ9,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_HKYJ9,function Trig_HKYJ9Actions)
endfunction
function Trig_HKYJ11Actions takes nothing returns nothing
if (jzzs[GetPlayerId(GetTriggerPlayer())]==1) then
call AddPlayerTechResearched( GetOwningPlayer(GetTriggerUnit()), GetResearched(), 1 )
else
endif
endfunction
function InitTrig_HKYJ11 takes nothing returns nothing
    set gg_trg_HKYJ11 = CreateTrigger()
    call TriggerRegisterAnyUnitEventBJ( gg_trg_HKYJ11, EVENT_PLAYER_UNIT_RESEARCH_START )
    call TriggerAddAction(gg_trg_HKYJ11, function Trig_HKYJ11Actions)
endfunction
function Fly_ItName_All takes nothing returns nothing
local integer i=1
local string s=GetEventPlayerChatString()
local integer k=StringLength(s)
if((GetEventPlayerChatString()!="-cxzl")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
if((s=="-cx"))then
set Fly_sa_n=Fly_sa_n+1
else
if(S2I(SubString(s,3,k))>Fly_all_list_n)then
set Fly_sa_n=Fly_sa_n+1
else
if(S2I(SubString(s,3,k))>0)then
set Fly_sa_n=S2I(SubString(s,3,k))
endif
endif
endif
set Fly_saII=(Fly_sa_n-1)*50
set Fly_saIII=((ljzc_n-Fly_saII)/ 5)
if(Fly_sa_n==Fly_all_list_n)then
if(ljzc_n>(Fly_saII+4))then
loop
exitwhen i>Fly_saIII
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,(("|cffffff00"+I2S((i+Fly_saII)))+(".|r"+(Fly_all_name[(i+Fly_saII)]+(" |cffffff00"+(I2S(((i+Fly_saII)+Fly_saIII))+(".|r"+(Fly_all_name[((i+Fly_saII)+Fly_saIII)]+(" |cffffff00"+(I2S(((i+Fly_saII)+(Fly_saIII*2)))+(".|r"+(Fly_all_name[((i+Fly_saII)+(Fly_saIII*2))]+(" |cffffff00"+(I2S(((i+Fly_saII)+(Fly_saIII*3)))+(".|r"+(Fly_all_name[((i+Fly_saII)+(Fly_saIII*3))]+(" |cffffff00"+(I2S(((i+Fly_saII)+(Fly_saIII*4)))+(".|r"+Fly_all_name[((i+Fly_saII)+(Fly_saIII*4))])))))))))))))))))))
set i=i+1
endloop
endif
if(ModuloInteger(ljzc_n,5)==1)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(ljzc_n)+".|r"+Fly_all_name[ljzc_n]))
else
if(ModuloInteger(ljzc_n,5)==2)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(ljzc_n-1)+".|r"+Fly_all_name[(ljzc_n-1)]+" |cffffff00"+I2S(ljzc_n)+".|r"+Fly_all_name[ljzc_n]))
else
if(ModuloInteger(ljzc_n,5)==3)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(ljzc_n-2)+".|r"+Fly_all_name[(ljzc_n-2)]+" |cffffff00"+I2S(ljzc_n-1)+".|r"+Fly_all_name[(ljzc_n-1)]+" |cffffff00"+I2S(ljzc_n)+".|r"+Fly_all_name[ljzc_n]))
else
if(ModuloInteger(ljzc_n,5)==4)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(ljzc_n-3)+".|r"+Fly_all_name[(ljzc_n-3)]+" |cffffff00"+I2S(ljzc_n-2)+".|r"+Fly_all_name[(ljzc_n-2)]+" |cffffff00"+I2S(ljzc_n-1)+".|r"+Fly_all_name[(ljzc_n-1)]+" |cffffff00"+I2S(ljzc_n)+".|r"+Fly_all_name[ljzc_n]))
endif
endif
endif
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,("|CFFFF0000当|CFFFF6600前|CFFFFFF00为|CFF00FF00第|CFF00FFFF "+((I2S(Fly_sa_n)+("/"+I2S(Fly_all_list_n)))+" |CFF0000FF页    \"|CFFFF0000-|CFFFF6600cx\"")))
set Fly_sa_n=0
else
loop
exitwhen i>(50/ 5)
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,(("|cffffff00"+I2S((i+Fly_saII)))+(".|r"+(Fly_all_name[(i+Fly_saII)]+(" |cffffff00"+(I2S(((i+Fly_saII)+(50/ 5)))+(".|r"+(Fly_all_name[((i+Fly_saII)+(50/ 5))]+(" |cffffff00"+(I2S(((i+Fly_saII)+((50/ 5)*2)))+(".|r"+(Fly_all_name[((i+Fly_saII)+((50/ 5)*2))]+(" |cffffff00"+(I2S(((i+Fly_saII)+((50/ 5)*3)))+(".|r"+(Fly_all_name[((i+Fly_saII)+((50/ 5)*3))]+(" |cffffff00"+(I2S(((i+Fly_saII)+((50/ 5)*4)))+(".|r"+Fly_all_name[((i+Fly_saII)+((50/ 5)*4))])))))))))))))))))))
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,("|CFFFF0000当|CFFFF6600前|CFFFFFF00为|CFF00FF00第|CFF00FFFF "+((I2S(Fly_sa_n)+("/"+I2S(Fly_all_list_n)))+" |CFF0000FF页    \"|CFFFF0000-|CFFFF6600cx\"")))
endif
endif
set s=null
endfunction
function Fly_ItName_Part takes nothing returns nothing
local integer i=1
local integer l=0
local string s=GetEventPlayerChatString()
local integer k=StringLength(s)
if((IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true)and(GetEventPlayerChatString()!="-cxzl"))then
if((s=="-sc"))then
set Fly_sc_n=(Fly_sc_n+1)
else
if(S2I(SubString(s,3,k))>Fly_part_list_n)then
set Fly_sc_n=(Fly_sc_n+1)
else
if(S2I(SubString(s,3,k))>0)then
set Fly_sc_n=(S2I(SubString(s,3,k)))
endif
endif
endif
set Fly_scII=((Fly_sc_n-1)*50)
set Fly_scIII=((Fly_part_n-Fly_scII)/ 5)
if(Fly_sc_n==Fly_part_list_n)and(Fly_part_list_n!=1)then
if(Fly_part_n>(Fly_scII+4))then
loop
exitwhen i>Fly_scIII
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,(("|cffffff00"+I2S(Fly_part_No[(i+Fly_scII)]))+(".|r"+(Fly_part_name[(i+Fly_scII)]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+Fly_scIII)])+(".|r"+(Fly_part_name[((i+Fly_scII)+Fly_scIII)]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+(Fly_scIII*2))])+(".|r"+(Fly_part_name[((i+Fly_scII)+(Fly_scIII*2))]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+(Fly_scIII*3))])+(".|r"+(Fly_part_name[((i+Fly_scII)+(Fly_scIII*3))]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+(Fly_scIII*4))])+(".|r"+Fly_part_name[((i+Fly_scII)+(Fly_scIII*4))])))))))))))))))))))
set i=i+1
endloop
endif
if(ModuloInteger(Fly_part_n,5)==1)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
if(ModuloInteger(Fly_part_n,5)==2)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[(Fly_part_n-1)])+".|r"+Fly_part_name[(Fly_part_n-1)]+" |cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
if(ModuloInteger(Fly_part_n,5)==3)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[(Fly_part_n-2)])+".|r"+Fly_part_name[(Fly_part_n-2)]+" |cffffff00"+I2S(Fly_part_No[(Fly_part_n-1)])+".|r"+Fly_part_name[(Fly_part_n-1)]+" |cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
if(ModuloInteger(Fly_part_n,5)==4)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[(Fly_part_n-3)])+".|r"+Fly_part_name[(Fly_part_n-3)]+" |cffffff00"+I2S(Fly_part_No[(Fly_part_n-2)])+".|r"+Fly_part_name[(Fly_part_n-2)]+" |cffffff00"+I2S(Fly_part_No[(Fly_part_n-1)])+".|r"+Fly_part_name[(Fly_part_n-1)]+" |cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,("|CFFFF0000当|CFFFF6600前|CFFFFFF00为|CFF00FF00第|CFF00FFFF "+((I2S(Fly_sc_n)+("/"+I2S(Fly_part_list_n)))+" |CFF0000FF页    \"|CFFFF0000-|CFFFF6600sc\"")))
set Fly_sc_n=0
elseif(Fly_part_list_n==1)then
if(ModuloInteger(Fly_part_n,5)==0)then
set l=Fly_part_n/ 5
loop
exitwhen i>l
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,(("|cffffff00"+I2S(Fly_part_No[((i*5)-4)]))+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-4)]]+(" |cffffff00"+(I2S(Fly_part_No[((i*5)-3)])+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-3)]]+(" |cffffff00"+(I2S(Fly_part_No[((i*5)-2)])+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-2)]]+(" |cffffff00"+(I2S(Fly_part_No[((i*5)-1)])+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-1)]]+(" |cffffff00"+(I2S(Fly_part_No[i*5])+(".|r"+Fly_part_name[Fly_part_No[i*5]])))))))))))))))))))
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,("|CFFFF0000当|CFFFF6600前|CFFFFFF00为|CFF00FF00第|CFF00FFFF "+((I2S(Fly_sc_n)+("/"+I2S(Fly_part_list_n)))+" |CFF0000FF页    \"|CFFFF0000-|CFFFF6600sc\"")))
set Fly_sc_n=0
set s=null
else
set l=(Fly_part_n/ 5)+1
if(Fly_part_n>5)then
loop
exitwhen i>l-1
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,(("|cffffff00"+I2S(Fly_part_No[((i*5)-4)]))+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-4)]]+(" |cffffff00"+(I2S(Fly_part_No[((i*5)-3)])+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-3)]]+(" |cffffff00"+(I2S(Fly_part_No[((i*5)-2)])+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-2)]]+(" |cffffff00"+(I2S(Fly_part_No[((i*5)-1)])+(".|r"+(Fly_part_name[Fly_part_No[((i*5)-1)]]+(" |cffffff00"+(I2S(Fly_part_No[i*5])+(".|r"+Fly_part_name[Fly_part_No[i*5]])))))))))))))))))))
set i=i+1
endloop
endif
if(ModuloInteger(Fly_part_n,5)==1)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
if(ModuloInteger(Fly_part_n,5)==2)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[(Fly_part_n-1)])+".|r"+Fly_part_name[(Fly_part_n-1)]+" |cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
if(ModuloInteger(Fly_part_n,5)==3)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[(Fly_part_n-2)])+".|r"+Fly_part_name[(Fly_part_n-2)]+" |cffffff00"+I2S(Fly_part_No[(Fly_part_n-1)])+".|r"+Fly_part_name[(Fly_part_n-1)]+" |cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
if(ModuloInteger(Fly_part_n,5)==4)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,("|cffffff00"+I2S(Fly_part_No[(Fly_part_n-3)])+".|r"+Fly_part_name[(Fly_part_n-3)]+" |cffffff00"+I2S(Fly_part_No[(Fly_part_n-2)])+".|r"+Fly_part_name[(Fly_part_n-2)]+" |cffffff00"+I2S(Fly_part_No[(Fly_part_n-1)])+".|r"+Fly_part_name[(Fly_part_n-1)]+" |cffffff00"+I2S(Fly_part_No[Fly_part_n])+".|r"+Fly_part_name[Fly_part_n]))
endif
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,("|CFFFF0000当|CFFFF6600前|CFFFFFF00为|CFF00FF00第|CFF00FFFF "+((I2S(Fly_sc_n)+("/"+I2S(Fly_part_list_n)))+" |CFF0000FF页    \"|CFFFF0000-|CFFFF6600sc\"")))
set Fly_sc_n=0
set s=null
endif
else
if(Fly_part_n!=0)then
loop
exitwhen i>50/ 5
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60.,(("|cffffff00"+I2S(Fly_part_No[(i+Fly_scII)]))+(".|r"+(Fly_part_name[(i+Fly_scII)]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+(50/ 5))])+(".|r"+(Fly_part_name[((i+Fly_scII)+(50/ 5))]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+((50/ 5)*2))])+(".|r"+(Fly_part_name[((i+Fly_scII)+((50/ 5)*2))]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+((50/ 5)*3))])+(".|r"+(Fly_part_name[((i+Fly_scII)+((50/ 5)*3))]+(" |cffffff00"+(I2S(Fly_part_No[((i+Fly_scII)+((50/ 5)*4))])+(".|r"+Fly_part_name[((i+Fly_scII)+((50/ 5)*4))])))))))))))))))))))
set i=i+1
endloop
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,("|CFFFF0000当|CFFFF6600前|CFFFFFF00为|CFF00FF00第|CFF00FFFF "+((I2S(Fly_sc_n)+("/"+I2S(Fly_part_list_n)))+" |CFF0000FF页    \"|CFFFF0000-|CFFFF6600sc\"")))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,60,("|CFFFF0000此|CFFFF6600地|CFFFFFF00图|CFF00FF00没|CFF00FFFF有|CFF0000FF彩|CFFFF0000色|CFFFF6600装备"))
endif
endif
endif
set s=null
endfunction
function Fly_Item_sc takes nothing returns nothing
local integer i=0
local integer k=0
local string s1x
loop
set s1x=Fly_all_name[i]
if SubString(s1x,0,1)=="|" then
if SubString(s1x,1,2)=="c" or SubString(s1x,1,2)=="C" then
set k=k+1
set Fly_part_name[k]=s1x
set Fly_part_No[k]=i
set Fly_part_n=Fly_part_n+1
elseif SubString(s1x,1,2)=="r" or SubString(s1x,1,2)=="R" then
set k=k+1
set Fly_part_name[k]=s1x
set Fly_part_No[k]=i
set Fly_part_n=Fly_part_n+1
endif
endif
if(i==ljzc_n)then
if(ModuloInteger(Fly_part_n,50)==0)then
set Fly_part_list_n=Fly_part_n/ 50
else
set Fly_part_list_n=((Fly_part_n/ 50)+1)
endif
endif
exitwhen i>ljzc_n
set i=i+1
endloop
set s1x=null
endfunction
function Fly_It_Name takes nothing returns nothing
local integer i=0
local trigger t=CreateTrigger()
local trigger t1x=CreateTrigger()
loop
call TriggerRegisterPlayerChatEvent(t,Player(i),"-cx",false)
call TriggerRegisterPlayerChatEvent(t1x,Player(i),"-sc",false)
set i=i+1
exitwhen i==11
endloop
call TriggerAddAction(t1x,function Fly_ItName_Part)
call TriggerAddAction(t,function Fly_ItName_All)
endfunction
function FYMessage takes string msg returns nothing
local integer i=0
loop
call DisplayTimedTextToPlayer(Player(i),0,0,300,msg)
set i=i+1
exitwhen i==11
endloop
endfunction
function C_IM takes integer p,string s returns nothing
local integer i=0
local integer j=1
local integer k=StringLength(s)
local integer k1x
local string s1x
loop
set s1x=GetObjectName(ljzc_it[i])
set k1x=StringLength(s1x)
set j=1
loop
if SubString(s1x,j-1,j)=="|" then
if SubString(s1x,j,j+1)=="c" or SubString(s1x,j,j+1)=="C" then
set s1x=SubString(s1x,0,j-1)+SubString(s1x,j+9,k1x)
set j=j-1
elseif SubString(s1x,j,j+1)=="r" or SubString(s1x,j,j+1)=="R" then
set s1x=SubString(s1x,0,j-1)+SubString(s1x,j+1,k1x)
endif
endif
exitwhen j>=k1x
set j=j+1
endloop
if SubString(s,8,k)==SubString(s1x,0,k-8)then
set udg_swpwp=CreateItem(ljzc_it[i], GetUnitX(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), GetUnitY(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]))
call DisplayTextToPlayer(Player(p),0,0,"|cFF00FF00 创建 |r"+s1x)
endif
exitwhen(i==ljzc_n)
set i=i+1
endloop
call DisplayTextToPlayer(Player(p),0,0,"|cFF00FF00 创建完成! |r")
set s1x=null
endfunction
function YLS_0000 takes nothing returns boolean
local string s1x
local string s=GetEventPlayerChatString()
local integer k=StringLength(s)
if (IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true) then
if SubString(s,0,8)=="=获得 " then
call C_IM(GetPlayerId(GetTriggerPlayer()),s)
endif
if SubString(s,0,2)=="wp" then
set s1x=GetObjectName(ljzc_it[S2I(SubString(s,2,k))])
set udg_swpwp=CreateItem(ljzc_it[S2I(SubString(s,2,k))], GetUnitX(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), GetUnitY(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]))
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cFF00FF00 创建 |r"+s1x)
call DisplayTextToPlayer(GetTriggerPlayer(),0,0,"|cFF00FF00 创建完成! |r")
endif
endif
return false
endfunction
function YLS_ylsNB takes nothing returns nothing
local integer i=0
local trigger t=CreateTrigger()
loop
exitwhen i>11
call TriggerRegisterPlayerChatEvent(t,Player(i),"",false)
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function YLS_0000))
endfunction
function ljcsh takes nothing returns nothing
local integer i=0
loop
exitwhen i>=62
if(i<=9)then
set ljzc_id[i]=i+48
elseif(i<=35)then
set ljzc_id[i]=i+55
else
set ljzc_id[i]=i+61
endif
set i=i+1
endloop
endfunction
function ljid6 takes nothing returns nothing
local integer i=0
local item itx
local integer j=1
local integer k1x
local string s1x
loop
set itx=CreateItem(ljzc_ida+ljzc_idb+ljzc_idc+ljzc_id[i],0,0)
if(itx!=null)then
set ljzc_n=ljzc_n+1
set ljzc_it[ljzc_n]=GetItemTypeId(itx)
set Fly_all_name[ljzc_n]=GetObjectName(ljzc_it[ljzc_n])
endif
call RemoveItem(itx)
exitwhen i==61
set i=i+1
endloop
set itx=null
endfunction
function ljid5 takes nothing returns nothing
set ljzc_idc=256*ljzc_id[ljzc_ic]
set ljzc_ic=ljzc_ic+1
if(ljzc_ic==62)then
call PauseTimer(ljzc_tmc)
call DestroyTimer(ljzc_tmc)
set ljzc_ic=0
endif
call ljid6()
endfunction
function ljid4 takes nothing returns nothing
set ljzc_tmc=CreateTimer()
call TimerStart(ljzc_tmc,.0005,true,function ljid5)
endfunction
function ljid3 takes nothing returns nothing
set ljzc_idb=256*256*ljzc_id[ljzc_ib]
set ljzc_ib=ljzc_ib+1
if(ljzc_ib==62)then
call PauseTimer(ljzc_tmb)
call DestroyTimer(ljzc_tmb)
set ljzc_ib=0
endif
call ljid4()
endfunction
function ljid2 takes nothing returns nothing
set ljzc_tmb=CreateTimer()
call TimerStart(ljzc_tmb,.0322,true,function ljid3)
endfunction
function ljid1 takes nothing returns nothing
set ljzc_ida=256*256*256*ljzc_id[ljzc_ia]
set ljzc_ia=ljzc_ia+1
if(ljzc_ia==62)then
call PauseTimer(ljzc_tm)
call DestroyTimer(ljzc_tm)
if(ModuloInteger(ljzc_n,50)==0)then
set Fly_all_list_n=(ljzc_n/ 50)
else
set Fly_all_list_n=((ljzc_n/ 50)+1)
endif
call YLS_ylsNB()
call Fly_It_Name()
call Fly_Item_sc()
endif
call ljid2()
endfunction
function ljzc takes nothing returns nothing
call ljcsh()
set ljzc_ia=0
set ljzc_ib=0
set ljzc_ic=0
set ljzc_n=0
set Fly_sa_n=0
set Fly_sc_n=0
set Fly_part_n=0
set ljzc_tm=CreateTimer()
call TimerStart(ljzc_tm,2,true,function ljid1)
endfunction
function fly_main takes nothing returns nothing
set pfzy_wpX[GetPlayerId(GetTriggerPlayer())]=GetUnitX(udg_JSXdw[GetPlayerId(GetTriggerPlayer())])
set pfzy_wpY[GetPlayerId(GetTriggerPlayer())]=GetUnitY(udg_JSXdw[GetPlayerId(GetTriggerPlayer())])
endfunction
function Fly_main takes nothing returns nothing
local integer i=0
local trigger t=CreateTrigger()
loop
exitwhen i>11
call TriggerRegisterPlayerUnitEvent(t,Player(i),ConvertPlayerUnitEvent(24),null)
set i=i+1
endloop
call ljzc()
call TriggerAddAction(t,function fly_main)
endfunction
function fy_qcdc takes nothing returns boolean
if(GetPlayerController(GetTriggerPlayer())==ConvertMapControl(0)and((IsUnitInForce(GetTriggerUnit(),udg_Wucdwjz1)==true)))then
return true
endif
return false	
endfunction
function fy_sjd takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit u=LoadUnitHandle(fy_ht,1,1)
local real m=LoadReal(fy_ht,1,2)
call UnitResetCooldown(u)
call SetUnitState(u,ConvertUnitState(2),m)
call FlushChildHashtable(fy_ht,1)
call DestroyTimer(t)
set t=null
set u=null
endfunction
function fy_qcd takes nothing returns nothing
local timer t=CreateTimer()
local unit u=GetTriggerUnit()
local real m=GetUnitState(GetTriggerUnit(),ConvertUnitState(3))
call SaveUnitHandle(fy_ht,1,1,u)
call SaveReal(fy_ht,1,2,m)
call TimerStart(t,0,false,function fy_sjd)
set t=null
set u=null
endfunction
function FY_qcd takes nothing returns nothing
local integer i=0
local trigger t=CreateTrigger()
loop
exitwhen i>11
call TriggerRegisterPlayerUnitEvent(t,Player(i),ConvertPlayerUnitEvent(274),null)
set i=i+1
endloop
call TriggerAddCondition(t,Condition(function fy_qcdc))
call TriggerAddAction(t,function fy_qcd)	
endfunction
function Trig_XHCDXSWP1Actions takes nothing returns nothing
set udg_swpzfcpd="***********************************************0123456789*******ABCDEFGHIJKLMNOPQRSTUVWXYZ******abcdefghijklmnopqrstuvwxyz"
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_WJswpzs1[bj_forLoopAIndex]=0
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=1
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set udg_swpzfc[bj_forLoopAIndex]=""
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
endfunction
function InitTrig_XHCDXSWP1 takes nothing returns nothing
set gg_trg_XHCDXSWP1=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_XHCDXSWP1,0.01)
call TriggerAddAction(gg_trg_XHCDXSWP1,function Trig_XHCDXSWP1Actions)
endfunction
function Trig_XHCDXSWP2Func004Func005002002 takes nothing returns boolean
return((IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO)==true))
endfunction
function YDWES2Idx takes string targetstr returns integer
local string originstr=bj_AllString2
local integer strlength=StringLength(targetstr)
local integer aaa1=0
local integer bbb1=0
local integer numx=1
local integer result=0
loop
exitwhen bbb1 > strlength - 1
set numx=R2I(Pow(256, strlength - 1 - bbb1))
set aaa1=1
loop
exitwhen aaa1 > 255
if SubString(targetstr, bbb1, bbb1 + 1) == SubString(originstr, aaa1, aaa1 + 1) then
set result=result + aaa1 * numx
set aaa1=256
endif
set aaa1=aaa1 + 1
endloop
set bbb1=bbb1 + 1
endloop
return result
endfunction
function Trig_XHCDXSWP2Actions takes nothing returns nothing
set udg_swpzfc[0]=SubStringBJ(GetEventPlayerChatString(),1,3)
set udg_swpzfc[1]=SubStringBJ(GetEventPlayerChatString(),5,8)
set udg_swpzfc[2]=SubStringBJ(GetEventPlayerChatString(),9,16)
if((udg_swpzfc[0]=="-wp")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set bj_forLoopAIndex=5
set bj_forLoopAIndexEnd=StringLength(GetEventPlayerChatString())
loop
exitwhen bj_forLoopAIndex>bj_forLoopAIndexEnd
set bj_forLoopBIndex=5
set bj_forLoopBIndexEnd=255
loop
exitwhen bj_forLoopBIndex>bj_forLoopBIndexEnd
if((SubStringBJ(GetEventPlayerChatString(),bj_forLoopAIndex,bj_forLoopAIndex)==SubStringBJ(udg_swpzfcpd,bj_forLoopBIndex,bj_forLoopBIndex)))then
if((SubStringBJ(GetEventPlayerChatString(),bj_forLoopAIndex,bj_forLoopAIndex)!="*"))then
set udg_swpzs=((udg_swpzs*256)+bj_forLoopBIndex)
else
endif
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex+1
endloop
set bj_forLoopAIndex=bj_forLoopAIndex+1
endloop
set udg_swpwplx=udg_swpzs
set udg_swpwp =CreateItem(udg_swpwplx, GetUnitX(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), GetUnitY(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]))
if(udg_swpwp!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,("|cFF00FF00精准ID刷物品：获得|r"+GetItemName(udg_swpwp)))
endif
else
endif
if((udg_swpzfc[0]=="-dw")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set udg_swpwplx=YDWES2Idx(udg_swpzfc[1])
set fzdw[GetPlayerId(GetTriggerPlayer())] =CreateUnit( GetTriggerPlayer(), udg_swpwplx, GetUnitX(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), GetUnitY(udg_JSXdw[GetPlayerId(GetTriggerPlayer())]), bj_UNIT_FACING )
if(fzdw[GetPlayerId(GetTriggerPlayer())]!=null)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,("|cFF00FF00精准ID刷单位：获得|r"+GetUnitName(fzdw[GetPlayerId(GetTriggerPlayer())])))
endif
else
endif
if((udg_swpzfc[0]=="-jn")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set udg_swpwplx=YDWES2Idx(udg_swpzfc[1])
call UnitAddAbility( udg_JSXdw[GetPlayerId(GetTriggerPlayer())], udg_swpwplx )
call UnitMakeAbilityPermanent( udg_JSXdw[GetPlayerId(GetTriggerPlayer())], true,udg_swpwplx )
if( S2I( udg_swpzfc[2])>0)then
call SetUnitAbilityLevel( udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_swpwplx, S2I( udg_swpzfc[2]) )
else
call SetUnitAbilityLevel( udg_JSXdw[GetPlayerId(GetTriggerPlayer())],udg_swpwplx, 1 )
endif
if(( S2I( udg_swpzfc[2])==0)and(SubStringBJ(GetEventPlayerChatString(),9,16)!=""))then
call UnitRemoveAbility(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], udg_swpwplx )
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,("|cFF00FF00精准ID刷技能：删除"+GetAbilityName(udg_swpwplx)+"，"))
endif
if(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], udg_swpwplx) != 0)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,("|cFF00FF00精准ID刷技能：获得"+GetAbilityName(udg_swpwplx)+"，"+I2S(GetUnitAbilityLevel(udg_JSXdw[GetPlayerId(GetTriggerPlayer())], udg_swpwplx))+"级|r"))
endif
else
endif
if((udg_swpzfc[0]=="-kj")and(IsPlayerInForce(GetTriggerPlayer(),udg_Zhjikqwjz1)==true))then
set udg_swpwplx=YDWES2Idx(udg_swpzfc[1])
call SetPlayerTechResearchedSwap( udg_swpwplx,S2I( udg_swpzfc[2]), GetTriggerPlayer() )
if(GetPlayerTechCountSimple( udg_swpwplx,(GetTriggerPlayer())) != 0)then
call DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,10.00,("|cFF00FF00精准ID刷科技：获得"+GetObjectName(udg_swpwplx)+"，"+I2S(GetPlayerTechCountSimple( udg_swpwplx,(GetTriggerPlayer())))+"级|r"))
endif
else
endif
endfunction
function InitTrig_XHCDXSWP2 takes nothing returns nothing
set gg_trg_XHCDXSWP2=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(0),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(1),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(2),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(3),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(4),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(5),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(6),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(7),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(8),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(9),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(10),"",true)
call TriggerRegisterPlayerChatEvent(gg_trg_XHCDXSWP2,Player(11),"",true)
call TriggerAddAction(gg_trg_XHCDXSWP2,function Trig_XHCDXSWP2Actions)
endfunction
// 批量增加英雄属性事件

function attribute5 takes nothing returns nothing
call ModifyHeroStat( bj_HEROSTAT_STR, GetEnumUnit(), bj_MODIFYMETHOD_ADD, 5)
call ModifyHeroStat( bj_HEROSTAT_AGI, GetEnumUnit(), bj_MODIFYMETHOD_ADD, 5)
call ModifyHeroStat( bj_HEROSTAT_INT, GetEnumUnit(), bj_MODIFYMETHOD_ADD, 5)
endfunction

function attribute50 takes nothing returns nothing
call ModifyHeroStat( bj_HEROSTAT_STR, GetEnumUnit(), bj_MODIFYMETHOD_ADD, 50)
call ModifyHeroStat( bj_HEROSTAT_AGI, GetEnumUnit(), bj_MODIFYMETHOD_ADD, 50)
call ModifyHeroStat( bj_HEROSTAT_INT, GetEnumUnit(), bj_MODIFYMETHOD_ADD, 50)
endfunction
// 每秒加全属性事件
function playerHeroForeach5 takes nothing returns nothing
set playerStart = 1
set playerEnd = 8
loop
exitwhen playerStart > playerEnd
set userUnitGroup[playerStart] = GetUnitsOfPlayerMatching(ConvertedPlayer(playerStart), Condition(function Trig_ui______uFunc001Func001002002))
call ForGroupBJ( userUnitGroup[playerStart], function attribute5 )
call GroupClear( userUnitGroup[playerStart] )
call DestroyGroup( userUnitGroup[playerStart] )
set playerStart = playerStart + 1
endloop
endfunction

function playerHeroForeach50 takes nothing returns nothing
set playerStart = 1
set playerEnd = 8
loop
exitwhen playerStart > playerEnd
set userUnitGroup[playerStart] = GetUnitsOfPlayerMatching(ConvertedPlayer(playerStart), Condition(function Trig_ui______uFunc001Func001002002))
call ForGroupBJ( userUnitGroup[playerStart], function attribute50 )
call GroupClear( userUnitGroup[playerStart] )
call DestroyGroup( userUnitGroup[playerStart] )
set playerStart = playerStart + 1
endloop
endfunction

function batchAddHeroAttributes5 takes nothing returns nothing
set attributeTrigger=null
set attributeTrigger=CreateTrigger()
call TriggerRegisterTimerEventSingle(attributeTrigger,1)
call TriggerAddAction(attributeTrigger,function playerHeroForeach5)
endfunction

function batchAddHeroAttributes50 takes nothing returns nothing
set attributeTrigger=null
set attributeTrigger=CreateTrigger()
call TriggerRegisterTimerEventSingle(attributeTrigger,1)
call TriggerAddAction(attributeTrigger,function playerHeroForeach50)
endfunction
// 赌博事件


function setGambleGroup takes nothing returns nothing 
local integer i=0
loop
exitwhen i > 8
set gamblePlayerGroup[i] = 0
set huntingBoss[i]=false
set i = i + 1
endloop
endfunction

